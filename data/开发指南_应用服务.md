# 合并文件
合并时间: 2025-04-30 04:19:39

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-kit-guide-V14
爬取时间: 2025-04-29 20:00:10
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-introduction-V14
爬取时间: 2025-04-29 20:00:23
来源: Huawei Developer
Account Kit（华为账号服务）提供简单、快速、安全的登录功能，让用户快捷地使用华为账号登录应用。用户授权后，Account Kit可提供头像、昵称、手机号码等信息，帮助应用更了解用户。Account Kit提供的SampleCode示例工程体现了Account Kit的登录、授权头像昵称、快速验证手机号、收货地址、发票抬头、未成年人模式等特性，可参考该工程进行应用的相关内容开发。
能力范围
亮点/特征
一键登录
应用可以通过华为账号一键登录功能获取手机号授权并完成登录，帮助应用建立用户体系或者打通原有的用户体系。优点如下：
未成年人模式
应用可以通过未成年人模式的相关能力帮助家长快速开启未成年人模式，守护未成年人健康使用电子设备和应用。有以下优点：
基本概念
约束与限制
华为账号服务功能当前仅支持中国境内（不包含中国香港、中国澳门、中国台湾）。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-detailedrules-V14
爬取时间: 2025-04-29 20:00:37
来源: Huawei Developer
为了保护用户隐私信息，确保用户获得良好的登录体验，根据《华为开发者服务协议》、《华为APIs使用协议》、《应用审核指南》、《元服务审核指南》等相关协议条款及现行法律法规，平台制定了华为账号登录管理细则，使用华为账号登录的应用请遵照执行，具体要求如下：
上架审核要求
为了帮助用户省去多次输入不同应用账号登录的繁琐过程，我们为HarmonyOS应用和元服务开发者提供了使用华为账号快捷登录的能力。提交至华为应用市场的HarmonyOS应用和元服务，需要遵循如下规范：
（1）如果应用支持用户使用第三方账号登录，则该应用需提供华为账号登录选项。用户可通过华为账号快捷地登录应用，并获得华为账号的安全配置。
（2）如果您的元服务内需要构建账号体系时，必须使用华为账号登录能力。
登录规范
华为账号提供登录设计规范，保障 HarmonyOS应用拥有简单易用、高效一致、快速安全的登录体验。帮助用户使用已有的华为账号登录所有的应用。有关设计规范，请参阅华为账号开放登录。
附则
本细则是一份动态更新的文档，我们会根据相关法律法规的变化以及行业发展，不定期对细则内容进行修改或更新，请您持续关注本细则，以便获得最新信息。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-preparations-V14
爬取时间: 2025-04-29 20:00:51
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-client-id-V14
爬取时间: 2025-04-29 20:01:05
来源: Huawei Developer
请先参考“应用开发准备”完成基本准备工作，再继续进行以下开发活动。
应用接入华为账号服务时，暂不支持使用模拟器进行开发调试。
1.
```json
"module": {
"name": "<name>",
"type": "entry",
"description": "<description>",
"mainElement": "<mainElement>",
"deviceTypes": [],
"pages": "<pages>",
"abilities": [],
"metadata": [ // 配置信息如下
{
"name": "client_id",
"value": "<上一步获取的Client ID>"
}
]
}
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170004.09283493307062420390450094483066:50001231000000:2800:9ACF4D74800E102E9FB586AD701AE1073A4D2521FDFA6457207083624F43A1FC.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-config-permissions-V14
爬取时间: 2025-04-29 20:01:18
来源: Huawei Developer
scope权限申请当前仅针对企业开发者开放。
申请步骤
1.  如需查询项目名称或者项目ID，参考如下步骤：
2.
3.  如需查询应用名称或者应用Client ID，参考如下步骤：
4.
5.
6.  如下字段必须在申请的使用场景中描述，否则会影响权限审批： 备注：当前仅针对企业开发者开放。 使用场景类型 业务场景描述 网络约车类 基本功能服务为“网络预约出租汽车服务、巡游出租汽车电召服务”。 即时通信类 基本功能服务为“提供文字、图片、语音、视频等网络即时通信服务”。 网络社区类 基本功能服务为“博客、论坛、社区等话题讨论、信息分享和关注互动”。 网络支付类 基本功能服务为“网络支付、提现、转账等功能” 。 网上购物类 基本功能服务为“购买商品”。 餐饮外卖类 基本功能服务为“餐饮购买及外送”。 邮件快件寄递类 基本功能服务为“信件、包裹、印刷品等物品寄递服务”。 交通票务类 基本功能服务为“交通相关的票务服务及行程管理（如票务购买、改签、退票、行程管理等）”。 婚恋相亲类 基本功能服务为“婚恋相亲”。 求职招聘类 基本功能服务为“求职招聘信息交换”。 网络借贷类 基本功能服务为“通过互联网平台实现的用于消费、日常生产经营周转等的个人申贷服务”。 房屋租售类 基本功能服务为“个人房源信息发布、房屋出租或买卖”。 二手车交易类 基本功能服务为“二手车买卖信息交换”。 问诊挂号类 基本功能服务为“在线咨询问诊、预约挂号”。 旅游服务类 基本功能服务为“旅游服务产品信息的发布与订购”。 酒店服务类 基本功能服务为“酒店预订”。 网络游戏类 基本功能服务为“提供网络游戏产品和服务”。 学习教育类 基本功能服务为“在线辅导、网络课堂等”。 本地生活类 基本功能服务为“家政维修、家居装修、二手闲置物品交易等日常生活服务”。 用车服务类 基本功能服务为“共享单车、共享汽车、租赁汽车等服务”。 投资理财类 基本功能服务为“股票、期货、基金、债券等相关投资理财服务”。 手机银行类 基本功能服务为“通过手机等移动智能终端设备进行银行账户管理、信息查询、转账汇款等服务”。 邮箱云盘类 基本功能服务为“邮箱、云盘等”。 远程会议类 基本功能服务为“通过网络提供音频或视频会议”。 演出票务类 基本功能服务为“演出购票”。
7.  1、5个工作日内审核结果会通过站内消息的形式发送到消息中心，请注意查收。 2、权限申请通过后会在24小时左右生效。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250329152408.09702255778472353083166836263183:50001231000000:2800:EE3101301DBF484B78B4F95E3F575E96CFFC8DFB9AE401941602376A6E1712F9.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250329152408.62712944914873209429763040271202:50001231000000:2800:5E01BECDCFC33554DC3989EF2D6ABC7A2F2BE1D18A8E08CF72E960168A5550D1.png)
1.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250329152408.29159931393785965027796590130602:50001231000000:2800:70BBCFAEFC7898D9E765C9858A33394BF615ED2255B98E98BAC72736E569D342.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250329152408.99593050709465630731941521382806:50001231000000:2800:55A660E6FB6D0845DB87097F740DFF28F5D41B689C42CDBBC093D4039176F085.png)
1.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250329152408.34690779247485396399027958428479:50001231000000:2800:DE8CD7BA80406521E4E2604B6DD215F09303A63E848BF5D679E0DC5FED756A70.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250329152408.15777643942274186656391045846270:50001231000000:2800:9540D16CA7777C9A018A78FEBB71528E64A12254812E279CAA66AB864A97EBC2.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250329152408.73201555819101073262084275118913:50001231000000:2800:224EDB318ECB84750A72EEAAF2218099474A301CDF42246CF09833C2338BEF15.png)
| 使用场景类型  | 业务场景描述  |
| --- | --- |
| 网络约车类  | 基本功能服务为“网络预约出租汽车服务、巡游出租汽车电召服务”。  |
| 即时通信类  | 基本功能服务为“提供文字、图片、语音、视频等网络即时通信服务”。  |
| 网络社区类  | 基本功能服务为“博客、论坛、社区等话题讨论、信息分享和关注互动”。  |
| 网络支付类  | 基本功能服务为“网络支付、提现、转账等功能” 。  |
| 网上购物类  | 基本功能服务为“购买商品”。  |
| 餐饮外卖类  | 基本功能服务为“餐饮购买及外送”。  |
| 邮件快件寄递类  | 基本功能服务为“信件、包裹、印刷品等物品寄递服务”。  |
| 交通票务类  | 基本功能服务为“交通相关的票务服务及行程管理（如票务购买、改签、退票、行程管理等）”。  |
| 婚恋相亲类  | 基本功能服务为“婚恋相亲”。  |
| 求职招聘类  | 基本功能服务为“求职招聘信息交换”。  |
| 网络借贷类  | 基本功能服务为“通过互联网平台实现的用于消费、日常生产经营周转等的个人申贷服务”。  |
| 房屋租售类  | 基本功能服务为“个人房源信息发布、房屋出租或买卖”。  |
| 二手车交易类  | 基本功能服务为“二手车买卖信息交换”。  |
| 问诊挂号类  | 基本功能服务为“在线咨询问诊、预约挂号”。  |
| 旅游服务类  | 基本功能服务为“旅游服务产品信息的发布与订购”。  |
| 酒店服务类  | 基本功能服务为“酒店预订”。  |
| 网络游戏类  | 基本功能服务为“提供网络游戏产品和服务”。  |
| 学习教育类  | 基本功能服务为“在线辅导、网络课堂等”。  |
| 本地生活类  | 基本功能服务为“家政维修、家居装修、二手闲置物品交易等日常生活服务”。  |
| 用车服务类  | 基本功能服务为“共享单车、共享汽车、租赁汽车等服务”。  |
| 投资理财类  | 基本功能服务为“股票、期货、基金、债券等相关投资理财服务”。  |
| 手机银行类  | 基本功能服务为“通过手机等移动智能终端设备进行银行账户管理、信息查询、转账汇款等服务”。  |
| 邮箱云盘类  | 基本功能服务为“邮箱、云盘等”。  |
| 远程会议类  | 基本功能服务为“通过网络提供音频或视频会议”。  |
| 演出票务类  | 基本功能服务为“演出购票”。  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250329152409.50329629211751301056155799882729:50001231000000:2800:A4C3F90A392ACF76987F8248905CEDC50388B9A7A0371B1E8CB0BFBE6004FFBB.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-quick-login-V14
爬取时间: 2025-04-29 20:01:32
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-quick-login-overview-V14
爬取时间: 2025-04-29 20:01:46
来源: Huawei Developer
Account Kit提供了华为账号一键登录、华为账号登录、静默登录等多种登录方式，应用可根据实际场景选择使用其中一种或多种方式进行账号登录。
基础概念
华为账号用户身份标识包含UnionID和OpenID，具体格式要求请参考OpenID和UnionID的格式说明。两者的定义与使用场景：
| 项目/ID类型 | UnionID | OpenID |
| --- | --- | --- |
| 定义 | UnionID是华为账号用户同一开发者账号下的唯一标识。开发者有多个HarmonyOS应用时，同一个开发者账号下的HarmonyOS应用获取到用户的UnionID相同。 | OpenID是华为账号用户在HarmonyOS应用的唯一标识。不同HarmonyOS应用（不管是否在同一个开发者账号下）获取到用户的OpenID不同。 |
| 使用场景 | 在同一个开发者账号下标识用户的唯一性。建议使用UnionID。 | 在同一个应用下标识用户的唯一性。 |
项目/ID类型
UnionID
OpenID
定义
UnionID是华为账号用户同一开发者账号下的唯一标识。开发者有多个HarmonyOS应用时，同一个开发者账号下的HarmonyOS应用获取到用户的UnionID相同。
OpenID是华为账号用户在HarmonyOS应用的唯一标识。不同HarmonyOS应用（不管是否在同一个开发者账号下）获取到用户的OpenID不同。
使用场景
在同一个开发者账号下标识用户的唯一性。建议使用UnionID。
在同一个应用下标识用户的唯一性。
在开发HarmonyOS应用时，您需要考虑同一用户在非HarmonyOS应用和HarmonyOS应用的用户数据是否互通。如果您之前使用OpenID来关联用户数据，我们建议将用户数据关系切换成UnionID，以确保用户使用HarmonyOS应用后可以继承老版本的用户数据。具体切换指导可以参考：通过OpenID获取UnionID。
场景介绍
若应用需要同时获取手机号和UnionID，推荐使用此场景，用户仅需一次点击操作，应用即可获取用户手机号和UnionID。应用获取到用户手机号和UnionID后，可同时通过手机号和UnionID与应用原有用户体系进行关联。
若应用只需要获取UnionID可以使用此场景。应用获取到用户UnionID后，可通过UnionID与应用原有用户体系进行关联。
在应用卸载重装、用户换机等场景，应用可通过Account Kit提供的静默登录方式即不需要用户点击登录/注册按钮，即可获取用户的身份标识UnionID，完成用户的静默登录。
当应用需要跟随华为账号的登录状态进行登录登出时，可以通过订阅华为账号的登录登出事件进行判断。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-phone-unionid-login-V14
爬取时间: 2025-04-29 20:02:01
来源: Huawei Developer
概述
华为账号一键登录是基于OAuth 2.0协议标准和OpenID Connect协议标准构建的OAuth2.0 授权登录系统，应用可以通过华为账号一键登录能力方便地获取华为账号用户的身份标识和手机号，快速建立应用内的用户体系。
优势：
场景介绍
若应用需同时获取手机号和UnionID完成用户登录，Account Kit提供了同时获取手机号和UnionID的华为账号一键登录按钮。应用可以将华为账号一键登录按钮嵌入自有的登录页，使用登录按钮获取手机号和UnionID，实现用户登录。设备登录华为账号（该账号已绑定手机号）后，一键登录获取手机号可不依赖设备插SIM卡。华为账号一键登录详细接入体验可参考Account Kit提供的SampleCode示例工程。
手机号验证机制说明：
Account Kit调用系统能力获取华为账号登录设备上的手机号码，与华为账号绑定的手机号进行校验（有网络即可，无需使用SIM卡移动数据）。用户点击一键登录按钮后，结合华为账号使用过程中账号所绑定的手机号短信验证记录，90天内有验证通过的记录，则返回该华为账号绑定的手机号；若90天内没有验证通过的记录，则触发Account Kit默认提供的短信验证流程（Account Kit提供的验证页，暂不可自定义），确保返回的手机号经过验证。
约束与限制
1、应用满足《常见类型移动互联网应用程序必要个人信息范围规定》中使用手机号的必要业务场景。
2、使用华为账号一键登录功能用户必须同意《华为账号用户认证协议》，当用户点击《华为账号用户认证协议》，系统浅色模式下应用需跳转到如下链接https://privacy.consumer.huawei.com/legal/id/authentication-terms.htm?code=CN&language=zh-CN，系统深色模式下跳转到https://privacy.consumer.huawei.com/legal/id/authentication-terms.htm?code=CN&language=zh-CN&bgmode=black。
3、应用在用户同意后获取到手机号，需要根据自身业务场景判断使用的方式，必要时增加其他安全验证手段，比如对二次放号的判断。
4、华为账号一键登录服务当前仅限中国境内（不包含中国香港、中国澳门、中国台湾）用户可用。
5、应用服务器获取华为账号绑定号码时，该服务器必须部署在中国境内（不包含中国香港、中国澳门、中国台湾）。
用户体验设计
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170005.08475927084957131389234550001159:50001231000000:2800:6389F53805E0B869BD6969CCD68CFBC71C2E7E019BDF44DB42C979D7948A7E8C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170005.11570188562609887086790132682976:50001231000000:2800:E3EAB0B1AC598E4D75C2F75CAF21BBCAA21321ECFB4DCE9D6167EE8AC7288BD2.png)
登录页面UX设计规范
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170006.45015440210775124412033010734021:50001231000000:2800:CA086722C5997590F062BAAFE79D956C995780CA647102E05B12AF6C21129CD3.png)
一键登录按钮的用户体验和UX设计需符合【华为账号一键登录】按钮规范，用户体验设计图2中的华为标志按钮可参考华为账号登录视觉规范中的样式三。不符合规范的UX设计可能会对应用上架和用户体验带来影响。一键登录按钮的样式设计具体可以参考华为账号登录按钮类型。
用户场景设计
用户使用华为账号一键登录能力，注册/登录应用时，可能存在多种场景，应用可参考如下流程，根据自身业务场景进行设计。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170007.62421161776598469197258102052507:50001231000000:2800:6CA7F3B08250997153FE3ECAE9105CF123CEB2DE28AF9ECA4FFB7FCCE1377920.png)
将UnionID/OpenID和手机号同时与应用账号建立关联，可以为用户带来更多便利的功能。如：实现静默登录、获取华为账号用户信息等。实现免用户操作登录，获得安全快捷地应用登录体验。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170007.45225935432230148597354520492565:50001231000000:2800:083C6EAB62FCE3AE7A505D061C1D5D98E44A64577F482B4A39EAC84C533CECFF.png)
流程说明：
接口说明
华为账号一键登录按钮关键接口如下表所示，具体API说明详见API参考。
| 接口名 | 描述 |
| --- | --- |
| createAuthorizationWithHuaweiIDRequest(): AuthorizationWithHuaweiIDRequest | 获取授权接口，通过AuthorizationWithHuaweiIDRequest传入一键登录的scope：quickLoginAnonymousPhone，即可在授权结果中获取到用户UnionID、OpenID、匿名化手机号。 |
| constructor(context?: common.Context) | 创建授权请求Controller。 |
| executeRequest(request: AuthenticationRequest): Promise<AuthenticationResponse> | 通过Promise方式执行授权操作。 |
| LoginWithHuaweiIDButton | 华为账号Button登录组件。 该组件仅纯文本样式支持华为账号一键登录功能。开发者可以通过调整按钮的大小、圆角等参数以适配HarmonyOS应用登录界面。如果仍然不能满足开发者的诉求，可以使用BUTTON_CUSTOM类型定义按钮的文字颜色和背景色。 |
| onClickLoginWithHuaweiIDButton(callback: AsyncCallback<HuaweiIDCredential>): LoginWithHuaweiIDButtonController | 注册华为账号一键登录按钮的结果回调。 |
| setAgreementStatus(agreementStatus: AgreementStatus): LoginWithHuaweiIDButtonController | 设置协议状态方法。用户未同意协议前设置协议状态为NOT_ACCEPTED，用户同意协议后设置协议状态为ACCEPTED，才可以完成华为账号登录。 |
| onClickEvent(callback: AsyncCallback<ClickEvent>): LoginWithHuaweiIDButtonController | 注册华为账号一键登录按钮的点击事件回调。 |
| continueLogin(callback: AsyncCallback<void>): LoginWithHuaweiIDButtonController | 用户点击协议弹框的同意并登录按钮结果回调。 |
接口名
描述
createAuthorizationWithHuaweiIDRequest():AuthorizationWithHuaweiIDRequest
获取授权接口，通过AuthorizationWithHuaweiIDRequest传入一键登录的scope：quickLoginAnonymousPhone，即可在授权结果中获取到用户UnionID、OpenID、匿名化手机号。
constructor(context?:common.Context)
创建授权请求Controller。
executeRequest(request:AuthenticationRequest): Promise<AuthenticationResponse>
通过Promise方式执行授权操作。
LoginWithHuaweiIDButton
华为账号Button登录组件。
该组件仅纯文本样式支持华为账号一键登录功能。开发者可以通过调整按钮的大小、圆角等参数以适配HarmonyOS应用登录界面。如果仍然不能满足开发者的诉求，可以使用BUTTON_CUSTOM类型定义按钮的文字颜色和背景色。
onClickLoginWithHuaweiIDButton(callback: AsyncCallback<HuaweiIDCredential>):LoginWithHuaweiIDButtonController
注册华为账号一键登录按钮的结果回调。
setAgreementStatus(agreementStatus:AgreementStatus):LoginWithHuaweiIDButtonController
设置协议状态方法。用户未同意协议前设置协议状态为NOT_ACCEPTED，用户同意协议后设置协议状态为ACCEPTED，才可以完成华为账号登录。
onClickEvent(callback: AsyncCallback<ClickEvent>):LoginWithHuaweiIDButtonController
注册华为账号一键登录按钮的点击事件回调。
continueLogin(callback: AsyncCallback<void>):LoginWithHuaweiIDButtonController
用户点击协议弹框的同意并登录按钮结果回调。
上述接口需在页面或自定义组件生命周期内调用。
开发前提
1.  细分场景 对应scope 权限名称 权限描述 权限是否需要申请 华为账号一键登录 quickLoginAnonymousPhone quickLoginMobilePhone 华为账号一键登录，包含获取完整手机号 是
| 细分场景 | 对应scope | 权限名称 | 权限描述 | 权限是否需要申请 |
| --- | --- | --- | --- | --- |
| 华为账号一键登录 | quickLoginAnonymousPhone | quickLoginMobilePhone | 华为账号一键登录，包含获取完整手机号 | 是 |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170008.05102084290282924596042846770073:50001231000000:2800:43F608634115FD4798EBB472D239189451E4AD7A7345C97B0FD1F462004735F8.png)
客户端开发
自行开发
```typescript
import { authentication } from '@kit.AccountKit';
import { util } from '@kit.ArkTS';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
1.  该场景下forceAuthorization参数需设置为false。 1）如已关联，结合风控、安全因素及自身业务场景判断，可展示已关联的账号，由用户选择是否使用华为账号登录应用，或免用户操作，静默登录应用，客户端开发结束。 2）如未关联，再判断是否存在下面的异常场景，如无，则参考下面步骤3继续开发。 1）返回1001502001 用户未登录华为账号错误码，说明华为账号未登录。 2）返回1001500003 不支持该scopes或permissions错误码，说明华为账号用户注册地非中国境内（不包含中国香港、中国澳门、中国台湾）。 3）获取到的匿名手机号为空，说明华为账号没有绑定手机号、权限未申请或未生效、登录的华为账号是儿童账号或者开发者开启了代码混淆，quickLoginAnonymousPhone（匿名手机号）属性需要配置混淆白名单防止被混淆。
```typescript
getQuickLoginAnonymousPhone() {
// 创建授权请求，并设置参数
const authRequest = new authentication.HuaweiIDProvider().createAuthorizationWithHuaweiIDRequest();
// 获取匿名手机号需传quickLoginAnonymousPhone这个scope，传参之前需要先申请“华为账号一键登录”权限
authRequest.scopes = ['quickLoginAnonymousPhone'];
// 用于防跨站点请求伪造
authRequest.state = util.generateRandomUUID();
// 一键登录场景该参数必须设置为false
authRequest.forceAuthorization = false;
const controller = new authentication.AuthenticationController();
try {
controller.executeRequest(authRequest).then((response: authentication.AuthorizationWithHuaweiIDResponse) => {
// 获取到UnionID、OpenID、匿名手机号
const unionID = response.data?.unionID;
const openID = response.data?.openID;
const anonymousPhone = response.data?.extraInfo?.quickLoginAnonymousPhone as string;
if (anonymousPhone) {
hilog.info(0x0000, 'testTag', 'Succeeded in authentication.');
const quickLoginAnonymousPhone: string = anonymousPhone;
return;
}
hilog.info(0x0000, 'testTag', 'Succeeded in authentication. AnonymousPhone is empty.');
// 未获取到匿名手机号需要跳转到应用自定义的登录页面
}).catch((error: BusinessError) => {
this.dealAllError(error);
})
} catch (error) {
this.dealAllError(error);
}
}
// 错误处理
dealAllError(error: BusinessError): void {
hilog.error(0x0000, 'testTag',
`Failed to get quickLoginAnonymousPhone, errorCode is ${error.code}, errorMessage is ${error.message}`);
}
```
2.  1）如已关联，结合风控、安全因素及自身业务场景判断，可展示已关联的账号，由用户选择是否使用华为账号登录应用，或免用户操作，静默登录应用，客户端开发结束。 2）如未关联，再判断是否存在下面的异常场景，如无，则参考下面步骤3继续开发。
3.  1）返回1001502001 用户未登录华为账号错误码，说明华为账号未登录。 2）返回1001500003 不支持该scopes或permissions错误码，说明华为账号用户注册地非中国境内（不包含中国香港、中国澳门、中国台湾）。 3）获取到的匿名手机号为空，说明华为账号没有绑定手机号、权限未申请或未生效、登录的华为账号是儿童账号或者开发者开启了代码混淆，quickLoginAnonymousPhone（匿名手机号）属性需要配置混淆白名单防止被混淆。
```typescript
getQuickLoginAnonymousPhone() {
// 创建授权请求，并设置参数
const authRequest = new authentication.HuaweiIDProvider().createAuthorizationWithHuaweiIDRequest();
// 获取匿名手机号需传quickLoginAnonymousPhone这个scope，传参之前需要先申请“华为账号一键登录”权限
authRequest.scopes = ['quickLoginAnonymousPhone'];
// 用于防跨站点请求伪造
authRequest.state = util.generateRandomUUID();
// 一键登录场景该参数必须设置为false
authRequest.forceAuthorization = false;
const controller = new authentication.AuthenticationController();
try {
controller.executeRequest(authRequest).then((response: authentication.AuthorizationWithHuaweiIDResponse) => {
// 获取到UnionID、OpenID、匿名手机号
const unionID = response.data?.unionID;
const openID = response.data?.openID;
const anonymousPhone = response.data?.extraInfo?.quickLoginAnonymousPhone as string;
if (anonymousPhone) {
hilog.info(0x0000, 'testTag', 'Succeeded in authentication.');
const quickLoginAnonymousPhone: string = anonymousPhone;
return;
}
hilog.info(0x0000, 'testTag', 'Succeeded in authentication. AnonymousPhone is empty.');
// 未获取到匿名手机号需要跳转到应用自定义的登录页面
}).catch((error: BusinessError) => {
this.dealAllError(error);
})
} catch (error) {
this.dealAllError(error);
}
}
// 错误处理
dealAllError(error: BusinessError): void {
hilog.error(0x0000, 'testTag',
`Failed to get quickLoginAnonymousPhone, errorCode is ${error.code}, errorMessage is ${error.message}`);
}
```
4.  以下是华为账号用户认证协议展示页示例代码：
```typescript
import { loginComponentManager, LoginWithHuaweiIDButton } from '@kit.AccountKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { promptAction, router } from '@kit.ArkUI';
import { connection } from '@kit.NetworkKit';
@Component
struct QuickLoginButtonComponent {
logTag: string = 'QuickLoginButtonComponent';
domainId: number = 0x0000;
// 第二步获取的匿名化手机号传到此处
@State quickLoginAnonymousPhone: string = '';
// 是否勾选协议
@State isSelected: boolean = false;
// 华为账号用户认证协议链接，此处仅为示例，实际开发过程中，出于可维护性、安全性等方面考虑，域名不建议硬编码在本地
private static USER_AUTHENTICATION_PROTOCOL: string =
'https://privacy.consumer.huawei.com/legal/id/authentication-terms.htm?code=CN&language=zh-CN';
private static USER_SERVICE_TAG = '用户服务协议';
private static PRIVACY_TAG = '隐私协议';
private static USER_AUTHENTICATION_TAG = '华为账号用户认证协议';
// 定义LoginWithHuaweiIDButton展示的隐私文本，展示应用的用户服务协议、隐私协议和华为账号用户认证协议
privacyText: loginComponentManager.PrivacyText[] = [{
text: '已阅读并同意',
type: loginComponentManager.TextType.PLAIN_TEXT
}, {
text: '《用户服务协议》',
tag: QuickLoginButtonComponent.USER_SERVICE_TAG,
type: loginComponentManager.TextType.RICH_TEXT
}, {
text: '《隐私协议》',
tag: QuickLoginButtonComponent.PRIVACY_TAG,
type: loginComponentManager.TextType.RICH_TEXT
}, {
text: '和',
type: loginComponentManager.TextType.PLAIN_TEXT
}, {
text: '《华为账号用户认证协议》',
tag: QuickLoginButtonComponent.USER_AUTHENTICATION_TAG,
type: loginComponentManager.TextType.RICH_TEXT
}, {
text: '。',
type: loginComponentManager.TextType.PLAIN_TEXT
}];
// 构造LoginWithHuaweiIDButton组件的控制器
controller: loginComponentManager.LoginWithHuaweiIDButtonController =
new loginComponentManager.LoginWithHuaweiIDButtonController()
/**
* 当应用使用自定义的登录页时，如果用户未同意协议，需要设置协议状态为NOT_ACCEPTED，当用户同意协议后再设置
* 协议状态为ACCEPTED，才可以使用华为账号一键登录功能
*/
.setAgreementStatus(loginComponentManager.AgreementStatus.NOT_ACCEPTED)
.onClickLoginWithHuaweiIDButton((error: BusinessError | undefined,
response: loginComponentManager.HuaweiIDCredential) => {
this.handleLoginWithHuaweiIDButton(error, response);
})
.onClickEvent((error: BusinessError, clickEvent: loginComponentManager.ClickEvent) => {
if (error) {
this.dealAllError(error);
return;
}
hilog.info(this.domainId, this.logTag, `onClickEvent clickEvent: ${clickEvent}`);
});
agreementDialog: CustomDialogController = new CustomDialogController({
builder: AgreementDialog({
privacyText: this.privacyText,
cancel: () => {
this.agreementDialog.close();
this.controller.setAgreementStatus(loginComponentManager.AgreementStatus.NOT_ACCEPTED);
},
confirm: () => {
this.agreementDialog.close();
this.isSelected = true;
this.controller.setAgreementStatus(loginComponentManager.AgreementStatus.ACCEPTED);
// 调用此方法，同意协议与登录一并完成，无需再次点击登录按钮
this.controller.continueLogin((error: BusinessError) => {
if (error) {
hilog.error(this.domainId, this.logTag,
`Failed to login with agreementDialog. errCode is ${error.code}, errMessage is ${error.message}`);
} else {
hilog.info(this.domainId, this.logTag,
'Succeeded in clicking agreementDialog continueLogin.');
}
});
},
clickHyperlinkText: () => {
this.agreementDialog.close();
this.jumpToPrivacyWebView();
}
}),
autoCancel: false,
alignment: DialogAlignment.Center,
});
// 传递页面渲染所需的数据，如匿名手机号等
aboutToAppear(): void {
}
// Toast提示
showToast(resource: string) {
try {
promptAction.showToast({
message: resource,
duration: 2000
});
} catch (error) {
const message = (error as BusinessError).message
const code = (error as BusinessError).code
hilog.error(this.domainId, this.logTag, `showToast args  errCode is ${code}, errMessage is ${message}`);
}
}
// 跳转华为账号用户认证协议页,该页面需在工程main_pages.json文件配置
jumpToPrivacyWebView() {
try {
// 需在module.json5中配置“ohos.permission.GET_NETWORK_INFO”权限
const checkNetConn = connection.hasDefaultNetSync();
if (!checkNetConn) {
this.showToast('服务或网络异常，请稍后重试');
return;
}
} catch (error) {
const message = error.message as string;
const code = error.code as string;
hilog.error(0x0000, 'testTag', `Failed to hasDefaultNetSync, errCode is ${code}, errMessage is ${message}`);
}
router.pushUrl({
// 需在module.json5配置“ohos.permission.INTERNET”网络权限
url: 'pages/WebPage',
params: {
isFromDialog: true,
url: QuickLoginButtonComponent.USER_AUTHENTICATION_PROTOCOL,
}
}, (err) => {
if (err) {
hilog.error(this.domainId, this.logTag,
`Failed to jumpToPrivacyWebView, errCode is ${err.code}, errMessage is ${err.message}`);
}
});
}
handleLoginWithHuaweiIDButton(error: BusinessError | undefined,
response: loginComponentManager.HuaweiIDCredential) {
if (error) {
hilog.error(this.domainId, this.logTag,
`Failed to login with LoginWithHuaweiIDButton. errCode is ${error.code}, errMessage is ${error.message}`);
if (error.code === ErrorCode.ERROR_CODE_NETWORK_ERROR) {
AlertDialog.show(
{
message: "网络未连接，请检查网络设置。",
offset: { dx: 0, dy: -12 },
alignment: DialogAlignment.Bottom,
autoCancel: false,
confirm: {
value: "知道了",
action: () => {
}
}
}
);
} else if (error.code === ErrorCode.ERROR_CODE_AGREEMENT_STATUS_NOT_ACCEPTED) {
// 未同意协议，弹出协议弹框，推荐使用该回调方式
this.agreementDialog.open();
} else if (error.code === ErrorCode.ERROR_CODE_LOGIN_OUT) {
// 华为账号未登录提示
this.showToast("华为账号未登录，请重试");
} else if (error.code === ErrorCode.ERROR_CODE_NOT_SUPPORTED) {
// 不支持该scopes或permissions提示
this.showToast("该scopes或permissions不支持");
} else if (error.code === ErrorCode.ERROR_CODE_PARAMETER_ERROR) {
// 参数错误提示
this.showToast("参数错误");
} else {
// 其他提示系统或服务异常
this.showToast('服务或网络异常，请稍后重试');
}
return;
}
try {
if (this.isSelected) {
if (response) {
hilog.info(this.domainId, this.logTag, 'Succeeded in clicking LoginWithHuaweiIDButton.');
// 开发者根据实际业务情况使用以下信息
const authCode = response.authorizationCode;
const openID = response.openID;
const unionID = response.unionID;
const idToken = response.idToken;
}
} else {
this.agreementDialog.open();
}
} catch (err) {
hilog.error(this.domainId, this.logTag,
`Failed to login with LoginWithHuaweiIDButton, errCode: ${err.code}, errMessage: ${err.message}`);
AlertDialog.show(
{
message: '服务或网络异常，请稍后重试',
offset: { dx: 0, dy: -12 },
alignment: DialogAlignment.Bottom,
autoCancel: false,
confirm: {
value: '知道了',
action: () => {
}
}
}
);
}
}
// 错误处理
dealAllError(error: BusinessError): void {
hilog.error(this.domainId, this.logTag,
`Failed to login, errorCode is ${error.code}, errorMessage is ${error.message}`);
}
build() {
Scroll() {
Column() {
Column() {
Column() {
Image($r('app.media.app_icon'))
.width(48)
.height(48)
.draggable(false)
.copyOption(CopyOptions.None)
.onComplete(() => {
hilog.info(this.domainId, this.logTag, 'appIcon loading success.');
})
.onError(() => {
hilog.error(this.domainId, this.logTag, 'appIcon loading fail.');
})
Text($r('app.string.app_name'))
.fontFamily($r('sys.string.ohos_id_text_font_family_medium'))
.fontWeight(FontWeight.Medium)
.fontWeight(FontWeight.Bold)
.maxFontSize($r('sys.float.ohos_id_text_size_headline8'))
.minFontSize($r('sys.float.ohos_id_text_size_body1'))
.maxLines(1)
.fontColor($r('sys.color.ohos_id_color_text_primary'))
.constraintSize({ maxWidth: '100%' })
.margin({
top: 12,
})
Text('应用描述')
.fontSize($r('sys.float.ohos_id_text_size_body2'))
.fontColor($r('sys.color.ohos_id_color_text_secondary'))
.fontFamily($r('sys.string.ohos_id_text_font_family_regular'))
.fontWeight(FontWeight.Regular)
.constraintSize({ maxWidth: '100%' })
.margin({
top: 8,
})
}.margin({
top: 100
})
Column() {
Text(this.quickLoginAnonymousPhone)
.fontSize(36)
.fontColor($r('sys.color.ohos_id_color_text_primary'))
.fontFamily($r('sys.string.ohos_id_text_font_family_medium'))
.fontWeight(FontWeight.Bold)
.lineHeight(48)
.textAlign(TextAlign.Center)
.maxLines(1)
.constraintSize({ maxWidth: '100%', minHeight: 48 })
Text('华为账号绑定号码')
.fontSize($r('sys.float.ohos_id_text_size_body2'))
.fontColor($r('sys.color.ohos_id_color_text_secondary'))
.fontFamily($r('sys.string.ohos_id_text_font_family_regular'))
.fontWeight(FontWeight.Regular)
.lineHeight(19)
.textAlign(TextAlign.Center)
.maxLines(1)
.constraintSize({ maxWidth: '100%' })
.margin({
top: 8
})
}.margin({
top: 64
})
Column() {
LoginWithHuaweiIDButton({
params: {
// LoginWithHuaweiIDButton支持的样式
style: loginComponentManager.Style.BUTTON_RED,
// 账号登录按钮在登录过程中展示加载态
extraStyle: {
buttonStyle: new loginComponentManager.ButtonStyle().loadingStyle({
show: true
})
},
// LoginWithHuaweiIDButton的边框圆角半径
borderRadius: 24,
// LoginWithHuaweiIDButton支持的登录类型
loginType: loginComponentManager.LoginType.QUICK_LOGIN,
// LoginWithHuaweiIDButton支持按钮的样式跟随系统深浅色模式切换
supportDarkMode: true,
// verifyPhoneNumber：如果华为账号用户在过去90天内未进行短信验证，是否拉起Account Kit提供的短信验证码页面
verifyPhoneNumber: true
},
controller: this.controller
})
}
.height(40)
.margin({
top: 56
})
Column() {
Button({
type: ButtonType.Capsule,
stateEffect: true
}) {
Text('其他方式登录')
.fontColor($r('sys.color.ohos_id_color_text_primary_activated'))
.fontFamily($r('sys.string.ohos_id_text_font_family_medium'))
.fontWeight(FontWeight.Medium)
.fontSize($r('sys.float.ohos_id_text_size_button1'))
.focusable(true)
.focusOnTouch(true)
.textOverflow({ overflow: TextOverflow.Ellipsis })
.maxLines(1)
.padding({ left: 8, right: 8 })
}
.fontColor($r('sys.color.ohos_id_color_text_primary_activated'))
.fontFamily($r('sys.string.ohos_id_text_font_family_medium'))
.fontWeight(FontWeight.Medium)
.backgroundColor($r('sys.color.ohos_id_color_button_normal'))
.focusable(true)
.focusOnTouch(true)
.constraintSize({ minHeight: 40 })
.width('100%')
.onClick(() => {
hilog.info(this.domainId, this.logTag, 'click optionalLoginButton.');
})
}.margin({ top: 16 })
}.width('100%')
Row() {
Row() {
Checkbox({ name: 'privacyCheckbox', group: 'privacyCheckboxGroup' })
.width(24)
.height(24)
.focusable(true)
.focusOnTouch(true)
.margin({ top: 0 })
.select(this.isSelected)
.onChange((value: boolean) => {
if (value) {
this.isSelected = true;
this.controller.setAgreementStatus(loginComponentManager.AgreementStatus.ACCEPTED);
} else {
this.isSelected = false;
this.controller.setAgreementStatus(loginComponentManager.AgreementStatus.NOT_ACCEPTED);
}
hilog.info(this.domainId, this.logTag, `agreementChecked: ${value}`);
})
}
Row() {
Text() {
ForEach(this.privacyText, (item: loginComponentManager.PrivacyText) => {
if (item?.type === loginComponentManager.TextType.PLAIN_TEXT && item?.text) {
Span(item?.text)
.fontColor($r('sys.color.ohos_id_color_text_secondary'))
.fontFamily($r('sys.string.ohos_id_text_font_family_regular'))
.fontWeight(FontWeight.Regular)
.fontSize($r('sys.float.ohos_id_text_size_body3'))
} else if (item?.type === loginComponentManager.TextType.RICH_TEXT && item?.text) {
Span(item?.text)
.fontColor($r('sys.color.ohos_id_color_text_primary_activated'))
.fontFamily($r('sys.string.ohos_id_text_font_family_medium'))
.fontWeight(FontWeight.Medium)
.fontSize($r('sys.float.ohos_id_text_size_body3'))
.focusable(true)
.focusOnTouch(true)
.onClick(() => {
// 应用需要根据item.tag实现协议页面的跳转逻辑
hilog.info(this.domainId, this.logTag, `click privacy text tag: ${item.tag}`);
// 华为账号用户认证协议
if (item.tag === QuickLoginButtonComponent.USER_AUTHENTICATION_TAG) {
this.jumpToPrivacyWebView();
}
})
}
}, (item: loginComponentManager.PrivacyText) => item.text.toString())
}
.width('100%')
}
.margin({ left: 12 })
.layoutWeight(1)
.constraintSize({ minHeight: 24 })
}
.alignItems(VerticalAlign.Top)
.margin({
top: 16,
bottom: 16
})
}
.justifyContent(FlexAlign.SpaceBetween)
.constraintSize({ minHeight: '100%' })
.margin({
left: 16,
right: 16
})
}
.width('100%')
.height('100%')
}
}
@CustomDialog
export struct AgreementDialog {
logTag: string = 'AgreementDialog';
domainId: number = 0x0000;
dialogController?: CustomDialogController;
cancel: () => void = () => {
};
confirm: () => void = () => {
};
clickHyperlinkText: () => void = () => {
};
privacyText: loginComponentManager.PrivacyText[] = [];
private static USER_AUTHENTICATION_TAG = '华为账号用户认证协议';
build() {
Column() {
Row() {
Text('用户协议与隐私条款')
.id('loginPanel_agreement_dialog_privacy_title')
.maxFontSize($r('sys.float.ohos_id_text_size_headline8'))
.minFontSize($r('sys.float.ohos_id_text_size_body1'))
.fontColor($r('sys.color.ohos_id_color_text_primary'))
.fontFamily($r('sys.string.ohos_id_text_font_family_medium'))
.fontWeight(FontWeight.Bold)
.textAlign(TextAlign.Center)
.textOverflow({ overflow: TextOverflow.Ellipsis })
.maxLines(2)
}
.alignItems(VerticalAlign.Center)
.constraintSize({ minHeight: 56, maxWidth: 400 })
.margin({
left: $r('sys.float.ohos_id_max_padding_start'),
right: $r('sys.float.ohos_id_max_padding_start')
})
Row() {
Text() {
ForEach(this.privacyText, (item: loginComponentManager.PrivacyText) => {
if (item?.type === loginComponentManager.TextType.PLAIN_TEXT && item?.text) {
Span(item?.text)
.fontSize($r('sys.float.ohos_id_text_size_body1'))
.fontColor($r('sys.color.ohos_id_color_text_primary'))
.fontFamily($r('sys.string.ohos_id_text_font_family_regular'))
.fontWeight(FontWeight.Regular)
} else if (item?.type === loginComponentManager.TextType.RICH_TEXT && item?.text) {
Span(item?.text)
.fontSize($r('sys.float.ohos_id_text_size_body1'))
.fontColor('#CE0E2D')
.fontFamily($r('sys.string.ohos_id_text_font_family_medium'))
.fontWeight(FontWeight.Medium)
.focusable(true)
.focusOnTouch(true)
.onClick(() => {
// 应用需要根据item.tag实现协议页面的跳转逻辑
hilog.info(this.domainId, this.logTag, `click privacy text tag: ${item.tag}`);
// 华为账号用户认证协议
if (item.tag === AgreementDialog.USER_AUTHENTICATION_TAG) {
hilog.info(this.domainId, this.logTag, 'AgreementDialog click.');
this.clickHyperlinkText();
}
})
}
}, (item: loginComponentManager.PrivacyText) => item.text.toString())
}
.width('100%')
.textOverflow({ overflow: TextOverflow.Ellipsis })
.maxLines(10)
.textAlign(TextAlign.Start)
.focusable(true)
.focusOnTouch(true)
.padding({ left: 24, right: 24 })
}.width('100%')
Flex({
direction: FlexDirection.Row
}) {
Button('取消',
{ type: ButtonType.Capsule, stateEffect: true })
.id('loginPanel_agreement_cancel_btn')
.fontColor($r('sys.color.ohos_id_color_text_primary'))
.fontSize($r('sys.float.ohos_id_text_size_button1'))
.fontFamily($r('sys.string.ohos_id_text_font_family_medium'))
.backgroundColor(Color.Transparent)
.fontWeight(FontWeight.Medium)
.focusable(true)
.focusOnTouch(true)
.constraintSize({ minHeight: 40, maxWidth: 400 })
.width('50%')
.onClick(() => {
hilog.info(this.domainId, this.logTag, 'AgreementDialog cancel.');
this.cancel();
})
Button('同意并登录',
{ type: ButtonType.Capsule, stateEffect: true })
.id('loginPanel_agreement_dialog_huawei_id_login_btn')
.fontColor(Color.White)
.backgroundColor('#CE0E2D')
.fontSize($r('sys.float.ohos_id_text_size_button1'))
.fontFamily($r('sys.string.ohos_id_text_font_family_medium'))
.fontWeight(FontWeight.Medium)
.focusable(true)
.focusOnTouch(true)
.constraintSize({ minHeight: 40, maxWidth: 400 })
.width('50%')
.onClick(() => {
hilog.info(this.domainId, this.logTag, 'AgreementDialog confirm.');
this.confirm();
})
}
.margin({
top: 8,
left: $r('sys.float.ohos_id_elements_margin_horizontal_l'),
right: $r('sys.float.ohos_id_elements_margin_horizontal_l'),
bottom: 16
})
}.backgroundColor($r('sys.color.ohos_id_color_dialog_default_bg'))
.padding({
left: 16,
right: 16
})
}
}
export enum ErrorCode {
// 账号未登录
ERROR_CODE_LOGIN_OUT = 1001502001,
// 该账号不支持一键登录，如海外账号
ERROR_CODE_NOT_SUPPORTED = 1001500003,
// 网络错误
ERROR_CODE_NETWORK_ERROR = 1001502005,
// 用户未同意用户协议
ERROR_CODE_AGREEMENT_STATUS_NOT_ACCEPTED = 1005300001,
// 参数错误
ERROR_CODE_PARAMETER_ERROR = 401
}
```
-  1）如已关联，结合风控、安全因素及自身业务场景判断，可展示已关联的账号，由用户选择是否使用华为账号登录应用，或免用户操作，静默登录应用，客户端开发结束。 2）如未关联，再判断是否存在下面的异常场景，如无，则参考下面步骤3继续开发。
-  1）返回1001502001 用户未登录华为账号错误码，说明华为账号未登录。 2）返回1001500003 不支持该scopes或permissions错误码，说明华为账号用户注册地非中国境内（不包含中国香港、中国澳门、中国台湾）。 3）获取到的匿名手机号为空，说明华为账号没有绑定手机号、权限未申请或未生效、登录的华为账号是儿童账号或者开发者开启了代码混淆，quickLoginAnonymousPhone（匿名手机号）属性需要配置混淆白名单防止被混淆。
```typescript
getQuickLoginAnonymousPhone() {
// 创建授权请求，并设置参数
const authRequest = new authentication.HuaweiIDProvider().createAuthorizationWithHuaweiIDRequest();
// 获取匿名手机号需传quickLoginAnonymousPhone这个scope，传参之前需要先申请“华为账号一键登录”权限
authRequest.scopes = ['quickLoginAnonymousPhone'];
// 用于防跨站点请求伪造
authRequest.state = util.generateRandomUUID();
// 一键登录场景该参数必须设置为false
authRequest.forceAuthorization = false;
const controller = new authentication.AuthenticationController();
try {
controller.executeRequest(authRequest).then((response: authentication.AuthorizationWithHuaweiIDResponse) => {
// 获取到UnionID、OpenID、匿名手机号
const unionID = response.data?.unionID;
const openID = response.data?.openID;
const anonymousPhone = response.data?.extraInfo?.quickLoginAnonymousPhone as string;
if (anonymousPhone) {
hilog.info(0x0000, 'testTag', 'Succeeded in authentication.');
const quickLoginAnonymousPhone: string = anonymousPhone;
return;
}
hilog.info(0x0000, 'testTag', 'Succeeded in authentication. AnonymousPhone is empty.');
// 未获取到匿名手机号需要跳转到应用自定义的登录页面
}).catch((error: BusinessError) => {
this.dealAllError(error);
})
} catch (error) {
this.dealAllError(error);
}
}
// 错误处理
dealAllError(error: BusinessError): void {
hilog.error(0x0000, 'testTag',
`Failed to get quickLoginAnonymousPhone, errorCode is ${error.code}, errorMessage is ${error.message}`);
}
```
借助DevEco Studio辅助开发（可选）
1.  若代码片段插入失败，可查询快速插入场景化代码片段的说明排查原因。
2.  1）如已关联，结合风控、安全因素及自身业务场景判断，可展示已关联的账号，由用户选择是否使用华为账号登录应用，或免用户操作，静默登录应用，客户端开发结束。 2）如未关联，再判断是否存在下面的异常场景，如无，则参考下面步骤5继续开发。 1）返回1001502001 用户未登录华为账号错误码，说明华为账号未登录。 2）返回1001500003 不支持该scopes或permissions错误码，说明华为账号用户注册地非中国境内（不包含中国香港、中国澳门、中国台湾）。 3）获取到的匿名手机号为空，说明华为账号没有绑定手机号、权限未申请或未生效、登录的华为账号是儿童账号。 上述异常场景应用需要展示其他登录方式。
3.  1）如已关联，结合风控、安全因素及自身业务场景判断，可展示已关联的账号，由用户选择是否使用华为账号登录应用，或免用户操作，静默登录应用，客户端开发结束。 2）如未关联，再判断是否存在下面的异常场景，如无，则参考下面步骤5继续开发。
4.  1）返回1001502001 用户未登录华为账号错误码，说明华为账号未登录。 2）返回1001500003 不支持该scopes或permissions错误码，说明华为账号用户注册地非中国境内（不包含中国香港、中国澳门、中国台湾）。 3）获取到的匿名手机号为空，说明华为账号没有绑定手机号、权限未申请或未生效、登录的华为账号是儿童账号。 上述异常场景应用需要展示其他登录方式。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170008.52737742753121090653362375055825:50001231000000:2800:303DD3A46D8F6C80E3A70E267578138050090BEBBEE5CD5886FD2855DCD2CCA3.png)
-  1）如已关联，结合风控、安全因素及自身业务场景判断，可展示已关联的账号，由用户选择是否使用华为账号登录应用，或免用户操作，静默登录应用，客户端开发结束。 2）如未关联，再判断是否存在下面的异常场景，如无，则参考下面步骤5继续开发。
-  1）返回1001502001 用户未登录华为账号错误码，说明华为账号未登录。 2）返回1001500003 不支持该scopes或permissions错误码，说明华为账号用户注册地非中国境内（不包含中国香港、中国澳门、中国台湾）。 3）获取到的匿名手机号为空，说明华为账号没有绑定手机号、权限未申请或未生效、登录的华为账号是儿童账号。 上述异常场景应用需要展示其他登录方式。
服务端开发
1.  Access Token过期处理 Refresh Token过期处理 由于Refresh Token的有效期为180天，当Refresh Token失效后（可通过REST API错误码判断），应用服务器需要通知客户端，重新调用授权接口，请求用户重新授权。
客户端与服务端交互开发
应用客户端到应用服务端的开发
业务流程：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170008.88516626088486455432385217867372:50001231000000:2800:D07AEAA885B5114DFD8C6AE0E62109ABD6AB3C3C776C53D81BE416C938FEF96E.png)
1.  应用客户端与应用服务端的交互安全需要应用自行保证。
```typescript
import { rcp } from '@kit.RemoteCommunicationKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { util } from '@kit.ArkTS';
import { BusinessError } from '@kit.BasicServicesKit';
// 客户端请求接口示例代码
export function rcpRequest(authCode: string) {
// 定义请求头
const headers: rcp.RequestHeaders = {
'accept': 'application/json'
};
// 定义要传递的参数
const postMessage: Record<string, string> = {
'authorizationCode': authCode
};
const securityConfig: rcp.SecurityConfiguration = {
tlsOptions: {
tlsVersion: 'TlsV1.3'
}
};
// 假设"http://localhost:6687"为应用服务器地址
const baseUrl = 'http://localhost:6687/account/login';
// 定义请求对象
const req = new rcp.Request(baseUrl, 'POST', headers, postMessage);
// 创建通信会话对象
const session = rcp.createSession({ requestConfiguration: { security: securityConfig } });
// 发起请求
session.fetch(req).then((response) => {
hilog.info(0x0000, 'getRcpResult', 'Succeeded in getting result from server.');
if (response.body) {
const decoder = util.TextDecoder.create('utf-8');
const result = JSON.parse(decoder.decodeToString(new Uint8Array(response.body))) as Record<string, Object>;
const phoneNumber: string = JSON.stringify(result['phone'] ?? '');
if (phoneNumber) {
// 应用处理相关逻辑
}
} else {
hilog.error(0x0000, 'getRcpResult', 'Failed to get response body.');
}
}).catch((err: BusinessError) => {
hilog.error(0x0000, 'getRcpResult', `err: err code is ${err.code}, err message is ${JSON.stringify(err)}`);
});
}
```
2.  应用客户端与应用服务端的交互安全需要应用自行保证。
```typescript
import { rcp } from '@kit.RemoteCommunicationKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { util } from '@kit.ArkTS';
import { BusinessError } from '@kit.BasicServicesKit';
// 客户端请求接口示例代码
export function rcpRequest(authCode: string) {
// 定义请求头
const headers: rcp.RequestHeaders = {
'accept': 'application/json'
};
// 定义要传递的参数
const postMessage: Record<string, string> = {
'authorizationCode': authCode
};
const securityConfig: rcp.SecurityConfiguration = {
tlsOptions: {
tlsVersion: 'TlsV1.3'
}
};
// 假设"http://localhost:6687"为应用服务器地址
const baseUrl = 'http://localhost:6687/account/login';
// 定义请求对象
const req = new rcp.Request(baseUrl, 'POST', headers, postMessage);
// 创建通信会话对象
const session = rcp.createSession({ requestConfiguration: { security: securityConfig } });
// 发起请求
session.fetch(req).then((response) => {
hilog.info(0x0000, 'getRcpResult', 'Succeeded in getting result from server.');
if (response.body) {
const decoder = util.TextDecoder.create('utf-8');
const result = JSON.parse(decoder.decodeToString(new Uint8Array(response.body))) as Record<string, Object>;
const phoneNumber: string = JSON.stringify(result['phone'] ?? '');
if (phoneNumber) {
// 应用处理相关逻辑
}
} else {
hilog.error(0x0000, 'getRcpResult', 'Failed to get response body.');
}
}).catch((err: BusinessError) => {
hilog.error(0x0000, 'getRcpResult', `err: err code is ${err.code}, err message is ${JSON.stringify(err)}`);
});
}
```
1.  应用客户端与应用服务端的交互安全需要应用自行保证。
```typescript
import { rcp } from '@kit.RemoteCommunicationKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { util } from '@kit.ArkTS';
import { BusinessError } from '@kit.BasicServicesKit';
// 客户端请求接口示例代码
export function rcpRequest(authCode: string) {
// 定义请求头
const headers: rcp.RequestHeaders = {
'accept': 'application/json'
};
// 定义要传递的参数
const postMessage: Record<string, string> = {
'authorizationCode': authCode
};
const securityConfig: rcp.SecurityConfiguration = {
tlsOptions: {
tlsVersion: 'TlsV1.3'
}
};
// 假设"http://localhost:6687"为应用服务器地址
const baseUrl = 'http://localhost:6687/account/login';
// 定义请求对象
const req = new rcp.Request(baseUrl, 'POST', headers, postMessage);
// 创建通信会话对象
const session = rcp.createSession({ requestConfiguration: { security: securityConfig } });
// 发起请求
session.fetch(req).then((response) => {
hilog.info(0x0000, 'getRcpResult', 'Succeeded in getting result from server.');
if (response.body) {
const decoder = util.TextDecoder.create('utf-8');
const result = JSON.parse(decoder.decodeToString(new Uint8Array(response.body))) as Record<string, Object>;
const phoneNumber: string = JSON.stringify(result['phone'] ?? '');
if (phoneNumber) {
// 应用处理相关逻辑
}
} else {
hilog.error(0x0000, 'getRcpResult', 'Failed to get response body.');
}
}).catch((err: BusinessError) => {
hilog.error(0x0000, 'getRcpResult', `err: err code is ${err.code}, err message is ${JSON.stringify(err)}`);
});
}
```
客户端与服务端联调
前提：根据应用登录方案设计及实现，完成客户端和服务端开发，开发指导参见客户端开发、服务端开发和应用客户端到应用服务端的开发。
1.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170008.19445353811570171702881479698783:50001231000000:2800:B75EB7811636288BF5C6A665085CA1EBFFCEBB51E186305BC0F7F359E1B507CC.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170008.05792788139105023147305990741752:50001231000000:2800:9B1C2EA64ECAC2073DAB9155DA6F27035C15888C21962732D689C0C5E103B6AD.png)
开发后验证
集成华为账号一键登录能力应用用户体验质量建议
应用完成开发后，可参照以下标准检查集成华为账号一键登录后的用户体验是否符合预期：
| 标准编号 | 标准项名称 | 类型 | 标准详细描述 |
| --- | --- | --- | --- |
| 1 | 满足华为账号提供登录设计规范 | 规则 | 需满足华为账号开放登录中【华为账号一键登录】按钮规范，保障HarmonyOS应用拥有简单易用、高效一致、快速安全的登录体验； |
| 2 | 用户交互体验原则 | 建议 | （1）登录页面的用户协议与隐私协议、华为账号用户认证协议可展示、可点击； （2）当用户点击协议后，回退页面，须回到点击前的页面； （3）只有用户勾选并同意所有协议后，才可继续进行登录操作，若用户未勾选协议时直接点击华为账号登录按钮，须有明确的同意协议提醒； （4）点击登录按钮须直接完成登录流程，可出现头像、昵称授权页，但取消场景须不影响登录流程；若出现处理异常，须及时终止页面，不应出现应用卡死无法操作； |
| 3 | 登录页面内容用户体验原则 | 建议 | （1）若未提供其他登录方式，不应显示“其他登录方式”的入口； （2）若使用华为账号一键登录，页面匿名手机号须展示从华为账号侧获取的匿名手机号，不应展示其他来源的手机号； （3）用户协议中，必须包含《华为账号用户认证协议》，且协议必须可点击、可加载，加载后支持回退页面，且回到点击前的页面； |
| 4 | 异常处理用户体验原则 | 建议 | 登录页面需进行异常处理保证： （1）若登录异常（如网络异常、海外账号不支持等情况），勿将错误码等原始信息直接透传给用户； （2）若登录时触发了华为侧的短信验证码校验，则在校验成功之后，应用不应再展示额外的验证码验证页面； |
| 5 | 应用生命周期变化的华为账号用户体验原则 | 建议 | 应用更新后，其登录状态须与更新前一致； |
标准编号
标准项名称
类型
标准详细描述
1
满足华为账号提供登录设计规范
规则
需满足华为账号开放登录中【华为账号一键登录】按钮规范，保障HarmonyOS应用拥有简单易用、高效一致、快速安全的登录体验；
2
用户交互体验原则
建议
（1）登录页面的用户协议与隐私协议、华为账号用户认证协议可展示、可点击；
（2）当用户点击协议后，回退页面，须回到点击前的页面；
（3）只有用户勾选并同意所有协议后，才可继续进行登录操作，若用户未勾选协议时直接点击华为账号登录按钮，须有明确的同意协议提醒；
（4）点击登录按钮须直接完成登录流程，可出现头像、昵称授权页，但取消场景须不影响登录流程；若出现处理异常，须及时终止页面，不应出现应用卡死无法操作；
3
登录页面内容用户体验原则
建议
（1）若未提供其他登录方式，不应显示“其他登录方式”的入口；
（2）若使用华为账号一键登录，页面匿名手机号须展示从华为账号侧获取的匿名手机号，不应展示其他来源的手机号；
（3）用户协议中，必须包含《华为账号用户认证协议》，且协议必须可点击、可加载，加载后支持回退页面，且回到点击前的页面；
4
异常处理用户体验原则
建议
登录页面需进行异常处理保证：
（1）若登录异常（如网络异常、海外账号不支持等情况），勿将错误码等原始信息直接透传给用户；
（2）若登录时触发了华为侧的短信验证码校验，则在校验成功之后，应用不应再展示额外的验证码验证页面；
5
应用生命周期变化的华为账号用户体验原则
建议
应用更新后，其登录状态须与更新前一致；

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-unionid-login-V14
爬取时间: 2025-04-29 20:02:15
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-unionid-login-button-V14
爬取时间: 2025-04-29 20:02:29
来源: Huawei Developer
应用可以使用Account Kit提供的华为账号登录按钮获取华为账号用户身份标识UnionID、OpenID，通过UnionID、OpenID完成用户登录；或者与应用账号完成绑定，绑定后用于登录或者验证。
华为账号登录按钮包含文本、标志和文本、标志三种样式，以满足应用对界面风格一致性和灵活性的要求。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170008.09162949801141217997366101419867:50001231000000:2800:218C18136FA5F83C622DB8EFA54A678870936629F1E9B2AC43D45A735777935B.png)
用户体验设计
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170009.26253438543733929183419248889598:50001231000000:2800:7DEED06A289518E4F260DACF873F7DB36BF6D587BA2E71AD58C50EA7D6F8A40B.png)
账号登录按钮的用户体验和UX设计需符合【华为账号登录】按钮规范，不符合规范的UX设计可能会对应用上架和用户体验带来影响。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170009.85083106139071069165373978959504:50001231000000:2800:FA0504C56E12946C00C6BED1813CFEE496836E0F2185E83D24AF49A065C20838.png)
流程说明：
1、用户打开应用进行登录，应用设置LoginType类型为LoginType.ID后拉起应用自己的登录页并展示“华为账号登录”按钮，用户点击按钮，请求华为账号授权ID。
2、如华为账号未登录，将拉起华为账号登录页，用户登录后，将返回UnionID、Authorization Code、OpenID、ID Token数据给应用，应用根据获取到的用户标识，服务端进行安全认证后实现应用登录。
3、如华为账号已登录，将直接返回UnionID、Authorization Code、OpenID、ID Token数据给应用，应用根据获取到的用户标识，服务端进行安全认证后实现应用登录。
接口说明
华为账号登录按钮关键接口如下表所示，具体API说明详见API参考。
| 接口名 | 描述 |
| --- | --- |
| LoginWithHuaweiIDButton | 华为账号Button登录组件。 当前该组件支持Icon类型按钮、纯文本按钮、Icon和文本混合按钮，如果仍然不能满足开发者的诉求，可以使用BUTTON_CUSTOM类型定义按钮的文字颜色和背景色。 |
| onClickLoginWithHuaweiIDButton(callback: AsyncCallback<HuaweiIDCredential>): LoginWithHuaweiIDButtonController | 注册华为账号登录按钮的登录事件结果回调。使用callback异步回调。 |
| setAgreementStatus(agreementStatus: AgreementStatus): LoginWithHuaweiIDButtonController | 设置协议状态方法。如果需要用户同意协议才能完成华为账号登录，请先设置协议状态为NOT_ACCEPTED，当用户同意协议后设置协议状态为ACCEPTED，才可以完成华为账号登录。 |
接口名
描述
LoginWithHuaweiIDButton
华为账号Button登录组件。
当前该组件支持Icon类型按钮、纯文本按钮、Icon和文本混合按钮，如果仍然不能满足开发者的诉求，可以使用BUTTON_CUSTOM类型定义按钮的文字颜色和背景色。
onClickLoginWithHuaweiIDButton(callback: AsyncCallback<HuaweiIDCredential>):LoginWithHuaweiIDButtonController
注册华为账号登录按钮的登录事件结果回调。使用callback异步回调。
setAgreementStatus(agreementStatus:AgreementStatus):LoginWithHuaweiIDButtonController
设置协议状态方法。如果需要用户同意协议才能完成华为账号登录，请先设置协议状态为NOT_ACCEPTED，当用户同意协议后设置协议状态为ACCEPTED，才可以完成华为账号登录。
上述接口需在页面或自定义组件生命周期内调用。
开发前提
在进行代码开发前，请先确认您已完成配置Client ID工作。该场景无需申请scope权限。
客户端开发
```typescript
import { LoginWithHuaweiIDButton, loginComponentManager } from '@kit.AccountKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
```typescript
@Entry
@Component
struct PreviewLoginButtonPage {
// 构造LoginWithHuaweiIDButton组件的控制器
controller: loginComponentManager.LoginWithHuaweiIDButtonController =
new loginComponentManager.LoginWithHuaweiIDButtonController()
.onClickLoginWithHuaweiIDButton((error: BusinessError, response: loginComponentManager.HuaweiIDCredential) => {
if (error) {
hilog.error(0x0000, 'testTag',
`Failed to onClickLoginWithHuaweiIDButton. Code: ${error.code}, message: ${error.message}`);
return;
}
if (response) {
hilog.info(0x0000, 'testTag', 'Succeeded in getting response.');
const authCode = response.authorizationCode;
const openID = response.openID;
const unionID = response.unionID;
const idToken = response.idToken;
// 开发者处理authCode、openID、unionID、idToken
}
});
build() {
Column() {
Column() {
Column() {
LoginWithHuaweiIDButton({
params: {
// LoginWithHuaweiIDButton支持的样式
style: loginComponentManager.Style.BUTTON_RED,
// 账号登录按钮在登录过程中展示加载态
extraStyle: {
buttonStyle: new loginComponentManager.ButtonStyle().loadingStyle({
show: true
})
},
// LoginWithHuaweiIDButton的边框圆角半径
borderRadius: 24,
// LoginWithHuaweiIDButton支持的登录类型
loginType: loginComponentManager.LoginType.ID,
// LoginWithHuaweiIDButton支持按钮的样式跟随系统深浅色模式切换
supportDarkMode: true,
// verifyPhoneNumber：如果华为账号用户在过去90天内未进行短信验证，是否拉起Account Kit提供的短信验证码页面
verifyPhoneNumber: true
},
controller: this.controller
})
}
.height(40)
}.width('100%')
}
.justifyContent(FlexAlign.Center)
.constraintSize({ minHeight: '100%' })
.margin({
left: 16,
right: 16
})
}
}
```
服务端开发
1.  Access Token过期处理 Refresh Token过期处理 由于Refresh Token的有效期为180天，当Refresh Token失效后（可通过REST API错误码判断），应用服务器需要通知客户端，重新调用授权接口，请求用户重新授权。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-unionid-login-api-V14
爬取时间: 2025-04-29 20:02:43
来源: Huawei Developer
场景介绍
应用应遵照【华为账号登录】按钮使用规则在登录页面嵌入自定义华为账号登录按钮，通过自定义按钮触发调用华为账号登录API获取UnionID、OpenID，通过UnionID、OpenID完成用户登录；或者与应用账号完成绑定，绑定后用于登录或者验证。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170010.13638417672844748816414079503265:50001231000000:2800:8683E09650D68FBD834AE6712E1A6F50FA48B3F0D83FFCEE7257789B00F114BD.png)
流程说明：
接口说明
使用API获取UnionID登录关键接口如下表所示，具体API说明详见API参考。
| 接口名 | 描述 |
| --- | --- |
| createLoginWithHuaweiIDRequest(): LoginWithHuaweiIDRequest | 创建账号登录请求。LoginWithHuaweiIDRequest中的forceLogin参数用来控制当用户未登录华为账号时，是否强制拉起华为账号登录界面。 |
| constructor(context?: common.Context) | 创建登录请求Controller。 |
| executeRequest(request: AuthenticationRequest): Promise<AuthenticationResponse> | 通过Promise方式执行登录操作。 |
接口名
描述
createLoginWithHuaweiIDRequest():LoginWithHuaweiIDRequest
创建账号登录请求。LoginWithHuaweiIDRequest中的forceLogin参数用来控制当用户未登录华为账号时，是否强制拉起华为账号登录界面。
constructor(context?:common.Context)
创建登录请求Controller。
executeRequest(request:AuthenticationRequest): Promise<AuthenticationResponse>
通过Promise方式执行登录操作。
上述接口需在页面或自定义组件生命周期内调用。
开发前提
在进行代码开发前，请先确认您已完成配置Client ID工作。该场景无需申请scope权限。
客户端开发
```typescript
import { authentication } from '@kit.AccountKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { util } from '@kit.ArkTS';
import { BusinessError } from '@kit.BasicServicesKit';
```
```typescript
// 创建登录请求，并设置参数
const loginRequest = new authentication.HuaweiIDProvider().createLoginWithHuaweiIDRequest();
// 用户是否需要登录授权，该值为true且用户未登录或未授权时，会拉起用户登录或授权页面
loginRequest.forceLogin = true;
// 用于防跨站点请求伪造
loginRequest.state = util.generateRandomUUID();
```
1.
```typescript
// 执行登录请求
try {
const controller = new authentication.AuthenticationController(getContext(this));
controller.executeRequest(loginRequest).then((response: authentication.LoginWithHuaweiIDResponse) => {
const loginWithHuaweiIDResponse = response as authentication.LoginWithHuaweiIDResponse;
const state = loginWithHuaweiIDResponse.state;
if (state && loginRequest.state !== state) {
hilog.error(0x0000, 'testTag', `Failed to login. The state is different, response state: ${state}`);
return;
}
hilog.info(0x0000, 'testTag', 'Succeeded in logging in.');
const loginWithHuaweiIDCredential = loginWithHuaweiIDResponse.data!;
const code = loginWithHuaweiIDCredential.authorizationCode;
const idToken = loginWithHuaweiIDCredential.idToken;
const openID = loginWithHuaweiIDCredential.openID;
const unionID = loginWithHuaweiIDCredential.unionID;
// 开发者处理code, idToken, openID, unionID
}).catch((error: BusinessError) => {
this.dealAllError(error);
})
} catch (error) {
this.dealAllError(error);
}
```
服务端开发
1.  Access Token过期处理 Refresh Token过期处理 由于Refresh Token的有效期为180天，当Refresh Token失效后（可通过REST API错误码判断），应用服务器需要通知客户端，重新调用授权接口，请求用户重新授权。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-silent-login-V14
爬取时间: 2025-04-29 20:02:56
来源: Huawei Developer
场景介绍
在应用卸载重装、用户换机等场景，如登录的华为账号与应用重装、换机前一致，应用可通过Account Kit提供的静默登录方式即不需要用户点击登录/注册按钮，即可获取用户的身份标识UnionID，完成用户的静默登录。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170010.22491333292954653299559370913189:50001231000000:2800:FAD107F5017E7B5E77921E94EBE145613422BF1FE614DFCF9BAAA082E9D48478.png)
流程说明：
1、用户之前已登录应用，应用卸载重装、用户换机后再进入应用时，应用传forceLogin = false等参数调用登录API。
2、如华为账号未登录，应用会获取到1001502001 用户未登录华为账号错误码，再根据需要自行处理。
3、如华为账号已登录，且API调用成功，应用能获取到UnionID、Authorization Code等登录结果。
4、应用通过用户身份标识UnionID判断用户已登录后，服务端进行安全认证后用户即可完成静默登录。
接口说明
静默登录关键接口如下表所示，具体API说明详见API参考。
| 接口名 | 描述 |
| --- | --- |
| createLoginWithHuaweiIDRequest(): LoginWithHuaweiIDRequest | 创建账号登录请求。LoginWithHuaweiIDRequest中的forceLogin参数用来控制当用户未登录华为账号时，是否强制拉起华为账号登录界面，静默登录场景设置为false。 |
| constructor(context?: common.Context) | 创建登录请求Controller。 |
| executeRequest(request: AuthenticationRequest): Promise<AuthenticationResponse> | 通过Promise方式执行登录操作。 |
接口名
描述
createLoginWithHuaweiIDRequest():LoginWithHuaweiIDRequest
创建账号登录请求。LoginWithHuaweiIDRequest中的forceLogin参数用来控制当用户未登录华为账号时，是否强制拉起华为账号登录界面，静默登录场景设置为false。
constructor(context?:common.Context)
创建登录请求Controller。
executeRequest(request:AuthenticationRequest): Promise<AuthenticationResponse>
通过Promise方式执行登录操作。
开发前提
在进行代码开发前，请先确认您已完成配置Client ID工作。该场景无需申请scope权限。
客户端开发
```typescript
import { authentication } from '@kit.AccountKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { util } from '@kit.ArkTS';
import { BusinessError } from '@kit.BasicServicesKit';
```
```typescript
// 创建登录请求，并设置参数
const loginRequest = new authentication.HuaweiIDProvider().createLoginWithHuaweiIDRequest();
// false表示静默登录
loginRequest.forceLogin = false;
// 用于防跨站点请求伪造
loginRequest.state = util.generateRandomUUID();
```
1.
```typescript
// 执行登录请求
try {
const controller = new authentication.AuthenticationController();
controller.executeRequest(loginRequest).then((response: authentication.LoginWithHuaweiIDResponse) => {
const loginWithHuaweiIDResponse = response as authentication.LoginWithHuaweiIDResponse;
const state = loginWithHuaweiIDResponse.state;
if (state && loginRequest.state !== state) {
hilog.error(0x0000, 'testTag', `Failed to login. The state is different, response state: ${state}`);
return;
}
hilog.info(0x0000, 'testTag', 'Succeeded in logging in.');
const loginWithHuaweiIDCredential = loginWithHuaweiIDResponse.data!;
const code = loginWithHuaweiIDCredential.authorizationCode;
const idToken = loginWithHuaweiIDCredential.idToken;
const openID = loginWithHuaweiIDCredential.openID;
const unionID = loginWithHuaweiIDCredential.unionID;
// 开发者处理code, idToken, openID, unionID
}).catch((error: BusinessError) => {
this.dealAllError(error);
})
} catch (error) {
this.dealAllError(error);
}
```
服务端开发
1.  Access Token过期处理 Refresh Token过期处理 由于Refresh Token的有效期为180天，当Refresh Token失效后（可通过REST API错误码判断），应用服务器需要通知客户端，重新调用授权接口，请求用户重新授权。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-login-state-V14
爬取时间: 2025-04-29 20:03:10
来源: Huawei Developer
场景介绍
应用在前台时可以订阅Account Kit提供的华为账号登录/登出广播事件，来感知华为账号的登录状态，实现用户登录/登出应用的逻辑。应用也可通过getHuaweiIDState实时查询华为账号登录状态。
事件说明
以下是华为账号登录/登出发送的广播事件。
| 事件名称 | 描述 |
| --- | --- |
| COMMON_EVENT_DISTRIBUTED_ACCOUNT_LOGIN | 表示分布式账号登录成功的动作。华为账号登录成功也会发这个广播事件。 |
| COMMON_EVENT_DISTRIBUTED_ACCOUNT_LOGOUT | 表示分布式账号登出成功的动作。华为账号登出成功也会发这个广播事件。 |
事件名称
描述
COMMON_EVENT_DISTRIBUTED_ACCOUNT_LOGIN
表示分布式账号登录成功的动作。华为账号登录成功也会发这个广播事件。
COMMON_EVENT_DISTRIBUTED_ACCOUNT_LOGOUT
表示分布式账号登出成功的动作。华为账号登出成功也会发这个广播事件。
开发前提
在进行代码开发前，请先确认您已完成配置Client ID工作。该场景无需申请scope权限。
开发步骤
```typescript
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError, commonEventManager } from '@kit.BasicServicesKit';
```
```typescript
//订阅者信息。
const subscribeInfo: commonEventManager.CommonEventSubscribeInfo = {
events: [commonEventManager.Support.COMMON_EVENT_DISTRIBUTED_ACCOUNT_LOGIN,commonEventManager.Support.COMMON_EVENT_DISTRIBUTED_ACCOUNT_LOGOUT]
};
let subscriber: commonEventManager.CommonEventSubscriber;
//创建订阅者
commonEventManager.createSubscriber(subscribeInfo)
.then((commonEventSubscriber: commonEventManager.CommonEventSubscriber) => {
subscriber = commonEventSubscriber;
//订阅公共事件
commonEventManager.subscribe(subscriber,
(error: BusinessError, data: commonEventManager.CommonEventData) => {
if (error) {
hilog.error(0x0000, 'testTag',
`Failed to subscribe , code is ${error.code}, message is ${error.message}`);
} else {
if (data.event === commonEventManager.Support.COMMON_EVENT_DISTRIBUTED_ACCOUNT_LOGIN) {
// 订阅到华为账号登录事件
}
if (data.event === commonEventManager.Support.COMMON_EVENT_DISTRIBUTED_ACCOUNT_LOGOUT) {
// 订阅到华为账号登出事件
}
}
});
})
.catch((err: BusinessError) => {
hilog.error(0x0000, 'testTag', `Failed to createSubscriber. Code: ${err.code}, message: ${err.message}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-get-user-info-V14
爬取时间: 2025-04-29 20:03:24
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-get-user-info-overview-V14
爬取时间: 2025-04-29 20:03:41
来源: Huawei Developer
当应用需要获取用户身份标识或者完善用户个人资料（头像昵称、手机号、收货地址、发票抬头）时，可通过Account Kit提供的相关能力，引导用户填写、管理相关信息并完成授权。获取头像昵称、手机号、收货地址、发票抬头等详细接入体验可参考Account Kit提供的SampleCode示例工程。
典型场景：
1、应用需要完善用户头像昵称信息，参见获取头像昵称。
2、应用提供的服务依赖用户手机号，需要获取用户手机号，参见获取手机号。
3、应用提供的服务依赖用户收货地址，需要获取用户收货地址，参见获取收货地址。
4、应用提供的服务依赖用户发票抬头信息，需要获取用户发票抬头，参见获取发票抬头。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-get-avatar-nickname-V14
爬取时间: 2025-04-29 20:03:55
来源: Huawei Developer
场景介绍
如应用需要完善用户头像昵称信息，可使用Account Kit提供的头像昵称授权能力，用户允许应用获取头像昵称后，可快速完成个人信息填写。以下对Account kit提供的头像昵称授权能力进行介绍，若要获取头像还可通过场景化控件选择头像Button进行获取。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170010.32462820370183883770411401073933:50001231000000:2800:E87C07485767B2D6D323913E7173CF831547D99792E5F0723CFCB1BC4E4801D7.png)
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170011.43510269805161946219369033182260:50001231000000:2800:D1AAD122135A135DA8925EC8ADBE0B233FDFC92C67DE36A2CDCEB31DB82B35D9.png)
流程说明：
接口说明
获取头像昵称关键接口如下表所示，具体API说明详见API参考。
| 接口名 | 描述 |
| --- | --- |
| createAuthorizationWithHuaweiIDRequest(): AuthorizationWithHuaweiIDRequest | 获取授权接口，通过AuthorizationWithHuaweiIDRequest传入头像昵称的scope：profile及Authorization Code的permission：serviceauthcode，即可在授权结果中获取到用户头像昵称、UnionID、OpenID和Authorization Code。 |
| constructor(context?: common.Context) | 创建授权请求Controller。 |
| executeRequest(request: AuthenticationRequest): Promise<AuthenticationResponse> | 通过Promise方式执行授权操作。 头像昵称，可从AuthenticationResponse的子类AuthorizationWithHuaweiIDResponse中解析，具体解析方法请参考客户端开发的示例代码。 |
接口名
描述
createAuthorizationWithHuaweiIDRequest():AuthorizationWithHuaweiIDRequest
获取授权接口，通过AuthorizationWithHuaweiIDRequest传入头像昵称的scope：profile及Authorization Code的permission：serviceauthcode，即可在授权结果中获取到用户头像昵称、UnionID、OpenID和Authorization Code。
constructor(context?:common.Context)
创建授权请求Controller。
executeRequest(request:AuthenticationRequest): Promise<AuthenticationResponse>
通过Promise方式执行授权操作。
头像昵称，可从AuthenticationResponse的子类AuthorizationWithHuaweiIDResponse中解析，具体解析方法请参考客户端开发的示例代码。
1.上述接口需在页面或自定义组件生命周期内调用。
2.未设置昵称默认返回华为账号绑定的匿名手机号/邮箱。
开发前提
在进行代码开发前，请先确认您已完成配置Client ID工作。该场景无需申请scope权限。
开发步骤
客户端开发
```typescript
import { authentication } from '@kit.AccountKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { util } from '@kit.ArkTS';
import { BusinessError } from '@kit.BasicServicesKit';
```
```typescript
// 创建授权请求，并设置参数
const authRequest = new authentication.HuaweiIDProvider().createAuthorizationWithHuaweiIDRequest();
// 获取头像昵称需要传如下scope
authRequest.scopes = ['profile'];
// 若开发者需要进行服务端开发，则需传如下permission获取authorizationCode
authRequest.permissions = ['serviceauthcode'];
// 用户是否需要登录授权，该值为true且用户未登录或未授权时，会拉起用户登录或授权页面
authRequest.forceAuthorization = true;
// 用于防跨站点请求伪造
authRequest.state = util.generateRandomUUID();
```
1.
```typescript
// 执行授权请求
try {
const controller = new authentication.AuthenticationController(getContext(this));
controller.executeRequest(authRequest).then((data) => {
const authorizationWithHuaweiIDResponse = data as authentication.AuthorizationWithHuaweiIDResponse;
const state = authorizationWithHuaweiIDResponse.state;
if (state && authRequest.state !== state) {
hilog.error(0x0000, 'testTag', `Failed to authorize. The state is different, response state: ${state}`);
return;
}
hilog.info(0x0000, 'testTag', 'Succeeded in authentication.');
const authorizationWithHuaweiIDCredential = authorizationWithHuaweiIDResponse.data!;
const avatarUri = authorizationWithHuaweiIDCredential.avatarUri;
const nickName = authorizationWithHuaweiIDCredential.nickName;
const unionID = authorizationWithHuaweiIDCredential.unionID;
const openID = authorizationWithHuaweiIDCredential.openID;
const authorizationCode = authorizationWithHuaweiIDCredential.authorizationCode;
// 开发者处理avatarUri, nickName, unionID，openID，authorizationCode
}).catch((err: BusinessError) => {
this.dealAllError(err);
});
} catch (error) {
this.dealAllError(error);
}
```
服务端开发（可选）
开发者根据业务需要选择是否进行服务端开发。
1.  Access Token过期处理 Refresh Token过期处理 由于Refresh Token的有效期为180天，当Refresh Token失效后（可通过REST API错误码判断），应用服务器端需要通知客户端，重新调用授权接口，请求用户重新授权。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-get-phone-V14
爬取时间: 2025-04-29 20:04:09
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-get-phone-overview-V14
爬取时间: 2025-04-29 20:04:23
来源: Huawei Developer
当应用需要获取用户手机号时，可调用Account Kit的手机号授权能力，引导用户完成手机号授权。
在应用账号已登录并绑定用户华为账号UnionID的情况下，应用可以在获取手机号等用户信息时根据实际业务场景判断是否需要提前校验当前应用账号绑定的UnionID与系统账号当前的Unionid是否一致。
Account Kit提供了快速验证方式：
| 场景  | 说明  |
| --- | --- |
| 快速验证  | 对用户选择的华为账号绑定的手机号或者新增的手机号进行验证，不保证是实时验证，仅首次需要用户授权。  |
场景
说明
快速验证
对用户选择的华为账号绑定的手机号或者新增的手机号进行验证，不保证是实时验证，仅首次需要用户授权。
约束与限制
应用满足《常见类型移动互联网应用程序必要个人信息范围规定》（对第三方网站的内容，华为不承担任何责任）中使用手机号的必要业务场景。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-get-phonenumber-V14
爬取时间: 2025-04-29 20:04:36
来源: Huawei Developer
场景介绍
当应用对获取的手机号时效性要求不高时，可使用Account Kit提供的手机号授权与快速验证能力，向用户发起手机号授权申请，经用户同意授权后，获取到手机号并为用户提供相应服务。以下对Account kit提供的手机号授权与快速验证能力进行介绍，快速验证手机号功能还可使用场景化控件快速验证手机号Button进行实现。
对用户选择的华为账号绑定的手机号或者新增的手机号进行验证，不保证是实时的验证，仅首次需要用户授权。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170011.21498827276428355198540378317713:50001231000000:2800:271B301D56788DF32A912A7EE2A0E430ADB5148E343249EF84042816D6B2CB8F.png)
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170012.19139418585491164007848032835524:50001231000000:2800:2487A0A39031EC25A8F393285916480E1DED4E0964BB72A8B5A9AE34AE9E066A.png)
流程说明：
接口说明
获取快速验证手机号关键接口如下表所示，具体API说明详见API参考。
| 接口名 | 描述 |
| --- | --- |
| createAuthorizationWithHuaweiIDRequest(): AuthorizationWithHuaweiIDRequest | 获取授权接口，通过AuthorizationWithHuaweiIDRequest传入返回手机号的scope：phone及返回Authorization Code的permission：serviceauthcode，即可获取到Authorization Code、UnionID、OpenID。 |
| constructor(context?: common.Context) | 创建授权请求Controller。 |
| executeRequest(request: AuthenticationRequest): Promise<AuthenticationResponse> | 通过Promise方式执行授权操作。 |
接口名
描述
createAuthorizationWithHuaweiIDRequest():AuthorizationWithHuaweiIDRequest
获取授权接口，通过AuthorizationWithHuaweiIDRequest传入返回手机号的scope：phone及返回Authorization Code的permission：serviceauthcode，即可获取到Authorization Code、UnionID、OpenID。
constructor(context?:common.Context)
创建授权请求Controller。
executeRequest(request:AuthenticationRequest): Promise<AuthenticationResponse>
通过Promise方式执行授权操作。
上述接口需在页面或自定义组件生命周期内调用。
开发前提
1、在进行代码开发前，请先确认您已完成开发准备工作。
2、应用获取手机号前，需要完成phone（获取您的手机号）的scope权限申请，详情参见配置scope权限，scope权限申请审批未完成或未通过，将报错1001502014 应用未申请scopes或permissions权限。
| 细分场景 | 对应scope | 权限名称 | 权限描述 | 权限是否需要申请 |
| --- | --- | --- | --- | --- |
| 快速验证手机号 | phone | phone | 获取您的手机号 | 是 |
细分场景
对应scope
权限名称
权限描述
权限是否需要申请
快速验证手机号
phone
phone
获取您的手机号
是
3、设备需要登录华为账号，若未登录则拉起登录页面。
开发步骤
客户端开发
```typescript
import { authentication } from '@kit.AccountKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { util } from '@kit.ArkTS';
import { BusinessError } from '@kit.BasicServicesKit';
```
```typescript
// 创建授权请求，并设置参数
const authRequest = new authentication.HuaweiIDProvider().createAuthorizationWithHuaweiIDRequest();
// 获取手机号需要传如下scope，传参数之前需要先申请对应scope权限,才能返回对应数据
authRequest.scopes = ['phone'];
// 获取code需传如下permission
authRequest.permissions = ['serviceauthcode'];
// 用户是否需要登录授权，该值为true且用户未登录或未授权时，会拉起用户登录或授权页面
authRequest.forceAuthorization = true;
// 用于防跨站点请求伪造
authRequest.state = util.generateRandomUUID();
```
1.
```typescript
// 执行请求
try {
const controller = new authentication.AuthenticationController(getContext(this));
controller.executeRequest(authRequest).then((data) => {
const authorizationWithHuaweiIDResponse = data as authentication.AuthorizationWithHuaweiIDResponse;
const state = authorizationWithHuaweiIDResponse.state;
if (state && authRequest.state !== state) {
hilog.error(0x0000, 'testTag', `Failed to authorize. The state is different, response state: ${state}`);
return;
}
hilog.info(0x0000, 'testTag', 'Succeeded in authentication.');
const authorizationWithHuaweiIDCredential = authorizationWithHuaweiIDResponse.data!;
const code = authorizationWithHuaweiIDCredential.authorizationCode;
const unionID = authorizationWithHuaweiIDCredential.unionID;
const openID = authorizationWithHuaweiIDCredential.openID;
// 开发者处理code、unionID、openID
}).catch((err: BusinessError) => {
this.dealAllError(err);
});
} catch (error) {
this.dealAllError(error);
}
```
服务端开发
1.  Access Token过期处理 Refresh Token过期处理 由于Refresh Token的有效期为180天，当Refresh Token失效后（可通过REST API错误码判断），应用服务器端需要通知客户端，重新调用授权接口，请求用户重新授权。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-choose-adress-V14
爬取时间: 2025-04-29 20:04:51
来源: Huawei Developer
场景介绍
当应用需要获取用户收货地址时，可使用Account Kit提供的获取收货地址的能力，引导用户添加或选择已有的收货地址，并最终获取用户的收货地址。以下对Account kit提供的获取收货地址能力进行介绍，获取收货地址功能还可使用场景化控件选择收货地址Button进行实现。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170013.83428220500274326883460198473622:50001231000000:2800:68589D12138E0B7DE3AFC44CF1315FDD4B04983463321013AB2EC0EAA454AB13.png)
约束与限制
收货地址中的手机号信息仅支持输入中国境内（不包含中国香港、中国澳门、中国台湾）手机号、地址信息只支持填写中国境内（不包含中国香港、中国澳门、中国台湾）。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170013.99546779357765272593622670417256:50001231000000:2800:625EA7E2E23B405BDFF5CF7B7EC41CEBAD1351D59685082D2FF18702EBE7FA9B.png)
流程说明：
接口说明
获取收货地址关键接口如下表所示，具体API说明详见API参考。
| 接口名 | 描述 |
| --- | --- |
| chooseAddress(context: common.Context): Promise<AddressInfo> | 拉起收货地址管理页面并返回用户所选择的收货地址。 |
接口名
描述
chooseAddress(context:common.Context): Promise<AddressInfo>
拉起收货地址管理页面并返回用户所选择的收货地址。
上述接口需在页面或自定义组件生命周期内调用。
开发前提
1、在进行代码开发前，请先确认您已完成配置Client ID工作。
2、应用调用获取收货地址API前，需完成对应的权限申请，华为账号已登录才可获取。当前可通过accountkit@huawei.com进行邮件申请。scope权限申请审批未完成或未通过，将返回1008100005 应用未申请对应permissions权限错误码，无法获取收货地址。
请提供如下信息进行申请，我们会在5个工作日内回复申请结果，请您留意邮箱消息。
邮件主题：【获取收货地址】权限申请
邮件正文：***
企业名称：***
应用名称：***
应用包名：com.***.***
APP ID：1****12
Client ID：1****14
使用场景：***
开发步骤
```typescript
import { shippingAddress } from '@kit.AccountKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
1.
```typescript
// 执行请求
try {
shippingAddress.chooseAddress(getContext(this)).then((data: shippingAddress.AddressInfo) =>{
hilog.info(0x0000, 'testTag', 'Succeeded in choosing address.');
const userName:string = data.userName;
const mobileNumber:string = data.mobileNumber;
const countryCode:string = data.countryCode;
const provinceName:string = data.provinceName;
const cityName:string = data.cityName;
const districtName:string = data.districtName;
const streetName:string = data.streetName;
const detailedAddress:string = data.detailedAddress;
// 开发者处理获取的收货地址信息
}).catch((error: BusinessError) => {
this.dealAllError(error);
})
} catch (error) {
this.dealAllError(error);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-select-invoice-title-V14
爬取时间: 2025-04-29 20:05:05
来源: Huawei Developer
场景介绍
当应用需要获取用户发票抬头时，可使用Account Kit提供的发票助手能力，帮助用户打开发票抬头选择页面进行选择或管理发票抬头。以下对Account kit提供的发票助手能力进行介绍，获取发票抬头功能还可使用场景化控件选择发票抬头Button进行实现。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170013.32845318614174417065390105741680:50001231000000:2800:6E64E2835EB9F3D35705E27CB28997FF6BD611CD4A8B1A3A9140EB29C43BD2A6.png)
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170013.52696972269855273137079360771572:50001231000000:2800:255BB3C94C5B8990DEA74A3F5E3ED4DC2840CFDED664AF42A1906BE65B391794.png)
流程说明：
接口说明
获取发票抬头关键接口如下表所示，具体API说明详见API参考。
| 接口名 | 描述 |
| --- | --- |
| selectInvoiceTitle(context: common.Context): Promise<InvoiceTitle> | 调用该方法打开发票抬头选择页面，使用Promise异步回调返回选择的发票抬头。 |
接口名
描述
selectInvoiceTitle(context:common.Context): Promise<InvoiceTitle>
调用该方法打开发票抬头选择页面，使用Promise异步回调返回选择的发票抬头。
上述接口需在页面或自定义组件生命周期内调用。
开发前提
在进行代码开发前，请先确认您已完成配置Client ID工作。该场景无需申请scope权限。
开发步骤
```typescript
import { invoiceAssistant } from '@kit.AccountKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
1.
```typescript
// 执行请求
if (canIUse('SystemCapability.HuaweiID.InvoiceAssistant')) {
try {
invoiceAssistant.selectInvoiceTitle(getContext(this)).then((data: invoiceAssistant.InvoiceTitle) => {
hilog.info(0x0000, 'testTag', 'Succeeded in selecting invoice title');
const type: string = data.type;
const title: string = data.title;
const taxNumber: string = data.taxNumber;
const companyAddress: string = data.companyAddress;
const telephone: string = data.telephone;
const bankName: string = data.bankName;
const bankAccount: string = data.bankAccount;
// 开发者处理type, title, taxNumber, companyAddress, telephone, bankName, bankAccount
// ...
}).catch((error: BusinessError<Object>) => {
this.dealAllError(error);
})
} catch (error) {
this.dealAllError(error);
}
} else {
hilog.info(0x0000, 'testTag', 'The current device does not support the invoking of the selectInvoiceTitle interface.');
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-minorsprotection-V14
爬取时间: 2025-04-29 20:05:19
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-overview-minorsprotection-V14
爬取时间: 2025-04-29 20:05:34
来源: Huawei Developer
当家长在设备上开启未成年人模式后，应用可以通过Account Kit提供的未成年人模式的相关能力，与系统联动，主动切换至未成年人模式，并根据未成年人的年龄段信息提供适龄内容，全面保护未成年人上网健康。未成年人模式详细接入体验可参考Account Kit提供的SampleCode示例工程。
推荐使用场景：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-get-minorsprotection-V14
爬取时间: 2025-04-29 20:05:47
来源: Huawei Developer
场景介绍
当应用期望跟随系统未成年人模式时，应用可在刚启动时订阅公共事件感知未成年人模式的状态变化，且直接查询系统的未成年人模式是否开启。
同时开发者需要注意以下场景：
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094257.24407021063105746576053379293668:50001231000000:2800:D272E9F5580FA0080C685DBFFAB9C100E8FA91AA2FD452FF4936BC1C2476331E.png)
流程说明：
接口说明
以下是应用跟随系统未成年人模式相关接口说明，更多接口及使用方法请参见API参考。
| 接口名 | 描述 |
| --- | --- |
| getMinorsProtectionInfoSync(): MinorsProtectionInfo | 同步接口，获取未成年人模式的开启状态，以及年龄段信息。 |
| getMinorsProtectionInfo(): Promise<MinorsProtectionInfo> | 异步接口，获取未成年人模式的开启状态，以及年龄段信息。 |
| verifyMinorsProtectionCredential(context: common.Context): Promise<boolean> | 调用该方法拉起验证未成年人模式密码页面。 |
接口名
描述
getMinorsProtectionInfoSync():MinorsProtectionInfo
同步接口，获取未成年人模式的开启状态，以及年龄段信息。
getMinorsProtectionInfo(): Promise<MinorsProtectionInfo>
异步接口，获取未成年人模式的开启状态，以及年龄段信息。
verifyMinorsProtectionCredential(context:common.Context): Promise<boolean>
调用该方法拉起验证未成年人模式密码页面。
事件说明
以下是未成年人模式开启/关闭发送的广播事件。
| 事件名称 | 值 | 描述 |
| --- | --- | --- |
| COMMON_EVENT_MINORSMODE_ON | usual.event.MINORSMODE_ON | 表示未成年人模式开启动作。 |
| COMMON_EVENT_MINORSMODE_OFF | usual.event.MINORSMODE_OFF | 表示未成年人模式关闭动作。 |
事件名称
值
描述
COMMON_EVENT_MINORSMODE_ON
usual.event.MINORSMODE_ON
表示未成年人模式开启动作。
COMMON_EVENT_MINORSMODE_OFF
usual.event.MINORSMODE_OFF
表示未成年人模式关闭动作。
开发步骤
在进行代码开发前，请先确认您已完成配置Client ID工作。
```typescript
import { minorsProtection } from '@kit.AccountKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError, commonEventManager } from '@kit.BasicServicesKit';
// 以上引入的模块为当前场景的全量模块，请按照具体实现按需引入
```
```typescript
//订阅者信息
const subscribeInfo: commonEventManager.CommonEventSubscribeInfo = {
events: [commonEventManager.Support.COMMON_EVENT_MINORSMODE_ON,commonEventManager.Support.COMMON_EVENT_MINORSMODE_OFF]
};
// 如开发者使用await改写createSubscriber方法，需要把此变量定义到全局(struct外层)
let subscriber: commonEventManager.CommonEventSubscriber;
//创建订阅者
commonEventManager.createSubscriber(subscribeInfo)
.then((commonEventSubscriber: commonEventManager.CommonEventSubscriber) => {
// 这里获取到commonEventSubscriber对象需要暂存，用于后续事件回调。不可直接使用，否则会出现事件回调不生效的情况
subscriber = commonEventSubscriber;
//订阅公共事件
commonEventManager.subscribe(subscriber,
(error: BusinessError, data: commonEventManager.CommonEventData) => {
if (error) {
this.dealCommonEventAllError(error);
return;
}
if (data.event === commonEventManager.Support.COMMON_EVENT_MINORSMODE_ON) {
// 订阅到开启事件，可以调用获取年龄段的接口，根据年龄段刷新内容展示，同时如开发者有缓存年龄段或未成年人模式开启状态，则需要刷新缓存
return;
}
if (data.event === commonEventManager.Support.COMMON_EVENT_MINORSMODE_OFF) {
// 订阅到关闭事件，关闭当前应用的未成年人模式，刷新应用内容展示，取消年龄限制，如开发者有缓存未成年人模式开启状态，则需要刷新缓存
}
});
})
.catch((error: BusinessError) => {
this.dealCommonEventAllError(error);
});
```
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
const minorsProtectionInfo: minorsProtection.MinorsProtectionInfo =
minorsProtection.getMinorsProtectionInfoSync();
// 获取未成年人模式开启状态
const minorsProtectionMode: boolean = minorsProtectionInfo.minorsProtectionMode;
hilog.info(0x0000, 'testTag', `Succeeded in getting minorsProtectionMode is: ${minorsProtectionMode.valueOf()}`);
// 未成年人模式已开启，获取年龄段信息
if (minorsProtectionMode) {
const ageGroup: minorsProtection.AgeGroup | undefined = minorsProtectionInfo.ageGroup;
// 如开发者有频繁使用到未成年人模式开启状态，这里则需缓存未成年人模式开启状态
if (ageGroup) {
hilog.info(0x0000, 'testTag', `Succeeded in getting lowerAge is: ${ageGroup.lowerAge}`);
hilog.info(0x0000, 'testTag', `Succeeded in getting upperAge is: ${ageGroup.upperAge}`);
// 根据年龄段刷新内容展示。如开发者有频繁使用到年龄段信息，这里则需缓存年龄段信息
}
} else {
// 未成年人模式未开启，应用需跟随系统未成年人模式，展示内容不做限制
}
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode or getMinorsProtectionInfoSync. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the getMinorsProtectionInfoSync interface.');
}
```
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
const minorsProtectionInfo: minorsProtection.MinorsProtectionInfo =
minorsProtection.getMinorsProtectionInfoSync();
// 获取未成年人模式开启状态
const minorsProtectionMode: boolean = minorsProtectionInfo.minorsProtectionMode;
hilog.info(0x0000, 'testTag', `Succeeded in getting minorsProtectionMode is: ${minorsProtectionMode.valueOf()}`);
// 未成年人模式已开启，获取年龄段信息
if (minorsProtectionMode) {
const ageGroup: minorsProtection.AgeGroup | undefined = minorsProtectionInfo.ageGroup;
// 如开发者有频繁使用到未成年人模式开启状态，这里则需缓存未成年人模式开启状态
if (ageGroup) {
hilog.info(0x0000, 'testTag', `Succeeded in getting lowerAge is: ${ageGroup.lowerAge}`);
hilog.info(0x0000, 'testTag', `Succeeded in getting upperAge is: ${ageGroup.upperAge}`);
// 根据年龄段刷新内容展示。如开发者有频繁使用到年龄段信息，这里则需缓存年龄段信息
}
} else {
// 未成年人模式未开启，应用需跟随系统未成年人模式，展示内容不做限制
}
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode or getMinorsProtectionInfoSync. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the getMinorsProtectionInfoSync interface.');
}
```
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
minorsProtection.getMinorsProtectionInfo()
.then((minorsProtectionInfo: minorsProtection.MinorsProtectionInfo) => {
// 获取未成年人模式开启状态
const minorsProtectionMode: boolean = minorsProtectionInfo.minorsProtectionMode;
// 如开发者有频繁使用到未成年人模式开启状态，这里则需缓存未成年人模式开启状态
hilog.info(0x0000, 'testTag',
`Succeeded in getting minorsProtectionMode is: ${minorsProtectionMode.valueOf()}`);
// 未成年人模式已开启，获取年龄段信息
if (minorsProtectionMode) {
const ageGroup: minorsProtection.AgeGroup | undefined = minorsProtectionInfo.ageGroup;
if (ageGroup) {
hilog.info(0x0000, 'testTag', `Succeeded in getting lowerAge is: ${ageGroup.lowerAge}`);
hilog.info(0x0000, 'testTag', `Succeeded in getting upperAge is: ${ageGroup.upperAge}`);
// 根据年龄段刷新内容展示。如开发者有频繁使用到年龄段信息，这里则需缓存年龄段信息
}
} else {
// 未成年人模式未开启，应用需跟随系统未成年人模式，展示内容不做限制
}
})
.catch((error: BusinessError<Object>) => {
this.dealGetMinorsInfoAllError(error);
});
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the getMinorsProtectionInfo interface.');
}
```
1.
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
minorsProtection.verifyMinorsProtectionCredential(getContext(this))
.then((result: boolean) => {
hilog.info(0x0000, 'testTag', `Succeeded in getting verify result is: ${result.valueOf()}`);
// 使用结果判断验密是否通过，执行后续流程
})
.catch((error: BusinessError<Object>) => {
this.dealVerifyAllError(error);
});
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the verifyMinorsProtectionCredential interface.');
}
```
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
const minorsProtectionInfo: minorsProtection.MinorsProtectionInfo =
minorsProtection.getMinorsProtectionInfoSync();
// 获取未成年人模式开启状态
const minorsProtectionMode: boolean = minorsProtectionInfo.minorsProtectionMode;
hilog.info(0x0000, 'testTag', `Succeeded in getting minorsProtectionMode is: ${minorsProtectionMode.valueOf()}`);
// 未成年人模式已开启，获取年龄段信息
if (minorsProtectionMode) {
const ageGroup: minorsProtection.AgeGroup | undefined = minorsProtectionInfo.ageGroup;
// 如开发者有频繁使用到未成年人模式开启状态，这里则需缓存未成年人模式开启状态
if (ageGroup) {
hilog.info(0x0000, 'testTag', `Succeeded in getting lowerAge is: ${ageGroup.lowerAge}`);
hilog.info(0x0000, 'testTag', `Succeeded in getting upperAge is: ${ageGroup.upperAge}`);
// 根据年龄段刷新内容展示。如开发者有频繁使用到年龄段信息，这里则需缓存年龄段信息
}
} else {
// 未成年人模式未开启，应用需跟随系统未成年人模式，展示内容不做限制
}
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode or getMinorsProtectionInfoSync. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the getMinorsProtectionInfoSync interface.');
}
```
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
minorsProtection.getMinorsProtectionInfo()
.then((minorsProtectionInfo: minorsProtection.MinorsProtectionInfo) => {
// 获取未成年人模式开启状态
const minorsProtectionMode: boolean = minorsProtectionInfo.minorsProtectionMode;
// 如开发者有频繁使用到未成年人模式开启状态，这里则需缓存未成年人模式开启状态
hilog.info(0x0000, 'testTag',
`Succeeded in getting minorsProtectionMode is: ${minorsProtectionMode.valueOf()}`);
// 未成年人模式已开启，获取年龄段信息
if (minorsProtectionMode) {
const ageGroup: minorsProtection.AgeGroup | undefined = minorsProtectionInfo.ageGroup;
if (ageGroup) {
hilog.info(0x0000, 'testTag', `Succeeded in getting lowerAge is: ${ageGroup.lowerAge}`);
hilog.info(0x0000, 'testTag', `Succeeded in getting upperAge is: ${ageGroup.upperAge}`);
// 根据年龄段刷新内容展示。如开发者有频繁使用到年龄段信息，这里则需缓存年龄段信息
}
} else {
// 未成年人模式未开启，应用需跟随系统未成年人模式，展示内容不做限制
}
})
.catch((error: BusinessError<Object>) => {
this.dealGetMinorsInfoAllError(error);
});
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the getMinorsProtectionInfo interface.');
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-listen-minorsprotection-V14
爬取时间: 2025-04-29 20:06:01
来源: Huawei Developer
场景介绍
1.
2.
1.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250329152410.30391221177043473035577037842436:50001231000000:2800:E31EDD4D287A1843104B9C87523B3FD94973E82FD305BFAC86DED7C64862EB96.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250329152410.30778756969218498029196098573870:50001231000000:2800:A0E47B5C84FA382FC28E0A8E5D4915BB53528CF2A8241E9353885190D86BEB83.png)
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250329152410.25599862184254664728724643246198:50001231000000:2800:A25EDD46901002B7BEC66C01C476C6A5E3466F3144ABB58360BE98AE2AEB44E3.png)
流程说明：
接口说明
以下是应用内开启/关闭系统未成年人模式相关接口说明，更多接口及使用方法请参见API参考。
| 接口名 | 描述 |
| --- | --- |
| leadToTurnOnMinorsMode(context: common.Context): Promise<void> | 调用该方法进行开启未成年人模式流程。 |
| leadToTurnOffMinorsMode(context: common.Context): Promise<void> | 调用该方法进行关闭未成年人模式流程。 |
| getMinorsProtectionInfoSync(): MinorsProtectionInfo | 同步接口，获取未成年人模式的开启状态，以及年龄段信息。 |
| getMinorsProtectionInfo(): Promise<MinorsProtectionInfo> | 异步接口，获取未成年人模式的开启状态，以及年龄段信息。 |
| verifyMinorsProtectionCredential(context: common.Context): Promise<boolean> | 调用该方法拉起验证未成年人模式密码页面。 |
接口名
描述
leadToTurnOnMinorsMode(context:common.Context): Promise<void>
调用该方法进行开启未成年人模式流程。
leadToTurnOffMinorsMode(context:common.Context): Promise<void>
调用该方法进行关闭未成年人模式流程。
getMinorsProtectionInfoSync():MinorsProtectionInfo
同步接口，获取未成年人模式的开启状态，以及年龄段信息。
getMinorsProtectionInfo(): Promise<MinorsProtectionInfo>
异步接口，获取未成年人模式的开启状态，以及年龄段信息。
verifyMinorsProtectionCredential(context:common.Context): Promise<boolean>
调用该方法拉起验证未成年人模式密码页面。
事件说明
以下是未成年人模式开启/关闭发送的广播事件。
| 事件名称 | 值 | 描述 |
| --- | --- | --- |
| COMMON_EVENT_MINORSMODE_ON | usual.event.MINORSMODE_ON | 表示未成年人模式开启动作。 |
| COMMON_EVENT_MINORSMODE_OFF | usual.event.MINORSMODE_OFF | 表示未成年人模式关闭动作。 |
事件名称
值
描述
COMMON_EVENT_MINORSMODE_ON
usual.event.MINORSMODE_ON
表示未成年人模式开启动作。
COMMON_EVENT_MINORSMODE_OFF
usual.event.MINORSMODE_OFF
表示未成年人模式关闭动作。
开发步骤
在进行代码开发前，请先确认您已完成配置Client ID工作。
```typescript
import { minorsProtection } from '@kit.AccountKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError, commonEventManager } from '@kit.BasicServicesKit';
// 以上引入的模块为当前场景的全量模块，请按照具体实现按需引入
```
```typescript
//订阅者信息
const subscribeInfo: commonEventManager.CommonEventSubscribeInfo = {
events: [commonEventManager.Support.COMMON_EVENT_MINORSMODE_ON,commonEventManager.Support.COMMON_EVENT_MINORSMODE_OFF]
};
// 如开发者使用await改写createSubscriber方法，需要把此变量定义到全局(struct外层)
let subscriber: commonEventManager.CommonEventSubscriber;
//创建订阅者
commonEventManager.createSubscriber(subscribeInfo)
.then((commonEventSubscriber: commonEventManager.CommonEventSubscriber) => {
// 这里获取到commonEventSubscriber对象需要暂存，用于后续事件回调。不可直接使用，否则会出现事件回调不生效的情况
subscriber = commonEventSubscriber;
//订阅公共事件
commonEventManager.subscribe(subscriber,
(error: BusinessError, data: commonEventManager.CommonEventData) => {
if (error) {
this.dealCommonEventAllError(error);
return;
}
if (data.event === commonEventManager.Support.COMMON_EVENT_MINORSMODE_ON) {
// 订阅到开启事件，可以调用获取年龄段的接口，根据年龄段刷新内容展示，同时如开发者有缓存年龄段或未成年人模式开启状态，则需要刷新缓存
return;
}
if (data.event === commonEventManager.Support.COMMON_EVENT_MINORSMODE_OFF) {
// 订阅到关闭事件，关闭当前应用的未成年人模式，刷新应用内容展示，取消年龄限制，如开发者有缓存未成年人模式开启状态，则需要刷新缓存
}
});
})
.catch((error: BusinessError) => {
this.dealCommonEventAllError(error);
});
```
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
const minorsProtectionInfo: minorsProtection.MinorsProtectionInfo =
minorsProtection.getMinorsProtectionInfoSync();
// 获取未成年人模式开启状态
const minorsProtectionMode: boolean = minorsProtectionInfo.minorsProtectionMode;
hilog.info(0x0000, 'testTag', `Succeeded in getting minorsProtectionMode is: ${minorsProtectionMode.valueOf()}`);
// 未成年人模式已开启，获取年龄段信息
if (minorsProtectionMode) {
const ageGroup: minorsProtection.AgeGroup | undefined = minorsProtectionInfo.ageGroup;
// 如开发者有频繁使用到未成年人模式开启状态，这里则需缓存未成年人模式开启状态
if (ageGroup) {
hilog.info(0x0000, 'testTag', `Succeeded in getting lowerAge is: ${ageGroup.lowerAge}`);
hilog.info(0x0000, 'testTag', `Succeeded in getting upperAge is: ${ageGroup.upperAge}`);
// 根据年龄段刷新内容展示。如开发者有频繁使用到年龄段信息，这里则需缓存年龄段信息
}
} else {
// 未成年人模式未开启，应用需跟随系统未成年人模式，展示内容不做限制
}
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode or getMinorsProtectionInfoSync. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the getMinorsProtectionInfoSync interface.');
}
```
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
const minorsProtectionInfo: minorsProtection.MinorsProtectionInfo =
minorsProtection.getMinorsProtectionInfoSync();
// 获取未成年人模式开启状态
const minorsProtectionMode: boolean = minorsProtectionInfo.minorsProtectionMode;
hilog.info(0x0000, 'testTag', `Succeeded in getting minorsProtectionMode is: ${minorsProtectionMode.valueOf()}`);
// 未成年人模式已开启，获取年龄段信息
if (minorsProtectionMode) {
const ageGroup: minorsProtection.AgeGroup | undefined = minorsProtectionInfo.ageGroup;
// 如开发者有频繁使用到未成年人模式开启状态，这里则需缓存未成年人模式开启状态
if (ageGroup) {
hilog.info(0x0000, 'testTag', `Succeeded in getting lowerAge is: ${ageGroup.lowerAge}`);
hilog.info(0x0000, 'testTag', `Succeeded in getting upperAge is: ${ageGroup.upperAge}`);
// 根据年龄段刷新内容展示。如开发者有频繁使用到年龄段信息，这里则需缓存年龄段信息
}
} else {
// 未成年人模式未开启，应用需跟随系统未成年人模式，展示内容不做限制
}
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode or getMinorsProtectionInfoSync. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the getMinorsProtectionInfoSync interface.');
}
```
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
minorsProtection.getMinorsProtectionInfo()
.then((minorsProtectionInfo: minorsProtection.MinorsProtectionInfo) => {
// 获取未成年人模式开启状态
const minorsProtectionMode: boolean = minorsProtectionInfo.minorsProtectionMode;
// 如开发者有频繁使用到未成年人模式开启状态，这里则需缓存未成年人模式开启状态
hilog.info(0x0000, 'testTag',
`Succeeded in getting minorsProtectionMode is: ${minorsProtectionMode.valueOf()}`);
// 未成年人模式已开启，获取年龄段信息
if (minorsProtectionMode) {
const ageGroup: minorsProtection.AgeGroup | undefined = minorsProtectionInfo.ageGroup;
if (ageGroup) {
hilog.info(0x0000, 'testTag', `Succeeded in getting lowerAge is: ${ageGroup.lowerAge}`);
hilog.info(0x0000, 'testTag', `Succeeded in getting upperAge is: ${ageGroup.upperAge}`);
// 根据年龄段刷新内容展示。如开发者有频繁使用到年龄段信息，这里则需缓存年龄段信息
}
} else {
// 未成年人模式未开启，应用需跟随系统未成年人模式，展示内容不做限制
}
})
.catch((error: BusinessError<Object>) => {
this.dealGetMinorsInfoAllError(error);
});
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the getMinorsProtectionInfo interface.');
}
```
1.
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
minorsProtection.leadToTurnOffMinorsMode(getContext(this))
.then(() => {
// 接口调用完成，如需显示弹窗，请在此处处理
})
.catch((error: BusinessError<Object>) => {
this.dealTurnOffAllError(error);
});
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the leadToTurnOffMinorsMode interface.');
}
```
2.
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
minorsProtection.leadToTurnOnMinorsMode(getContext(this))
.then(() => {
// 接口调用完成，如需显示弹窗，请在此处处理
})
.catch((error: BusinessError<Object>) => {
this.dealTurnOnAllError(error);
});
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the leadToTurnOnMinorsMode interface.');
}
```
3.
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
minorsProtection.verifyMinorsProtectionCredential(getContext(this))
.then((result: boolean) => {
hilog.info(0x0000, 'testTag', `Succeeded in getting verify result is: ${result.valueOf()}`);
// 使用结果判断验密是否通过，执行后续流程
})
.catch((error: BusinessError<Object>) => {
this.dealVerifyAllError(error);
});
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the verifyMinorsProtectionCredential interface.');
}
```
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
const minorsProtectionInfo: minorsProtection.MinorsProtectionInfo =
minorsProtection.getMinorsProtectionInfoSync();
// 获取未成年人模式开启状态
const minorsProtectionMode: boolean = minorsProtectionInfo.minorsProtectionMode;
hilog.info(0x0000, 'testTag', `Succeeded in getting minorsProtectionMode is: ${minorsProtectionMode.valueOf()}`);
// 未成年人模式已开启，获取年龄段信息
if (minorsProtectionMode) {
const ageGroup: minorsProtection.AgeGroup | undefined = minorsProtectionInfo.ageGroup;
// 如开发者有频繁使用到未成年人模式开启状态，这里则需缓存未成年人模式开启状态
if (ageGroup) {
hilog.info(0x0000, 'testTag', `Succeeded in getting lowerAge is: ${ageGroup.lowerAge}`);
hilog.info(0x0000, 'testTag', `Succeeded in getting upperAge is: ${ageGroup.upperAge}`);
// 根据年龄段刷新内容展示。如开发者有频繁使用到年龄段信息，这里则需缓存年龄段信息
}
} else {
// 未成年人模式未开启，应用需跟随系统未成年人模式，展示内容不做限制
}
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode or getMinorsProtectionInfoSync. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the getMinorsProtectionInfoSync interface.');
}
```
```typescript
if (canIUse('SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection')) {
try {
if (minorsProtection.supportMinorsMode()) {
minorsProtection.getMinorsProtectionInfo()
.then((minorsProtectionInfo: minorsProtection.MinorsProtectionInfo) => {
// 获取未成年人模式开启状态
const minorsProtectionMode: boolean = minorsProtectionInfo.minorsProtectionMode;
// 如开发者有频繁使用到未成年人模式开启状态，这里则需缓存未成年人模式开启状态
hilog.info(0x0000, 'testTag',
`Succeeded in getting minorsProtectionMode is: ${minorsProtectionMode.valueOf()}`);
// 未成年人模式已开启，获取年龄段信息
if (minorsProtectionMode) {
const ageGroup: minorsProtection.AgeGroup | undefined = minorsProtectionInfo.ageGroup;
if (ageGroup) {
hilog.info(0x0000, 'testTag', `Succeeded in getting lowerAge is: ${ageGroup.lowerAge}`);
hilog.info(0x0000, 'testTag', `Succeeded in getting upperAge is: ${ageGroup.upperAge}`);
// 根据年龄段刷新内容展示。如开发者有频繁使用到年龄段信息，这里则需缓存年龄段信息
}
} else {
// 未成年人模式未开启，应用需跟随系统未成年人模式，展示内容不做限制
}
})
.catch((error: BusinessError<Object>) => {
this.dealGetMinorsInfoAllError(error);
});
} else {
hilog.info(0x0000, 'testTag',
'The current device environment does not support the youth mode, please check the current device environment.');
}
} catch (error) {
hilog.error(0x0000, 'testTag',
`Failed to invoke supportMinorsMode. errCode: ${error.code}, errMessage: ${error.message}`);
}
} else {
hilog.info(0x0000, 'testTag',
'The current device does not support the invoking of the getMinorsProtectionInfo interface.');
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/subscribe-process-userinfo-change-V14
爬取时间: 2025-04-29 20:06:15
来源: Huawei Developer
概述
通过订阅用户信息变更，您可以接收有关用户及其账户的重要更新。当用户取消应用的授权信息、注销华为账号时，华为账号服务器会发送通知到应用服务器，应用服务器可以根据通知消息进行自身业务处理。
用户信息变更事件介绍
| 事件类型  | 事件描述  |
| --- | --- |
| https://schemas.openid.net/secevent/oauth/event-type/tokens-revoked  | 用户取消应用的授权信息  |
| https://schemas.openid.net/secevent/risc/event-type/account-purged  | 用户注销华为账号  |
事件类型
事件描述
https://schemas.openid.net/secevent/oauth/event-type/tokens-revoked
用户取消应用的授权信息
https://schemas.openid.net/secevent/risc/event-type/account-purged
用户注销华为账号
订阅用户信息变更
1.
2.
3.  回调地址：在开启订阅通知后，若华为用户信息存在变更，会通过发送消息到该地址。 订阅范围：订阅的用户信息变更事件，详见用户信息变更事件介绍。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170014.55606592951425215472237718750486:50001231000000:2800:0267D4EFAD72000339A1743A8A0C1B0A6E51090ED0D8350222F55E829F0BA81E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170014.11395586507605640287356169954964:50001231000000:2800:C5E62E399BA258479725BBAA610F0A983F09CA32DD504AC6773D437D80B69803.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170014.59898789320028476776417448451082:50001231000000:2800:B1E12FEFD268A82CA1B6A5D268DF569ECF4936014D07BF29E78E78067B1136B1.png)
处理通知消息
华为账号服务器向开发者应用服务器投递消息。开发者应用服务器接收到消息后需要先对消息头中的令牌进行验签，确保消息的完整有效性后解析并获取用户信息变更事件详情。具体步骤如下：
1.  您可通过任何JWT库（例如：jwt.io）对其进行解析与验证。 无论使用哪种库，您均需完成如下操作： 具体验签逻辑，请参考如下示例代码： Java验签代码示例
2.  消息体格式如下： 其中，各字段含义如下： 参数 描述 aud 开发者应用ID（与订阅用户信息变更中提供的应用ID一致）。 iss 消息投递者标识，固定值“id.cloud.huawei.com”。 iat 生成该事件的UTC时间戳（秒级）。 jti 唯一随机字符串，用于标识此消息体，开发者可根据此字段来识别重投消息体。 events 用户信息变更事件与事件消息体，格式为json。key是用户信息变更事件类型，value为其对应事件消息信息。 subject 用户信息变更事件对应的消息体，格式为json，包含字段说明如下：
| 参数  | 描述  |
| --- | --- |
| aud  | 开发者应用ID（与订阅用户信息变更中提供的应用ID一致）。  |
| iss  | 消息投递者标识，固定值“id.cloud.huawei.com”。  |
| iat  | 生成该事件的UTC时间戳（秒级）。  |
| jti  | 唯一随机字符串，用于标识此消息体，开发者可根据此字段来识别重投消息体。  |
| events  | 用户信息变更事件与事件消息体，格式为json。key是用户信息变更事件类型，value为其对应事件消息信息。  |
| subject  | 用户信息变更事件对应的消息体，格式为json，包含字段说明如下： sub：触发事件用户的UnionID（同一个开发者下的所有应用，此值唯一）。具体格式要求请参考OpenID和UnionID的格式说明。subject_type：固定为“iss_sub”。extra：触发事件用户的OpenID（用户在同一个应用中，此值唯一）。具体格式要求请参考OpenID和UnionID的格式说明。iss：标识消息投递者，固定为“id.cloud.huawei.com”。  |

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-faq-V14
爬取时间: 2025-04-29 20:06:29
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-faq-1-V14
爬取时间: 2025-04-29 20:06:43
来源: Huawei Developer
长度
唯一性标识
数据类型
OpenID和UnionID均是字符串类型的数据。
大小写敏感
OpenID和UnionID严格区分大小写。
实际应用中的注意事项
在存储、查询或比较OpenID或UnionID时，请务必保持其原始的大小写格式。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-faq-2-V14
爬取时间: 2025-04-29 20:06:57
来源: Huawei Developer
Access Token的有效时长是1个小时，Refresh Token的有效时长是180天。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-faq-3-V14
爬取时间: 2025-04-29 20:07:10
来源: Huawei Developer
Access Token和Refresh Token的长度与其中编码的信息有关，目前来讲Access Token和Refresh Token的长度不会超过1024字符。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-faq-4-V14
爬取时间: 2025-04-29 20:07:24
来源: Huawei Developer
单个应用在1小时内最多允许10000次调用获取应用级Access Token，超过该限制次数后失败。详细流控机制请参见华为OAuth应用级Access Token流控机制。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-faq-6-V14
爬取时间: 2025-04-29 20:07:37
来源: Huawei Developer
在华为账号一键登录场景下，获取匿名手机号为空或无法获取到明文手机号时，建议通过以下步骤排查解决：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-faq-7-V14
爬取时间: 2025-04-29 20:07:51
来源: Huawei Developer
ID Token是OIDC (OpenID Connect) 协议相对于 OAuth 2.0 协议扩展的一个用户身份凭证。
ID Token 是 JWT Token格式，意味着：
1. 用户的身份信息直接被编码进了ID Token，不需要额外请求其他的资源来获取用户信息。
2. ID Token 可以验证其是华为账号服务颁发的，携带华为账号签名信息，验证签名可证明其没有被篡改过。
使用场景
字段说明
ID Token是JWT Token格式数据，其中payload包含字段如下：
| 字段 | 参数类型 | 是否默认返回 | 描述 |
| --- | --- | --- | --- |
| iss | string | 是 | 固定值："https://accounts.huawei.com"。 |
| sub | string | 是 | 即用户的UnionID。同一个开发者下的所有应用，此参数均相同。具体格式要求请参考OpenID和UnionID的格式说明。 |
| aud | string | 是 | 接收ID Token的应用ID。 |
| exp | number | 是 | ID Token过期时间。 |
| iat | number | 是 | ID Token生成时间。 |
| at_hash | string | 是 | Access Token的哈希值。 |
| azp | string | 是 | 生成ID Token的应用ID。 |
| openid | string | 是 | 用户OpenID。具体格式要求请参考OpenID和UnionID的格式说明。 |
| nonce | string | 否 | 防重放攻击随机值。详情请参考LoginWithHuaweiIDRequest或AuthorizationWithHuaweiIDRequest 的nonce字段说明。 |
| picture | string | 否 | 用户头像图片链接。该字段返回场景：AuthorizationWithHuaweiIDRequest中的scopes包含profile。 |
| display_name | string | 否 | 华为账号对应的昵称，没有昵称则取匿名化的邮箱或手机号。该字段返回场景： AuthorizationWithHuaweiIDRequest中的scopes包含profile。 |
| nickname | string | 否 | 华为账号对应的昵称。该字段返回场景： AuthorizationWithHuaweiIDRequest中的scopes包含profile。 |
| phone | string | 否 | 华为账号绑定号码。该字段返回场景： AuthorizationWithHuaweiIDRequest中的scopes包含quickLoginMobilePhone。 |
字段
参数类型
是否默认返回
描述
iss
string
是
固定值："https://accounts.huawei.com"。
sub
string
是
即用户的UnionID。同一个开发者下的所有应用，此参数均相同。具体格式要求请参考OpenID和UnionID的格式说明。
aud
string
是
接收ID Token的应用ID。
exp
number
是
ID Token过期时间。
iat
number
是
ID Token生成时间。
at_hash
string
是
Access Token的哈希值。
azp
string
是
生成ID Token的应用ID。
openid
string
是
用户OpenID。具体格式要求请参考OpenID和UnionID的格式说明。
nonce
string
否
防重放攻击随机值。详情请参考LoginWithHuaweiIDRequest或AuthorizationWithHuaweiIDRequest
的nonce字段说明。
picture
string
否
用户头像图片链接。该字段返回场景：AuthorizationWithHuaweiIDRequest中的scopes包含profile。
display_name
string
否
华为账号对应的昵称，没有昵称则取匿名化的邮箱或手机号。该字段返回场景：
AuthorizationWithHuaweiIDRequest中的scopes包含profile。
nickname
string
否
华为账号对应的昵称。该字段返回场景：
AuthorizationWithHuaweiIDRequest中的scopes包含profile。
phone
string
否
华为账号绑定号码。该字段返回场景：
AuthorizationWithHuaweiIDRequest中的scopes包含quickLoginMobilePhone。
解析与验证
服务端解析与验证
使用场景：有服务器应用。
对于有应用服务器的应用，推荐在服务端进行ID Token解析与验证，具体参考以下Maven工程依赖配置及Java示例代码。
Maven工程依赖：
Java代码示例：
客户端解析与验证
使用场景：无服务器应用。
```typescript
import { buffer } from '@kit.ArkTS';
import { cryptoFramework } from '@kit.CryptoArchitectureKit';
import { http } from '@kit.NetworkKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
decodeBase64(data: string): string {
return buffer.from(data, 'base64').toString('utf8');
}
// 解析ID Token并验证
decodeIdToken(idToken: string): void {
const parts = idToken.split('.');
if (parts.length !== 3) {
return;
}
const idTokenObj: Record<string, Object> = {};
// ID Token头部
idTokenObj['header'] = JSON.parse(this.decodeBase64(parts[0]));
// ID Token负载
idTokenObj['payload'] = JSON.parse(this.decodeBase64(parts[1]));
// ID Token签名
idTokenObj['signature'] = parts[2];
const header: Record<string, string> = idTokenObj['header'] as Record<string, string>;
// 从负载中解析出nonce等数据
const payLoad: Record<string, string> = idTokenObj['payload'] as Record<string, string>;
const nonce: string = payLoad['nonce'];
// 应用Client ID，使用前请替换
const CLIENT_ID: string = '<应用Client ID>';
const ID_TOKEN_ISSUE: string = 'https://accounts.huawei.com';
const iss: string = payLoad['iss'];
const aud: string = payLoad['aud'];
if(iss !== ID_TOKEN_ISSUE){
// 验证失败，开发者处理失败场景
hilog.error(0x0000, 'testTag', 'Failed to check iss');
return;
}
if(aud !== CLIENT_ID){
// 验证失败，开发者处理失败场景
hilog.error(0x0000, 'testTag', 'Failed to check aud');
return;
}
// 验证签名
this.checkSignature(idToken, header['kid'], header['alg']);
}
private stringToUint8Array(str: string): Uint8Array {
const arr: number[] = [];
for (let i = 0, j = str.length; i < j; ++i) {
arr.push(str.charCodeAt(i));
}
const tmpUint8Array: Uint8Array = new Uint8Array(arr);
return tmpUint8Array;
}
// 验签方法
private checkSignature(idToken: string, kid: string, alg: string) {
if (!idToken) {
return;
}
const parts = idToken.split('.');
if (parts.length !== 3) {
return;
}
const url = 'https://oauth-login.cloud.huawei.com/oauth2/v3/certs';
// 创建http请求，应用需在module.json5文件中先申请“ohos.permission.INTERNET”网络权限，请求才能发送成功
const httpRequest = http.createHttp();
httpRequest.request(url, (err, data) => {
if (err) {
hilog.error(0x0000, 'testTag', `Failed to httpRequest. Code: ${err.code}, message: ${err.message}`);
httpRequest.destroy();
return;
}
let nStr = '';
let eStr = '';
const keys: object[] = JSON.parse(data.result as string)["keys"];
for (let item of keys) {
if (kid === item['kid']) {
nStr = item['n'];
eStr = item['e'];
break;
}
}
const nBigInt = '0x' + buffer.from(nStr, "base64url").toString('hex');
const eBigInt = '0x' + buffer.from(eStr, "base64url").toString('hex');
const dsaCommonSpec: cryptoFramework.RSACommonParamsSpec = {
algName: "RSA",
specType: cryptoFramework.AsyKeySpecType.COMMON_PARAMS_SPEC,
n: BigInt(nBigInt),
}
const rsaKeyPairSpec: cryptoFramework.RSAPubKeySpec = {
algName: "RSA",
specType: cryptoFramework.AsyKeySpecType.PUBLIC_KEY_SPEC,
params: dsaCommonSpec,
pk: BigInt(eBigInt),
}
const asyKeyGeneratorBySpec = cryptoFramework.createAsyKeyGeneratorBySpec(rsaKeyPairSpec);
asyKeyGeneratorBySpec.generatePubKey(async (error, publicKey) => {
if (error) {
return;
}
if (publicKey === null) {
return;
}
const idTokenSign = parts[2];
const idTokenSignArr: cryptoFramework.DataBlob = { data: new Uint8Array(buffer.from(idTokenSign, "base64url").buffer) };
const idToken = parts[0] + '.' + parts[1];
const idTokenArr: cryptoFramework.DataBlob = { data: this.stringToUint8Array(idToken) };
const verifier = alg === 'PS256' ? cryptoFramework.createVerify("RSA2048|PSS|SHA256|MGF1_SHA256")
: cryptoFramework.createVerify("RSA2048|PKCS1|SHA256");
verifier.init(publicKey, (initErr, result) => {
verifier.verify(idTokenArr, idTokenSignArr, (verifyErr, data) => {
// 打印验签结果，结果为true则验签通过
hilog.info(0x0000, 'testTag', 'verify result is: %{public}s', data);
});
});
})
httpRequest.destroy();
});
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-faq-8-V14
爬取时间: 2025-04-29 20:08:05
来源: Huawei Developer
开发者可以进入设置-系统-开发者选项，点击USB调试开关，会校验健康使用设备密码，校验成功后可解除开发者调试模式限制。
如开发者重新开启USB调试开关后，发现DevEco Studio工具上hilog日志未恢复到断连之前，请执行“hdc shell hilog -G 16M”来扩大hilog日志缓存区，若hilog日志仍无法完全展示，可取出hilog日志本地查看。更多命令请参见hilog。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-faq-9-V14
爬取时间: 2025-04-29 20:08:18
来源: Huawei Developer
终端设备从HarmonyOS 3.x/4.x（简称HarmonyOS）升级到HarmonyOS NEXT/5.0.x及之后版本（简称HarmonyOS NEXT）。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250329152411.59360707242063945908507621046271:50001231000000:2800:2A9A1EFA58DB3D3EF802EB4D05CAE76EC149A71EF7845FB1BA709A65D2041CF7.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-faq-10-V14
爬取时间: 2025-04-29 20:08:32
来源: Huawei Developer
推荐使用华为账号的UnionID/OpenID作为用户的主要标识，并将应用与华为账号绑定的手机号关联。华为账号的UnionID/OpenID不会发生变化，即使换绑手机号，仍然可以使用华为账号登录原来绑定的应用账号。该方式可以保障应用账号在多设备多场景多应用服务类型间（如应用、元服务等）的互联互通，保证应用的统一体验。若应用使用手机号作为用户的主要标识，如果华为账号换绑了手机号，再登录应用，就是新手机号对应的账号。华为账号一键登录详细流程请参考用户场景设计。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/account-personal-data-processing-description-V14
爬取时间: 2025-04-29 20:08:46
来源: Huawei Developer
最后修改时间：2024/9/11
此文档针对华为作为最终用户数据处理者，开发者作为最终用户数据控制者的数据处理进行说明，包括：
华为处理的个人数据清单
| 个人数据清单  | 使用目的  | 存留期  |
| --- | --- | --- |
| 账号信息  | 当用户在三方应用使用华为账号授权登录功能时，用户授权后，应用开发者可以从账号获取到账号信息（包含头像、昵称、华为账号信息以及年龄段）  | 该信息会在用户注销华为账号时删除  |
| 联系方式  | 当用户在三方应用使用华为账号授权登录功能时，用户授权后，应用开发者可以从账号获取到联系方式（手机号、邮箱地址)  |
| 发票抬头信息  | 当用户在三方应用使用华为账号获取发票抬头功能时，用户授权后，应用开发者可以从账号获取到发票抬头信息  |
| 收货地址信息  | 当用户在三方应用使用华为账号获取收货地址功能时，用户授权后，应用开发者可以从账号获取到收货地址信息  |
个人数据清单
使用目的
存留期
账号信息
当用户在三方应用使用华为账号授权登录功能时，用户授权后，应用开发者可以从账号获取到账号信息（包含头像、昵称、华为账号信息以及年龄段）
该信息会在用户注销华为账号时删除
联系方式
当用户在三方应用使用华为账号授权登录功能时，用户授权后，应用开发者可以从账号获取到联系方式（手机号、邮箱地址)
发票抬头信息
当用户在三方应用使用华为账号获取发票抬头功能时，用户授权后，应用开发者可以从账号获取到发票抬头信息
收货地址信息
当用户在三方应用使用华为账号获取收货地址功能时，用户授权后，应用开发者可以从账号获取到收货地址信息
指导开发者如何帮助最终用户实现对数据的控制
开发者通过Account Kit API获取的用户数据，需要开发者自行提供对应的数据主体权利。Account Kit存储的用户个人数据请参考《关于华为账号与隐私的声明》

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ads-kit-guide-V14
爬取时间: 2025-04-29 20:08:59
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ads-introduction-V14
爬取时间: 2025-04-29 20:09:13
来源: Huawei Developer
Ads Kit（广告服务）依托华为终端平台与数据能力为您提供流量变现服务，帮助您解决流量变现的难题；同时为广告主提供广告服务，配合华为终端平台向用户提供个性化的营销活动或商业广告。
流量变现服务
鲸鸿动能流量变现服务（以下简称流量变现服务）是广告服务依托华为终端强大的平台与数据能力为您提供的App流量变现服务，您通过该服务可以在自己的App中获取并向用户展示精美的、高价值的广告内容，并从中获得广告收益。
为满足App不同场景下的内容形式，流量变现服务为您提供了横幅广告、原生广告、激励广告、插屏广告、开屏广告、贴片广告六种广告形式。
广告标识服务
Ads Kit提供广告标识符和转化跟踪能力，方便广告平台和广告主进行个性化广告投放和广告转化渠道跟踪。
开放匿名设备标识符（Open Anonymous Device Identifier, OAID，以下简称OAID）：是一种非永久性设备标识符，基于开放匿名设备标识符，可在保护用户个人数据隐私安全的前提下，向用户提供个性化广告，同时三方监测平台也可以向广告主提供转化归因分析。
场景介绍
-  满足开发者在不同场景下，基于六种广告形式的设计需求。具体详情请参加下方表格。 广告形式 展示形式 应用场景 横幅广告 图片 以通知栏或矩形固定展示在应用内页面顶部、中部或底部，适合用于用户停留较久或者访问频繁的页面。 原生广告 图片、视频 界面内插入广告，与媒体内容无缝融合。 激励广告 视频 游戏通关、复活、获取道具、积分、继续机会、人物技能升级时等展示。 插屏广告 图片、视频 游戏或流媒体开启、暂停、过关、跳转、加载、退出时弹出。 开屏广告 图片、视频 打开App时，以开屏形式全屏展现，展示时长3s-5s，展示完毕后自动关闭并进入应用主页面。 贴片广告 图片、视频 前贴：视频播放前。 中贴：视频播放中。 后贴：视频播放结束后。 说明：您可以根据自身需求设置广告的播放时长。
-  支持广告平台、开发者、三方监测平台及广告主基于不同场景的使用。 场景 使用对象 描述 基于OAID的个性化广告 广告平台 广告平台可基于OAID，向用户提供更加个性化的营销活动或商业广告，提升转化效果。 基于OAID进行变现 开发者 您需要按照广告平台的接入流程接入广告平台，即可在华为手机上进行个性化的广告展示和流量变现。 基于OAID的转化归因分析 三方监测平台 三方监测平台可基于OAID，分析广告的曝光、点击事件和App激活、注册等后向转化交互事件，对广告投放效果进行归因分析。
| 广告形式  | 展示形式  | 应用场景  |
| --- | --- | --- |
| 横幅广告  | 图片  | 以通知栏或矩形固定展示在应用内页面顶部、中部或底部，适合用于用户停留较久或者访问频繁的页面。  |
| 原生广告  | 图片、视频  | 界面内插入广告，与媒体内容无缝融合。  |
| 激励广告  | 视频  | 游戏通关、复活、获取道具、积分、继续机会、人物技能升级时等展示。  |
| 插屏广告  | 图片、视频  | 游戏或流媒体开启、暂停、过关、跳转、加载、退出时弹出。  |
| 开屏广告  | 图片、视频  | 打开App时，以开屏形式全屏展现，展示时长3s-5s，展示完毕后自动关闭并进入应用主页面。  |
| 贴片广告  | 图片、视频  | 前贴：视频播放前。 中贴：视频播放中。 后贴：视频播放结束后。 说明：您可以根据自身需求设置广告的播放时长。  |
| 场景  | 使用对象  | 描述  |
| --- | --- | --- |
| 基于OAID的个性化广告  | 广告平台  | 广告平台可基于OAID，向用户提供更加个性化的营销活动或商业广告，提升转化效果。  |
| 基于OAID进行变现  | 开发者  | 您需要按照广告平台的接入流程接入广告平台，即可在华为手机上进行个性化的广告展示和流量变现。  |
| 基于OAID的转化归因分析  | 三方监测平台  | 三方监测平台可基于OAID，分析广告的曝光、点击事件和App激活、注册等后向转化交互事件，对广告投放效果进行归因分析。  |
功能使用限制
| 业务  | 功能  | 支持设备类型  | 使用限制说明  |
| --- | --- | --- | --- |
| 流量变现服务  | 横幅广告尺寸设置  | 华为手机、华为平板  | 在中国境内（不包含中国香港、中国澳门、中国台湾）暂只支持宽360vp* 高57vp和宽360vp*高144vp。  |
| 接入媒体限制  | 华为手机、华为平板  | 中国境内（不包含中国香港、中国澳门、中国台湾），与华为联运的游戏应用禁止接入鲸鸿动能平台以外的其他广告平台、插件、SDK等。其他类型的应用允许接入鲸鸿动能平台且不受此限制。  |
| 广告标识服务  | OAID、App转化跟踪参数  | 华为手机、华为平板、华为2in1  | 当前仅支持中国境内（不包含中国香港、中国澳门、中国台湾）。  |
业务
功能
支持设备类型
使用限制说明
流量变现服务
横幅广告尺寸设置
华为手机、华为平板
在中国境内（不包含中国香港、中国澳门、中国台湾）暂只支持宽360vp* 高57vp和宽360vp*高144vp。
接入媒体限制
华为手机、华为平板
中国境内（不包含中国香港、中国澳门、中国台湾），与华为联运的游戏应用禁止接入鲸鸿动能平台以外的其他广告平台、插件、SDK等。其他类型的应用允许接入鲸鸿动能平台且不受此限制。
广告标识服务
OAID、App转化跟踪参数
华为手机、华为平板、华为2in1
当前仅支持中国境内（不包含中国香港、中国澳门、中国台湾）。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ads-publisher-service-dev-V14
爬取时间: 2025-04-29 20:09:27
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ads-publisher-service-dev-overview-V14
爬取时间: 2025-04-29 20:09:40
来源: Huawei Developer
流量变现服务是依托华为终端强大的平台与数据能力为您提供的App流量变现服务，依托HarmonyOS系统让您无需集成SDK，轻松实现广告的接入，您通过该服务可以在自己的App中获取并向用户展示精美的、高价值的广告内容，并从中获得广告收益，帮助您解决流量变现的难题。
产品优势
-  拥有海量高价值用户，提供更高的变现价值。
-  依托终端平台能力，用户触达更精准，实现高效变现。
-  与设备OS系统一致的广告UI设计，用户体验更佳。
业务价值
-  海量优质广告主，充足的填充率，高竞争力的eCPM；极具优势的分成和激励政策，高额的收入回报。
-  主流广告场景，灵活满足展示需求；统一UI设计，适配各类华为终端设备，提供一致性品牌展示。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ads-publisher-service-banner-V14
爬取时间: 2025-04-29 20:09:54
来源: Huawei Developer
场景介绍
横幅广告又名Banner广告，是在应用程序顶部、中部或底部占据一个位置的矩形图片，广告内容每隔一段时间会自动刷新。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170015.83669783844475271737285116026799:50001231000000:2800:51B19EB31A691B303005D62A5E74C75FCC0CCFA1BC49B38D48DD794F411ECD43.png)
接口说明
| 接口名  | 描述  |
| --- | --- |
| AutoAdComponent(adParam: advertising.AdRequestParams, adOptions: advertising.AdOptions, displayOptions: advertising.AdDisplayOptions, interactionListener: advertising.AdInteractionListener): void  | 展示广告，通过AdRequestParams、AdOptions进行广告请求参数设置，通过AdDisplayOptions进行广告展示参数设置，通过AdInteractionListener监听广告状态回调。  |
接口名
描述
AutoAdComponent(adParam: advertising.AdRequestParams, adOptions: advertising.AdOptions, displayOptions: advertising.AdDisplayOptions, interactionListener: advertising.AdInteractionListener): void
展示广告，通过AdRequestParams、AdOptions进行广告请求参数设置，通过AdDisplayOptions进行广告展示参数设置，通过AdInteractionListener监听广告状态回调。
开发步骤
1.  如果想要为用户更精准的推送广告，可以在请求参数AdRequestParams中添加oaid属性以提升广告推送精准度和广告填充率。 如何获取OAID参考获取OAID信息。 使用以下示例中提供的测试广告位必须先获取OAID信息。
2.  在您的页面中使用AutoAdComponent组件展示横幅广告。 请求广告关键参数如下所示： 请求广告参数名 类型 必填 说明 adType number 是 请求广告类型，横幅广告类型为8。 adId string 是 广告位ID。 adWidth number 是 广告位宽，单位vp。宽和高支持360*57和360*144两种尺寸。 adHeight number 是 广告位高，单位vp。宽和高支持360*57和360*144两种尺寸。 oaid string 否 开放匿名设备标识符，用于精准推送广告。不填无法获取到个性化广告。 展示广告关键参数如下所示： 展示广告参数名 类型 必填 说明 refreshTime number 否 横幅广告轮播时间。单位ms，取值范围[30000, 120000]。 如果不设置或取值为非数字或小于等于0的数字，则不轮播。设置小于30000的数字取值30000，设置大于120000的数字取值120000。
```typescript
import { advertising, AutoAdComponent, identifier } from '@kit.AdsKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
@Entry
@Component
struct Index {
@State adParam: advertising.AdRequestParams = {
// 广告类型：横幅广告
adType: 8,
// 'testw6vs28auh3'为测试专用的广告位ID，App正式发布时需要改为正式的广告位ID
adId: 'testw6vs28auh3',
// 广告位宽
adWidth: 360,
// 广告位高
adHeight: 57,
// 开放匿名设备标识符
oaid: ''
};
private adOptions: advertising.AdOptions = {
// 是否允许流量下载0：不允许，1：允许，不设置以广告主设置为准
allowMobileTraffic: 0,
// 是否希望根据 COPPA 的规定将您的内容视为面向儿童的内容: -1默认值，不确定 0不希望 1希望
tagForChildProtection: -1,
// 是否希望按适合未达到法定承诺年龄的欧洲经济区 (EEA) 用户的方式处理该广告请求： -1默认值，不确定 0不希望 1希望
tagForUnderAgeOfPromise: -1,
// 设置广告内容分级上限: W: 3+,所有受众 PI: 7+,家长指导 J:12+,青少年 A: 16+/18+，成人受众
adContentClassification: 'A'
};
private displayOptions: advertising.AdDisplayOptions = {
// 广告轮播的时间间隔，单位ms，取值范围[30000, 120000]
refreshTime: 30000
}
private ratio: number = 1;
private adWidth: number = -1;
private adHeight: number = -1;
@State visibilityState: Visibility = Visibility.Visible;
aboutToAppear() {
try {
// 使用Promise回调方式获取OAID
identifier.getOAID().then((data) => {
this.adParam.oaid = data;
hilog.info(0x0000, 'testTag', '%{public}s', `Succeeded in getting adsIdentifierInfo by promise`);
}).catch((error: BusinessError) => {
hilog.error(0x0000, 'testTag', '%{public}s',
`Failed to get adsIdentifierInfo, code: ${error.code}, message: ${error.message}`);
})
} catch (error) {
hilog.error(0x0000, 'testTag', '%{public}s', `Catch err, code: ${error.code}, message: ${error.message}`);
}
if (this.adParam?.adWidth && typeof (this.adParam?.adWidth) === 'number' && this.adParam?.adWidth > 0) {
this.adWidth = this.adParam?.adWidth;
}
if (this.adParam?.adHeight && typeof (this.adParam?.adHeight) === 'number' && this.adParam?.adHeight > 0) {
this.adHeight = this.adParam?.adHeight;
}
if (this.adWidth > 0 && this.adHeight > 0) {
this.ratio = this.adWidth / this.adHeight;
}
}
build() {
if (this.adParam.oaid) {
Stack({ alignContent: Alignment.Bottom }) {
this.buildBannerView()
}
}
}
@Builder
buildBannerView() {
Row() {
AutoAdComponent({
adParam: this.adParam,
adOptions: this.adOptions,
displayOptions: this.displayOptions,
interactionListener: {
onStatusChanged: (status: string, ad: advertising.Advertisement, data: string) => {
hilog.info(0x0000, 'testTag', '%{public}s', `status is ${status}`);
switch (status) {
case AdStatus.AD_OPEN:
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onAdOpen');
break;
case AdStatus.AD_CLICKED:
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onAdClick');
break;
case AdStatus.AD_CLOSED:
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onAdClose');
this.visibilityState = Visibility.None;
break;
case AdStatus.AD_LOAD:
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onAdLoad');
break;
case AdStatus.AD_FAIL:
hilog.error(0x0000, 'testTag', '%{public}s', 'Status is onAdFail');
this.visibilityState = Visibility.None;
break;
}
}
}
})
}
.width('100%')
.aspectRatio(this.ratio)
.visibility(this.visibilityState)
}
}
enum AdStatus {
AD_LOAD = 'onAdLoad',
AD_FAIL = 'onAdFail',
AD_OPEN = 'onAdOpen',
AD_CLICKED = 'onAdClick',
AD_CLOSED = 'onAdClose',
AD_REWARDED = 'onAdReward',
AD_VIDEO_START = 'onVideoPlayBegin',
AD_COMPLETED = 'onVideoPlayEnd'
}
```
| 请求广告参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| adType  | number  | 是  | 请求广告类型，横幅广告类型为8。  |
| adId  | string  | 是  | 广告位ID。 如果仅调测广告，可使用测试广告位ID：testw6vs28auh3。如果要接入正式广告，则需要申请正式的广告位ID。可在应用发布前进入流量变现官网，点击“开始变现”，登录鲸鸿动能媒体服务平台进行申请，具体操作详情请参见展示位创建。  |
| adWidth  | number  | 是  | 广告位宽，单位vp。宽和高支持360*57和360*144两种尺寸。  |
| adHeight  | number  | 是  | 广告位高，单位vp。宽和高支持360*57和360*144两种尺寸。  |
| oaid  | string  | 否  | 开放匿名设备标识符，用于精准推送广告。不填无法获取到个性化广告。  |
| 展示广告参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| refreshTime  | number  | 否  | 横幅广告轮播时间。单位ms，取值范围[30000, 120000]。 如果不设置或取值为非数字或小于等于0的数字，则不轮播。设置小于30000的数字取值30000，设置大于120000的数字取值120000。  |

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ads-publisher-service-native-V14
爬取时间: 2025-04-29 20:10:08
来源: Huawei Developer
场景介绍
原生广告是与应用内容融于一体的广告，通过“和谐”的内容呈现广告信息，在不破坏用户体验的前提下，为用户提供有价值的信息，展示形式包含图片和视频，支持您自由定制界面。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150018.96989932615991829615863754028744:50001231000000:2800:CBAACBC08B1445B855E504547E6C931A9C993D27CDBC32A720561DEAA9D58916.png)
接口说明
| 接口名  | 描述  |
| --- | --- |
| loadAd(adParam: AdRequestParams, adOptions: AdOptions, listener: AdLoadListener): void  | 请求单广告位广告，通过AdRequestParams、AdOptions进行广告请求参数设置，通过AdLoadListener监听广告请求回调。  |
| loadAdWithMultiSlots(adParams: AdRequestParams[], adOptions: AdOptions, listener: MultiSlotsAdLoadListener): void  | 请求多广告位广告，通过AdRequestParams[]、AdOptions进行广告请求参数设置，通过MultiSlotsAdLoadListener监听广告请求回调。  |
| AdComponent(ads: advertising.Advertisement[], displayOptions: advertising.AdDisplayOptions, interactionListener: advertising.AdInteractionListener, @BuilderParam adRenderer?: () => void): void  | 展示广告，通过AdDisplayOptions进行广告展示参数设置，通过AdInteractionListener监听广告状态回调。 说明为了保证广告能正确展示，该接口必须和请求广告接口配套使用。   |
接口名
描述
loadAd(adParam: AdRequestParams, adOptions: AdOptions, listener: AdLoadListener): void
请求单广告位广告，通过AdRequestParams、AdOptions进行广告请求参数设置，通过AdLoadListener监听广告请求回调。
loadAdWithMultiSlots(adParams: AdRequestParams[], adOptions: AdOptions, listener: MultiSlotsAdLoadListener): void
请求多广告位广告，通过AdRequestParams[]、AdOptions进行广告请求参数设置，通过MultiSlotsAdLoadListener监听广告请求回调。
AdComponent(ads: advertising.Advertisement[], displayOptions: advertising.AdDisplayOptions, interactionListener: advertising.AdInteractionListener, @BuilderParam adRenderer?: () => void): void
展示广告，通过AdDisplayOptions进行广告展示参数设置，通过AdInteractionListener监听广告状态回调。
为了保证广告能正确展示，该接口必须和请求广告接口配套使用。
开发步骤
1.  如果想要为用户更精准的推送广告，可以在请求参数AdRequestParams中添加oaid属性。 如何获取OAID参见获取OAID信息。 使用以下示例中提供的测试广告位必须先获取OAID信息。
2.  请求单广告位广告，需要创建一个AdLoader对象，通过AdLoader的loadAd方法请求广告，最后通过AdLoadListener，来监听广告的加载状态。 如果想要为用户更精准的推送广告，可以在请求参数AdRequestParams中添加oaid属性。 请求广告参数名 类型 必填 说明 adType number 是 请求广告类型，原生广告类型为3。 adId string 是 广告位ID。 oaid string 否 开放匿名设备标识符，用于精准推送广告。不填无法获取到个性化广告。
3.  用户关闭广告或点负反馈，需要处理AD_CLOSED回调。 在您的页面中使用AdComponent组件展示原生广告。您需要在entry/src/main/resources/base/profile/main_pages.json文件中添加pages/NativeAdPage页面，如下图所示。 示例代码如下所示：
| 请求广告参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| adType  | number  | 是  | 请求广告类型，原生广告类型为3。  |
| adId  | string  | 是  | 广告位ID。 如果仅调测广告，可使用测试广告位ID：testy63txaom86（原生视频），testu7m3hc4gvm（原生大图），testb65czjivt9（原生小图），testr6w14o0hqz（原生三图）。如果要接入正式广告，则需要申请正式的广告位ID。可在应用发布前进入流量变现官网，点击“开始变现”，登录鲸鸿动能媒体服务平台进行申请，具体操作详情请参见展示位创建。  |
| oaid  | string  | 否  | 开放匿名设备标识符，用于精准推送广告。不填无法获取到个性化广告。  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150018.09721957431041007106224562479444:50001231000000:2800:25E8404458D03E9604A487FC2B9D75E1A884F814E5F815A8E5680768AEA2C44A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150019.38702089165431432576647067147631:50001231000000:2800:425B5B6E2D9DC93D90FF4B40F651FD708CB70B5C00D130A61347F4D97B91DFEF.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ads-publisher-service-interstitial-V14
爬取时间: 2025-04-29 20:11:34
来源: Huawei Developer
场景介绍
插屏广告是一种在应用开启、暂停或退出时以全屏或半屏的形式弹出的广告形式，展示时机巧妙避开用户对应用的正常体验，尺寸大，曝光效果好。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170016.78634231098635623786653397482266:50001231000000:2800:E5C74A4D5EB6CE35CA011791CE0444383BBD8CF60ACCE377DEEC721FFC6C47EE.png)
接口说明
| 接口名  | 描述  |
| --- | --- |
| loadAd(adParam: AdRequestParams, adOptions: AdOptions, listener: AdLoadListener): void  | 请求单广告位广告，通过AdRequestParams、AdOptions进行广告请求参数设置，通过AdLoadListener监听广告请求回调。  |
| showAd(ad: Advertisement, options: AdDisplayOptions, context?: common.UIAbilityContext): void  | 展示广告，通过AdDisplayOptions进行广告展示参数设置。 说明为了保证广告能正确展示，该接口必须和请求广告接口配套使用。   |
接口名
描述
loadAd(adParam: AdRequestParams, adOptions: AdOptions, listener: AdLoadListener): void
请求单广告位广告，通过AdRequestParams、AdOptions进行广告请求参数设置，通过AdLoadListener监听广告请求回调。
showAd(ad: Advertisement, options: AdDisplayOptions, context?: common.UIAbilityContext): void
展示广告，通过AdDisplayOptions进行广告展示参数设置。
为了保证广告能正确展示，该接口必须和请求广告接口配套使用。
开发步骤
1.  如果想要为用户更精准的推送广告，可以在请求参数AdRequestParams中添加oaid属性。 如何获取OAID参见获取OAID信息。 使用以下示例中提供的测试广告位必须先获取OAID信息。
2.  需要先创建一个AdLoader对象，通过AdLoader的loadAd方法请求广告，最后通过AdLoadListener来监听广告的加载状态。 请求广告关键参数如下所示： 请求广告参数名 类型 必填 说明 adType number 是 请求广告类型，插屏广告类型为12。 adId string 是 广告位ID。 oaid string 否 开放匿名设备标识符，用于精准推送广告。不填无法获取到个性化广告。 示例代码如下所示：
```typescript
import { advertising, identifier } from '@kit.AdsKit';
import { common } from '@kit.AbilityKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
@Entry
@Component
struct Index {
private ads: Array<advertising.Advertisement> = [];
private context = getContext(this) as common.UIAbilityContext;
private oaid: string = '';
aboutToAppear() {
try {
// 使用Promise回调方式获取OAID
identifier.getOAID().then((data) => {
this.oaid = data;
hilog.info(0x0000, 'testTag', '%{public}s', 'Succeeded in getting adsIdentifierInfo by promise');
}).catch((error: BusinessError) => {
hilog.error(0x0000, 'testTag', '%{public}s', `Failed to get adsIdentifierInfo, message: ${error.message}`);
})
} catch (error) {
hilog.error(0x0000, 'testTag', '%{public}s', `Catch err, code: ${error.code}, message: ${error.message}`);
}
}
build() {
Flex({ direction: FlexDirection.Column, alignItems: ItemAlign.Center, justifyContent: FlexAlign.Center }) {
Row() {
Button('requestAd').onClick(() => {
let load: advertising.AdLoader = new advertising.AdLoader(this.context);
this.requestAd(load);
}).width('45%')
}
}
}
private requestAd(adLoader: advertising.AdLoader): void {
const adRequestParam: advertising.AdRequestParams = {
// 广告类型：插屏广告
adType: 12,
// 'testb4znbuh3n2'为测试专用的广告位ID，App正式发布时需要改为正式的广告位ID
adId: 'testb4znbuh3n2',
// 开放匿名设备标识符
oaid: this.oaid
};
const adOption: advertising.AdOptions = {
// 设置是否请求非个性化广告
nonPersonalizedAd: 0,
// 是否允许流量下载0：不允许，1：允许，不设置以广告主设置为准
allowMobileTraffic: 0,
// 是否希望根据 COPPA 的规定将您的内容视为面向儿童的内容: -1默认值，不确定 0不希望 1希望
tagForChildProtection: -1,
// 是否希望按适合未达到法定承诺年龄的欧洲经济区 (EEA) 用户的方式处理该广告请求： -1默认值，不确定 0不希望 1希望
tagForUnderAgeOfPromise: -1,
// 设置广告内容分级上限: W: 3+,所有受众 PI: 7+,家长指导 J:12+,青少年 A: 16+/18+，成人受众
adContentClassification: 'A'
};
const adLoaderListener: advertising.AdLoadListener = {
onAdLoadFailure: (errorCode: number, errorMsg: string) => {
hilog.error(0x0000, 'testTag', '%{public}s',
`Failed to request ad, message: ${errorMsg}, error code: ${errorCode}`);
},
onAdLoadSuccess: (ads: Array<advertising.Advertisement>) => {
hilog.info(0x0000, 'testTag', '%{public}s', 'Succeeded in requesting ad!');
this.ads = [];
this.ads.push(...ads);
},
};
adLoader.loadAd(adRequestParam, adOption, adLoaderListener);
}
}
```
3.  开发者需要在App中订阅com.huawei.hms.pps.action.PPS_INTERSTITIAL_STATUS_CHANGED事件来监听插屏广告页面变化并接收插屏信息。示例代码中的订阅方法registerPPSReceiver()需要在每次展示广告前调用 。 在订阅到公共事件后，可以从CommonEventData的parameters参数中使用"interstitial_ad_status"作为key值获取插屏广告页面变化状态。 示例代码如下所示：
```typescript
import { commonEventManager, BusinessError } from '@kit.BasicServicesKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
const KEY_INTERSTITIAL_STATUS = 'interstitial_ad_status';
export class InterstitialAdStatusHandler {
// 用于保存创建成功的订阅者对象，后续使用其完成订阅及退订的动作
private subscriber: commonEventManager.CommonEventSubscriber | null = null;
// 订阅方法，需要在每次展示广告前调用
public registerPPSReceiver(): void {
if (this.subscriber) {
this.unRegisterPPSReceiver();
}
// 订阅者信息
const subscribeInfo: commonEventManager.CommonEventSubscribeInfo = {
events: ['com.huawei.hms.pps.action.PPS_INTERSTITIAL_STATUS_CHANGED'],
publisherBundleName: 'com.huawei.hms.adsservice'
};
// 创建订阅者回调
commonEventManager.createSubscriber(subscribeInfo,
(err: BusinessError, commonEventSubscriber: commonEventManager.CommonEventSubscriber) => {
if (err) {
hilog.error(0x0000, 'testTag', '%{public}s', `CreateSubscriber error, ${err.code}, message: ${err.message}}`);
return;
}
hilog.info(0x0000, 'testTag', '%{public}s', 'Succeeded in creating subscriber');
this.subscriber = commonEventSubscriber;
// 订阅公共事件回调
if (!this.subscriber) {
hilog.warn(0x0000, 'testTag', '%{public}s', 'Need to create subscriber');
return;
}
commonEventManager.subscribe(this.subscriber,
(err: BusinessError, commonEventData: commonEventManager.CommonEventData) => {
if (err) {
hilog.error(0x0000, 'testTag', '%{public}s', `Subscribe error, ${err.code}, message: ${err.message}`);
} else {
// 订阅者成功接收到公共事件
hilog.info(0x0000, 'testTag', '%{public}s', 'Succeeded subscribing data');
// 获取插屏广告页面变化状态
const status: string = commonEventData?.parameters?.[KEY_INTERSTITIAL_STATUS];
switch (status) {
case AdStatus.AD_OPEN:
hilog.info(0x0000, 'testTag', '%{public}s', 'onAdOpen');
break;
case AdStatus.AD_CLICKED:
hilog.info(0x0000, 'testTag', '%{public}s', 'onAdClick');
break;
case AdStatus.AD_CLOSED:
hilog.info(0x0000, 'testTag', '%{public}s', 'onAdClose');
this.unRegisterPPSReceiver();
break;
case AdStatus.AD_VIDEO_START:
hilog.info(0x0000, 'testTag', '%{public}s', 'onAdVideoStart');
break;
case AdStatus.AD_COMPLETED:
hilog.info(0x0000, 'testTag', '%{public}s', 'onAdCompleted');
break;
default:
break;
}
}
});
});
}
// 取消订阅
public unRegisterPPSReceiver(): void {
commonEventManager.unsubscribe(this.subscriber, (err: BusinessError) => {
if (err) {
hilog.error(0x0000, 'testTag', '%{public}s', `Unsubscribe error, ${err.code}, message: ${err.message}}`);
} else {
hilog.info(0x0000, 'testTag', '%{public}s', 'Succeeded in unsubscribing');
this.subscriber = null;
}
});
}
}
enum AdStatus {
AD_OPEN = 'onAdOpen',
AD_CLICKED = 'onAdClick',
AD_CLOSED = 'onAdClose',
AD_VIDEO_START = 'onVideoPlayBegin',
AD_COMPLETED = 'onVideoPlayEnd'
}
```
4.  ads为步骤2请求到的广告信息，调用showAd方法来展示广告。示例代码如下所示：
```typescript
import { advertising } from '@kit.AdsKit';
import { common } from '@kit.AbilityKit';
@Entry
@Component
struct Index {
private context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
// 步骤2中请求到的广告内容
private ads: Array<advertising.Advertisement> = [];
private displayOptions: advertising.AdDisplayOptions = {
// 插屏广告视频播放是否静音
mute: true
};
build() {
Flex({ direction: FlexDirection.Column, alignItems: ItemAlign.Center, justifyContent: FlexAlign.Center }) {
Row() {
Button('showAd').onClick(() => {
this.showAd();
}).width('45%')
}
}
}
private showAd() {
// 请在此处自行增加步骤3中的，注册插屏广告状态监听器
// ...
// 此处ads[0]表示请求到的第一个广告，用户根据实际情况选择
advertising.showAd(this.ads[0], this.displayOptions, this.context);
}
}
```
| 请求广告参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| adType  | number  | 是  | 请求广告类型，插屏广告类型为12。  |
| adId  | string  | 是  | 广告位ID。 如果仅调测广告，可使用测试广告位ID：testb4znbuh3n2。如果要接入正式广告，则需要申请正式的广告位ID。可在应用发布前进入流量变现官网，点击“开始变现”，登录鲸鸿动能媒体服务平台进行申请，具体操作详情请参见展示位创建。  |
| oaid  | string  | 否  | 开放匿名设备标识符，用于精准推送广告。不填无法获取到个性化广告。  |

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ads-publisher-service-splash-V14
爬取时间: 2025-04-29 20:11:48
来源: Huawei Developer
场景介绍
开屏广告是一种在应用启动时且在应用主界面显示之前需要被展示的广告。您需要预先为App设计一张开屏默认的Slogan图片，确保在未获得到开屏广告之前展示默认的Slogan，提供良好的用户体验。
开屏广告分为全屏开屏广告、半屏开屏广告，其中全屏开屏广告展示形式为广告铺满整个页面；半屏开屏广告展示形式会根据媒体页面自定义布局渲染广告、icon和版权信息，一般情况下建议将icon和版权信息展示在广告下方。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170017.23567335203268471044228819705333:50001231000000:2800:D10A01F7C55C56032094C291478DCE244002A5999A6EAE77E29FEB50E61DBEE3.png)
接口说明
| 接口名  | 描述  |
| --- | --- |
| loadAd(adParam: AdRequestParams, adOptions: AdOptions, listener: AdLoadListener): void  | 请求单广告位广告，通过AdRequestParams、AdOptions进行广告请求参数设置，通过AdLoadListener监听广告请求回调。  |
| AdComponent(ads: advertising.Advertisement[], displayOptions: advertising.AdDisplayOptions, interactionListener: advertising.AdInteractionListener, @BuilderParam adRenderer?: () => void): void  | 展示广告，通过AdDisplayOptions进行广告展示参数设置，通过AdInteractionListener监听广告状态回调。 说明为了保证广告能正确展示，该接口必须和请求广告接口配套使用。   |
接口名
描述
loadAd(adParam: AdRequestParams, adOptions: AdOptions, listener: AdLoadListener): void
请求单广告位广告，通过AdRequestParams、AdOptions进行广告请求参数设置，通过AdLoadListener监听广告请求回调。
AdComponent(ads: advertising.Advertisement[], displayOptions: advertising.AdDisplayOptions, interactionListener: advertising.AdInteractionListener, @BuilderParam adRenderer?: () => void): void
展示广告，通过AdDisplayOptions进行广告展示参数设置，通过AdInteractionListener监听广告状态回调。
为了保证广告能正确展示，该接口必须和请求广告接口配套使用。
开发步骤
1.  如果想要为用户更精准的推送广告，可以在请求参数AdRequestParams中添加oaid属性。 如何获取OAID参见获取OAID信息。 使用以下示例中提供的测试广告位必须先获取OAID信息。
2.  需要创建一个AdLoader对象，通过AdLoader的loadAd方法请求广告，最后通过AdLoadListener来监听广告的加载状态。测试开屏广告时，需要使用专门的测试广告位来获取测试开屏广告，示例代码中提供了两种开屏广告类型对应的广告位：半屏开屏（图片）（testq6zq98hecj）和全屏开屏（视频）（testd7c5cewoj6），测试广告位ID仅作为调试使用，不可用于广告变现。 请求广告关键参数如下所示： 请求广告参数名 类型 必填 说明 adType number 是 请求广告类型，开屏广告类型为1。 adId string 是 广告位ID。 adCount number 否 广告数量。 返回广告参数名 类型 说明 isFullScreen boolean 标识返回的广告是否为全屏，true为全屏广告，false为半屏广告。 示例代码如下所示： 1. 请求广告之前需要展示默认的Slogan图片，在请求广告时，在onAdLoadSuccess回调中切换展示广告页面。如果超时没有请求到广告，应用自行跳到默认首页。 2. 为保证开屏展示效果，建议开发者在请求广告前，设置屏幕方向为竖屏。
3.  1、由在步骤2请求广告中获取的isFullScreen参数判断展示全屏或者半屏广告，同时媒体可在AdComponent中绘制自身的半屏部分，可参考展示半屏代码。 2、在枚举的AdStatus状态中，媒体可根据各种状态来进行下一步操作，如在AD_CLOSED时展示首页。 3、目前只支持展示竖屏广告。 在您的页面中使用AdComponent组件展示开屏广告。示例代码如下所示： 您需要在entry/src/main/resources/base/profile/main_pages.json文件中添加页面，如下图所示。 展示半屏广告： 展示全屏广告：
```typescript
import { Prompt, router } from '@kit.ArkUI';
import { advertising, AdComponent } from '@kit.AdsKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
@Entry
@Component
struct SplashHalfScreenAdPage {
private ads: Array<advertising.Advertisement> = [];
private displayOptions?: advertising.AdDisplayOptions;
aboutToAppear() {
hilog.info(0x0000, 'testTag', '%{public}s', 'Start to splashHalfScreenAdPage aboutToAppear');
const params: Record<string, Object> = router.getParams() as Record<string, Object>;
if (params && params.ads as Array<advertising.Advertisement> &&
params.displayOptions as advertising.AdDisplayOptions) {
this.ads = params.ads as Array<advertising.Advertisement>;
this.displayOptions = params.displayOptions as advertising.AdDisplayOptions;
} else {
hilog.info(0x0000, 'testTag', '%{public}s', 'Router params are empty');
}
}
build() {
Column() {
// 运行在提供方进程里
AdComponent({
ads: this.ads, displayOptions: this.displayOptions,
interactionListener: {
onStatusChanged: (status: string, ad: advertising.Advertisement, data: string) => {
switch (status) {
case AdStatus.AD_OPEN:
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onAdOpen');
Prompt.showToast({
message: 'splash ad open',
duration: 1000
});
break;
case AdStatus.AD_CLICKED:
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onAdClick');
Prompt.showToast({
message: 'splash ad click',
duration: 1000
});
break;
case AdStatus.AD_CLOSED:
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onAdClose');
Prompt.showToast({
message: 'splash ad close',
duration: 1000
});
router.replaceUrl({
url: 'pages/Index',
})
break;
}
}
}
})
.width('100%')
.height('87%')
// 展示媒体自定义icon、应用名称、版权信息
Column({}) {
Row() {
Image($r('app.media.video')).width(24).height(24).margin({ right: 8 })
Text($r('app.string.video')).fontColor('#1A1A1A').fontSize(16).width(32).height(21)
}.margin({ bottom: 8 })
Column() {
Text($r('app.string.copyright')).fontColor('#1A1A1A').fontSize(9).height(15)
}
}.width('100%').height('100%')
}
}
}
export enum AdStatus {
AD_OPEN = 'onAdOpen',
AD_CLICKED = 'onAdClick',
AD_CLOSED = 'onAdClose'
}
```
| 请求广告参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| adType  | number  | 是  | 请求广告类型，开屏广告类型为1。  |
| adId  | string  | 是  | 广告位ID。 如果仅调测广告，可使用测试广告位ID：testq6zq98hecj半屏开屏（图片）和testd7c5cewoj6全屏开屏（视频）。如果要接入正式广告，则需要申请正式的广告位ID。可在应用发布前进入流量变现官网，点击“开始变现”，登录鲸鸿动能媒体服务平台进行申请，具体操作详情请参见展示位创建。  |
| adCount  | number  | 否  | 广告数量。  |
| 返回广告参数名  | 类型  | 说明  |
| --- | --- | --- |
| isFullScreen  | boolean  | 标识返回的广告是否为全屏，true为全屏广告，false为半屏广告。  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170017.47216425572830020153302938325096:50001231000000:2800:41FDE18DF5E5DFC59E0BCB3EE4AA6A140AFE27C789594FDAB8DE73103AEF201A.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ads-publisher-service-roll-V14
爬取时间: 2025-04-29 20:12:03
来源: Huawei Developer
场景介绍
贴片广告是一种在视频播放前、视频播放中或视频播放结束后插入的视频或图片广告。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170017.76650625257953328039194511923018:50001231000000:2800:DD1AC37A936783CF5F2CF7CFC912F01E2E50C762486FE1E4D1433C27D732564A.png)
接口说明
| 接口名  | 描述  |
| --- | --- |
| loadAd(adParam: AdRequestParams, adOptions: AdOptions, listener: AdLoadListener): void  | 请求单广告位广告，通过AdRequestParams、AdOptions进行广告请求参数设置，通过AdLoadListener监听广告请求回调。  |
| AdComponent(ads: advertising.Advertisement[], displayOptions: advertising.AdDisplayOptions, interactionListener: advertising.AdInteractionListener, @BuilderParam adRenderer?: () => void): void  | 展示广告，通过AdDisplayOptions进行广告展示参数设置，通过AdInteractionListener监听广告状态回调。 说明为了保证广告能正确展示，该接口必须和请求广告接口配套使用。   |
接口名
描述
loadAd(adParam: AdRequestParams, adOptions: AdOptions, listener: AdLoadListener): void
请求单广告位广告，通过AdRequestParams、AdOptions进行广告请求参数设置，通过AdLoadListener监听广告请求回调。
AdComponent(ads: advertising.Advertisement[], displayOptions: advertising.AdDisplayOptions, interactionListener: advertising.AdInteractionListener, @BuilderParam adRenderer?: () => void): void
展示广告，通过AdDisplayOptions进行广告展示参数设置，通过AdInteractionListener监听广告状态回调。
为了保证广告能正确展示，该接口必须和请求广告接口配套使用。
开发步骤
1.  如果想要为用户更精准的推送广告，可以在请求参数AdRequestParams中添加oaid属性。 如何获取OAID参见获取OAID信息。 使用以下示例中提供的测试广告位必须先获取OAID信息。
2.  需要创建一个AdLoader对象，通过AdLoader的loadAd方法请求广告，最后通过AdLoadListener来监听广告的加载状态。 在请求贴片广告时，需要在AdOptions中设置两个参数：totalDuration和placementAdCountDownDesc。 请求广告参数名 类型 必填 说明 adType number 是 请求广告类型，贴片广告类型为60。 adId string 是 广告位ID。 oaid string 否 开放匿名设备标识符，用于精准推送广告。不填无法获取到个性化广告。
```typescript
import { advertising, identifier } from '@kit.AdsKit';
import { common } from '@kit.AbilityKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { router } from '@kit.ArkUI';
@Entry
@Component
struct Index {
private context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
// 获取到的OAID
private oaid: string = '';
aboutToAppear() {
try {
// 使用Promise回调方式获取OAID
identifier.getOAID().then((data: string) => {
this.oaid = data;
hilog.info(0x0000, 'testTag', '%{public}s', 'Succeeded in getting adsIdentifierInfo by promise');
}).catch((error: BusinessError) => {
hilog.error(0x0000, 'testTag', '%{public}s',
`Failed to get adsIdentifierInfo, code: ${error.code}, message: ${error.message}`);
})
} catch (error) {
hilog.error(0x0000, 'testTag', '%{public}s', `Catch err, code: ${error.code}, message: ${error.message}`);
}
}
build() {
Row() {
Button('加载广告', { type: ButtonType.Normal, stateEffect: true })
.onClick(() => {
// 调用加载广告方法
requestAd(this.context, this.oaid);
})
.borderRadius(8)
.backgroundColor(0x317aff)
.width(90)
.height(40)
}
.height('100%')
}
}
/**
* 加载广告
*
* @param context 上下文环境
* @param oaid OAID信息
*/
function requestAd(context: common.Context, oaid: string): void {
const adRequestParam: advertising.AdRequestParams = {
// 广告类型
adType: 60,
// 'testy3cglm3pj0'为测试专用的广告位ID，App正式发布时需要改为正式的广告位ID
adId: 'testy3cglm3pj0',
// 在AdRequestParams中添加oaid参数
oaid: oaid,
// 用于区分普通请求和预加载请求，默认值false代表普通请求，true代表预加载请求
isPreload: false
};
const adOptions: advertising.AdOptions = {
// 在AdOptions中添加totalDuration参数，用于设置贴片广告展示时长（贴片广告必填）
totalDuration: 30,
// 在AdOptions中添加placementAdCountDownDesc参数，设置贴片广告倒计时文案（可选，填写了则展示文案，不填写则只展示倒计时）
placementAdCountDownDesc: encodeURI('VIP免广告'),
// 是否允许流量下载 0不允许 1允许，不设置以广告主设置为准
allowMobileTraffic: 0,
// 是否希望根据 COPPA 的规定将您的内容视为面向儿童的内容: -1默认值，不确定 0不希望 1希望
tagForChildProtection: -1,
// 是否希望按适合未达到法定承诺年龄的欧洲经济区 (EEA) 用户的方式处理该广告请求： -1默认值，不确定 0不希望 1希望
tagForUnderAgeOfPromise: -1,
// 设置广告内容分级上限: W: 3+,所有受众 PI: 7+,家长指导 J:12+,青少年 A: 16+/18+，成人受众
adContentClassification: 'A'
};
// 广告请求回调监听
const adLoaderListener: advertising.AdLoadListener = {
// 广告请求失败回调
onAdLoadFailure: (errorCode: number, errorMsg: string) => {
hilog.error(0x0000, 'testTag', '%{public}s',
`Failed to request single ad, errorCode is: ${errorCode}, errorMsg is: ${errorMsg}`);
},
// 广告请求成功回调
onAdLoadSuccess: (ads: Array<advertising.Advertisement>) => {
hilog.info(0x0000, 'testTag', '%{public}s', 'Succeeded in requesting single ad!');
// 保存请求到的广告内容用于展示
const returnAds = ads;
// 路由到广告展示页面
routePage('pages/PlacementAdPage', returnAds);
}
};
// 创建AdLoader广告对象
const load: advertising.AdLoader = new advertising.AdLoader(context);
// 调用广告请求接口
hilog.info(0x0000, 'testTag', '%{public}s', 'Request single ad!');
load.loadAd(adRequestParam, adOptions, adLoaderListener);
}
/**
* 路由跳转
*
* @param pageUri 要路由到的页面
*/
async function routePage(pageUri: string, ads: Array<advertising.Advertisement | null>) {
let options: router.RouterOptions = {
url: pageUri,
params: {
ads: ads
}
}
try {
hilog.info(0x0000, 'testTag', '%{public}s', `RoutePage: ${pageUri}`);
router.pushUrl(options);
} catch (error) {
hilog.error(0x0000, 'testTag', '%{public}s',
`Failed to routePage callback, code: ${error.code}, msg: ${error.message}`);
}
}
```
3.  在您的页面中使用AdComponent组件展示贴片广告，由媒体判断流量场景下，可以自动播放则展示广告，反之则不展示。以前贴广告为例，前贴广告播放完成后进入正片播放。您需要在entry/src/main/resources/base/profile/main_pages.json文件中添加页面，如下图所示。 您需要在media和rawfile目录下分别指定正片未播放时的预览图video_preview.PNG和对应的正片文件videoTest.mp4，如下图所示。
```typescript
import { router, window } from '@kit.ArkUI';
import { BusinessError } from '@kit.BasicServicesKit';
import { advertising, AdComponent } from '@kit.AdsKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
@Entry
@Component
struct PlacementAdPage {
// 是否竖屏
private portrait: boolean = true;
// 请求到的广告内容
private ads: Array<advertising.Advertisement> = [];
// 广告展示参数
private adDisplayOptions: advertising.AdDisplayOptions = {
// 是否静音，默认不静音
mute: false
}
// 广告参数
private adOptions: advertising.AdOptions = {
// 设置贴片广告展示时长（贴片广告必填）
totalDuration: 30,
// 设置贴片广告倒计时文案，文案需要使用encodeURI编码（可选，填写了则展示文案，不填写则只展示倒计时）
placementAdCountDownDesc: encodeURI('VIP免广告'),
// 是否希望根据 COPPA 的规定将您的内容视为面向儿童的内容: -1默认值，不确定 0不希望 1希望
tagForChildProtection: -1,
// 是否希望按适合未达到法定承诺年龄的欧洲经济区 (EEA) 用户的方式处理该广告请求： -1默认值，不确定 0不希望 1希望
tagForUnderAgeOfPromise: -1,
// 设置广告内容分级上限: W: 3+,所有受众 PI: 7+,家长指导 J:12+,青少年 A: 16+/18+，成人受众
adContentClassification: 'A'
}
// 已经播放的贴片广告数量
private playedAdSize: number = 0;
// 是否播放正片
@State isPlayVideo: boolean = false;
// 视频播放控制器
private controller: VideoController = new VideoController();
// 指定视频未播放时的预览图片路径
private previewUris: Resource = $r('app.media.video_preview');
// 指定视频播放源的路径，这里取本地视频资源
private innerResource: Resource = $rawfile('videoTest.mp4');
// 用于渲染右上角倒计时
private countDownTxtPlaceholder: string = '%d | %s';
@State countDownTxt: string = '';
aboutToAppear() {
const params: Record<string, Object> = router.getParams() as Record<string, Object>;
if (params && params.ads as Array<advertising.Advertisement>) {
this.ads = params.ads as Array<advertising.Advertisement>;
this.adOptions = params.adOptions as advertising.AdOptions;
this.initData();
}
}
build() {
Stack({ alignContent: Alignment.TopEnd }) {
// AdComponent组件用于展示非全屏广告
AdComponent({
ads: this.ads, displayOptions: this.adDisplayOptions,
interactionListener: {
// 广告状态变化回调
onStatusChanged: (status: string, ad: advertising.Advertisement, data: string) => {
switch (status) {
case 'onPortrait':
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onPortrait');
// 设置屏幕方向为竖屏或返回上一页
this.setWindowPortrait();
break;
case 'onLandscape':
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onLandscape');
// 设置屏幕方向为横屏
this.setWindowLandscape();
break;
case 'onMediaProgress':
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onMediaProgress');
break;
case 'onMediaStart':
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onMediaStart');
break;
case 'onMediaPause':
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onMediaPause');
break;
case 'onMediaStop':
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onMediaStop');
break;
case 'onMediaComplete':
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onMediaComplete');
// 所有广告都播放完毕后，开始播放正片
this.playedAdSize++;
if (this.playedAdSize === this.ads.length) {
this.isPlayVideo = true;
}
break;
case 'onMediaError':
hilog.error(0x0000, 'testTag', '%{public}s', 'Status is onMediaError');
break;
case 'onMediaCountdown':
try {
hilog.info(0x0000, 'testTag', '%{public}s', 'Status is onMediaCountdown');
const parseData: Record<string, number> = JSON.parse(JSON.stringify(data));
this.updateCountDownTxt(parseData.countdownTime);
} catch (e) {
hilog.error(0x0000, 'testTag', '%{public}s',
`Failed to parse data, code: ${e.code}, msg: ${e.message}`);
}
break;
}
}
}
})
.visibility(!this.isPlayVideo ? Visibility.Visible : Visibility.None)
.width('100%')
.height('100%')
Row() {
if (this.countDownTxt) {
Text(this.countDownTxt.split('').join('\u200B'))
.fontSize(12)
.textAlign(TextAlign.Center)
.maxLines(1)
.fontColor(Color.White)
.lineHeight(12)
.textOverflow({ overflow: TextOverflow.Ellipsis })
.maxLines(1)
.backgroundColor('#66000000')
.border({ radius: 25 })
.padding({
left: 8,
right: 8,
top: 6,
bottom: 6
})
.margin({ right: 16, top: 16 })
.height(24)
.constraintSize({ minWidth: 60, maxWidth: 100 })
.onClick((event: ClickEvent) => {
hilog.info(0x0000, 'testTag', '%{public}s', 'OnVipClicked, do something...');
})
}
}
.alignItems(VerticalAlign.Top)
.justifyContent(FlexAlign.End)
Video({
src: this.innerResource,
previewUri: this.previewUris,
controller: this.controller
})
.visibility(this.isPlayVideo ? Visibility.Visible : Visibility.None)
.autoPlay(this.isPlayVideo ? true : false)
.controls(false)
.width('100%')
.height('100%')
}.width('100%').height('100%')
}
/**
* 设置竖屏或返回上一页
*/
private setWindowPortrait() {
hilog.info(0x0000, 'testTag', '%{public}s', `Set WindowPortrait, portrait: ${this.portrait}`);
if (!this.portrait) {
window.getLastWindow(getContext(this), (err: BusinessError, win) => {
win.setPreferredOrientation(window.Orientation.PORTRAIT)
});
this.portrait = true;
} else {
router.back();
}
}
/**
* 设置横屏（正向）
*/
private setWindowLandscape() {
hilog.info(0x0000, 'testTag', '%{public}s', `Set WindowLandscape, portrait: ${this.portrait}`);
if (this.portrait) {
window.getLastWindow(getContext(this), (err: BusinessError, win) => {
win.setPreferredOrientation(window.Orientation.LANDSCAPE)
});
this.portrait = false;
}
}
private initData() {
this.initCountDownText();
}
private initCountDownText() {
const decodeText = this.decodeString(this.adOptions?.placementAdCountDownDesc as string);
if (!this.isBlank(decodeText)) {
this.countDownTxtPlaceholder = this.countDownTxtPlaceholder.replace('%s', decodeText);
} else {
this.countDownTxtPlaceholder = '%d';
}
}
private updateCountDownTxt(leftTime: number) {
hilog.info(0x0000, 'testTag', '%{public}s', `Show LeftTime: ${leftTime}`);
this.countDownTxt = this.countDownTxtPlaceholder.replace('%d', leftTime + '');
}
private decodeString(str: string): string {
if (!str) {
return str;
}
let decodeUrl = str;
try {
decodeUrl = decodeURIComponent(str.replace(/\+/g, '%20'));
} catch (e) {
hilog.error(0x0000, 'testTag', '%{public}s', `Failed to decodeURIComponent, code:${e.code}, msg: ${e.message}`);
}
return decodeUrl;
}
private isBlank(str: string): boolean {
if (str === null || str === undefined) {
return true;
}
if (typeof str === 'string') {
return str.trim().length === 0;
}
return false;
}
}
```
| 请求广告参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| adType  | number  | 是  | 请求广告类型，贴片广告类型为60。  |
| adId  | string  | 是  | 广告位ID。 如果仅调测广告，可使用测试广告位ID：testy3cglm3pj0。如果要接入正式广告，则需要申请正式的广告位ID。可在应用发布前进入流量变现官网，点击“开始变现”，登录鲸鸿动能媒体服务平台进行申请，具体操作详情请参见展示位创建。  |
| oaid  | string  | 否  | 开放匿名设备标识符，用于精准推送广告。不填无法获取到个性化广告。  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170017.75653666071897850603676464489084:50001231000000:2800:2435E9B517E4BFE206DDAA653DE61F8CAAD9739B53171321C0FFB3125CC86F19.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170017.77854514492945109132809340830045:50001231000000:2800:50663C98698AFDEA8BEF0767AECD2B8F8B1D0FF387865A0B4C81C0DE3B87130C.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ads-publisher-service-faq-V14
爬取时间: 2025-04-29 20:12:16
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ads-publisher-service-faq-4-V14
爬取时间: 2025-04-29 20:12:30
来源: Huawei Developer
展示广告时出现白屏可能原因为展示的广告样式与UI展示页面不匹配，横幅广告使用AutoAdComponent组件展示；原生广告、开屏广告、贴片广告使用AdComponent组件展示；激励广告、插屏广告调用showAd方法展示。
建议排查手段为：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ads-publisher-service-faq-5-V14
爬取时间: 2025-04-29 20:12:43
来源: Huawei Developer
原生广告展示采用的是广告高级UI组件AdComponent，此组件展示广告要求传入的数据为一个广告数组（Advertisement[]）。为了适应开发者请求多个广告而只选择一个展示的情况，组件内部逻辑默认只展示广告数组的第一个数据，即Advertisement[0]。因此开发者如果需要展示指定的广告样式，需要自己构造一个广告数据并把需要展示的广告放在数据的第一位。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/ads-publisher-service-faq-6-V14
爬取时间: 2025-04-29 20:12:57
来源: Huawei Developer
受制于您所在国家/地区的外汇管制、税务处理等因素，您所在的国家/地区尚未对个人开发者开放鲸鸿动能流量变现服务，您需要实名认证成为华为开发者联盟的企业开发者，包括获得应用开发者合法授权的企业。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/oaid-service-V14
爬取时间: 2025-04-29 20:13:11
来源: Huawei Developer
获取OAID信息
场景介绍
开放匿名设备标识符（Open Anonymous Device Identifier, OAID，以下简称OAID）：是一种非永久性设备标识符，基于开放匿名设备标识符，可在保护用户个人数据隐私安全的前提下，向用户提供个性化广告，同时三方监测平台也可以向广告主提供转化归因分析。
媒体App、广告平台、三方监测平台等开发者，可获取设备上的OAID，您可基于OAID进行个性化广告推荐或广告转化归因分析。
OAID是基于华为自有算法生成的32位类UUID（Universally Unique Identifier）标识符，格式为xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx。
OAID的特性：
-  设置项“跨应用关联访问权限”在HarmonyOS NEXT Developer Beta5及更早版本名称为“应用跟踪访问权限”。
OAID会在下述场景中发生变化：
接口说明
| 接口名  | 描述  |
| --- | --- |
| getOAID(): Promise<string>  | 获取OAID，通过Promise异步返回结果。  |
| getOAID(callback: AsyncCallback<string>):  void  | 获取OAID，通过Callback回调返回值。  |
接口名
描述
getOAID(): Promise<string>
获取OAID，通过Promise异步返回结果。
getOAID(callback: AsyncCallback<string>):  void
获取OAID，通过Callback回调返回值。
如调用getOAID接口需要申请ohos.permission.APP_TRACKING_CONSENT权限，且“要求应用请求关联”保持关闭状态。存在如下三种情况：
1.如应用已配置ohos.permission.APP_TRACKING_CONSENT权限，且“跨应用关联访问权限”为“允许”，则返回OAID。
2.如应用已配置ohos.permission.APP_TRACKING_CONSENT权限，且“跨应用关联访问权限”为“禁止”，则返回00000000-0000-0000-0000-000000000000。
3.如应用未配置ohos.permission.APP_TRACKING_CONSENT权限，则返回00000000-0000-0000-0000-000000000000。
开发步骤
1.  在模块的module.json5文件中，申请广告跟踪权限ohos.permission.APP_TRACKING_CONSENT，该权限为user_grant权限，当申请的权限为user_grant权限时，reason，abilities标签必填，配置方式参见requestPermissions标签说明，示例代码如下所示：
```typescript
{
"module": {
"requestPermissions": [
{
"name": "ohos.permission.APP_TRACKING_CONSENT",
"reason": "$string:reason",
"usedScene": {
"abilities": [
"EntryFormAbility"
],
"when": "inuse"
}
}
]
}
}
```
```typescript
import { identifier } from '@kit.AdsKit';
import { abilityAccessCtrl, common } from '@kit.AbilityKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
function requestOAIDTrackingConsentPermissions(context: common.Context): void {
// 进入页面时，向用户请求授权广告跨应用关联访问权限
const atManager: abilityAccessCtrl.AtManager = abilityAccessCtrl.createAtManager();
try {
atManager.requestPermissionsFromUser(context, ["ohos.permission.APP_TRACKING_CONSENT"]).then((data) => {
if (data.authResults[0] === 0) {
hilog.info(0x0000, 'testTag', '%{public}s', 'succeeded in requesting permission');
identifier.getOAID((err: BusinessError, data: string) => {
if (err.code) {
hilog.error(0x0000, 'testTag', '%{public}s', `get oaid failed, error: ${err.code} ${err.message}`);
} else {
const oaid: string = data;
hilog.info(0x0000, 'testTag', '%{public}s', `succeeded in getting oaid by callback , oaid: ${oaid}`);
}
});
} else {
hilog.error(0x0000, 'testTag', '%{public}s', 'user rejected');
}
}).catch((err: BusinessError) => {
hilog.error(0x0000, 'testTag', '%{public}s', `request permission failed, error: ${err.code} ${err.message}`);
})
} catch (err) {
hilog.error(0x0000, 'testTag', '%{public}s', `catch err->${err.code}, ${err.message}`);
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/description-of-personal-date-V14
爬取时间: 2025-04-29 20:13:24
来源: Huawei Developer
此文档针对华为作为最终用户数据控制者，对用户的数据处理进行说明，包括：
华为处理的个人数据清单
鲸鸿动能Ads kit处理的个人数据清单和存储期限如下：
| 个人数据清单  | 使用目的  | 存留期  |
| --- | --- | --- |
| 设备标识符（OAID）、设备信息（设备型号、设备硬件信息、操作系统、系统设置、设备使用信息）、应用信息、传感器信息（陀螺仪、加速度计、旋转矢量传感器、磁力计、气压计）、网络信息、运营商信息、IP地址、WLAN信息（WiFi状态、WiFi参数与WiFi列表）、广告互动信息  | 程序化广告投放、广告监测归因、广告防欺诈与运营维护  | 保存至留存期到期，如涉及个性化推荐、个性化广告、营销、问题与建议、帮助与客服、投诉举报，其相关个人信息通常保存不超过2年。如涉及产品运营与维护，其相关个人信息通常保存不超过5年。    |
个人数据清单
使用目的
存留期
设备标识符（OAID）、设备信息（设备型号、设备硬件信息、操作系统、系统设置、设备使用信息）、应用信息、传感器信息（陀螺仪、加速度计、旋转矢量传感器、磁力计、气压计）、网络信息、运营商信息、IP地址、WLAN信息（WiFi状态、WiFi参数与WiFi列表）、广告互动信息
程序化广告投放、广告监测归因、广告防欺诈与运营维护
保存至留存期到期，如涉及个性化推荐、个性化广告、营销、问题与建议、帮助与客服、投诉举报，其相关个人信息通常保存不超过2年。如涉及产品运营与维护，其相关个人信息通常保存不超过5年。
指导用户行使数据主体权利
隐私政策披露鲸鸿动能Ads kit处理的个人信息
在您接入、使用鲸鸿动能Ads kit服务前，我们要求您在隐私政策中向用户告知我们是如何处理其个人数据的，并获取用户同意或取得其他合法性基础。您可以在隐私声明中显示链接，方便用户查阅当您使用鲸鸿动能广告平台的服务时，鲸鸿动能广告平台如何使用相关数据。
用户可参考关于鲸鸿动能广告与隐私的声明中的说明行使数据主体权利。如果用户对自己的数据主体权利有进一步要求或存在任何疑问、意见或建议，可通过鲸鸿动能广告隐私声明中的“如何联系我们”章节中所描述的方式与我们取得联系，我们会尽快答复并支持用户行使其相关权利。
个性化广告推荐功能的配置说明
我们的鲸鸿动能Ads kit针对个性化广告推荐的功能供了配置能力，您可以基于业务诉求选择开启或关闭相关功能。
您可以通过请求参数设置接口AdOptions.nonPersonalizedAd配置开启或关闭个性化广告，若关闭个性化广告，则正常返回非个性化广告。关闭个性化广告后，用户接收到的广告数量可能不会减少，但广告相关性会降低。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/calendar-kit-V14
爬取时间: 2025-04-29 20:13:38
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/calendarmanager-overview-V14
爬取时间: 2025-04-29 20:13:52
来源: Huawei Developer
Calendar Kit（日历服务）提供日历与日程管理能力，通常是指可以用于访问和操作日历数据的API（应用程序接口）。这些接口允许开发者将其他应用中的工作、生活中与时间相关的日程服务（如出行、餐饮、运动、娱乐等）与系统日历进行集成，从而实现日程管理、事件创建、查询等功能。
能力范围
Calendar Kit包括账户管理和日程管理。
-  创建日历账户。 开发者可以创建属于本应用特有的日历账户，账户创建成功后会返回一个账户id，账户id是数据表自增主键，作为账户的唯一标识符。
-  获取日历账户。 开发者可以获取指定的日历账户信息或者获取当前应用创建的所有日历账户信息。
-  删除日历账户。 开发者可以删除指定的日历账户，日历账户删除后，和该日历账户所关联的全部日程都会被删除。
-  创建日程。 开发者获取到日历账号信息后，可以在获取到的日历账户下创建日程。创建日程时可以设置日程提醒时间，到达日程提醒时间时会有日程提醒通知弹出。 日程创建成功后会返回一个日程id，日程id是数据表自增主键，作为日程的唯一标识符。
-  删除日程。 开发者可以指定日程id进行日程的删除，可以同时删除一条或者多条日程。
-  更新日程。 开发者可以根据日程id对日程信息进行更新，包括更新日程标题、日程地点、日程开始时间、日程结束时间、日程提醒时间等信息。
-  查询日程。 查询日程支持三种方式：根据日程id查询日程、根据日程标题查询日程、根据日程的开始时间和结束时间查询日程。
亮点/特征
日程一键服务：开发者通过永久性授权机制，在用户许可当前应用读写系统日历后，可将对应的日程服务以deeplink的形式同时写入日历。根据开发者设置的提醒规则，在日程临近或到期时，日历应用、日历通知、日历卡片等区域同时会显示对应的“服务按钮”，用户可通过点击此按钮拉起跳转链接，一步直达服务落地页。
运作机制
Calendar Kit为用户提供了一系列接口来获取日历账户，并使用特定的接口向日历账户中写入或读取日程信息。如果写入的日程带有提醒时间则系统会在时间到达时向用户发送提醒。
约束限制
-  使用Calendar Kit的相关能力，需要获取读取或写入日历、日程的权限：ohos.permission.READ_CALENDAR和ohos.permission.WRITE_CALENDAR。具体指导可见声明权限。
-  目前Calendar Kit的相关能力及接口使用，仅支持在Stage模型下使用。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/calendarmanager-calendar-developer-V14
爬取时间: 2025-04-29 20:14:06
来源: Huawei Developer
日历账户‌用于存储和管理个人或团队的日程，通过日历账户，用户可以方便地查看、编辑和共享日程信息。
日历管理器CalendarManager用于管理日历账户Calendar。日历账户主要包含账户信息CalendarAccount和配置信息CalendarConfig。
开发者可以创建属于应用特有的日历账户，还可以对日历账户进行新增、删除、更新和查询。此外，每个日程Event归属于某一个特定的日历账户，可以通过日历账户对该账户下面的日程进行管理，具体相关指导可见日程管理。
接口说明
以下是日历账户管理的相关接口，更多详细接口及使用请参考@ohos.calendarManager。
| 接口名称 | 描述 |
| --- | --- |
| getCalendarManager(context : Context): CalendarManager | 根据上下文获取日历管理器对象CalendarManager，用于管理日历。 |
| createCalendar(calendarAccount: CalendarAccount): Promise<Calendar> | 根据日历账户信息，创建一个Calendar对象，使用Promise异步回调。 |
| getCalendar(calendarAccount?: CalendarAccount): Promise<Calendar> | 获取默认Calendar对象或者指定Calendar对象，使用Promise异步回调。 默认Calendar是日历存储首次运行时创建的，若创建Event时不关注其Calendar归属，则无须通过createCalendar()创建Calendar，直接使用默认Calendar。 |
| getAllCalendars(): Promise<Calendar[]> | 获取当前应用所有创建的Calendar对象以及默认Calendar对象，使用Promise异步回调。 |
| deleteCalendar(calendar: Calendar): Promise<void> | 删除指定Calendar对象，使用Promise异步回调。 |
| getConfig(): CalendarConfig | 获取日历配置信息。 |
| setConfig(config: CalendarConfig): Promise<void> | 设置日历配置信息，使用Promise异步回调。 |
| getAccount(): CalendarAccount | 获取日历账户信息。 |
获取默认Calendar对象或者指定Calendar对象，使用Promise异步回调。
默认Calendar是日历存储首次运行时创建的，若创建Event时不关注其Calendar归属，则无须通过createCalendar()创建Calendar，直接使用默认Calendar。
开发步骤
1.  导入相关依赖。
```typescript
// EntryAbility.ets
import {abilityAccessCtrl,AbilityConstant, common, PermissionRequestResult, Permissions, UIAbility, Want } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { calendarManager } from '@kit.CalendarKit';
import { window } from '@kit.ArkUI';
```
2.  申请权限。使用Calendar Kit时，需要在module.json5中声明申请读写日历日程所需的权限：ohos.permission.READ_CALENDAR和ohos.permission.WRITE_CALENDAR。具体指导可见声明权限。
3.  根据上下文获取日程管理器对象calendarMgr，用于对日历账户进行相关管理操作。推荐在EntryAbility.ets文件中进行操作。
```typescript
// EntryAbility.ets
export let calendarMgr: calendarManager.CalendarManager | null = null;
export let mContext: common.UIAbilityContext | null = null;
export default class EntryAbility extends UIAbility {
onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): void {
console.info("Ability onCreate");
}
onDestroy(): void {
console.info("Ability onDestroy");
}
onWindowStageCreate(windowStage: window.WindowStage): void {
// Main window is created, set main page for this ability
console.info("Ability onWindowStageCreate");
windowStage.loadContent('pages/Index', (err, data) => {
if (err.code) {
console.error(`Failed to load the content. Code: ${err.code}, message: ${err.message}`);
return;
}
console.info(`Succeeded in loading the content. Data: ${JSON.stringify(data)}`);
});
mContext = this.context;
const permissions: Permissions[] = ['ohos.permission.READ_CALENDAR', 'ohos.permission.WRITE_CALENDAR'];
let atManager = abilityAccessCtrl.createAtManager();
atManager.requestPermissionsFromUser(mContext, permissions).then((result: PermissionRequestResult) => {
console.log(`get Permission success, result: ${JSON.stringify(result)}`);
calendarMgr = calendarManager.getCalendarManager(mContext);
}).catch((error: BusinessError) => {
console.error(`get Permission error, error. Code: ${error.code}, message: ${error.message}`);
})
}
onWindowStageDestroy(): void {
// Main window is destroyed, release UI related resources
console.info("Ability onWindowStageDestroy");
}
onForeground(): void {
// Ability has brought to foreground
console.info("Ability onForeground");
}
onBackground(): void {
// Ability has back to background
console.info("Ability onBackground");
}
}
```
4.  根据日历账户信息，创建一个日历账户Calendar对象。 创建日历账户之前，开发者需要先根据账户信息进行查询，如果账户不存在则抛出异常信息，捕获到异常再进行日历账户的创建，否则可能会出现账户重复创建的问题。
```typescript
// Index.ets
import { BusinessError } from '@kit.BasicServicesKit';
import { calendarMgr } from '../entryability/EntryAbility';
import { calendarManager } from '@kit.CalendarKit';
let calendar: calendarManager.Calendar | undefined = undefined;
// 指定日历账户信息
const calendarAccount: calendarManager.CalendarAccount = {
// 日历账户名称
name: 'MyCalendar',
// 日历账户类型
type: calendarManager.CalendarType.LOCAL,
// 日历账户显示名称，该字段如果不填，创建的日历账户在界面显示为空字符串。
displayName: 'MyCalendar'
};
// 创建日历账户
calendarMgr?.createCalendar(calendarAccount).then((data: calendarManager.Calendar) => {
console.info(`Succeeded in creating calendar data->${JSON.stringify(data)}`);
calendar = data;
// 请确保日历账户创建成功后，再进行后续相关操作
// ...
}).catch((error: BusinessError) => {
console.error(`Failed to create calendar. Code: ${error.code}, message: ${error.message}`);
});
```
5.  日历账户创建之后，日历账户颜色为黑色。开发者需要调用setConfig()接口设置日历配置信息，包括是否打开日历账户下的日程提醒能力、设置日历账户颜色。
```typescript
// Index.ets
// 日历配置信息
const config: calendarManager.CalendarConfig = {
// 打开日程提醒
enableReminder: true,
// 设置日历账户颜色
color: '#aabbcc'
};
// 设置日历配置信息
calendar.setConfig(config).then(() => {
console.info(`Succeeded in setting config, data->${JSON.stringify(config)}`);
}).catch((err: BusinessError) => {
console.error(`Failed to set config. Code: ${err.code}, message: ${err.message}`);
});
```
6.  可以查询指定日历账户。
```typescript
// Index.ets
calendarMgr?.getCalendar(calendarAccount).then((data: calendarManager.Calendar) => {
console.info(`Succeeded in getting calendar, data -> ${JSON.stringify(data)}`);
}).catch((err: BusinessError) => {
console.error(`Failed to get calendar. Code: ${err.code}, message: ${err.message}`);
});
```
7.  也可以查询默认日历账户，默认日历账户是日历存储首次运行时创建的，若创建日程时不关注归属哪个账户，则无须单独创建日历账户，可以直接使用默认日历账户。
```typescript
// Index.ets
calendarMgr?.getCalendar().then((data: calendarManager.Calendar) => {
console.info(`Succeeded in getting calendar, data -> ${JSON.stringify(data)}`);
}).catch((err: BusinessError) => {
console.error(`Failed to get calendar. Code: ${err.code}, message: ${err.message}`);
});
```
8.  获取当前应用所有创建的日历账户及默认日历账户Calendar对象。 由于涉及数据隐私安全，进行了权限管控的应用无法获取其他应用创建的账户信息。
```typescript
// Index.ets
calendarMgr?.getAllCalendars().then((data: calendarManager.Calendar[]) => {
console.info(`Succeeded in getting all calendars, data -> ${JSON.stringify(data)}`);
data.forEach((calendar) => {
const account = calendar.getAccount();
console.info(`account -> ${JSON.stringify(account)}`);
})
}).catch((err: BusinessError) => {
console.error(`Failed to get all calendars. Code: ${err.code}, message: ${err.message}`);
});
```
9.  删除指定的日历账户，删除账户后，该账户下的所有日程会全部删除。
```typescript
// Index.ets
calendarMgr?.deleteCalendar(calendar).then(() => {
console.info("Succeeded in deleting calendar");
}).catch((err: BusinessError) => {
console.error(`Failed to delete calendar. Code: ${err.code}, message: ${err.message}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/calendarmanager-event-developer-V14
爬取时间: 2025-04-29 20:14:20
来源: Huawei Developer
日程指特定的事件或者活动安排，日程管理即对这些事件、活动进行规划和控制，能更有效地利用相关资源、提高生产力和效率，使人们更好地管理时间和任务。
Calendar Kit中的日程Event归属于某个对应的日历账户Calendar，一个日历账户下可以有多个日程，一个日程只属于一个Calendar。
获取到日历账户对象之后，即可对该账户下的日程进行管理，包括日程的创建、删除、修改、查询等操作。在创建、修改日程时，支持对日程的标题、开始时间、结束时间、日程类型、日程地点、日程提醒时间、日程重复规则等相关信息进行设置，以便进行更丰富更有效的日程管理。
接口说明
以下是日程管理的相关接口，更多详细接口及使用请参考@ohos.calendarManager。
| 接口名称 | 描述 |
| --- | --- |
| getCalendarManager(context : Context): CalendarManager | 根据上下文获取CalendarManager对象，用于管理日历。 |
| createCalendar(calendarAccount: CalendarAccount): Promise<Calendar> | 根据日历账户信息，创建一个Calendar对象，使用Promise异步回调。 |
| addEvent(event: Event): Promise<number> | 创建日程，入参Event不填日程id，使用Promise异步回调。 |
| editEvent(event: Event): Promise<number> | 创建单个日程，入参Event不填日程id，调用该接口会跳转到日程创建页面，使用Promise异步回调。 |
| deleteEvent(id: number): Promise<void> | 删除指定日程id的日程，使用Promise异步回调。 |
| updateEvent(event: Event): Promise<void> | 更新日程，使用Promise异步回调。 |
| getEvents(eventFilter?: EventFilter, eventKey?: (keyof Event)[]): Promise<Event[]> | 获取Calendar下符合查询条件的Event，使用Promise异步回调。 |
开发步骤
1.  导入相关依赖。
```typescript
// entry/src/main/ets/entryability/EntryAbility.ets
import {abilityAccessCtrl,AbilityConstant, common, PermissionRequestResult, Permissions, UIAbility, Want } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { calendarManager } from '@kit.CalendarKit';
import { window } from '@kit.ArkUI';
```
2.  申请权限。使用Calendar Kit时，需要在module.json5中声明申请读写日历日程所需的权限：ohos.permission.READ_CALENDAR和ohos.permission.WRITE_CALENDAR。具体指导可见声明权限。
3.  根据上下文获取日程管理器对象calendarMgr，用于对日历账户进行相关管理操作。推荐在EntryAbility.ets文件中进行操作。
```typescript
// entry/src/main/ets/entryability/EntryAbility.ets
export let calendarMgr: calendarManager.CalendarManager | null = null;
export let mContext: common.UIAbilityContext | null = null;
export default class EntryAbility extends UIAbility {
onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): void {
console.info("Ability onCreate");
}
onDestroy(): void {
console.info("Ability onDestroy");
}
onWindowStageCreate(windowStage: window.WindowStage): void {
// Main window is created, set main page for this ability
console.info("Ability onWindowStageCreate");
windowStage.loadContent('pages/Index', (err, data) => {
if (err.code) {
console.error(`Failed to load the content. Code: ${err.code}, message: ${err.message}`);
return;
}
console.info(`Succeeded in loading the content. Data: ${JSON.stringify(data)}`);
});
mContext = this.context;
const permissions: Permissions[] = ['ohos.permission.READ_CALENDAR', 'ohos.permission.WRITE_CALENDAR'];
let atManager = abilityAccessCtrl.createAtManager();
atManager.requestPermissionsFromUser(mContext, permissions).then((result: PermissionRequestResult) => {
console.log(`get Permission success, result: ${JSON.stringify(result)}`);
calendarMgr = calendarManager.getCalendarManager(mContext);
}).catch((error: BusinessError) => {
console.error(`get Permission error, error. Code: ${error.code}, message: ${error.message}`);
})
}
onWindowStageDestroy(): void {
// Main window is destroyed, release UI related resources
console.info("Ability onWindowStageDestroy");
}
onForeground(): void {
// Ability has brought to foreground
console.info("Ability onForeground");
}
onBackground(): void {
// Ability has back to background
console.info("Ability onBackground");
}
}
```
4.  根据日历账户信息创建Calendar对象，用于进行日程管理。设置日历配置信息，可以根据需要打开日程提醒、设置日历账户颜色。
```typescript
// Index.ets
import { BusinessError } from '@kit.BasicServicesKit';
import { calendarMgr } from '../entryability/EntryAbility';
import { calendarManager } from '@kit.CalendarKit';
let calendar: calendarManager.Calendar | undefined = undefined;
// 指定日历账户信息
const calendarAccount: calendarManager.CalendarAccount = {
name: 'MyCalendar',
type: calendarManager.CalendarType.LOCAL,
// 日历账户显示名称，该字段如果不填，创建的日历账户在界面显示为空字符串。
displayName: 'MyCalendar'
};
// 日历配置信息
const config: calendarManager.CalendarConfig = {
// 打开日程提醒
enableReminder: true,
// 设置日历账户颜色
color: '#aabbcc'
};
// 创建日历账户
calendarMgr?.createCalendar(calendarAccount).then((data: calendarManager.Calendar) => {
console.info(`Succeeded in creating calendar data->${JSON.stringify(data)}`);
calendar = data;
// 请确保日历账户创建成功后，再进行相关日程的管理
// 设置日历配置信息，打开日程提醒、设置日历账户颜色
calendar.setConfig(config).then(() => {
console.info(`Succeeded in setting config, data->${JSON.stringify(config)}`);
}).catch((err: BusinessError) => {
console.error(`Failed to set config. Code: ${err.code}, message: ${err.message}`);
});
// ...
}).catch((error: BusinessError) => {
console.error(`Failed to create calendar. Code: ${error.code}, message: ${error.message}`);
});
```
5.  在当前日历账户下添加日历日程，注意入参中不需要填写日程id。 创建日程时，支持设置日程的标题、开始时间、结束时间、日程类型、日程地点、日程提醒时间、日程重复规则等相关信息。 日程创建成功后会返回一个日程id，作为日程的唯一标识，后续可按照日程id进行指定日程的更新或删除。 目前支持以下两种方式来创建日程。 方式一：可以在日历账户下通过addEvent()或addEvents()接口创建日程。其中可使用addEvent()接口创建单个日程，也可以使用addEvents()接口批量创建日程，此处以创建单个日程为例。 方式二：在获取到日历管理器对象后，可通过editEvent()接口创建单个日程。调用此接口创建日程时，会跳转到日程创建页面，在日程创建页面进行相关操作完成日程的创建, editEvent()不支持自定义周期性日程创建。
```typescript
// Index.ets
let eventId : number | undefined = undefined;
const date = new Date();
const event: calendarManager.Event = {
// 日程标题
title: 'title',
// 日程类型，不推荐三方开发者使用calendarManager.EventType.IMPORTANT，重要日程类型不支持一键服务跳转功能及无法自定义提醒时间
type: calendarManager.EventType.NORMAL,
// 日程开始时间
startTime: date.getTime(),
// 日程结束时间
endTime: date.getTime() + 60 * 60 * 1000,
// 距开始时间提前10分钟提醒
reminderTime: [10],
// 日程重复规则，可选属性。如果日程为周期性日程需要填写该属性。
recurrenceRule: {
// 日程重复规则类型，支持按天、按周、按月、按年重复
recurrenceFrequency: calendarManager.RecurrenceFrequency.DAILY,
// 日程重复次数，该字段和expire属性只需要填写一个，如果两个都填写按照count属性计算。
count: 100,
// 重复日程间隔时间，与recurrenceFrequency相关，此示例表示日程每隔2天进行重复。
interval: 2,
// 日程过期时间，该字段和count属性只需要填写一个，如果两个都填写按照count属性计算。
expire: date.getTime() + 60 * 60 * 1000 * 3,
// 日程排除日期，将该日期从重复日程中排除掉
excludedDates: [date.getTime() + 60 * 60 * 1000 * 2]
},
// 日程服务，可选字段，需要一键服务功能的日程，填写该属性。
service: {
// 服务类型，比如一键查看、一键入会、一键追剧等。
type: calendarManager.ServiceType.TRIP,
// 服务的uri。可以跳转到三方应用相应界面，格式为deeplink。使用deeplink方式需要在华为HAG云侧进行注册，注册提供的信息为应用包名、应用的服务类型。
// deeplink包括scheme、host、path以及参数（不包含参数值）
uri: 'xxx://xxx.xxx.com/xxx',
// 服务辅助描述信息，可选字段
description: '一键服务'
}
};
// 方式一
calendar.addEvent(event).then((data: number) => {
console.info(`Succeeded in adding event, id -> ${data}`);
eventId = data;
}).catch((err: BusinessError) => {
console.error(`Failed to addEvent. Code: ${err.code}, message: ${err.message}`);
});
// 方式二
const eventInfo: calendarManager.Event = {
// 日程标题
title: 'title',
// 日程类型
type: calendarManager.EventType.NORMAL,
// 日程开始时间
startTime: date.getTime(),
// 日程结束时间
endTime: date.getTime() + 60 * 60 * 1000
};
calendarMgr?.editEvent(eventInfo).then((id: number): void => {
console.info(`create Event id = ${id}`);
eventId = id;
}).catch((err: BusinessError) => {
console.error(`Failed to create Event. Code: ${err.code}, message: ${err.message}`);
});
```
6.  按照日程id进行指定日程的更新，更新日程相关信息。
```typescript
// Index.ets
const updateEvent: calendarManager.Event = {
title: 'updateTitle',
description: 'updateEventTest',
type: calendarManager.EventType.NORMAL,
id: eventId,
startTime: date.getTime(),
endTime: date.getTime() + 60 * 60 * 1000
};
calendar.updateEvent(updateEvent).then(() => {
console.info(`Succeeded in updating event`);
}).catch((err: BusinessError) => {
console.error(`Failed to update event. Code: ${err.code}, message: ${err.message}`);
});
```
7.  查询当前日历账户下的所有日程。由于涉及数据隐私安全，进行了权限管控的应用无法获取其他创建的日程信息。根据不同的查询条件和查询字段，返回不同的查询结果。 当没有查询条件和查询字段时，可查询指定日历账户下的所有日程。 还支持根据日程id、日程开始和结束时间、日程标题等查询条件来查询日程。
```typescript
calendar.getEvents().then((data: calendarManager.Event[]) => {
console.info(`Succeeded in getting events, data -> ${JSON.stringify(data)}`);
}).catch((err: BusinessError) => {
console.error(`Failed to get events. Code: ${err.code}, message: ${err.message}`);
});
```
8.  按照日程id进行指定日程的删除。可以通过deleteEvent()接口进行单个日程的删除，也可以通过deleteEvents()接口批量删除指定日程，此处以删除单个指定日程为例。
```typescript
// Index.ets
calendar.deleteEvent(eventId).then(() => {
console.info("Succeeded in deleting event");
}).catch((err: BusinessError) => {
console.error(`Failed to delete event. Code: ${err.code}, message: ${err.message}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/call-kit-guide-V14
爬取时间: 2025-04-29 20:14:33
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/call-introduction-V14
爬取时间: 2025-04-29 20:14:47
来源: Huawei Developer
Call Service Kit（通话服务）是HarmonyOS为开发者提供的应用内通话管理服务。
开发者通过集成Call Service Kit，可以实现便捷的来电一键接听、横幅通知、静音与取消静音等功能，提升用户体验。
场景分类
应用内通话，主要分为来电场景、去电场景两类。
-  应用接收到来自网络的音/视频通话，称为来电场景。 在来电场景中，应用需要将来电信息上报给Call Service Kit，系统会为用户展示来电横幅通知。用户可以在横幅上执行接听或拒接来电、静音与解除静音、挂断通话等操作。 此外，Call Service Kit还支持锁屏来电通知、多路来电通知等。
-  应用主动发起音/视频通话，称为去电场景。去电场景与来电场景大部分功能相似，但有以下几点区别：
与相关Kit的关系
当应用在后台时，如果有来电，需要Push Kit（推送服务）先拉起应用主进程，应用才能给Call Service Kit上报来电。
业务流程如下图所示：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170018.90277845421150847516474196961823:50001231000000:2800:D51127C37588A7437E251A63B98E5EED22E4DBDB58833D4D560B7EFA3A845FE1.jpg)
约束和限制
通话数量
支持的国家/地区
Call Service Kit提供的能力当前只支持中国大陆。
相关Kit的约束和限制
由于Call Service Kit依赖Push Kit，还需要参考Push Kit的约束和限制。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/call-preparations-V14
爬取时间: 2025-04-29 20:15:00
来源: Huawei Developer
在开通应用内通话服务之前，请先参考“应用开发准备”完成基本准备工作及指纹配置，再继续进行以下开发活动。
从HarmonyOS NEXT Developer Beta2起，开发者无需配置公钥指纹和Client ID。
开通Push Kit（推送服务）
如与其他Kit的关系所述，开发者在开通Call Service Kit之前，需要开通Push Kit（推送服务），开通方法详见开通推送服务。
申请权限
开发者需要根据实际场景申请对应权限，具体申请方式请参见声明权限。
| 权限  | 使用场景  | 备注  |
| --- | --- | --- |
| ohos.permission.MICROPHONE  | 用于在语音通话中，使用麦克风。  | 必须申请。  |
| ohos.permission.CAMERA  | 用于在视频通话中，使用相机。  | 如果应用支持视频通话业务，则需要申请。  |
权限
使用场景
备注
ohos.permission.MICROPHONE
用于在语音通话中，使用麦克风。
必须申请。
ohos.permission.CAMERA
用于在视频通话中，使用相机。
如果应用支持视频通话业务，则需要申请。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/incoming-calls-V14
爬取时间: 2025-04-29 20:15:15
来源: Huawei Developer
场景介绍
应用接收到来自网络的音/视频通话，称为来电场景。
来电场景的效果图展示如下：
| 语音来电 | 视频来电 | 视频来电（不支持语音接听） |
| --- | --- | --- |
|  |  |  |
| 通话中 | 锁屏语音来电 | 锁屏视频来电 |
|  |  |  |
语音来电
视频来电
视频来电（不支持语音接听）
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170018.05278298823528322127256473619436:50001231000000:2800:D98404896C12F6CD492F7094BDC137BB29CDAC663618F2D5578275DA55476B83.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170018.55064445744802492231699521559794:50001231000000:2800:CD5E5451F71241F3D30105F136A36527851B6B28F1C7B946C7A024D8651CD07F.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170018.22253044799091800893634252878602:50001231000000:2800:0CF8950D8E1DF115344D66E3F14A3B3C2D3A2C93F0172A6AF6C9AF54A423039D.jpg)
通话中
锁屏语音来电
锁屏视频来电
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170018.98428411037387323401597365168509:50001231000000:2800:493096BDF0A3D428598939CC3BA2AF78D49BD00CD4E6B753D0E66A9536B89921.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170018.75752009685732082411526005523985:50001231000000:2800:395231F20769B995184748067CE651F1187AD1893AA0944F2A45CABF3C86DDD0.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170019.86712233494669861710167026426747:50001231000000:2800:F89AB086CB4435F07CBED0FF004639D5CEFC513ECEC04B33E0BF918CEA39495E.jpg)
业务流程
来电场景：接听流程图
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170019.68698219933553101506693517364532:50001231000000:2800:35CEFD50F0CF561280C3BA6B3B840FA748A2B4E5C5B422C7F05DF16B2D22DA77.jpg)
来电场景：拒接流程图
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170019.74226448477901790312373394504381:50001231000000:2800:26F179983689BA49A79729562D5AD9940D3D5E5782DBFDDF54D4DF9BA5A2FFD5.jpg)
接口说明
来电场景的接口，由voipCall提供。更多接口信息详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| on(type: 'voipCallUiEvent', callback: Callback<VoipCallUiEventInfo>): void | 订阅voipCallUiEvent事件。 |
| off(type: 'voipCallUiEvent', callback?: Callback<VoipCallUiEventInfo>): void | 取消订阅voipCallUiEvent事件。 |
| reportIncomingCall(voipCallAttribute: VoipCallAttribute): Promise<ErrorReason> | 上报来电。 |
| reportCallAudioEventChange(callId: string, callAudioEvent: CallAudioEvent): Promise<void> | 上报音频事件。 |
| reportCallStateChange(callId: string, callState: VoipCallState): Promise<void> | 上报通话状态改变。 |
| reportCallStateChange(callId: string, callState: VoipCallState, callType: VoipCallType): Promise<void> | 上报通话状态改变，并指定通话类型。 |
接口名
描述
on(type: 'voipCallUiEvent', callback: Callback<VoipCallUiEventInfo>): void
订阅voipCallUiEvent事件。
off(type: 'voipCallUiEvent', callback?: Callback<VoipCallUiEventInfo>): void
取消订阅voipCallUiEvent事件。
reportIncomingCall(voipCallAttribute: VoipCallAttribute): Promise<ErrorReason>
上报来电。
reportCallAudioEventChange(callId: string, callAudioEvent: CallAudioEvent): Promise<void>
上报音频事件。
reportCallStateChange(callId: string, callState: VoipCallState): Promise<void>
上报通话状态改变。
reportCallStateChange(callId: string, callState: VoipCallState, callType: VoipCallType): Promise<void>
上报通话状态改变，并指定通话类型。
开发步骤
1.
```typescript
import { voipCall } from '@kit.CallServiceKit';
import { image } from '@kit.ImageKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.  示例代码如下：
```typescript
// 注册voipCallUiEvent事件
voipCall.on('voipCallUiEvent', callback => {
hilog.info(0x0000, 'CallDemo', 'Succeeded in registering voipCallUiEvent');
});
```
3.  如果当时应用在后台，系统会展示来电横幅。 示例代码如下： 对于视频通话，可以通过参数isVoiceAnswerSupported指定是否允许语音接听，示例代码如下：
```typescript
// 构造上报来电的参数
let voipCallAttribute: voipCall.VoipCallAttribute = {
callId: '1234567890',
voipCallType: voipCall.VoipCallType.VOIP_CALL_VOICE,
userName: 'Callman',
userProfile: image.createPixelMapSync(new ArrayBuffer(100), { size: { width: 90, height: 90 } }),
abilityName: 'VoipCallAbility',
voipCallState: voipCall.VoipCallState.VOIP_CALL_STATE_RINGING,
showBannerForIncomingCall: true
};
// 上报来电
voipCall.reportIncomingCall(voipCallAttribute).then(errorReason => {
if (errorReason == voipCall.ErrorReason.ERROR_NONE) {
hilog.info(0x0000, 'CallDemo', 'Succeeded in reporting the incoming call');
} else {
hilog.error(0x0000, 'CallDemo', 'Failed to report the incoming call: %{public}d', errorReason);
}
});
```
4.  以语音通话为例，应用在接收到VOIP_CALL_EVENT_VOICE_ANSWER事件回调之后，立即向Call Service Kit上报VOIP_CALL_STATE_ANSWERED状态，并同时执行应用内接听。 在完成应用内接听之后，再向Call Service Kit上报VOIP_CALL_STATE_ACTIVE状态，系统会更新通话横幅。 示例代码如下： 接听过程的效果图展示如下： 正在接通 接通后 通话接听时，上报两次状态的好处是： 因为网络等原因，从用户点击接听，到通话真正被接通的时间间隔可能比较长（比如，1s左右）。这段时间，如果横幅通知的样式不变，一直停留在来电状态，用户可能认为点击接听无响应，体验不好。 上报两次状态，可以在接听的过程中，在界面上给用户以反馈。 以语音通话为例，应用在接收到VOIP_CALL_EVENT_VOICE_ANSWER事件回调之后，执行应用内接听。 一直到完成应用内接听后，再向Call Service Kit上报VOIP_CALL_STATE_ACTIVE状态。 示例代码如下： 如果用户在横幅通知上点击拒接，则应用在接收到VOIP_CALL_EVENT_REJECT事件回调之后，在应用内完成拒接，然后向Call Service Kit 上报VOIP_CALL_STATE_DISCONNECTED状态，系统会取消横幅通知。 拒接之后，应用可跳过5、6步，直接看第7步。
```typescript
voipCall.on('voipCallUiEvent', callback => {
if (callback?.voipCallUiEvent == voipCall.VoipCallUiEvent.VOIP_CALL_EVENT_VOICE_ANSWER) {
// 立即向Call Service Kit上报answered状态
voipCall.reportCallStateChange(callback.callId, voipCall.VoipCallState.VOIP_CALL_STATE_ANSWERED);
//...在应用内完成接听
// 应用内接听后，向Call Service Kit上报active状态
voipCall.reportCallStateChange(callback.callId, voipCall.VoipCallState.VOIP_CALL_STATE_ACTIVE);
}
});
```
5.  以语音通话为例，应用在接收到VOIP_CALL_EVENT_VOICE_ANSWER事件回调之后，立即向Call Service Kit上报VOIP_CALL_STATE_ANSWERED状态，并同时执行应用内接听。 在完成应用内接听之后，再向Call Service Kit上报VOIP_CALL_STATE_ACTIVE状态，系统会更新通话横幅。 示例代码如下： 接听过程的效果图展示如下： 正在接通 接通后 通话接听时，上报两次状态的好处是： 因为网络等原因，从用户点击接听，到通话真正被接通的时间间隔可能比较长（比如，1s左右）。这段时间，如果横幅通知的样式不变，一直停留在来电状态，用户可能认为点击接听无响应，体验不好。 上报两次状态，可以在接听的过程中，在界面上给用户以反馈。
```typescript
voipCall.on('voipCallUiEvent', callback => {
if (callback?.voipCallUiEvent == voipCall.VoipCallUiEvent.VOIP_CALL_EVENT_VOICE_ANSWER) {
// 立即向Call Service Kit上报answered状态
voipCall.reportCallStateChange(callback.callId, voipCall.VoipCallState.VOIP_CALL_STATE_ANSWERED);
//...在应用内完成接听
// 应用内接听后，向Call Service Kit上报active状态
voipCall.reportCallStateChange(callback.callId, voipCall.VoipCallState.VOIP_CALL_STATE_ACTIVE);
}
});
```
6.  以静音为例，用户在横幅上点击静音，Call Service Kit会给应用回调VOIP_CALL_EVENT_MUTED事件。 应用在完成静音后，应向Call Service Kit上报AUDIO_EVENT_MUTED音频状态。 示例代码如下： 静音、解除静音的横幅通知效果图展示如下： 静音 解除静音
```typescript
voipCall.on('voipCallUiEvent', callback => {
if (callback?.voipCallUiEvent == voipCall.VoipCallUiEvent.VOIP_CALL_EVENT_MUTED) {
// 向Call Service Kit上报静音
voipCall.reportCallAudioEventChange(callback.callId, voipCall.CallAudioEvent.AUDIO_EVENT_MUTED);
} else if (callback?.voipCallUiEvent == voipCall.VoipCallUiEvent.VOIP_CALL_EVENT_UNMUTED) {
// 向Call Service Kit上报解除静音
voipCall.reportCallAudioEventChange(callback.callId, voipCall.CallAudioEvent.AUDIO_EVENT_UNMUTED);
}
});
```
7.  应用收到该事件后，应在应用内完成挂断，然后，向Call Service Kit上报VOIP_CALL_STATE_DISCONNECTED状态，系统会取消横幅通知。 示例代码如下：
```typescript
voipCall.on('voipCallUiEvent', callback => {
if (callback?.voipCallUiEvent == voipCall.VoipCallUiEvent.VOIP_CALL_EVENT_HANGUP) {
// ...应用内完成挂断
// 向Call Service Kit上报通话状态
voipCall.reportCallStateChange(callback.callId, voipCall.VoipCallState.VOIP_CALL_STATE_DISCONNECTED);
}
});
```
8.  示例代码如下：
```typescript
// 解除voipCallUiEvent事件
voipCall.off('voipCallUiEvent', callBack => {
hilog.info(0x0000, 'CallDemo', `Succeeded in unRegistering voipCallUiEvent, callId: ${callBack.callId}`);
});
```
-  以语音通话为例，应用在接收到VOIP_CALL_EVENT_VOICE_ANSWER事件回调之后，立即向Call Service Kit上报VOIP_CALL_STATE_ANSWERED状态，并同时执行应用内接听。 在完成应用内接听之后，再向Call Service Kit上报VOIP_CALL_STATE_ACTIVE状态，系统会更新通话横幅。 示例代码如下： 接听过程的效果图展示如下： 正在接通 接通后 通话接听时，上报两次状态的好处是： 因为网络等原因，从用户点击接听，到通话真正被接通的时间间隔可能比较长（比如，1s左右）。这段时间，如果横幅通知的样式不变，一直停留在来电状态，用户可能认为点击接听无响应，体验不好。 上报两次状态，可以在接听的过程中，在界面上给用户以反馈。
```typescript
voipCall.on('voipCallUiEvent', callback => {
if (callback?.voipCallUiEvent == voipCall.VoipCallUiEvent.VOIP_CALL_EVENT_VOICE_ANSWER) {
// 立即向Call Service Kit上报answered状态
voipCall.reportCallStateChange(callback.callId, voipCall.VoipCallState.VOIP_CALL_STATE_ANSWERED);
//...在应用内完成接听
// 应用内接听后，向Call Service Kit上报active状态
voipCall.reportCallStateChange(callback.callId, voipCall.VoipCallState.VOIP_CALL_STATE_ACTIVE);
}
});
```
| 正在接通 | 接通后 |
| --- | --- |
|  |  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170019.34369802756804609870512196264700:50001231000000:2800:E087512A578781D735852290F6D9AA8D14084C0BB8F7168EF0BB81194F794BC0.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170019.35255315024580944475573820944615:50001231000000:2800:027A59A24F02EA7CDCD349384FBCF0BD737796024CF87B2DF91017229FB9CC57.jpg)
| 静音 | 解除静音 |
| --- | --- |
|  |  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170019.61259345951704970095511162107994:50001231000000:2800:DBBF27D1AA61C12E9DA3F6E255D10F1FEA885F843C2019A430E1DC8B3E550809.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170019.15384849405718644677190429389142:50001231000000:2800:66E09D182F6363BF7187F50D4D0D334DDB46C261DE9B346A3E2C4C6CC98EC734.jpg)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/outgoing-calls-V14
爬取时间: 2025-04-29 20:15:28
来源: Huawei Developer
场景介绍
应用主动发起音/视频通话，称为去电场景。
去电场景，由于应用在前台，不需要横幅通知，只在屏幕左上角，展示通话胶囊。去电场景的效果图展示如下：
| 语音去电(正在呼叫) | 语音去电（通话中） | 视频去电（正在呼叫） | 视频去电（通话中） |
| --- | --- | --- | --- |
|  |  |  |  |
语音去电(正在呼叫)
语音去电（通话中）
视频去电（正在呼叫）
视频去电（通话中）
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170019.76058044927362233337171930536481:50001231000000:2800:BB164A0B4AE8037DC308CF66A6F39D4825AED1584EBB49193AEBA643A1138FFA.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170019.17761985239950189274039390511818:50001231000000:2800:6B546F44199C72E0F7C9BD221B735A5C302378A4F7F06281D54E6B2D8C0F7502.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170019.22693325078645523635463683939846:50001231000000:2800:AD06B1B09F35E30783A5E856C98467878D1245133248647309C4F92F6FF097D9.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170019.63695838288863691043839361462425:50001231000000:2800:EE8842CF9452E47AD1029BB7DDD436F5CC37E2A2EA2A7ACD5FE928ABFEBAC9A6.jpg)
去电场景，用户也可以拉起通知中心面板，在实况窗横幅上做静音与解除静音、挂断通话等操作。
| 去电实况窗通知（正在呼叫） | 去电实况窗通知（通话中） |
| --- | --- |
|  |  |
去电实况窗通知（正在呼叫）
去电实况窗通知（通话中）
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170020.98777536049826046547470670255159:50001231000000:2800:0BD64A8BAEA5A27697E2165F0C8816C08542621680974183CB02EE2D89975FA7.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170020.07903115045108788607571835323003:50001231000000:2800:EEC410EFD4CE8D5B9FB86A2FDC3F03E43F3992759F99BDD1C05B5952984E1A68.jpg)
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170020.15785078967299033166253440263718:50001231000000:2800:C823994AAE5E76AD00704FD5B6F0279901C89F7DD7E2B683E92E124B9734BD86.jpg)
接口说明
去电场景的接口，由voipCall提供。更多接口信息详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| on(type: 'voipCallUiEvent', callback: Callback<VoipCallUiEventInfo>): void | 订阅voipCallUiEvent事件。 |
| off(type: 'voipCallUiEvent', callback?: Callback<VoipCallUiEventInfo>): void | 取消订阅voipCallUiEvent事件。 |
| reportOutgoingCall(voipCallAttribute: VoipCallAttribute): Promise<ErrorReason> | 上报去电。 |
| reportCallAudioEventChange(callId: string, callAudioEvent: CallAudioEvent): Promise<void> | 上报音频事件。 |
| reportCallStateChange(callId: string, callState: VoipCallState): Promise<void> | 上报通话状态改变。 |
| reportCallStateChange(callId: string, callState: VoipCallState, callType: VoipCallType): Promise<void> | 上报通话状态改变，并指定通话类型。 |
接口名
描述
on(type: 'voipCallUiEvent', callback: Callback<VoipCallUiEventInfo>): void
订阅voipCallUiEvent事件。
off(type: 'voipCallUiEvent', callback?: Callback<VoipCallUiEventInfo>): void
取消订阅voipCallUiEvent事件。
reportOutgoingCall(voipCallAttribute: VoipCallAttribute): Promise<ErrorReason>
上报去电。
reportCallAudioEventChange(callId: string, callAudioEvent: CallAudioEvent): Promise<void>
上报音频事件。
reportCallStateChange(callId: string, callState: VoipCallState): Promise<void>
上报通话状态改变。
reportCallStateChange(callId: string, callState: VoipCallState, callType: VoipCallType): Promise<void>
上报通话状态改变，并指定通话类型。
开发步骤
去电场景的开发步骤与来电场景相似。
1.
```typescript
import { voipCall } from '@kit.CallServiceKit';
import { image } from '@kit.ImageKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.  示例代码如下：
```typescript
// 注册voipCallUiEvent事件
voipCall.on('voipCallUiEvent', callback => {
hilog.info(0x0000, 'CallDemo', 'Succeeded in registering voipCallUiEvent');
});
```
3.  系统会在屏幕左上角，展示通话胶囊。 以语音去电为例，示例代码如下： 上报去电时，通话状态必须是VOIP_CALL_STATE_DIALING，否则Call Service Kit会认为参数不合法而返回1007200001错误码。
```typescript
// 构建上报去电的参数
let voipCallAttribute: voipCall.VoipCallAttribute = {
callId: '1234567890',
voipCallType: voipCall.VoipCallType.VOIP_CALL_VOICE,
userName: 'Jack',
userProfile: image.createPixelMapSync(new ArrayBuffer(100), { size: { width: 90, height: 90 } }),
abilityName: 'VoipCallAbility',
voipCallState: voipCall.VoipCallState.VOIP_CALL_STATE_DIALING,  // 去电的状态必须是DIALING
showBannerForIncomingCall: true
};
// 向Call Service Kit上报去电
voipCall.reportOutgoingCall(voipCallAttribute).then(errorReason => {
if (errorReason == voipCall.ErrorReason.ERROR_NONE) {
hilog.info(0x0000, 'CallDemo', 'Succeeded in reporting the outgoing call');
} else {
hilog.error(0x0000, 'CallDemo', 'Failed to report the outgoing call: %{public}d', errorReason);
}
});
```
4.  示例代码如下：
```typescript
// ...应用服务器收到对端接听的消息
let answeredCallId = '123456';
// 向Call Service Kit上报通话状态
voipCall.reportCallStateChange(answeredCallId, voipCall.VoipCallState.VOIP_CALL_STATE_ACTIVE);
```
5.  开发方法与来单场景相同，详见来电场景：静音与解除静音。
6.  开发方式与来电场景相同，详见来电场景：用户点击挂断。
7.  示例代码如下：
```typescript
// 解除voipCallUiEvent事件
voipCall.off('voipCallUiEvent', callBack => {
hilog.info(0x0000, 'CallDemo', `Succeeded in unRegistering voipCallUiEvent, callId: ${callBack.callId}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/callservice-enterprise-contact-display-V14
爬取时间: 2025-04-29 20:15:42
来源: Huawei Developer
本功能仅供企业应用开发者接入。
场景介绍
来去电时，页面显示已安装企业应用的联系人信息，方便用户识别来去电人信息，快速回应，增强企业内部沟通效率。
来去电页面或横幅仅展示一个联系人信息，对于多个应用里存在相同联系人的情况，按照应用包名的字典序排序，展示首个查询结果。
接口说明
具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| onQueryCallerInfo(phoneNumber: string)：Promise<CallerInfo> | 查询联系人信息接口 |
接口名
描述
onQueryCallerInfo(phoneNumber: string)：Promise<CallerInfo>
查询联系人信息接口
申请接入
该API使用受限，如需接入需要申请，方式如下：
企业应用开发者将申请信息发送至公共邮箱agconnect@huawei.com。
邮件标题：【申请公司名】—企业来电显示能力—Developer ID
邮件内容需包括：开发者接入企业来电显示能力的应用使用主体、应用名称、应用ID、应用包名、场景说明（具体描述该应用对应通讯录量级等使用的必要信息）。
开发步骤
1.  代码示例：
```typescript
import { CallerInfoQueryExtensionAbility, CallerInfo } from '@kit.CallServiceKit';
export default class EntryCallerInfoQueryExtAbility extends CallerInfoQueryExtensionAbility {
onQueryCallerInfo(phoneNumber: string): Promise<CallerInfo> {
return new Promise<CallerInfo>((resolve, reject) => {
let isSuccess = true;
// 在此处实现根据号码查询企业联系人的业务逻辑
if (isSuccess) {
// 查询成功，返回结果
resolve({
contactName:"xxxx",
employeeId:"xxxx",
department:"xxxx",
position:"xxxx"
});
} else {
// 查询失败，返回错误原因
reject("error reason");
}
});
}
}
```
2.  配置文件示例：
```json
{
"extensionAbilities": [
{
"name": "EntryCallerInfoQueryExtAbility",
"srcEntry": "./ets/callerinfoquery/EntryCallerInfoQueryExtAbility.ets",
"type": "callerInfoQuery"
}
],
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/call-faq-V14
爬取时间: 2025-04-29 20:15:56
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/call-faq-1-V14
爬取时间: 2025-04-29 20:16:09
来源: Huawei Developer
问题现象
调用voipCall.reportIncomingCall上报来电信息，但来电横幅无法显示。
解决措施

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/call-faq-2-V14
爬取时间: 2025-04-29 20:16:23
来源: Huawei Developer
问题现象
来电过程中，横幅通知展示，但头像无法正常显示。
解决措施

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloud-foundation-kit-guide-V14
爬取时间: 2025-04-29 20:16:37
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-introduction-V14
爬取时间: 2025-04-29 20:16:50
来源: Huawei Developer
Cloud Foundation Kit（云开发服务）可以按需为应用提供云函数、云数据库、云存储等云端服务。应用运行所需的服务器和环境可以皆由云端平台提供，开发者只需关注应用的业务逻辑，而无需关心基础设施（例如：服务器、操作系统、容器等）。
DevEco Studio中还提供了端云一体化开发的开发体验，您可以基于统一的技术栈，高效、协同地完成端、云代码的编写、调试、编译和部署，极大提高构建HarmonyOS应用和元服务的效率。
优势
-  您无需构建和管理云端资源，Cloud Foundation Kit为您提供了包括计算、弹性收缩、存储等一系列能力。
-  面对波峰波谷的业务场景，Cloud Foundation Kit可根据实际请求量弹性伸缩、按量计费，您无需为空闲资源买单，有效提升资源利用率，降低资源成本。
-  支持数据全密态加密，支持APP、用户和服务三重认证，提供基于角色的权限管理机制，全方位保障您和用户的数据安全。
-  支持在一套IDE中基于统一的技术栈进行端、云代码的协同开发，前端开发人员轻松转换为全栈工程师。
典型场景
应用后端
快速构建应用或者元服务的后端服务，从而大幅简化应用开发与运维相关的事务，快速完成应用的构建。例如：将应用数据存放在云数据库；将图片、文件等资产存放到云存储；应用逻辑使用云函数实现，通过Cloud Foundation Kit去便捷操作云数据库和云存储。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170020.10598495404943479675325244328925:50001231000000:2800:93422263E745211758232BBFFC7E33E70C75C8A5CC3697E44B8054D199727D26.jpg)
计算密集型任务
当应用中出现计算密集型任务时，可以在云端及时申请足够的算力来支撑任务的执行。当任务结束时，可以立即释放资源，避免浪费。
您可以为云函数配置定时触发器，定时执行任务，也可以通过其他服务主动调用云函数来执行任务。
例如，通过Cloud Foundation Kit实现对数据的渲染、叠加等处理：
适配类应用
通过Cloud Foundation Kit实现协议类型的转换，比如实现IoT中不同设备的协议适配。以及接入第三方平台，通过第三方平台提供的接口，实现业务的接入或者协作。
例如：可以将数据存储、身份验证、消息队列、推送通知、定时任务等功能切片通过云服务实现胶水层的链接、转换。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170020.43652645699240753339868557472815:50001231000000:2800:0E181AEB5691C281F0248C2E7539875881E0E85CD35037BB3AF08E40849CC3F0.jpg)
突发大量访问
传统架构服务在某些特殊场景下，可能出现大量的访问。为保证业务高峰时，系统能稳定运行，一般需要购买高性能、昂贵的服务器，组建集群负载均衡。但是，当业务回落时，就导致了大量服务器的资源浪费。
Cloud Foundation Kit能根据业务访问量进行扩容、缩容，规避业务高峰系统异常的风险，让您的应用从容应对诸如秒杀、节日活动等众多出现大量访问的业务场景。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170020.82197095377417228155329388723255:50001231000000:2800:17AFC03518D44B40871241A72ABF2B35173355670F61899AD1C5C671DF475084.jpg)
计费说明
Cloud Foundation Kit包含云函数、云数据库、云存储服务，华为为每个服务都提供了免费额度以供试用，具体的配额明细可以参考各服务的配额说明：
约束与限制
支持的设备
本Kit仅适用于手机、平板，且不支持使用模拟器运行调试。
支持的国家/地区
当前仅在中国境内（不包含中国香港、中国澳门、中国台湾）提供服务。
支持的签名方式
当前仅支持手动签名。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-preparations-V14
爬取时间: 2025-04-29 20:17:04
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-enable-function-V14
爬取时间: 2025-04-29 20:17:18
来源: Huawei Developer
请先参考“应用开发准备”完成基本准备工作，再继续进行以下开发活动。配置签名信息时，请使用手动签名方式。
首次使用云函数服务前，需要先开通此服务。如果您已经启用，可跳过本步骤。
1.  在项目列表中点击需要开通云函数的项目。
2.  如果您此时未设置数据处理位置，系统会自动弹出提示框提示您进行设置。目前，云函数支持启用多个数据处理位置，具体请参见设置数据处理位置。
3.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170020.79359140763639188010704285875506:50001231000000:2800:D13071C4FF3BCB396D08B687FDBEA38533D50DDFDA558F6C82A888374AEA268F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170021.02342023732490050358740163153868:50001231000000:2800:F36A022D76F8C6282C687567961B9D10EF2BDB2FE624B312EDEED06E8ABD76EA.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-enable-database-V14
爬取时间: 2025-04-29 20:17:31
来源: Huawei Developer
请先参考“应用开发准备”完成基本准备工作，再继续进行以下开发活动。配置签名信息时，请使用手动签名方式。
首次使用云数据库服务前，需要先开通此服务。如果您已经开通，可跳过本步骤。
1.  如果您此时未设置数据处理位置，系统会自动弹出提示框提示您进行设置，具体请参见设置数据处理位置。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170021.17464240590204888694884861281165:50001231000000:2800:80724CE04886895822A7718B8CF2204576D093508A14A725B05D09D98AB4DF6E.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-enable-storage-V14
爬取时间: 2025-04-29 20:17:45
来源: Huawei Developer
请先参考“应用开发准备”完成基本准备工作，再继续进行以下开发活动。配置签名信息时，请使用手动签名方式。
首次使用云存储服务前，需要先开通此服务。如果您已经开通，可跳过本步骤。
1.
2.  参数 说明 存储实例 存储实例名称必须符合以下条件： 默认数据处理位置 云存储支持启用多个数据处理位置，具体请参见设置数据处理位置。如当前项目已设置数据处理位置，则此处无需再设置。
3.  默认安全策略将允许经过身份验证的用户执行所有读写操作，开通服务时无法修改安全策略。服务开通后，您可制定更合适的安全策略来保护您的用户数据。关于如何修改安全策略，请参见安全规则。
4.  服务开通成功后，AGC将为您创建一个默认存储实例，默认存储实例的名称即为步骤4中配置的存储实例名称+“-五位随机数字字母”的组合，如“bucket001-ki6tc”。
5.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170021.46844762026430499567265234239608:50001231000000:2800:0878F109BD9CB0A3B7EB9CF440E9946EF704037C23822CFD863C9C410ACAF452.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170021.10235140722739541218862850911290:50001231000000:2800:3A962F15538A2CDC1A972D659970405B42C2EB762CA4F679BE69150B67E3BD5B.png)
| 参数  | 说明  |
| --- | --- |
| 存储实例  | 存储实例名称必须符合以下条件： 只能包含英文小写字母、数字、中划线（-）。只能以数字或字母开头和结尾。要求不少于3个字符，并且不能超过57个字符。不能为IP地址。不能包含连续两个及以上中划线（-）。名称全局唯一，创建后，不能修改。  |
| 默认数据处理位置  | 云存储支持启用多个数据处理位置，具体请参见设置数据处理位置。如当前项目已设置数据处理位置，则此处无需再设置。  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170021.87393304510919498261301179619890:50001231000000:2800:074CE3656DC590026BAE000239B9BF8854BC93822254FBB3C1B06D01834F8964.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170021.76217590113561846871474584317648:50001231000000:2800:5B263AC6ABF42C0DBA44395297E4FA2FAA64E273C24F7B7E1D208CA9AF301298.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-function-service-V14
爬取时间: 2025-04-29 20:17:59
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-develop-function-V14
爬取时间: 2025-04-29 20:18:12
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-create-and-config-function-V14
爬取时间: 2025-04-29 20:19:38
来源: Huawei Developer
创建函数
开通云函数服务后，您首先需要在AGC中创建函数，并添加函数执行的代码。
1.
2.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170022.32572040538463887052273701253851:50001231000000:2800:06154A818D7795203446CFB13FFD258E1CD80A061FC2B10F6BB61AF49BEA0134.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170022.69471890823153683686809100448582:50001231000000:2800:E0DEB56FAB36F58B370E75F3A5CBF59C960FA637935F008705688AFF1BBDE535.png)
函数配置
1.  配置项 说明 函数名称 函数的名称。 描述 函数的描述信息。 触发方式 请配置为“事件调用”。 “事件调用”表示通过触发器方式调用函数。 超时时长 函数最大运行时长，超过该时长，则默认函数执行失败，单位为秒，取值范围为1~1800。不同调用方式下，函数最大运行时长不同： 实例并发 函数请求并发量上限，单位为个，取值范围为1~10000。 环境变量 key-value形式，您可以将需要的变量配置信息传入函数执行环境中，用于函数在运行时读取和使用。
2.  点击“新增变量”，输入key和value值，如下图中所示，env1为环境变量的key值，test为value值。点击可将变量删除。 选中“JSON格式编辑”，在文本框中以key-value键值对JSON格式添加环境变量。当添加的环境变量比较多时，为了方便核对，可点击“format”对变量进行格式化排列。
3.  点击“新增变量”，输入key和value值，如下图中所示，env1为环境变量的key值，test为value值。点击可将变量删除。
4.  选中“JSON格式编辑”，在文本框中以key-value键值对JSON格式添加环境变量。当添加的环境变量比较多时，为了方便核对，可点击“format”对变量进行格式化排列。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170022.65457128681610407732308234940222:50001231000000:2800:594B76C81E945259A3BD5E6D3416432E3A80A4BD2D01DE9728603C73D98BEED2.png)
| 配置项  | 说明  |
| --- | --- |
| 函数名称  | 函数的名称。  |
| 描述  | 函数的描述信息。  |
| 触发方式  | 请配置为“事件调用”。 “事件调用”表示通过触发器方式调用函数。  |
| 超时时长  | 函数最大运行时长，超过该时长，则默认函数执行失败，单位为秒，取值范围为1~1800。不同调用方式下，函数最大运行时长不同： “同步”调用方式时，函数最大运行时长为55秒。 “异步”调用方式时，函数最大运行时长为1800秒。  |
| 实例并发  | 函数请求并发量上限，单位为个，取值范围为1~10000。  |
| 环境变量  | key-value形式，您可以将需要的变量配置信息传入函数执行环境中，用于函数在运行时读取和使用。  |
-  点击“新增变量”，输入key和value值，如下图中所示，env1为环境变量的key值，test为value值。点击可将变量删除。
-  选中“JSON格式编辑”，在文本框中以key-value键值对JSON格式添加环境变量。当添加的环境变量比较多时，为了方便核对，可点击“format”对变量进行格式化排列。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170022.74013063000605813653545430454277:50001231000000:2800:9F7158FAF252453B3BE6A2ABE29F11B6E565F6186C9E2CCB6C37B4237087F5B2.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170022.53499982394677191648573714800687:50001231000000:2800:F90BC8C14DC0FD362466569061AEA26F350D401F2CB22680F74DD7EF03A1E439.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170022.23361822938610105640169538844555:50001231000000:2800:08AAA6BAA118BDA89ABCAD35AC5D4B8512A338A41A716F4DE988CD84F4672B1D.png)
触发器
进入“触发器”页面，您可基于函数触发场景配置需要的触发器，本场景下添加HTTP触发器。“触发器类型”和“请求方式”保持默认选择，并配置“认证类型”，配置完成后点击“下一步”。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170022.23660423856640132418353298434782:50001231000000:2800:5F4919DB4215CEB84FAAFAE9F995A41E0085442049406068F7B724261F32B67C.png)
| 参数  | 说明  |
| --- | --- |
| 触发器类型  | HTTP触发器。  |
| 请求方式  | HTTP触发器目前仅支持POST请求方式。  |
| 认证类型  | HTTP触发器的认证类型。 API客户端鉴权（Client适用）：端侧网关认证，适用于来自APP客户端侧（即本地应用或者项目）的函数调用。API客户端鉴权（Server适用）：云侧网关认证，适用于来自APP服务器侧（即云函数）的函数调用。  |
| 启用decode  | 通过HTTP触发器触发函数时，对于contentType为“application/x-www-form-urlencoded”的触发请求，是否使用URLDecoder对请求body进行解码再传入到函数中。  |
参数
说明
触发器类型
HTTP触发器。
请求方式
HTTP触发器目前仅支持POST请求方式。
认证类型
HTTP触发器的认证类型。
启用decode
通过HTTP触发器触发函数时，对于contentType为“application/x-www-form-urlencoded”的触发请求，是否使用URLDecoder对请求body进行解码再传入到函数中。
函数代码
进入“函数代码”页面，配置“运行环境”、“内存配置”、“代码输入类型”等信息，配置完成后点击“下一步”。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170022.89869051230340222788592767545120:50001231000000:2800:95F0F8384BCC71DB619CCF29F39467E8D56710D299660A5A6A787C72B730EF36.png)
| 配置项  | 说明  |
| --- | --- |
| 运行环境  | 函数容器的运行环境。请选择nodejs 18.x/20.x。  |
| 内存配置  | 函数容器所占有的内存大小，单位为MB，取值范围：500，1000，2000，4000。  |
| 代码输入类型  | 包括“在线编辑”与“*.zip文件”两种方式，默认值为“在线编辑”。 选择“*.zip文件”方式部署云函数时，入口方法文件的编写方法请参见入口方法。  |
| 函数入口  | 包括入口文件名称和入口方法名称，通过“.”连接。例如handler.myHandler，其中handler为入口文件名称，myHandler为入口方法名称。 nodejs 18.x/20.x运行环境下入口文件必须放置在函数部署包的根目录下，具体请参见准备函数部署包。  |
| 代码文件  | 用于在线编辑函数代码或上传函数部署包。 “代码输入类型”配置项选择“在线编辑”时，您可在创建函数界面集成的WebIDE区域在线编辑函数代码。WebIDE的详细使用方法请参见WebIDE。“代码输入类型”配置项选择“*.zip文件”时，点击即可上传函数部署包，也可直接拖曳zip文件至虚线框内。  |
配置项
说明
运行环境
函数容器的运行环境。请选择nodejs 18.x/20.x。
内存配置
函数容器所占有的内存大小，单位为MB，取值范围：500，1000，2000，4000。
代码输入类型
包括“在线编辑”与“*.zip文件”两种方式，默认值为“在线编辑”。
选择“*.zip文件”方式部署云函数时，入口方法文件的编写方法请参见入口方法。
函数入口
包括入口文件名称和入口方法名称，通过“.”连接。例如handler.myHandler，其中handler为入口文件名称，myHandler为入口方法名称。
nodejs 18.x/20.x运行环境下入口文件必须放置在函数部署包的根目录下，具体请参见准备函数部署包。
代码文件
用于在线编辑函数代码或上传函数部署包。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170022.37240935541773844433130103825486:50001231000000:2800:369F7C2261154E0DF63686023EF581EDA0ED851EAEC6AC072F7D59A41218300F.png)
WebIDE
当“代码输入类型”配置项选择“在线编辑”时，创建函数界面中集成了WebIDE功能，支持在线编辑函数代码。
如果在函数实例已经运行的情况下进行函数代码或配置更新，AGC后台会滚动更新函数实例，请您耐心等待10-20秒。
WebIDE从左至右分两个部分：目录树、代码编辑器和最大化，如下图所示。编辑完成后平台会生成部署包并上传。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170022.98188663388611936860924460706061:50001231000000:2800:5FD77FA5E52168E49F40F1E2B2F19262C4AC28498A54559910457A1E8F0912DF.png)
| 组成  | 说明  |
| --- | --- |
| 目录树  | 目录树支持如下能力： 新增文件夹：选中一个文件或文件夹，点击右上角新增文件夹按钮“”。若选中的是文件夹，则新增一个子文件夹。若选中的是文件，则新增一个同级文件夹。新增文件：选中一个文件或文件夹，点击右上角新增文件按钮“”。若选中的是文件夹，则新增一个子文件。若选中的是文件，则新增一个同级文件。删除文件：选中一个文件或文件夹，点击右侧删除按钮“”，删除文件或文件夹。不允许删除根目录。重命名：双击文件或文件夹，输入新命名（仅支持字母、数字、下划线和中划线），完毕后按Enter键完成重命名。  |
| 编辑器  | 编辑器具有如下能力： 语法高亮：按照node.js语法高亮显示代码。语法校验：语法有错误时会给出错误提示。代码提示：输出代码自动给出相关代码提示。代码填充：选择后系统代码可自动填充。格式化：快捷键Ctrl+Shift+B。支持快捷键操作：Ctrl+v, Ctrl+c, Ctrl+z, Ctrl+x, Ctrl+f, Ctrl+/等。  |
| 最大化  | 点击最大化按钮，可以最大化在线编辑区，再次点击按钮或按ESC键退出最大化。  |
组成
说明
目录树
目录树支持如下能力：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170022.61987873465363574871067785722620:50001231000000:2800:3258142B4CA5BA796DB3531ACD4BEBDDE53C098EBB7776404EA5F5A9EB30B300.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170022.18603703960928661206290237953111:50001231000000:2800:B3AD7A83A51C6CDA26DFD29CAFA4DFECCBD9237A56E35A112FAFC39616110B6B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170023.37669255910317981252631512757343:50001231000000:2800:A97F14BB56F794895F749B62374A6C3B1C87834CF311909493C020E16252F3A4.png)
编辑器
编辑器具有如下能力：
最大化
点击最大化按钮，可以最大化在线编辑区，再次点击按钮或按ESC键退出最大化。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170023.30606279135611366234747416342385:50001231000000:2800:DEC73AEC1A54435A534015A80A346A33F42BF08199359F0FDAE13D22EF7704F7.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170023.36778935407607139446724834378485:50001231000000:2800:D502E13C8907A9FC217D6C7C419C19412BE9C154D4509F46183BF1A8C13BFC72.png)
层配置
层可以为您提供公共依赖库的发布与部署能力。您可以将函数依赖的公共库和相关依赖项提炼到层，通过为函数绑定层，便可以在函数中使用库，而不必将库包含在函数的代码包中，从而达到缩小函数代码包体积与缩短函数部署时间的效果，也避免了使用函数代码安装和打包依赖项时可能出现的错误。详细的层管理功能，请参见层管理。
如果您尚未创建层，可跳过下述步骤，直接点击页面底部的“创建”完成函数定义，后续创建层之后可在函数详情页再进行层配置，为函数绑定层。如果您在创建函数之前已创建层，可按照下述步骤进行操作。
1.
2.  选择层时，层的兼容运行时需与函数运行环境相符，系统会自动完成过滤。若无匹配的层供您选择，请参考创建层创建相同运行环境的层后再进行绑定。 参数 说明 层名称 层的名称。重复时自动在同名的层中创建一个新版本。 版本 存在多个层版本时，选择函数绑定的层版本。 层范围 层的共享范围。 兼容运行时 层使用的语言环境。请选择“nodejs”。 层描述 层的附加说明，长度不超过1024位。
3.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170023.62374758595946205200685248553928:50001231000000:2800:B945A4612B2E1468D3F230409E8F4B8EA0426FDAF5958DB5292F1CB639DA7598.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170023.39771218358305931818927782582233:50001231000000:2800:7428544F2107C31AC9668037DCB6AD9633D8B7338F2431C6435E2BD0E801286F.png)
| 参数  | 说明  |
| --- | --- |
| 层名称  | 层的名称。重复时自动在同名的层中创建一个新版本。  |
| 版本  | 存在多个层版本时，选择函数绑定的层版本。  |
| 层范围  | 层的共享范围。 项目内共享团队内共享  |
| 兼容运行时  | 层使用的语言环境。请选择“nodejs”。  |
| 层描述  | 层的附加说明，长度不超过1024位。  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170023.14926910052899539460182466663344:50001231000000:2800:C4778A7112085D9406BB445804C777AB80370927AADE4E05A9643CFF581C75A0.png)
更多信息
函数配置完成后，您可以修改函数高级配置。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-test-function-V14
爬取时间: 2025-04-29 20:19:51
来源: Huawei Developer
下文以函数latest版本为例介绍测试方法。若您需要测试函数的已发布版本，可在已发布版本详情页面选择“函数代码”页签，参考方式二进行测试。
函数创建后您可以在AGC控制台测试函数的代码运行是否正常。进入测试界面有两种方式：
-
-  直接点击“测试”对函数进行测试。 如果需要设置调用函数的请求消息体，可按照如下步骤配置测试参数，并可保存为测试事件方便后续继续使用。 “事件”文本框内输入的JSON对象，对应的是触发器的event事件格式，会透传给函数。 “代码输入类型”为“.zip文件”的函数，测试过程中，若您需要修改函数代码文件，可在本地修改且打包完成后，点击重新上传函数部署包，然后点击页面底部的“提交”。当界面提示更新函数成功时，则可以点击“测试函数”对更改后的代码进行测试。 若代码更新量比较大，需要调整函数内存配置，可点击“内存配置”下拉框进行调整，然后再上传函数部署包。
-
-
-  直接点击“测试”对函数进行测试。 如果需要设置调用函数的请求消息体，可按照如下步骤配置测试参数，并可保存为测试事件方便后续继续使用。 “事件”文本框内输入的JSON对象，对应的是触发器的event事件格式，会透传给函数。
-  直接点击“测试”对函数进行测试。
-  如果需要设置调用函数的请求消息体，可按照如下步骤配置测试参数，并可保存为测试事件方便后续继续使用。 “事件”文本框内输入的JSON对象，对应的是触发器的event事件格式，会透传给函数。
-  “事件”文本框内输入的JSON对象，对应的是触发器的event事件格式，会透传给函数。
-
-
-
-
-
-
-
-  “代码输入类型”为“.zip文件”的函数，测试过程中，若您需要修改函数代码文件，可在本地修改且打包完成后，点击重新上传函数部署包，然后点击页面底部的“提交”。当界面提示更新函数成功时，则可以点击“测试函数”对更改后的代码进行测试。 若代码更新量比较大，需要调整函数内存配置，可点击“内存配置”下拉框进行调整，然后再上传函数部署包。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170023.99238739631281621814236285440003:50001231000000:2800:EE780270C177D07F053929680B87B4004DE8E2D8A98507B288874FBC939D54CD.png)
1.
2.
3.  直接点击“测试”对函数进行测试。 如果需要设置调用函数的请求消息体，可按照如下步骤配置测试参数，并可保存为测试事件方便后续继续使用。 “事件”文本框内输入的JSON对象，对应的是触发器的event事件格式，会透传给函数。
4.  直接点击“测试”对函数进行测试。
5.  如果需要设置调用函数的请求消息体，可按照如下步骤配置测试参数，并可保存为测试事件方便后续继续使用。 “事件”文本框内输入的JSON对象，对应的是触发器的event事件格式，会透传给函数。
6.  “事件”文本框内输入的JSON对象，对应的是触发器的event事件格式，会透传给函数。
7.
8.
9.
10.
11.
12.
13.
14.  “代码输入类型”为“.zip文件”的函数，测试过程中，若您需要修改函数代码文件，可在本地修改且打包完成后，点击重新上传函数部署包，然后点击页面底部的“提交”。当界面提示更新函数成功时，则可以点击“测试函数”对更改后的代码进行测试。 若代码更新量比较大，需要调整函数内存配置，可点击“内存配置”下拉框进行调整，然后再上传函数部署包。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170023.69300037013562606007534939424879:50001231000000:2800:49E6630C906B4E6863F52DD12E44A50EB940B0CE6498381A9C4384B9918A3591.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170023.37168964181278539575946513052665:50001231000000:2800:3198AAECB58EB736E707C99E2F225F154E124CEBB4BCCA5EED74EC9162135D81.png)
-  直接点击“测试”对函数进行测试。
-  如果需要设置调用函数的请求消息体，可按照如下步骤配置测试参数，并可保存为测试事件方便后续继续使用。 “事件”文本框内输入的JSON对象，对应的是触发器的event事件格式，会透传给函数。
-  “事件”文本框内输入的JSON对象，对应的是触发器的event事件格式，会透传给函数。
-
-
-
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170023.87918850448230877312116501688908:50001231000000:2800:1470B258BA0F642E2850791F3C100A2F027C3FAC6837277FE4E703F7BF405E7E.png)
1.  “事件”文本框内输入的JSON对象，对应的是触发器的event事件格式，会透传给函数。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170024.71256054450542695472729123928940:50001231000000:2800:873AF0DDE2EFDE2A4ED999CF9C2DDB8F709DC01E2A88C2B92D7ED30E8349C0FF.png)
1.
2.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170024.14528037923282982410312198322737:50001231000000:2800:3C56112F1D517B115298761919B6C6EE22367CDA7466F65634144C2A19A3C6C0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170024.99523296517193947598273006563617:50001231000000:2800:BE02C0B8EC0B469B40CE6E8D72C20A19846776FB112D445B874B39FC5DFB6402.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170024.08129443000686214120279539043652:50001231000000:2800:BF945B959961DF24D9447304036BE0A0EEA6BFD40CD1D4D7A43DF7CE4290B3E4.png)
-
-
-
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170024.76380710899520160222159065938759:50001231000000:2800:F218003679D96779E505396079FBBAB8FE186AD5A03CCB521D76DA04F1AA5808.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170024.10956295681188837398097193086484:50001231000000:2800:6FB104B29A85DBC90258FD3E6CAA4EC6C0C62FBC7402C1C0C91C45C09450BA6F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170024.65207776896653541026644088409929:50001231000000:2800:7D7E08870CAD07570C14E8BA2E6D643EA264A61888B71A1D6EBF68DD65409218.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170024.25733289613792669900686609381102:50001231000000:2800:E30EDBB2680B48254329AE63198E9EE47DBA84439A05C7C513F9DEE2DF79AA0B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170024.60382220168235997169966454210925:50001231000000:2800:9A48FA4C84F2EACF8EACA083034C2678B4A8B9ECA28C06ADBE76F55BD1F8AEE6.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170024.12837006435813857389080442936138:50001231000000:2800:B586727584705326F58CD7396AEBB70F3C316BE5959D848386E0B9393FEDBF2A.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-call-function-V14
爬取时间: 2025-04-29 20:20:05
来源: Huawei Developer
设置云函数配置项
```typescript
"requestPermissions": [
{
"name": "ohos.permission.INTERNET"
}
]
```
查询函数名和版本
在函数的触发器页面点击“HTTP触发器”，查看“触发URL”的后缀，获取触发器的标识，格式为“函数名-版本号”。如下图所示，“myhandlerxxxx-$latest”即为HTTP触发器标识，其中“myhandlerxxxx”为函数名，“$latest”为版本号。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170024.86395699536914217591721484302647:50001231000000:2800:7BAF2BBEB2BB6F86327BF85B019FBC04F961794F26F4C036CEEC6D7459454B1D.png)
应用中调用函数
```typescript
import { cloudFunction } from '@kit.CloudFoundationKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
1.  或者
```typescript
cloudFunction.call({
name: 'myhandlerxxxx',
version: '$latest', // 如果不传入版本号，默认为“$latest”。
timeout: 10 * 1000, // 单位为毫秒，默认为70*1000毫秒。
data: {
param1: 'val1',
param2: 'val2'
}
}).then((value: cloudFunction.FunctionResult) => {
console.info(`Succeeded in calling the function, result: ${JSON.stringify(value.result)}`);
}).catch((err: BusinessError) => {
console.error(`Failed to call the function, Code: ${err.code}, message: ${err.message}`);
})
```
1.  value为步骤2中调用call()方法返回的cloudFunction.FunctionResult对象，返回值为云函数body返回的值，以测试函数时返回的结果为例，value.result = {"simple":"example"}。
```typescript
let returnValue = value.result;
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-database-service-V14
爬取时间: 2025-04-29 20:20:20
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-database-add-object-V14
爬取时间: 2025-04-29 20:20:34
来源: Huawei Developer
您需要基于AGC控制台创建对象类型，请您遵循操作步骤创建示例中涉及的对象类型。
1.
2.
3.  字段名称 类型 主键 非空 加密 默认值 id Integer ✓ ✓ – – bookName String – – – – author String – – – – price Double – – – – publisher String – – – – publishTime Date – – – – shadowFlag Boolean – – – true
4.
5.  角色 query upsert delete 说明 所有人 ✓ ✓ ✓ 代表所有用户，包含认证和非认证用户。 该角色默认拥有query权限，可自定义配置upsert和delete权限。如：角色勾选了upsert权限，该角色可在本对象类型中写入数据。 但是，不建议将upsert和delete权限配置给所有人角色。 当对象类型中设置了加密字段之后，表示开启全程加密功能，此时所有人角色将不会拥有query、upsert和delete权限，且不允许修改。 认证用户 ✓ ✓ ✓ 经过AGC登录认证的用户。 该角色默认拥有query权限，可自定义配置upsert和delete权限。如：角色勾选了upsert权限，该角色可在本对象类型中写入数据。 当对象类型中设置了加密字段之后，表示开启全程加密功能，此时认证用户角色将不会拥有query、upsert和delete权限，且不允许修改。 数据创建者 ✓ ✓ ✓ 经过认证的数据创建用户。 该角色默认拥有所有权限，且可自定义配置所有权限。如：角色勾选了upsert权限，该角色可在本对象类型中写入数据。 每条数据都有其对应的数据创建人（即应用用户），每个数据创建者仅可以upsert或者delete自己创建的数据，不能upsert或者delete他人创建的数据。 数据创建者的信息保存在数据记录的系统表中。 管理员 ✓ ✓ ✓ 应用开发者，主要是指通过AGC控制台或FaaS（Function as a Service，函数即服务）侧访问云数据库的角色。 该角色默认拥有所有权限，且可自定义配置所有权限。如：角色勾选了upsert权限，该角色可在本对象类型中写入数据。 管理员可以管理并配置其他角色的权限。
6.
7.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170024.15303341099340405653532744948076:50001231000000:2800:A428CF2DD731D84D14CDC632A8C7987CFBD5D5AF1900FA30564F072950539543.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170025.93444603793098025463354399972098:50001231000000:2800:53B0DBFC12095AEBEEB1EB2082EB853477CB31ADF7F3E84EEDE6979B632123B6.png)
| 字段名称  | 类型  | 主键  | 非空  | 加密  | 默认值  |
| --- | --- | --- | --- | --- | --- |
| id  | Integer  | ✓  | ✓  | –  | –  |
| bookName  | String  | –  | –  | –  | –  |
| author  | String  | –  | –  | –  | –  |
| price  | Double  | –  | –  | –  | –  |
| publisher  | String  | –  | –  | –  | –  |
| publishTime  | Date  | –  | –  | –  | –  |
| shadowFlag  | Boolean  | –  | –  | –  | true  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170025.55236038227436669040416928883992:50001231000000:2800:D63AF16DBBC3C239E239CC8A0435C54C50F3A397A22384F64025E5F938FD41B5.png)
| 角色  | query  | upsert  | delete  | 说明  |
| --- | --- | --- | --- | --- |
| 所有人  | ✓  | ✓  | ✓  | 代表所有用户，包含认证和非认证用户。 该角色默认拥有query权限，可自定义配置upsert和delete权限。如：角色勾选了upsert权限，该角色可在本对象类型中写入数据。 但是，不建议将upsert和delete权限配置给所有人角色。 当对象类型中设置了加密字段之后，表示开启全程加密功能，此时所有人角色将不会拥有query、upsert和delete权限，且不允许修改。  |
| 认证用户  | ✓  | ✓  | ✓  | 经过AGC登录认证的用户。 该角色默认拥有query权限，可自定义配置upsert和delete权限。如：角色勾选了upsert权限，该角色可在本对象类型中写入数据。 当对象类型中设置了加密字段之后，表示开启全程加密功能，此时认证用户角色将不会拥有query、upsert和delete权限，且不允许修改。  |
| 数据创建者  | ✓  | ✓  | ✓  | 经过认证的数据创建用户。 该角色默认拥有所有权限，且可自定义配置所有权限。如：角色勾选了upsert权限，该角色可在本对象类型中写入数据。 每条数据都有其对应的数据创建人（即应用用户），每个数据创建者仅可以upsert或者delete自己创建的数据，不能upsert或者delete他人创建的数据。 数据创建者的信息保存在数据记录的系统表中。  |
| 管理员  | ✓  | ✓  | ✓  | 应用开发者，主要是指通过AGC控制台或FaaS（Function as a Service，函数即服务）侧访问云数据库的角色。 该角色默认拥有所有权限，且可自定义配置所有权限。如：角色勾选了upsert权限，该角色可在本对象类型中写入数据。 管理员可以管理并配置其他角色的权限。  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170025.77464144829779039599357613541629:50001231000000:2800:A4F2F473D3B15C25C9DB207FDE1A45BD394150FA01459D53D88685BA6B5C5A1C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170025.68512520744488512786597077133991:50001231000000:2800:A7D4089E3AF1C41ECA91886BC8E912B5A5136D03CD085B0FA724A61BF88850FA.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-database-add-zone-V14
爬取时间: 2025-04-29 20:20:47
来源: Huawei Developer
此章节以建一个“存储区名称”为“QuickStartDemo”的存储区举例说明。
1.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170025.32340696159140941732990244603356:50001231000000:2800:CF77140015FE465454CCD8EEEC19F3AF5E959F157C9228F3C6487FBDA3E0FFD3.png)
1.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170025.19735551244594854590532242987664:50001231000000:2800:53C424A48F8B93CC5AB836DB03DC5C8FADA6ED1640BEC505F7CA10E240BC941B.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-database-add-file-V14
爬取时间: 2025-04-29 20:21:01
来源: Huawei Developer
```typescript
import { cloudDatabase } from '@kit.CloudFoundationKit';
class BookInfo extends cloudDatabase.DatabaseObject{
public naturalbase_ClassName(): string {
return "BookInfo";
}
public id: number | undefined;
public bookName: string | undefined;
public author: string | undefined;
public price: number | undefined;
public publisher: string | undefined;
public publishTime: Date | undefined;
}
export { BookInfo };
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-database-initialize-V14
爬取时间: 2025-04-29 20:21:15
来源: Huawei Developer
```typescript
"requestPermissions": [
{
"name": "ohos.permission.INTERNET"
}
]
```
```typescript
import { cloudDatabase } from '@kit.CloudFoundationKit';
let databaseZone = cloudDatabase.zone('QuickStartDemo');
```
1.  后续“databaseZone”、“condition”都需要在每个查询中独立使用，可以参考此章节创建，下文代码中不再重复创建的操作。
```typescript
import { BookInfo } from 'xx/BookInfo'; // xx是BookInfo文件的路径
let condition = new cloudDatabase.DatabaseQuery(BookInfo);
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-database-upsert-V14
爬取时间: 2025-04-29 20:21:29
来源: Huawei Developer
您可以通过upsert()将一个或者一组对象写入到当前存储区中。在写入对象时，如果在存储区已经存在主键相同的对象，则更新已有的对象；如果不存在，则写入一个新的对象。写入的数据可以来自于新建对象，或者从存储区查询出来的对象。
写入一组对象时，数据的写入操作是原子性的，即对象列表中的对象要么全部成功写入，要么全部失败。
调用写入数据方法，有两种返回方式，返回一个Promise对象或者在参数中传入一个callback对象返回，下面以Promise为例详细说明。
Promise对象中封装了写入操作执行的结果，通过该Promise对象可以异步侦听执行结果：如果执行成功，可以获取写入的对象数量；如果执行失败，可以获取错误信息。
注意事项：
代码示例：
将BookInfo对象写入至存储区中，写入成功后，返回写入的数量；写入失败，抛出异常。
```typescript
async upsert() {
try {
let databaseZone = cloudDatabase.zone("QuickStartDemo");
let book = new BookInfo();
book.id = 3;
book.bookName = '左传';
book.price = 100.0;
let record = await databaseZone.upsert(book);
console.info(`Succeeded in upserting a book , result: ` + JSON.stringify(record));
} catch (err) {
console.error(`Failed to upsert a book , Code: ${err.code}, message: ${err.message}`);
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-database-query-V14
爬取时间: 2025-04-29 20:21:42
来源: Huawei Developer
云数据库通过query()方法查询对象，并提供了丰富的谓词查询，比如equalTo()、notEqualTo()、in()等。通过单个或者多个链式过滤条件，您可以从存储区查询到满足特定条件的对象，也可以通过排序谓词对查询结果排序，或者通过限定查询返回数量谓词限定查询结果返回的数量。详细的查询条件请参见DatabaseQuery。
应用会直接从云侧存储区服务器查询数据，本地不会缓存数据。
调用查询数据方法，有两种返回方式，返回一个Promise对象或者在参数中传入一个callback对象返回，下面以Promise为例详细说明。
注意事项：
每次的查询操作仅支持查询一个对象类型下的数据。
简单查询
您可以在无查询条件时，获取一个对象类型中所有的对象；也可以指定单个查询条件，来获取满足该条件的对象。
```typescript
async queryAll() {
try {
let resultArray = await databaseZone.query(condition);
console.info(`Succeeded in querying , result: ` + JSON.stringify(resultArray));
} catch (err) {
console.error(`Failed to query , Code: ${err.code}, message: ${err.message}`);
}
}
```
```typescript
async queryOneBook() {
try {
condition.equalTo('bookName', '左传');
let resultArray = await databaseZone.query(condition);
console.info(`Succeeded in querying , result: ` + JSON.stringify(resultArray));
} catch (err) {
console.error(`Failed to query , Code: ${err.code}, message: ${err.message}`);
}
}
```
复合查询
您可以通过多个链式过滤条件，来获取满足条件的对象。多个链式条件之间默认用“与”运算。
```typescript
condition.contains('bookName', '数据库')
.greaterThan('price', 20.0)
.and()
.lessThan('price', 50.0);
let resultArray = await databaseZone.query(condition);
```
```typescript
condition.contains('bookName', '数据库')
.lessThan('price', 20.0)
.or()
.greaterThan('price', 50.0);
let resultArray = await databaseZone.query(condition);
```
```typescript
condition.contains('bookName', '史记')
.equalTo('author', '司马迁')
.greaterThan('price', 60.0);
let resultArray = await databaseZone.query(condition);
```
```typescript
condition.contains('bookName', '自传')
.beginGroup()
.equalTo('author', '齐白石')
.or()
.equalTo('author', '司马迁')
.endGroup()
.greaterThan('price', 60.0);
let resultArray = await databaseZone.query(condition);
```
数据排序
您可以通过orderByAsc()或者orderByDesc()实现对查询结果集中的对象按某个字段进行升序或者降序排列，排序谓词需要在其它查询谓词之后且在限定数据查询数量谓词之前。
```typescript
condition.lessThan('price', 50.0)
.orderByDesc('price');
let resultArray = await databaseZone.query(condition);
```
限定数据查询返回数量
在查询数据时，您可以通过limit()限定查询返回数据的起始位置和数量，实现数据的分页。例如与排序查询谓词组合使用，可以实现获取top-N条数据。
对查询结果中的对象限定查询返回数量时，限定数据查询返回数量谓词在所有其他谓词查询之后。
```typescript
condition.lessThan('price', 50.0)
.limit(10);
let resultArray = await databaseZone.query(condition);
```
```typescript
condition.lessThan('price', 50.0)
.orderByDesc('price')
.limit(10, 6);
let resultArray = await databaseZone.query(condition);
```
对查询结果进行算数计算
在查询数据时，可以通过calculateQuery()对查询结果对象中的某个字段进行算术计算并返回计算的结果。
构造查询条件，并调用calculateQuery()方法，查询所有价格小与50.0的书籍，并且计算所有书籍价格的平均值。
```typescript
async calculateQuery() {
try {
condition.lessThan('price', 50.0);
let resultNum = await databaseZone.calculateQuery(condition, 'price', cloudDatabase.QueryCalculate.AVERAGE);
console.info(`Succeeded in calculateQuerying , result: ` + JSON.stringify(resultNum));
} catch (err) {
console.error(`Failed to calculateQuery , Code: ${err.code}, message: ${err.message}`);
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-database-delete-V14
爬取时间: 2025-04-29 20:21:56
来源: Huawei Developer
您可以通过delete()删除单个对象或者一组对象。删除数据时，云数据库会根据传入对象主键删除相应的数据，不会比对该对象其它属性与存储的数据是否一致。删除一组对象时，删除操作是原子性的，即对象列表中的对象要么全部删除成功，要么全部删除失败。
调用删除数据方法，有两种返回方式，返回一个Promise对象或者在参数中传入一个callback对象返回，本文以Promise为例详细说明。
注意事项：
删除一组对象时，该组中的对象必须属于同一个对象类型，否则会导致删除失败。
代码示例：
将对象删除，如果删除成功，返回删除对象的个数；执行失败，抛出异常。
```typescript
async delete() {
try {
let book = new BookInfo();
book.id = 1;
let deleteNum = await databaseZone.delete(book);
console.info(`Succeeded in deleting , result: ` + JSON.stringify(deleteNum));
} catch (err) {
console.error(`Failed to delete , Code: ${err.code}, message: ${err.message}`);
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-storage-service-V14
爬取时间: 2025-04-29 20:22:09
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-storage-config-V14
爬取时间: 2025-04-29 20:22:23
来源: Huawei Developer
```typescript
"requestPermissions": [
{
"name": "ohos.permission.INTERNET"
}
]
```
```typescript
import { cloudCommon } from '@kit.CloudFoundationKit';
import { request } from '@kit.BasicServicesKit';
// 设置云存储只使用wifi网络
cloudCommon.init({
storageOptions: {
network: request.agent.Network.WIFI
}
})
```
```typescript
import { cloudCommon } from '@kit.CloudFoundationKit';
import { request } from '@kit.BasicServicesKit';
// 设置云存储上传下载任务为前台模式
cloudCommon.init({
storageOptions: {
mode: request.agent.Mode.FOREGROUND
}
})
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-storage-initialize-bucket-V14
爬取时间: 2025-04-29 20:22:38
来源: Huawei Developer
前提条件
您已开通云存储服务。
操作步骤
在使用云存储服务前，需要调用cloudStorage.bucket初始化一个存储实例，您可以使用两种方式初始化实例。
-  以“使用默认实例”方式初始化云存储实例，将启动异步任务去云侧查询默认实例。因此，当涉及多次云存储操作时，建议只初始化一次，后续的操作基于初始化一次的云存储实例进行，而非每次操作都初始化云存储实例。 不建议：
```typescript
import { cloudStorage } from '@kit.CloudFoundationKit';
let bucket: cloudStorage.StorageBucket = cloudStorage.bucket(); // 将启动异步任务查询云侧默认实例
```
-  以“使用指定的实例”方式初始化云存储实例，请确保当前云侧存在该存储实例，否则后续操作将出现找不到存储实例错误。
```typescript
import { cloudStorage } from '@kit.CloudFoundationKit';
let bucket: cloudStorage.StorageBucket = cloudStorage.bucket('bucket001-ki6tc'); // 指定 bucket001-ki6tc 实例
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-storage-upload-file-V14
爬取时间: 2025-04-29 20:22:51
来源: Huawei Developer
您可以快速将本地设备上的文件上传至云侧，上传完后，可以前往AppGallery Connect的“云存储”页面，查看上传的文档内容。
前提条件
您已初始化存储实例。
操作步骤
1.  由于StorageBucket.uploadFile接口传入参数localPath只能设置为context.cacheDir目录下的文件路径，所以上传前需要先将文件复制到context.cacheDir目录下。
完整的示例代码如下：
```typescript
import { cloudStorage } from '@kit.CloudFoundationKit';
import { BusinessError, request } from '@kit.BasicServicesKit';
import { photoAccessHelper } from '@kit.MediaLibraryKit';
import { fileIo as fs } from '@kit.CoreFileKit';
let storageBucket: cloudStorage.StorageBucket = cloudStorage.bucket();
@Component
export struct testPage {
build() {
}
// 上传指定文件至云侧
upload() {
// 使用photoAccessHelper选择指定的文件
let photoSelectOptions = new photoAccessHelper.PhotoSelectOptions();
photoSelectOptions.MIMEType = photoAccessHelper.PhotoViewMIMETypes.IMAGE_TYPE; // 过滤选择媒体文件类型为IMAGE
photoSelectOptions.maxSelectNumber = 1; // 选择媒体文件的最大数目
let photoViewPicker = new photoAccessHelper.PhotoViewPicker();
photoViewPicker.select(photoSelectOptions).then((photoSelectResult: photoAccessHelper.PhotoSelectResult) => {
let fileUri = photoSelectResult.photoUris[0];
console.info(`pick file ${fileUri}`);
let fileName = fileUri.split('/').pop() as string;
console.info(`file name ${fileName}`);
let cacheFile = `${Date.now()}_${fileName}`;
console.info(`cacheFile ${cacheFile}`);
let cacheFilePath = getContext().cacheDir + '/' + cacheFile;
// 将选中文件copy至cache目录下，文件名为cacheFile
try {
let srcFile = fs.openSync(fileUri);
let dstFile = fs.openSync(cacheFilePath, fs.OpenMode.READ_WRITE | fs.OpenMode.CREATE);
fs.copyFileSync(srcFile.fd, dstFile.fd);
fs.closeSync(srcFile);
fs.closeSync(dstFile);
} catch (e) {
console.info(`copy file failed ${e.message}`);
return;
}
// 上传至云存储默认实例
storageBucket.uploadFile(getContext(this), {
localPath: cacheFile, // 本地文件路径，context.cacheDir目录下的文件
cloudPath: fileName    // 云侧路径
}).then((task: request.agent.Task) => {
task.on('progress', (progress) => {
console.info(`on progress ${JSON.stringify(progress)}`);
});
task.on('completed', (progress) => {
console.info(`on completed ${JSON.stringify(progress)}`);
});
task.on('failed', (progress) => {
console.error(`on failed ${JSON.stringify(progress)}`);
});
task.on('response', (response) => {
console.info(`on response ${JSON.stringify(response)}`);
});
// start task
task.start((err: BusinessError) => {
if (err) {
console.error(`Failed to start the uploadFile task, Code: ${err.code}, message: ${err.message}`);
} else {
console.info(`Succeeded in starting a uploadFile task.`);
}
});
}).catch((err: BusinessError) => {
console.error(`uploadFile failed, Code: ${err.code}, message: ${err.message}`);
});
});
}
}
```
上传完成，可以登录AppGallery Connect，选择项目，进入“云存储”界面查看文件列表。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-storage-download-file-V14
爬取时间: 2025-04-29 20:23:05
来源: Huawei Developer
文件上传至云侧后，您可以将云侧文件下载到本地设备中。
前提条件
操作步骤
1.  下载成功后，文件将保存在context.cacheDir目录下。
完整示例代码如下：
```typescript
import { cloudStorage } from '@kit.CloudFoundationKit';
import { BusinessError, request } from '@kit.BasicServicesKit';
let storageBucket: cloudStorage.StorageBucket = cloudStorage.bucket();
@Component
export struct testPage {
build() {
}
// 下载云侧文件至本地
download() {
// 获取云存储默认实例中fileName文件，保存至本地
storageBucket.downloadFile(getContext(this), {
localPath: `screenshot_xxx.jpg`, // 本地文件路径, 下载成功后，文件将会保存在context.cacheDir目录
cloudPath: `screenshot_xxx.jpg`  // 云侧文件路径
}).then((task: request.agent.Task) => {
task.on('progress', (progress) => {
console.info(`on progress ${JSON.stringify(progress)} `);
});
task.on('completed', (progress) => {
console.info(`on completed ${JSON.stringify(progress)} `);
});
task.on('failed', (progress) => {
console.error(`on failed ${JSON.stringify(progress)} `);
});
task.on('response', (response) => {
console.info(`on response ${JSON.stringify(response)} `);
});
task.start((err: BusinessError) => {
if (err) {
console.error(`Failed to start the downloadFile task, Code: ${err.code}, message: ${err.message}`);
} else {
console.info(`Succeeded in starting a downloadFile task. result: ${task.tid}`);
}
});
}).catch((err: BusinessError) => {
console.error(`downloadFile failed, Code: ${err.code}, message: ${err.message}`);
});
}
}
```
如果本地已存在同名文件，将出现错误，可以通过设置DownloadParams.overwrite来决定是否覆盖本地文件。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-storage-getdownloadurl-V14
爬取时间: 2025-04-29 20:23:19
来源: Huawei Developer
文件上传至云侧后，您可以获取云侧文件的下载地址，将下载地址放到网站中提供文件下载的体验。
前提条件
操作步骤
调用StorageBucket.getDownloadURL接口获取云侧文件的下载地址。
完整示例代码如下：
```typescript
import { cloudStorage } from '@kit.CloudFoundationKit';
import { BusinessError } from '@kit.BasicServicesKit';
let storageBucket: cloudStorage.StorageBucket = cloudStorage.bucket();
@Component
export struct testPage {
build() {
}
// 获取云侧文件下载地址
getUrl() {
// 获取云存储默认实例中screenshot_xxx.jpg文件的下载地址
storageBucket.getDownloadURL('screenshot_xxx.jpg').then((downloadURL: string) => {
console.info(`getDownloadURL: ${downloadURL}`);
}).catch((err: BusinessError) => {
console.error(`getDownloadURL failed, Code: ${err.code}, message: ${err.message}`);
});
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-storage-delete-file-V14
爬取时间: 2025-04-29 20:23:33
来源: Huawei Developer
当云侧文件不需要时，您可以在应用客户端删除云侧的文件。
前提条件
操作步骤
调用StorageBucket.deleteFile删除云侧的文件。
删除操作不可逆，一旦执行，文件会被物理删除，不可找回。
完整示例代码如下：
```typescript
import { cloudStorage } from '@kit.CloudFoundationKit';
import { BusinessError } from '@kit.BasicServicesKit';
let storageBucket: cloudStorage.StorageBucket = cloudStorage.bucket();
@Component
export struct testPage {
build() {
}
// 删除云侧文件
deleteFile() {
// 删除云存储默认实例中screenshot_xxx.jpg文件
storageBucket.deleteFile('screenshot_xxx.jpg').then(() => {
console.info(`deleteFile successfully`);
}).catch((err: BusinessError) => {
console.error(`deleteFile failed, Code: ${err.code}, message: ${err.message}`);
});
}
}
```
删除文件后，可以登录AppGallery Connect，选择项目，进入“云存储”界面查看文件列表。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-storage-list-files-V14
爬取时间: 2025-04-29 20:23:47
来源: Huawei Developer
您可以获取指定云侧目录下所有的文件信息，包括文件存储目录、文件名称等。
前提条件
操作步骤
调用StorageBucket.list可以获取云侧指定目录的文件列表。
完整示例代码如下：
```typescript
import { cloudStorage } from '@kit.CloudFoundationKit';
import { BusinessError } from '@kit.BasicServicesKit';
let storageBucket: cloudStorage.StorageBucket = cloudStorage.bucket();
@Component
export struct testPage {
build() {
}
// 获取文件列表
getList() {
// 获取云存储默认实例中根路径下的文件列表
storageBucket.list('').then((result: cloudStorage.ListResults) => {
console.info(`list: ${JSON.stringify(result)}`);
}).catch((err: BusinessError) => {
console.error(`list failed, Code: ${err.code}, message: ${err.message}`);
});
}
}
```
获取文件列表信息结构如下：
```typescript
{
directories: ["empty-dir1\/"],
files: ["IMG_20240229_103118.jpg", "IMG_20240318_093732.jpg"]
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-storage-getmetadata-V14
爬取时间: 2025-04-29 20:24:01
来源: Huawei Developer
文件元数据包含云侧文件名、文件大小、文件类型等常用属性，也包括用户自定义的文件属性。
文件上传至云侧后，您可以在下载文件前获取指定云侧文件的元数据，来决定是否下载此文件。
前提条件
操作步骤
调用StorageBucket.getMetadata获取指定云侧文件的元数据信息。
完整示例代码如下：
```typescript
import { cloudStorage } from '@kit.CloudFoundationKit';
import { BusinessError } from '@kit.BasicServicesKit';
let storageBucket: cloudStorage.StorageBucket = cloudStorage.bucket();
@Component
export struct testPage {
build() {
}
// 获取元数据
getMetaData() {
// 获取云存储默认实例中screenshot_xxx.jpg文件的元数据信息
storageBucket.getMetadata('screenshot_xxx.jpg').then((metadata: cloudStorage.Metadata) => {
console.info(`getMetadata:  ${JSON.stringify(metadata)}`);
}).catch((err: BusinessError) => {
console.error(`getMetadata failed, Code: ${err.code}, message: ${err.message}`);
});
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-storage-setmetadata-V14
爬取时间: 2025-04-29 20:24:15
来源: Huawei Developer
文件元数据包含云侧文件名、文件大小、文件类型等常用属性，也包括用户自定义的文件属性。
文件保存至云侧后，您可以设置文件的自定义属性。
前提条件
操作步骤
调用StorageBucket.setMetadata可以设置云侧文档的元数据信息。
```typescript
import { cloudStorage } from '@kit.CloudFoundationKit';
import { BusinessError } from '@kit.BasicServicesKit';
let storageBucket: cloudStorage.StorageBucket = cloudStorage.bucket();
@Component
export struct testPage {
build() {
}
// 设置元数据
setMetaData() {
// 设置云存储默认实例中screenshot_xxx.jpg文件的元数据信息
storageBucket.setMetadata('screenshot_xxx.jpg', {
customMetadata: {
key1: "value1",
key2: "value2"
}
}).then((metadata: cloudStorage.Metadata) => {
console.info(`setMetadata: ${JSON.stringify(metadata)}`);
}).catch((err: BusinessError) => {
console.error(`setMetadata failed, Code: ${err.code}, message: ${err.message}`);
});
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-faq-V14
爬取时间: 2025-04-29 20:24:28
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-faq-1-V14
爬取时间: 2025-04-29 20:24:42
来源: Huawei Developer
问题现象
使用云存储上传文件失败，HiLog提示“404:Product does not exist”。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170026.01842669433705027418762198053877:50001231000000:2800:19E2D3A35E91F103525A76FAA9923E750BEE6F25BC6BCB5323898E6D92C37EF3.png)
解决措施
云存储服务端返回的错误，出现此错误是因为云存储服务未开通。请开通云存储服务。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-faq-2-V14
爬取时间: 2025-04-29 20:24:56
来源: Huawei Developer
问题现象
使用云存储上传文件失败，出现如下错误提示：
-
-
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170026.76575399914978007884302487971942:50001231000000:2800:58360C4DA0ACC553299282D5BA6D64EADF8AC27DD986EFE50C73464E8A7E62CA.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170027.35008182411566299164832460901175:50001231000000:2800:D49ED765939AA70018DEE8CE642B6D21D0E297AE7A51D461A2F5ACCD25EBF076.png)
解决措施
使用云存储服务，需要通过AuthProvider获取用户凭据。未配置用户凭据的情况下，服务端会返回“403 Forbidden”错误。请参考AuthProvider获取用户凭据。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/cloudfoundation-personal-data-V14
爬取时间: 2025-04-29 20:25:10
来源: Huawei Developer
此文档针对华为作为最终用户数据处理者，开发者作为最终用户数据控制者的数据处理进行说明，包括：
华为处理的个人数据清单
最后修改时间：2024/06/03
| 个人数据清单 | 使用目的 | 存留期 |
| --- | --- | --- |
| （可选）华为账号信息 | 如果开发者在初始化Cloud Foundation Kit时携带了华为账号信息，Cloud Foundation Kit在访问云侧接口时会携带该账号信息用于资源的访问权限控制。 | 端侧不保存信息，云侧信息将保存至如下时刻：  最终用户或开发者主动删除上传的数据 开发者主动删除整个项目  |
个人数据清单
使用目的
存留期
（可选）华为账号信息
如果开发者在初始化Cloud Foundation Kit时携带了华为账号信息，Cloud Foundation Kit在访问云侧接口时会携带该账号信息用于资源的访问权限控制。
端侧不保存信息，云侧信息将保存至如下时刻：
指导开发者如何帮助最终用户实现对数据的控制
-  不涉及

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/contacts-kit-V14
爬取时间: 2025-04-29 20:25:24
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/contacts-intro-V14
爬取时间: 2025-04-29 20:25:37
来源: Huawei Developer
Contacts Kit可以帮助开发者轻松实现联系人的增删改查等功能。该Kit提供了一系列API，可以让开发者在应用中快速集成联系人管理功能。
详情请参考@ohos.contact API。
能力范围
通过Contacts Kit，开发者可以对联系人进行管理，包括增加、删除、修改、查询联系人信息。开发者还可以通过Picker的方式，拉起联系人列表。
面向所有应用开放如下能力：
面向三方应用受限开放如下能力：
当前能力受限开放，需要申请受限开放权限ohos.permission.READ_CONTACTS或ohos.permission.WRITE_CONTACTS。该权限通常不允许三方应用申请，仅符合指定场景的应用可申请该权限。
申请方式请参考：申请使用受限权限。
-  联系人管理
-  选择联系人
使用Picker选择联系人
当用户选择联系人的时候，通过Picker的方式，拉起联系人列表，引导用户完成界面操作，接口本身无需申请权限。
1.  导入相关的联系人模块。
```typescript
import { contact } from '@kit.ContactsKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.  调用联系人接口，拉起联系人列表，用户点击对应的联系人后返回。
```typescript
contact.selectContacts({
isMultiSelect:false
},(err: BusinessError, data) => {
if (err) {
console.error(`selectContact callback: err->${JSON.stringify(err)}`);
return;
}
console.log(`selectContact callback: success data->${JSON.stringify(data)}`);
});
```
3.  完成操作，返回想要的data数据。
选择联系人（受限开放）
1.  声明接口调用所需要的权限。 当前能力受限开放，需要申请受限开放权限ohos.permission.WRITE_CONTACTS。该权限通常不允许三方应用申请，仅符合指定场景的应用可申请该权限。申请方式请参考：申请使用受限权限。
2.  设置一个需要的Permissions数组变量。
3.  执行对应联系人的权限操作。
```typescript
import { common, abilityAccessCtrl, Permissions } from '@kit.AbilityKit';
import { contact } from '@kit.ContactsKit';
let context = getContext(this) as common.UIAbilityContext;
const permissions: Array<Permissions> = ['ohos.permission.WRITE_CONTACTS'];
abilityAccessCtrl.createAtManager().requestPermissionsFromUser(context, permissions).then(() => {
try {
contact.selectContacts();
} catch(err) {
console.error('errCode: ' + err.code + ', errMessage: ' + err.message);
}
})
```
联系人管理（受限开放）
若需要在应用内实现管理联系人的功能，可以使用permissions接口获取应用对联系人的编辑权限。
1.  声明接口调用所需要的权限。 当前能力受限开放，需要申请受限开放权限ohos.permission.WRITE_CONTACTS。该权限通常不允许三方应用申请，仅符合指定场景的应用可申请该权限。申请方式请参考：申请使用受限权限。
2.  设置一个需要的Permissions数组变量。
3.  执行对应联系人的权限操作。
```typescript
// 示例代码
import { common, abilityAccessCtrl, Permissions } from '@kit.AbilityKit';
import { contact } from '@kit.ContactsKit';
@Entry
@Component
struct Contact {
addContactByPermissions() {
let context = getContext(this) as common.UIAbilityContext;
const permissions: Array<Permissions> = ['ohos.permission.WRITE_CONTACTS'];
const contactInfo: contact.Contact = {
name: { fullName: '王小明' },
phoneNumbers: [{ phoneNumber: '13912345678' }]
}
abilityAccessCtrl.createAtManager().requestPermissionsFromUser(context, permissions).then(() => {
try {
contact.addContact(context, contactInfo, (err, data) => {
if (err) {
console.log('addContact callback: err->' + JSON.stringify(err));
return;
}
console.log('addContact callback: data->' + JSON.stringify(data));
})
} catch (err) {
console.error('errCode: ' + err.code + ', errMessage: ' + err.message);
}
})
}
build() {
Row() {
Column() {
Button('添加联系人')
.onClick(() => {
this.addContactByPermissions();
})
}
.width('100%')
}
.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/game-service-kit-guide-V14
爬取时间: 2025-04-29 20:25:51
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-introduction-V14
爬取时间: 2025-04-29 20:26:04
来源: Huawei Developer
业务简介
Game Service Kit（游戏服务）主要提供快速、低成本构建游戏基本能力与游戏场景优化服务，有效提升游戏开发效率，帮助游戏进行运营。
| 功能  | 描述  |
| --- | --- |
| 基础游戏服务（必选）  | 主要提供一系列能快速构建游戏基本能力的服务，允许玩家使用华为账号登录游戏，从而迅速推广游戏，共享华为庞大的用户价值。开发者可以快速实现联合登录、防沉迷等功能，快速低成本地构建游戏基本能力，并基于玩家和内容的本地化进行深度的游戏运营。  |
| 游戏场景感知（可选）  | 通过游戏为系统提供精细化场景信息、配置信息、网络信息等数据，系统向游戏反馈系统状态等信息，使得双方能够利用这些信息进行更紧密和深入的协作，在系统资源有限的情况下优化玩家的游戏体验。  |
功能
描述
基础游戏服务（必选）
主要提供一系列能快速构建游戏基本能力的服务，允许玩家使用华为账号登录游戏，从而迅速推广游戏，共享华为庞大的用户价值。开发者可以快速实现联合登录、防沉迷等功能，快速低成本地构建游戏基本能力，并基于玩家和内容的本地化进行深度的游戏运营。
游戏场景感知（可选）
通过游戏为系统提供精细化场景信息、配置信息、网络信息等数据，系统向游戏反馈系统状态等信息，使得双方能够利用这些信息进行更紧密和深入的协作，在系统资源有限的情况下优化玩家的游戏体验。
支持的国家/地区
当前仅支持华为账号的注册地和服务地均为中国境内（不包含中国香港、中国澳门、中国台湾）的用户，且仅支持中文。
支持的设备
当前支持手机、平板和2in1。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameplayer-dev-V14
爬取时间: 2025-04-29 20:26:18
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameplayer-introduction-V14
爬取时间: 2025-04-29 20:26:32
来源: Huawei Developer
基本说明
| Game Service Kit基础游戏服务助力开发者高效集成、快速构建合规的游戏类应用，支持玩家使用华为账号或游戏官方账号登录HarmonyOS NEXT游戏，从而迅速推广游戏，共享华为庞大的用户价值，并基于用户和内容的本地化进行深度的游戏运营。  | Video Player is loading.Play VideoPlayCurrent Time 0:00Loaded: 0%0:00Duration -:-Mute1xPlayback Rate2x1.8x1.5x1.2x1x, selectedFullscreenThis is a modal window.The media could not be loaded, either because the server or network failed or because the format is not supported.Beginning of dialog window. Escape will cancel and close the window.TextColorWhiteBlackRedGreenBlueYellowMagentaCyanTransparencyOpaqueSemi-TransparentBackgroundColorBlackWhiteRedGreenBlueYellowMagentaCyanTransparencyOpaqueSemi-TransparentTransparentWindowColorBlackWhiteRedGreenBlueYellowMagentaCyanTransparencyTransparentSemi-TransparentOpaqueFont Size50%75%100%125%150%175%200%300%400%Text Edge StyleNoneRaisedDepressedUniformDropshadowFont FamilyProportional Sans-SerifMonospace Sans-SerifProportional SerifMonospace SerifCasualScriptSmall CapsReset restore all settings to the default valuesDoneClose Modal DialogEnd of dialog window.  |
| --- | --- |
Game Service Kit基础游戏服务助力开发者高效集成、快速构建合规的游戏类应用，支持玩家使用华为账号或游戏官方账号登录HarmonyOS NEXT游戏，从而迅速推广游戏，共享华为庞大的用户价值，并基于用户和内容的本地化进行深度的游戏运营。
This is a modal window.
Beginning of dialog window. Escape will cancel and close the window.
End of dialog window.
用户体验
首次登录
用户首次启动HarmonyOS NEXT游戏时，Game Service Kit向用户展示欢迎引导页。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170027.09918146367003299285185657401936:50001231000000:2800:444558D264A1E015C9EE266DE3D7C84997186944BCC94E1CDF030A754714CE99.jpg)
1.  1.1 用户点击“华为账号登录”，则进入转移流程。 1.2 用户点击“游戏官方账号登录”，则进入游戏官方账号流程。
2.  2.1 用户点击“华为账号登录”，则进入绑定流程。 2.2 用户点击“游戏官方账号登录”，则进入游戏官方账号流程。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170027.23880718849941279561351437215038:50001231000000:2800:14CA6EEB5AA91FDD8712F39634842F8C8CF09452D21596B8C341170FFC4A6A66.jpg)
用户根据引导完成首登进入游戏后，后续打开该游戏将不再展示欢迎引导页。
非首次登录
用户非首次启动HarmonyOS NEXT游戏时，Game Service Kit会延用上次的游戏登录方式。涉及切换账号再登录等特殊场景的接入方式请参见切换账号。
登录场景介绍
游戏登录支持使用华为账号登录、使用游戏官方账号登录。接入Game Service Kit游戏登录后，游戏启动时会进行初始化，并向玩家展示华为账号和游戏官方账号联合登录面板。支持玩家选择任意一种登录方式进入游戏。
|   |   |
| --- | --- |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170027.55406947888750012102063818620995:50001231000000:2800:172EAAE9CD2F7CC2A824CE027CDA43F52C90581AD7C53F1A501CD86C85FE69D5.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170027.88012222373444553681670139745197:50001231000000:2800:BA62BE7AA9C6C4FBAE8C7557E08E0F23C18526E34AE05B0EAE9CFF3296347A22.jpg)
使用华为账号登录
-  HarmonyOS游戏的账号资产（角色、区服信息、游戏进度等）不会自动转移至HarmonyOS NEXT系统下，华为平台把原系统的玩家标识playerId/openId赋值给HarmonyOS NEXT游戏的玩家标识gamePlayerId。转移前后，华为账号不会发生变化，也不涉及开发者服务器和数据库层面的变动。 This is a modal window. Beginning of dialog window. Escape will cancel and close the window. End of dialog window.
| HarmonyOS游戏的账号资产（角色、区服信息、游戏进度等）不会自动转移至HarmonyOS NEXT系统下，华为平台把原系统的玩家标识playerId/openId赋值给HarmonyOS NEXT游戏的玩家标识gamePlayerId。转移前后，华为账号不会发生变化，也不涉及开发者服务器和数据库层面的变动。  | Video Player is loading.Play VideoPlayCurrent Time 0:00Loaded: 0%0:00Duration -:-Mute1xPlayback Rate2x1.8x1.5x1.2x1x, selectedFullscreenThis is a modal window.The media could not be loaded, either because the server or network failed or because the format is not supported.Beginning of dialog window. Escape will cancel and close the window.TextColorWhiteBlackRedGreenBlueYellowMagentaCyanTransparencyOpaqueSemi-TransparentBackgroundColorBlackWhiteRedGreenBlueYellowMagentaCyanTransparencyOpaqueSemi-TransparentTransparentWindowColorBlackWhiteRedGreenBlueYellowMagentaCyanTransparencyTransparentSemi-TransparentOpaqueFont Size50%75%100%125%150%175%200%300%400%Text Edge StyleNoneRaisedDepressedUniformDropshadowFont FamilyProportional Sans-SerifMonospace Sans-SerifProportional SerifMonospace SerifCasualScriptSmall CapsReset restore all settings to the default valuesDoneClose Modal DialogEnd of dialog window.  |
| --- | --- |
|   |   |   |
| --- | --- | --- |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170027.38465968756796210865086453103026:50001231000000:2800:A941667D8C70908A7E0F2623DF3316237A975B219C9E4E7CDBD8489339A7D537.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170027.11299630211546150019309128274841:50001231000000:2800:15CF2C6371DB82D34CDC4E34AF7A855E0986AECFAEB3660CD594F755928F9115.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170028.38184845883583764237635956566960:50001231000000:2800:09D5489E045B4573ACE4673C3FCE156639C107A2C2C03B2316458E59D6CCDEEA.png)
-  使用华为账号对应的teamPlayerId创建/绑定游戏官方账号thirdOpenId，完成绑定后，HarmonyOS NEXT游戏共享游戏官包的账号资产（角色、区服信息、游戏进度等）。 This is a modal window. Beginning of dialog window. Escape will cancel and close the window. End of dialog window. 账号绑定支持如下级别： 若需使用“游戏级别”的绑定类型，请联系华为技术支持企业QQ：2851508898进行配置。
-  若需使用“游戏级别”的绑定类型，请联系华为技术支持企业QQ：2851508898进行配置。
| 使用华为账号对应的teamPlayerId创建/绑定游戏官方账号thirdOpenId，完成绑定后，HarmonyOS NEXT游戏共享游戏官包的账号资产（角色、区服信息、游戏进度等）。  | Video Player is loading.Play VideoPlayCurrent Time 0:00Loaded: 0%0:00Duration -:-Mute1xPlayback Rate2x1.8x1.5x1.2x1x, selectedFullscreenThis is a modal window.The media could not be loaded, either because the server or network failed or because the format is not supported.Beginning of dialog window. Escape will cancel and close the window.TextColorWhiteBlackRedGreenBlueYellowMagentaCyanTransparencyOpaqueSemi-TransparentBackgroundColorBlackWhiteRedGreenBlueYellowMagentaCyanTransparencyOpaqueSemi-TransparentTransparentWindowColorBlackWhiteRedGreenBlueYellowMagentaCyanTransparencyTransparentSemi-TransparentOpaqueFont Size50%75%100%125%150%175%200%300%400%Text Edge StyleNoneRaisedDepressedUniformDropshadowFont FamilyProportional Sans-SerifMonospace Sans-SerifProportional SerifMonospace SerifCasualScriptSmall CapsReset restore all settings to the default valuesDoneClose Modal DialogEnd of dialog window.  |
| --- | --- |
|   |   |   |
| --- | --- | --- |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170028.69673479482331278697427253134808:50001231000000:2800:D8B8EBACBA3105618DE530EAEFB921398874D9F2DFFF60ACB1DE3E8FBBB041E0.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170028.64106691634253345458523663451327:50001231000000:2800:06955FADC72C4980E2240BB68242DA53D86F4CD7908913406930D67C52B9151B.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170028.11384173514624657558403971471353:50001231000000:2800:A70B5A58882C509395484044561FAD9CF05AF0EF855F0D1B14CE8FFB7B13FEFC.jpg)
-  若需使用“游戏级别”的绑定类型，请联系华为技术支持企业QQ：2851508898进行配置。
使用游戏官方账号登录
| Game Service Kit支持用户使用游戏官方账号登录HarmonyOS NEXT游戏，共享游戏官包的账号资产（角色、区服信息、游戏进度等），且游戏官包与HarmonyOS NEXT系统的账号资产保持一致。  | Video Player is loading.Play VideoPlayCurrent Time 0:00Loaded: 0%0:00Duration -:-Mute1xPlayback Rate2x1.8x1.5x1.2x1x, selectedFullscreenThis is a modal window.The media could not be loaded, either because the server or network failed or because the format is not supported.Beginning of dialog window. Escape will cancel and close the window.TextColorWhiteBlackRedGreenBlueYellowMagentaCyanTransparencyOpaqueSemi-TransparentBackgroundColorBlackWhiteRedGreenBlueYellowMagentaCyanTransparencyOpaqueSemi-TransparentTransparentWindowColorBlackWhiteRedGreenBlueYellowMagentaCyanTransparencyTransparentSemi-TransparentOpaqueFont Size50%75%100%125%150%175%200%300%400%Text Edge StyleNoneRaisedDepressedUniformDropshadowFont FamilyProportional Sans-SerifMonospace Sans-SerifProportional SerifMonospace SerifCasualScriptSmall CapsReset restore all settings to the default valuesDoneClose Modal DialogEnd of dialog window.  |
| --- | --- |
Game Service Kit支持用户使用游戏官方账号登录HarmonyOS NEXT游戏，共享游戏官包的账号资产（角色、区服信息、游戏进度等），且游戏官包与HarmonyOS NEXT系统的账号资产保持一致。
This is a modal window.
Beginning of dialog window. Escape will cancel and close the window.
End of dialog window.
基本概念
| 名称  | 说明  |
| --- | --- |
| gamePlayerId  | HarmonyOS NEXT系统下的游戏玩家ID。玩家使用华为账号登录游戏时，Game Service Kit为游戏生成唯一的玩家标识，一般用于使用华为账号登录的转移流程。针对不同游戏，同一玩家的gamePlayerId相同。  |
| teamPlayerId  | HarmonyOS NEXT系统下的团队玩家ID。玩家使用华为账号登录游戏时，Game Service Kit为游戏生成唯一的玩家标识，一般用于使用华为账号登录的绑定流程。针对同一个开发者账号下的不同游戏，同一玩家的teamPlayerId相同。  |
| openId  | 由华为账号和应用唯一标识组合加密起来的玩家标识。这类ID应用于华为HarmonyOS系统的渠道包。  |
| unionId  | 由华为账号和开发者账号组合加密起来的玩家标识。这类ID应用于华为HarmonyOS系统的渠道包。  |
| playerId  | 华为游戏服务给华为账号封装处理后的对外开放的游戏玩家标识。这类ID应用于华为HarmonyOS系统的渠道包。  |
名称
说明
gamePlayerId
HarmonyOS NEXT系统下的游戏玩家ID。玩家使用华为账号登录游戏时，Game Service Kit为游戏生成唯一的玩家标识，一般用于使用华为账号登录的转移流程。针对不同游戏，同一玩家的gamePlayerId相同。
teamPlayerId
HarmonyOS NEXT系统下的团队玩家ID。玩家使用华为账号登录游戏时，Game Service Kit为游戏生成唯一的玩家标识，一般用于使用华为账号登录的绑定流程。针对同一个开发者账号下的不同游戏，同一玩家的teamPlayerId相同。
openId
由华为账号和应用唯一标识组合加密起来的玩家标识。这类ID应用于华为HarmonyOS系统的渠道包。
unionId
由华为账号和开发者账号组合加密起来的玩家标识。这类ID应用于华为HarmonyOS系统的渠道包。
playerId
华为游戏服务给华为账号封装处理后的对外开放的游戏玩家标识。这类ID应用于华为HarmonyOS系统的渠道包。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-config-agc-V14
爬取时间: 2025-04-29 20:26:46
来源: Huawei Developer
项目基础配置
转移场景、绑定场景、游戏官方账号登录场景均要完成的准备工作。
创建游戏
在华为应用市场发布游戏，需在AGC控制台创建游戏类应用，具体操作请参见创建HarmonyOS应用/元服务。其中：
实名认证
按照国家新闻出版署规定，所有网络游戏必须接入国家新闻出版署网络游戏防沉迷实名认证系统。Game Service Kit提供了华为账号登录时的实名认证功能，需向当地的新闻出版局申请接入网络游戏防沉迷实名认证系统，并获取“bizID（游戏备案识别码）”，再将bizID配置到AGC控制台，华为将为游戏自动对接国家新闻出版署的实名认证系统并开启强制实名认证，开发者无需进行额外的开发。具体操作请参见版署实名认证申请。
生成签名证书
数字证书和Profile文件等签名信息可以确保游戏的完整性，游戏在调试阶段和发布阶段均需要签名校验。
配置应用签名证书指纹
AGC控制台自动生成证书对应的公钥信息，并计算出对应的SHA256指纹后，您需要前往AGC控制台直接获取并配置，且每个HarmonyOS NEXT游戏至多添加4个签名证书指纹。配置应用签名证书指纹的具体操作请参见HarmonyOS应用/元服务（API 9及以上）。
配置APP ID和Client ID
1.
```typescript
"module": {
"name": "entry",
"type": "xxx",
"description": "xxxx",
"mainElement": "xxxx",
"deviceTypes": [],
"pages": "xxxx",
"abilities": [],
"metadata": [ // 配置如下信息
{
"name": "client_id",
"value": "xxxxxx"  // 配置为前面步骤中获取的Client ID
},
{
"name": "app_id",
"value": "xxxxxx"  // 配置为前面步骤中获取的APP ID
}
],
"requestPermissions": [   // 配置网络权限
{
"name": "ohos.permission.INTERNET"
}
]
}
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170028.61102998640192990654650829005586:50001231000000:2800:9EC7F4AD3D24467C454230AB45A28832DD00A52F02AA76A9008DC208673EF99C.png)
获取游戏密钥
需要开发者服务器加签或验签时，您需要在AGC控制台获取游戏私钥或游戏公钥。
1.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170029.38412505486888521769685990657133:50001231000000:2800:9DAD637918285F26679661DD5221933D5E6DFEBB877E44EAABA7B22F66284D97.png)
配置APP ID映射关系
单机游戏必须配置APP ID映射关系。
1.
2.  信息项 说明 HarmonyOS NEXT游戏APP ID 请选择HarmonyOS NEXT游戏的APP ID。 HarmonyOS游戏APP ID 请选择已上架的HarmonyOS游戏的APP ID。若HarmonyOS游戏未上架，请选择“不涉及”。 是否单机游戏 若游戏数据本地化存储，不依赖服务器，则为单机游戏，请选择“是”，否则请选择“否”。
3.  “HarmonyOS游戏APP ID”选择“不涉及”，或单机游戏均不展示该页面。 信息项 说明 支持转移的玩家标识类型 请选择HarmonyOS游戏的玩家标识类型： 接入unionId的HarmonyOS游戏实现数据继承需要进行转换处理 若HarmonyOS游戏确认全部玩家均使用unionId作为玩家标识，请勾选“使用了unionId”。
4.  若出现在架状态不符合要求等异常情况，将在如下提示框以红字提醒，建议点击“取消”并重新配置映射关系。若忽略异常情况点击“确定”继续提交申请，可能会造成映射关系审批不通过。
5.
6.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170029.92488167562044538243681990431722:50001231000000:2800:958C7C8E1AEEC223299AA17B26B250CE58DB691BA863B0624A6A1BC2F2C0B705.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170029.99881615332864179230545951154455:50001231000000:2800:32CE794B7B9CAACAF6266D8E69D2D60ADBD3A0149B268CE83764F195768AF34F.png)
| 信息项 | 说明 |
| --- | --- |
| HarmonyOS NEXT游戏APP ID | 请选择HarmonyOS NEXT游戏的APP ID。 |
| HarmonyOS游戏APP ID | 请选择已上架的HarmonyOS游戏的APP ID。若HarmonyOS游戏未上架，请选择“不涉及”。 |
| 是否单机游戏 | 若游戏数据本地化存储，不依赖服务器，则为单机游戏，请选择“是”，否则请选择“否”。 |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170029.65392626303306265694663130861387:50001231000000:2800:041F5E183A42E4E3CB3B40CA8C0186DFE9C3BFC3178FB0DDDF41FE26118F7A63.png)
| 信息项 | 说明 |
| --- | --- |
| 支持转移的玩家标识类型 | 请选择HarmonyOS游戏的玩家标识类型：  playerId：若HarmonyOS游戏确认全部玩家均使用playerId作为玩家标识，请选择“playerId”。选择后，HarmonyOS NEXT游戏的玩家标识gamePlayerId=playerId。 openId：若HarmonyOS游戏确认全部玩家均使用openId作为玩家标识，请选择“openId”。选择后，HarmonyOS NEXT游戏的玩家标识gamePlayerId=openId。 unionId：若HarmonyOS游戏确认全部玩家均使用unionId作为玩家标识，建议选择“openId”。选择后，HarmonyOS NEXT游戏的玩家标识gamePlayerId=openId。此时，通过转换ID将gamePlayerId（openId）换取unionId，若unionId未在游戏侧找到玩家记录，则当前玩家为HarmonyOS NEXT游戏的新用户。 playerId与openId混用：部分游戏由于处于playerId替换为openId方案的过渡期，导致HarmonyOS游戏的玩家标识类型存在playerId与openId混用的情况，例如游戏中的A玩家使用openId，B玩家使用playerId，建议选择“openId”。选择后，HarmonyOS NEXT游戏的玩家标识gamePlayerId=openId。若无法通过gamePlayerId在游戏侧找到玩家记录，可通过转换ID接口用gamePlayerId（openId）换取playerId，若playerId能在游戏侧找到玩家记录，表明该玩家是使用playerId作为玩家标识的老用户，否则该玩家为HarmonyOS NEXT系统新用户。  |
| 接入unionId的HarmonyOS游戏实现数据继承需要进行转换处理 | 若HarmonyOS游戏确认全部玩家均使用unionId作为玩家标识，请勾选“使用了unionId”。 |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170029.73087255422537119460991068460812:50001231000000:2800:A65B30CD210968DA9EC16EAD1AFFAACFBC8069E1D3C236D2AA9CCF0DF7179979.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170029.08597002506717982533252718765427:50001231000000:2800:3F980C727C3B2E8843F2AC8583E04D21D9E0CFC786F79346DBD34C070C109498.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170029.69457845931548017593879769847507:50001231000000:2800:87713DEE4643FC6CB5654C1A5E3A85A660B24D2128A1862A2129A80DA3547965.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170029.27452857373526554111777590552116:50001231000000:2800:E7B4C784708648C2E54CDB8C95BC7B9D0ED9F64D59E2377D2648D46CDE504082.png)
绑定场景配置
除了项目基础配置，接入绑定场景可以额外完成如下准备工作。
（可选）申请phone权限
为了快速获取玩家授权给华为的手机号，找到游戏官包的thirdOpenId，节省玩家登录游戏时输入手机号、验证码的过程，达到快速登录游戏的效果，开发者需在AGC控制台申请scope权限中的phone权限，详细申请步骤请参见配置scope权限。
（可选）配置回调地址
若想在关键事件发生时，华为游戏服务器向开发者服务器发送事件通知，请前往AGC控制台配置开发者服务器的回调地址。发送通知的接口原型等信息请参见解绑账号通知接口。涉及的关键事件及对应的处理逻辑如下：
| 关键事件 | 游戏自行实现的处理逻辑 |
| --- | --- |
| 玩家注销华为账号。 | 清理账号数据。 |
| 玩家解除华为账号与游戏官方账号的绑定关系。 | 解除绑定关系。 |
关键事件
游戏自行实现的处理逻辑
玩家注销华为账号。
清理账号数据。
玩家解除华为账号与游戏官方账号的绑定关系。
解除绑定关系。
在AGC控制台配置服务器的回调地址步骤如下：
1.  回调地址要求需支持HTTPS协议，且具有合法商用证书。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170029.25268968299964194668175795056523:50001231000000:2800:D04D3CA4E6D03A7A840C7CB68D33FBB92A3D84E6744BAB2ED177ECE428ABF6F8.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameplayer-access-process-V14
爬取时间: 2025-04-29 20:27:00
来源: Huawei Developer
接口说明
具体API说明请详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| init(context: common.UIAbilityContext): Promise<void> | 游戏初始化接口，使用默认的上下文信息，通过Promise对象获取返回值。 |
| on(type: 'playerChanged', callback: Callback<PlayerChangedResult>): void | 玩家变化事件监听接口，通过Callback回调获取玩家变化结果信息。 |
| unionLogin(context: common.UIAbilityContext, loginParam: UnionLoginParam): Promise<UnionLoginResult> | 华为账号和游戏官方账号联合登录接口，通过Promise对象获取返回值。 |
| bindPlayer(context: common.UIAbilityContext, thirdOpenId: string, teamPlayerId: string): Promise<void> | 华为账号对应的teamPlayerId与游戏官方账号绑定接口，通过Promise对象获取返回值。 |
| unbindPlayer(context: common.UIAbilityContext, thirdOpenId: string, teamPlayerId: string): Promise<void> | 华为账号对应的teamPlayerId与游戏官方账号解绑接口，通过Promise对象获取返回值。 说明 解绑后，玩家下次进入游戏可以在联合登录面板重新选择游戏的登录方式。  |
| verifyLocalPlayer(context: common.UIAbilityContext, thirdUserInfo: ThirdUserInfo): Promise<void> | 合规校验接口，校验当前设备登录的华为账号的实名认证、游戏防沉迷信息，通过Promise对象获取返回值。 |
| savePlayerRole(context: common.UIAbilityContext, request: GSKPlayerRole): Promise<void> | 保存角色信息到华为游戏服务器，使用默认的上下文信息，通过Promise对象获取返回值。 |
接口名
描述
init(context:common.UIAbilityContext): Promise<void>
游戏初始化接口，使用默认的上下文信息，通过Promise对象获取返回值。
on(type: 'playerChanged', callback: Callback<PlayerChangedResult>): void
玩家变化事件监听接口，通过Callback回调获取玩家变化结果信息。
unionLogin(context: common.UIAbilityContext, loginParam: UnionLoginParam): Promise<UnionLoginResult>
华为账号和游戏官方账号联合登录接口，通过Promise对象获取返回值。
bindPlayer(context: common.UIAbilityContext, thirdOpenId: string, teamPlayerId: string): Promise<void>
华为账号对应的teamPlayerId与游戏官方账号绑定接口，通过Promise对象获取返回值。
unbindPlayer(context: common.UIAbilityContext, thirdOpenId: string, teamPlayerId: string): Promise<void>
华为账号对应的teamPlayerId与游戏官方账号解绑接口，通过Promise对象获取返回值。
解绑后，玩家下次进入游戏可以在联合登录面板重新选择游戏的登录方式。
verifyLocalPlayer(context: common.UIAbilityContext, thirdUserInfo: ThirdUserInfo): Promise<void>
合规校验接口，校验当前设备登录的华为账号的实名认证、游戏防沉迷信息，通过Promise对象获取返回值。
savePlayerRole(context:common.UIAbilityContext, request: GSKPlayerRole): Promise<void>
保存角色信息到华为游戏服务器，使用默认的上下文信息，通过Promise对象获取返回值。
转移流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170030.68047329430222110954322983642259:50001231000000:2800:AA56878E65097F7927841229A172E388F4B93980620D6B8C8658AF6D9D9937D9.png)
1.  Authorization Code只有5分钟有效期，且仅能使用一次，不可复用。
2.  Authorization Code只有5分钟有效期，且仅能使用一次，不可复用。
3.  Authorization Code只有5分钟有效期，且仅能使用一次，不可复用。
-  Authorization Code只有5分钟有效期，且仅能使用一次，不可复用。
-  Authorization Code只有5分钟有效期，且仅能使用一次，不可复用。
1.  Authorization Code只有5分钟有效期，且仅能使用一次，不可复用。
绑定流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170030.84774347173964656782599688568730:50001231000000:2800:9E56EA2ED5A1FD9D02E79786B935BFBFDF7502923411B854A0A967779ACE0C41.png)
1.  Authorization Code只有5分钟有效期，且仅能使用一次，不可复用。 游戏内需为玩家提供解绑功能，解绑游戏账号的接入流程请参见解绑游戏账号。 若unionLogin接口未返回thirdOpenId，玩家信息核验仅需核验teamPlayerId。若unionLogin接口返回thirdOpenId，玩家信息核验需核验teamPlayerId和thirdOpenId。
2.  Authorization Code只有5分钟有效期，且仅能使用一次，不可复用。
3.  游戏内需为玩家提供解绑功能，解绑游戏账号的接入流程请参见解绑游戏账号。
4.  若unionLogin接口未返回thirdOpenId，玩家信息核验仅需核验teamPlayerId。若unionLogin接口返回thirdOpenId，玩家信息核验需核验teamPlayerId和thirdOpenId。
5.  若unionLogin接口未返回thirdOpenId，玩家信息核验仅需核验teamPlayerId。若unionLogin接口返回thirdOpenId，玩家信息核验需核验teamPlayerId和thirdOpenId。
1.  Authorization Code只有5分钟有效期，且仅能使用一次，不可复用。
2.  游戏内需为玩家提供解绑功能，解绑游戏账号的接入流程请参见解绑游戏账号。
-  若unionLogin接口未返回thirdOpenId，玩家信息核验仅需核验teamPlayerId。若unionLogin接口返回thirdOpenId，玩家信息核验需核验teamPlayerId和thirdOpenId。
-  若unionLogin接口未返回thirdOpenId，玩家信息核验仅需核验teamPlayerId。若unionLogin接口返回thirdOpenId，玩家信息核验需核验teamPlayerId和thirdOpenId。
1.  若unionLogin接口未返回thirdOpenId，玩家信息核验仅需核验teamPlayerId。若unionLogin接口返回thirdOpenId，玩家信息核验需核验teamPlayerId和thirdOpenId。
游戏官方账号流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170030.52710325440258261265861820983492:50001231000000:2800:3599E27C7EE799EAF105AB535C0FFDD349184F6DDE7C2455AC907EA7945C5B4C.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameplayer-access-procedure-V14
爬取时间: 2025-04-29 20:27:13
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameplayer-import-V14
爬取时间: 2025-04-29 20:27:28
来源: Huawei Developer
```typescript
import { authentication } from '@kit.AccountKit';
import { gamePlayer } from '@kit.GameServiceKit';
import { common } from '@kit.AbilityKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { Callback, BusinessError } from '@kit.BasicServicesKit';
import { window } from '@kit.ArkUI';
import { util } from '@kit.ArkTS';
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameplayer-init-V14
爬取时间: 2025-04-29 20:27:41
来源: Huawei Developer
游戏启动时需完成初始化接入，否则可能会导致游戏上架审核被驳回。
前提条件
已实现导入模块。
开发步骤
调用init接口初始化Game Service Kit。初始化后，Game Service Kit弹出华为隐私协议，玩家签署协议后，则继续往下执行。
调用init接口时严格要求继承UIAbility，并且获取上下文的时机是onWindowStageCreate生命周期中页面加载成功后。
```typescript
onWindowStageCreate(windowStage: window.WindowStage) {
windowStage.loadContent("pages/index", (err, data) => {
try {
gamePlayer.init(this.context,()=>{
hilog.info(0x0000, 'testTag', `Succeeded in initing.`);
});
} catch (error) {
let err = error as BusinessError;
hilog.error(0x0000, 'testTag', `Failed to init. Code: ${err.code}, message: ${err.message}`);
}
});
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameplayer-on-V14
爬取时间: 2025-04-29 20:27:55
来源: Huawei Developer
为及时感知游戏过程中华为账号的变化，游戏需注册监听事件。目前有如下两个场景可以监听到华为账号变化：
| 能监听到华为账号切换的场景 | 监听到华为账号切换后的措施 |
| --- | --- |
| 场景一：用户点击“欢迎横幅->管理->切换”或者点击“欢迎横幅->管理->X”。 | 若监听到华为账号变化，游戏应先清除本地缓存信息，再重新调用unionLogin接口（showLoginDialog设置为true），重新拉起联合登录面板。 |
| 场景二：用户切换华为账号后，游戏重启但没有调用unionLogin，直接调用verifyLocalPlayer。此时，verifyLocalPlayer接口会报错，同时触发on回调。 |
能监听到华为账号切换的场景
监听到华为账号切换后的措施
场景一：用户点击“欢迎横幅->管理->切换”或者点击“欢迎横幅->管理->X”。
若监听到华为账号变化，游戏应先清除本地缓存信息，再重新调用unionLogin接口（showLoginDialog设置为true），重新拉起联合登录面板。
场景二：用户切换华为账号后，游戏重启但没有调用unionLogin，直接调用verifyLocalPlayer。此时，verifyLocalPlayer接口会报错，同时触发on回调。
前提条件
已实现初始化。
开发步骤
调用on接口注册playerChanged监听事件。
```typescript
private onPlayerChangedEventCallback(result: gamePlayer.PlayerChangedResult) {
if (result.event === gamePlayer.PlayerChangedEvent.SWITCH_GAME_ACCOUNT) {
// ...
// 游戏号已切换，完成本地缓存清理工作后，再次调用unionLogin接口等
}
}
// ...
// 调用on接口注册playerChanged事件监听
try {
gamePlayer.on('playerChanged', this.onPlayerChangedEventCallback);
hilog.info(0x0000, 'testTag', `Succeeded in registering.`);
} catch (error) {
let err = error as BusinessError;
hilog.error(0x0000, 'testTag', `Failed to register. Code: ${err.code}, message: ${err.message}`);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gamelogin-harmonyos-V14
爬取时间: 2025-04-29 20:28:09
来源: Huawei Developer
Game Service Kit提供了联合登录能力，允许玩家在登录游戏时，向玩家展示联合登录面板。开发者需通过联合登录接口和华为账号相关方法，完成联合登录能力接入及玩家信息校验。
玩家选择登录方式后，再次进入游戏默认不再弹出联合登录框，因此请在游戏页面上自行增加“切换账号”按钮，玩家点击按钮后强制弹出联合登录框，支持玩家重新选择游戏的登录方式。游戏强制弹出联合登录框仅需在调用unionLogin接口时将loginParam中的showLoginDialog字段设置为true。具体的开发步骤请参见游戏内切换账号。
前提条件
已实现初始化。
联合登录
初始化成功后，游戏可调用unionLogin接口进行联合登录，Game Service Kit向玩家展示联合登录面板。
```typescript
let context = getContext(this) as common.UIAbilityContext;
let thirdAccountInfo1: gamePlayer.ThirdAccountInfo = {
'accountName': 'testName1', // 游戏开放给玩家接入的账号类型名字，例如“官方账号”、“xx账号”等，并不是具体某个玩家ID或开发者ID。
'accountIcon': $r('app.media.icon') // 游戏官方账号图标资源信息，注意unionLogin接口传参的所有图标总大小不要超过35KB。
};
let request: gamePlayer.UnionLoginParam = {
showLoginDialog: true,
thirdAccountInfos: [
thirdAccountInfo1
]
};
try {
gamePlayer.unionLogin(context, request).then((result: gamePlayer.UnionLoginResult) => {
hilog.info(0x0000, 'testTag', `Succeeded in logining: ${result?.accountName}`);
}).catch((error: BusinessError) => {
hilog.error(0x0000, 'testTag', `Failed to login. Code: ${error.code}, message: ${error.message}`);
});
} catch (error) {
let err = error as BusinessError;
hilog.error(0x0000, 'testTag', `Failed to login. Code: ${err.code}, message: ${err.message}`);
}
```
华为账号认证与授权
游戏判断accountName为“hw_account”时，可根据needBinding值选择通过Account Kit对应的创建授权/登录请求接口，获取用于服务器校验的Authorization Code信息。
```typescript
// 创建授权请求，并设置参数
let authRequest = new authentication.HuaweiIDProvider().createAuthorizationWithHuaweiIDRequest();
// 获取头像、昵称以及手机号授权需要传如下scope
authRequest.scopes = ['profile', 'phone'];
// 若开发者需要进行服务端开发，则需传如下permission获取authorizationCode
authRequest.permissions = ['serviceauthcode'];
// 用户是否需要登录授权，该值为true且用户未登录或未授权时，会拉起用户登录或授权页面
authRequest.forceAuthorization = true;
authRequest.state = util.generateRandomUUID();
```
```typescript
// 创建授权请求，并设置参数
let authRequest = new authentication.HuaweiIDProvider().createAuthorizationWithHuaweiIDRequest();
// 获取头像、昵称以及手机号授权需要传如下scope
authRequest.scopes = ['profile', 'phone'];
// 若开发者需要进行服务端开发，则需传如下permission获取authorizationCode
authRequest.permissions = ['serviceauthcode'];
// 用户是否需要登录授权，该值为true且用户未登录或未授权时，会拉起用户登录或授权页面
authRequest.forceAuthorization = true;
authRequest.state = util.generateRandomUUID();
```
```typescript
// 执行授权请求
try {
let controller = new authentication.AuthenticationController(getContext(this));
controller.executeRequest(authRequest, (err, data) => {
if (err) {
hilog.error(0x0000, 'testTag', `Failed to authenticate. Code: ${err.code}, message: ${err.message}`);
return;
}
let authorizationWithHuaweiIDResponse = data as authentication.AuthorizationWithHuaweiIDResponse;
let state = authorizationWithHuaweiIDResponse.state;
if (state != undefined && authRequest.state != state) {
hilog.error(0x0000, 'testTag', `Failed to authenticate. State is different.`);
return;
}
hilog.info(0x0000, 'testTag', `Succeeded in authenticating.`);
let authorizationWithHuaweiIDCredential = authorizationWithHuaweiIDResponse.data!;
let avatarUri = authorizationWithHuaweiIDCredential.avatarUri;
let nickName = authorizationWithHuaweiIDCredential.nickName;
let authorizationCode = authorizationWithHuaweiIDCredential.authorizationCode;
// 开发者处理avatarUri, nickName, authorizationCode信息
});
} catch (error) {
let err = error as BusinessError;
hilog.error(0x0000, 'testTag', `Failed to authenticate. Code: ${err.code}, message: ${err.message}`);
}
```
```typescript
// 创建授权请求，并设置参数
let authRequest = new authentication.HuaweiIDProvider().createAuthorizationWithHuaweiIDRequest();
// 获取头像、昵称以及手机号授权需要传如下scope
authRequest.scopes = ['profile', 'phone'];
// 若开发者需要进行服务端开发，则需传如下permission获取authorizationCode
authRequest.permissions = ['serviceauthcode'];
// 用户是否需要登录授权，该值为true且用户未登录或未授权时，会拉起用户登录或授权页面
authRequest.forceAuthorization = true;
authRequest.state = util.generateRandomUUID();
```
```typescript
// 执行授权请求
try {
let controller = new authentication.AuthenticationController(getContext(this));
controller.executeRequest(authRequest, (err, data) => {
if (err) {
hilog.error(0x0000, 'testTag', `Failed to authenticate. Code: ${err.code}, message: ${err.message}`);
return;
}
let authorizationWithHuaweiIDResponse = data as authentication.AuthorizationWithHuaweiIDResponse;
let state = authorizationWithHuaweiIDResponse.state;
if (state != undefined && authRequest.state != state) {
hilog.error(0x0000, 'testTag', `Failed to authenticate. State is different.`);
return;
}
hilog.info(0x0000, 'testTag', `Succeeded in authenticating.`);
let authorizationWithHuaweiIDCredential = authorizationWithHuaweiIDResponse.data!;
let avatarUri = authorizationWithHuaweiIDCredential.avatarUri;
let nickName = authorizationWithHuaweiIDCredential.nickName;
let authorizationCode = authorizationWithHuaweiIDCredential.authorizationCode;
// 开发者处理avatarUri, nickName, authorizationCode信息
});
} catch (error) {
let err = error as BusinessError;
hilog.error(0x0000, 'testTag', `Failed to authenticate. Code: ${err.code}, message: ${err.message}`);
}
```
```typescript
// 创建登录请求，并设置参数
let loginRequest = new authentication.HuaweiIDProvider().createLoginWithHuaweiIDRequest();
// 当用户未登录华为账号时，是否强制拉起华为账号登录界面
loginRequest.forceLogin = true;
loginRequest.state = util.generateRandomUUID();
```
```typescript
// 创建登录请求，并设置参数
let loginRequest = new authentication.HuaweiIDProvider().createLoginWithHuaweiIDRequest();
// 当用户未登录华为账号时，是否强制拉起华为账号登录界面
loginRequest.forceLogin = true;
loginRequest.state = util.generateRandomUUID();
```
```typescript
// 执行登录请求
try {
let controller = new authentication.AuthenticationController(getContext(this));
controller.executeRequest(loginRequest, (err, data) => {
if (err) {
hilog.error(0x0000, 'testTag', `Failed to login. Code: ${err.code}, message: ${err.message}`);
return;
}
let loginWithHuaweiIDResponse = data as authentication.LoginWithHuaweiIDResponse;
let state = loginWithHuaweiIDResponse.state;
if (state != undefined && loginRequest.state != state) {
hilog.error(0x0000, 'testTag', `Failed to login. State is different.`);
return;
}
hilog.info(0x0000, 'testTag', `Succeeded in logining.`);
let loginWithHuaweiIDCredential = loginWithHuaweiIDResponse.data!;
let authorizationCode = loginWithHuaweiIDCredential.authorizationCode;
// 开发者处理authorizationCode
});
} catch (error) {
let err = error as BusinessError;
hilog.error(0x0000, 'testTag', `Failed to login. Code: ${err.code}, message: ${err.message}`);
}
```
```typescript
// 创建登录请求，并设置参数
let loginRequest = new authentication.HuaweiIDProvider().createLoginWithHuaweiIDRequest();
// 当用户未登录华为账号时，是否强制拉起华为账号登录界面
loginRequest.forceLogin = true;
loginRequest.state = util.generateRandomUUID();
```
```typescript
// 执行登录请求
try {
let controller = new authentication.AuthenticationController(getContext(this));
controller.executeRequest(loginRequest, (err, data) => {
if (err) {
hilog.error(0x0000, 'testTag', `Failed to login. Code: ${err.code}, message: ${err.message}`);
return;
}
let loginWithHuaweiIDResponse = data as authentication.LoginWithHuaweiIDResponse;
let state = loginWithHuaweiIDResponse.state;
if (state != undefined && loginRequest.state != state) {
hilog.error(0x0000, 'testTag', `Failed to login. State is different.`);
return;
}
hilog.info(0x0000, 'testTag', `Succeeded in logining.`);
let loginWithHuaweiIDCredential = loginWithHuaweiIDResponse.data!;
let authorizationCode = loginWithHuaweiIDCredential.authorizationCode;
// 开发者处理authorizationCode
});
} catch (error) {
let err = error as BusinessError;
hilog.error(0x0000, 'testTag', `Failed to login. Code: ${err.code}, message: ${err.message}`);
}
```
通过Authorization Code获取Access Token
华为账号授权成功并获取Authorization Code后，请参考获取用户级凭证使用Authorization Code获取Access Token。
由于Access Token的有效期仅为60分钟，当Access Token失效或者即将失效时（可通过NSP_STATUS错误码判断），可以使用Refresh Token（有效期180天）通过获取用户级凭证向华为账号服务器请求获取新的Access Token。
通过Access Token获取手机号
先配置scope权限，再调用createAuthorizationWithHuaweiIDRequest接口授权手机号并获取Access Token，最后请求获取用户信息接口获取已授权的手机号。
玩家信息核验
为了保证玩家标识的安全性，游戏可以请求获取玩家标识接口，根据通过Authorization Code获取Access Token的方式获取的Access Token向华为游戏服务器请求获取服务器侧的玩家标识，再与unionLogin接口获取的玩家标识进行比对，完成玩家信息的校验。玩家标识校验通过后，允许玩家进入游戏。
为了保证安全性，如果有自己的服务器，强烈建议开发者在服务器侧验证玩家标识。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameplayer-needbind-V14
爬取时间: 2025-04-29 20:28:23
来源: Huawei Developer
绑定游戏官方账号
玩家首次登录HarmonyOS NEXT游戏，通过绑定华为玩家标识与游戏官方账号，可实现华为账号或游戏官方账号在HarmonyOS NEXT设备上快速登录游戏，两种登录方式下游戏进度保持同步。因此，为了提升玩家体验，建议在游戏中提供绑定游戏官方账号的功能。
前提条件
开发步骤
调用bindPlayer接口绑定teamPlayerId与游戏官方账号thirdOpenId 。
```typescript
let context = getContext(this) as common.UIAbilityContext;
let thirdOpenId = '123xxxx'; // thirdOpenId表示游戏官方账号ID
let teamPlayerId = '456xxx'; // teamPlayerId表示玩家华为账号对应的teamPlayerId
try {
gamePlayer.bindPlayer(context, thirdOpenId, teamPlayerId).then(() => {
hilog.info(0x0000, 'testTag', `Succeeded in binding.`);
}).catch((error: BusinessError) => {
hilog.error(0x0000, 'testTag', `Failed to bind. Code: ${error.code}, message: ${error.message}`);
});
} catch (error) {
let err = error as BusinessError;
hilog.error(0x0000, 'testTag', `Failed to bind. Code: ${err.code}, message: ${err.message}`);
}
```
解绑游戏账号
为了考虑玩家的用户体验，游戏需为玩家提供解绑功能。接入步骤如下：
1.  建议解绑按钮的按钮名称为“解除关联”、“关联解除”、“账号解绑”、“解绑按钮”、“解绑”等，表达出解除绑定的意思即可，避免和切换账号、退出登录、删除账号、注销账号等概念混淆。 【选择区服界面】 【玩家用户中心界面】 【游戏内的设置界面】
2.  玩家点击窗口的“立即解绑”后，游戏需请求解绑账号接口或调用unbindPlayer接口解除teamPlayerId与游戏官方账号thirdOpenId的绑定关系。解绑成功后，建议游戏退出到登录界面后调用unionLogin接口，重新拉起联合登录面板，允许玩家重新选择游戏的登录方式。
| 【选择区服界面】  | 【玩家用户中心界面】  | 【游戏内的设置界面】  |
| --- | --- | --- |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170031.90119845726221111347923825695671:50001231000000:2800:400ECE70FF68B757062EDF359C79D4C041A5BAB6ED7FA661CEFFEEB9F8C32D3A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170031.55810613308120213109996746196430:50001231000000:2800:5AD79FE688CF793365854E615E357388ED853934C4E0F0B375C1E4DB2739C463.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170031.26493724466405918961710369802768:50001231000000:2800:B5E9D246987DF54BD289C34F8BD5EC7EE1BAC142D5EE3DC28C17AAF6822D173D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170031.67185402719031629086378963226768:50001231000000:2800:8A0299333342F3FE6E7D5A034642A3127450121F10715E8C8D32764FBA3B34C0.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-anti-indulgence-V14
爬取时间: 2025-04-29 20:28:36
来源: Huawei Developer
根据国家新闻出版署的最新规定，所有网络游戏企业仅可在周五、周六、周日和法定节假日每日20时至21时向未成年人提供1小时网络游戏服务，其他时间均不得以任何形式向未成年人提供网络游戏服务。因此，Game Service Kit提供了实名认证、游戏时间管控等防沉迷能力。当玩家在登录游戏时，需要对玩家的实名认证与游戏时间进行合规校验。
前提条件
已实现联合登录。
开发步骤
调用verifyLocalPlayer接口对用户设备登录华为账号的实名认证和游戏防沉迷进行合规校验。
```typescript
let context = getContext(this) as common.UIAbilityContext;
let request: gamePlayer.ThirdUserInfo = {
thirdOpenId: '123xxxx', // 游戏官方账号ID
isRealName: true // 玩家是否实名,该值为true时表示已实名,为false时表示未实名
};
try {
gamePlayer.verifyLocalPlayer(context, request).then(() => {
hilog.info(0x0000, 'testTag', `Succeeded in verifying.`);
}).catch((error: BusinessError) => {
hilog.error(0x0000, 'testTag', `Failed to verify. Code: ${error.code}, message: ${error.message}`);
});
} catch (error) {
let err = error as BusinessError;
hilog.error(0x0000, 'testTag', `Failed to verify. Code: ${err.code}, message: ${err.message}`);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameplayer-saveplayerrole-V14
爬取时间: 2025-04-29 20:28:50
来源: Huawei Developer
玩家成功登录游戏并选择角色、区服后，游戏需要将角色信息提交到华为游戏服务器。
前提条件
已实现联合登录。
开发步骤
调用savePlayerRole接口，将角色信息上报至华为游戏服务器。
若游戏没有角色系统，“roleId”请传入“0”，“roleName”请传入“default”，请勿传""和null。
```typescript
let context = getContext(this) as common.UIAbilityContext;
let request: gamePlayer.GSKPlayerRole = {
roleId: '123',   // 玩家角色ID，如游戏没有角色系统，请传入“0”，务必不要传""和null。
roleName: 'Jason', // 玩家角色名，如游戏没有角色系统，请传入“default”，务必不要传""和null。
serverId: '456',
serverName: 'Zhangshan',
gamePlayerId: '789', // 若是转移场景，请根据实际获取到的gamePlayerId传值。
teamPlayerId: '345', // 若是绑定场景，请根据实际获取到的teamPlayerId传值。
thirdOpenId: '123'   // 若游戏官方账号登录，请根据实际获取到的thirdOpenId传值。
};
try {
gamePlayer.savePlayerRole(context, request).then(() => {
hilog.info(0x0000, 'testTag', `Succeeded in saving.`);
});
} catch (error) {
let err = error as BusinessError;
hilog.error(0x0000, 'testTag', `Failed to save. Code: ${err.code}, message: ${err.message}`);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-switch-account-V14
爬取时间: 2025-04-29 20:29:04
来源: Huawei Developer
场景一：游戏内切换账号
登录游戏时默认使用上次的登录方式，开发者需在游戏页面上自行增加“切换账号”按钮，玩家点击按钮后强制弹出联合登录面板，允许玩家重新选择华为账号登录或游戏官方账号登录。
前提条件
仅限含有游戏官方账号登录方式的游戏。
开发步骤
1.  【选择区服界面】 【玩家用户中心界面】 【游戏内的设置界面】
| 【选择区服界面】  | 【玩家用户中心界面】  | 【游戏内的设置界面】  |
| --- | --- | --- |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170032.11041690015657193913122940956435:50001231000000:2800:2BF5CE321A56817217926EF017D900EB2EFB0A47FFD4A2E4B64EFFFE5285F621.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170032.81712875862652096930703603256837:50001231000000:2800:E4427250AE00AD01689ED6EFF1E216FAC4E72976CF33C30383D992E92ACCC847.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170032.59314650444311911140447902378960:50001231000000:2800:F1D75C2EE7E1CCC55D1DCCD8556D57BE7D3C432DA171E04F5B691BD6F4B1CB82.png)
场景二：欢迎横幅管理游戏账号
调用过账号1.0获取玩家信息接口的游戏、或转移场景涉及多游戏号的游戏，成功登录后会在顶部欢迎横幅出现“管理”按钮。
若用户在“顶部欢迎横幅 > 管理 > 管理游戏号”中切换/删除游戏号时，开发者的实现逻辑如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170032.79421666447450142299480165185714:50001231000000:2800:0340E65E844B77690E4EA5ACB6954A8864D5CF7865D24D396BC40FA91C67722D.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-single-access-V14
爬取时间: 2025-04-29 20:29:18
来源: Huawei Developer
单机游戏是指游戏数据本地化存储，不依赖服务器。
开发准备
前往AGC控制台配置APP ID映射关系。
单机游戏必须配置APP ID的映射关系，否则可能导致上架审核驳回。
接入流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170032.03793365032653278698033077219441:50001231000000:2800:97E8E88AF4E70700D564CE807042123310BB76DED9E71C9B5A650B92A8EA4368.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-publish-V14
爬取时间: 2025-04-29 20:29:32
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-check-V14
爬取时间: 2025-04-29 20:29:45
来源: Huawei Developer
为减少提交审核后被驳回的概率，请参考如下自检Checklist表格进行自检，检查通过后，再提交上架。
| 一级分类 | 二级分类 | 检查项 | 影响 |
| --- | --- | --- | --- |
| 合规检查 | 隐私、游戏资质等 | 游戏内容、游戏安全性、用户隐私等符合华为应用市场审核规定，具体参考华为应用市场审核指南。 | 如不符合华为应用市场审核要求，游戏将会被驳回。 |
| 病毒 | 通过自检网站自检游戏是否存在病毒。 | 游戏存在病毒在提交审核时会被驳回。 |
| 用户实名认证信息 | 游戏必须在用户首次实名认证或变更实名身份信息后上报用户信息至国家新闻出版署。 | 如不符合国家新闻出版署的相关规定，游戏上架后可能存在合规风险。 |
| 配置检查 | 应用类型 | 登录AppGallery Connect控制台，检查应用类型是否为游戏。 | 如果不是游戏类型，会导致游戏防沉迷异常，提交审核会被驳回。 |
| 发布包版本 | 在SDK目录下检查oh-uni-package.json文件，非release需替换，或者出包后解压并查看HAP资源文件夹，检查pack.info文件的releaseType字段。 | 使用非release版本的发布包申请上架会被驳回。 |
| module.json5文件 | 在工程的entry模块module.json5文件中，查看是否metadata中client_id和app_id是否配置准确。 | 如果配置错误，Game Service Kit的接口将调用失败。 |
| 代码检查 | 初始化 | 游戏启动后，必须先调用init接口，调用结束后再调用其它接口。 | 游戏如未调用init接口，将导致审核被驳回。 |
| 登录 | 华为账号登录图标使用规范。 | 使用华为账号登录图标必须遵守《开发者使用Account Kit的登录能力的管理细则》。 |
| 游戏登录必须调用unionLogin接口拉起联合登录面板进行登录。 | 游戏如未调用unionLogin接口将导致审核被驳回。 |
| 完成玩家信息校验后，必须调用savePlayerRole接口上报角色信息。 | 游戏如未调用savePlayerRole接口将导致审核被驳回。 |
| 使用华为账号登录时，游戏需调用createLoginWithHuaweiIDRequest或createAuthorizationWithHuaweiIDRequest接口进行登录，并获取用于服务器校验的Authorization Code。 | 游戏如未调用createLoginWithHuaweiIDRequest或createAuthorizationWithHuaweiIDRequest接口将导致审核被驳回。 |
| 登录游戏默认使用上次选择的登录方式，建议在游戏内为玩家提供切换账号功能，支持玩家重新选择游戏的登录方式。游戏重新拉起联合登录面板需在调用unionLogin接口时将loginParam中的showLoginDialog参数设置为true。若调用unionLogin接口，整个游戏登录流程无需再调用getLocalPlayer接口。 | 建议游戏支持玩家重新选择游戏的登录方式，否则游戏的登录体验不佳。 |
| 游戏需调用bindPlayer接口绑定teamPlayerId与游戏官方账号thirdOpenId，并上报绑定结果，同时建议在游戏内为玩家提供解绑游戏账号功能。 | 游戏如未调用bindPlayer接口将导致审核被驳回。 |
| 游戏登录后，需要调用verifyLocalPlayer接口进行合规校验，华为侧将校验当前设备的华为账号实名认证和游戏防沉迷管控情况，如校验未通过将返回对应的错误码。 | 游戏如未调用verifyLocalPlayer接口将导致审核被驳回。 |
| 在AGC控制台配置APP ID映射关系，并参考转移流程完成转移功能的验证操作。 | 若上架之前未自验证游戏进度转移功能，上架之后可能会游戏进度转移失败。 |
| 支付 | 如果游戏提供了游戏内商品，则需要接入华为应用内支付服务。 | 游戏如未调用createPurchase接口将导致审核被驳回。 |
| purchase接口传入的商品ID和商品类型与AppGallery Connect控制台创建的商品ID和商品类型一致。 | 如果支付时传入的商品ID或商品类型与AppGallery Connect控制台不一致，将无法拉起支付页面。 |
| 支付接口调用返回应用启动时均进行了补单处理和错误码1001860001、1001860051。请参考权益发放。 | 如未在适当时机进行补单处理，会导致异常场景下（如关闭进程、崩溃）商品未正常发放。 |
| 游戏退出 | 发布中国境内（不包含中国香港、中国澳门、中国台湾）的游戏需具备玩家退出功能。 | 如不具备退出功能，审核将会被驳回。 |
一级分类
二级分类
检查项
影响
合规检查
隐私、游戏资质等
游戏内容、游戏安全性、用户隐私等符合华为应用市场审核规定，具体参考华为应用市场审核指南。
如不符合华为应用市场审核要求，游戏将会被驳回。
病毒
通过自检网站自检游戏是否存在病毒。
游戏存在病毒在提交审核时会被驳回。
用户实名认证信息
游戏必须在用户首次实名认证或变更实名身份信息后上报用户信息至国家新闻出版署。
如不符合国家新闻出版署的相关规定，游戏上架后可能存在合规风险。
配置检查
应用类型
登录AppGallery Connect控制台，检查应用类型是否为游戏。
如果不是游戏类型，会导致游戏防沉迷异常，提交审核会被驳回。
发布包版本
在SDK目录下检查oh-uni-package.json文件，非release需替换，或者出包后解压并查看HAP资源文件夹，检查pack.info文件的releaseType字段。
使用非release版本的发布包申请上架会被驳回。
module.json5文件
在工程的entry模块module.json5文件中，查看是否metadata中client_id和app_id是否配置准确。
如果配置错误，Game Service Kit的接口将调用失败。
代码检查
初始化
游戏启动后，必须先调用init接口，调用结束后再调用其它接口。
游戏如未调用init接口，将导致审核被驳回。
登录
华为账号登录图标使用规范。
使用华为账号登录图标必须遵守《开发者使用Account Kit的登录能力的管理细则》。
游戏登录必须调用unionLogin接口拉起联合登录面板进行登录。
游戏如未调用unionLogin接口将导致审核被驳回。
完成玩家信息校验后，必须调用savePlayerRole接口上报角色信息。
游戏如未调用savePlayerRole接口将导致审核被驳回。
使用华为账号登录时，游戏需调用createLoginWithHuaweiIDRequest或createAuthorizationWithHuaweiIDRequest接口进行登录，并获取用于服务器校验的Authorization Code。
游戏如未调用createLoginWithHuaweiIDRequest或createAuthorizationWithHuaweiIDRequest接口将导致审核被驳回。
登录游戏默认使用上次选择的登录方式，建议在游戏内为玩家提供切换账号功能，支持玩家重新选择游戏的登录方式。游戏重新拉起联合登录面板需在调用unionLogin接口时将loginParam中的showLoginDialog参数设置为true。若调用unionLogin接口，整个游戏登录流程无需再调用getLocalPlayer接口。
建议游戏支持玩家重新选择游戏的登录方式，否则游戏的登录体验不佳。
游戏需调用bindPlayer接口绑定teamPlayerId与游戏官方账号thirdOpenId，并上报绑定结果，同时建议在游戏内为玩家提供解绑游戏账号功能。
游戏如未调用bindPlayer接口将导致审核被驳回。
游戏登录后，需要调用verifyLocalPlayer接口进行合规校验，华为侧将校验当前设备的华为账号实名认证和游戏防沉迷管控情况，如校验未通过将返回对应的错误码。
游戏如未调用verifyLocalPlayer接口将导致审核被驳回。
在AGC控制台配置APP ID映射关系，并参考转移流程完成转移功能的验证操作。
若上架之前未自验证游戏进度转移功能，上架之后可能会游戏进度转移失败。
支付
如果游戏提供了游戏内商品，则需要接入华为应用内支付服务。
游戏如未调用createPurchase接口将导致审核被驳回。
purchase接口传入的商品ID和商品类型与AppGallery Connect控制台创建的商品ID和商品类型一致。
如果支付时传入的商品ID或商品类型与AppGallery Connect控制台不一致，将无法拉起支付页面。
支付接口调用返回应用启动时均进行了补单处理和错误码1001860001、1001860051。请参考权益发放。
如未在适当时机进行补单处理，会导致异常场景下（如关闭进程、崩溃）商品未正常发放。
游戏退出
发布中国境内（不包含中国香港、中国澳门、中国台湾）的游戏需具备玩家退出功能。
如不具备退出功能，审核将会被驳回。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-release-V14
爬取时间: 2025-04-29 20:29:59
来源: Huawei Developer
了解上架规则
认真阅读华为应用市场审核指南和游戏审核FAQ，了解游戏的上架规则。
提交上架申请
将HarmonyOS NEXT游戏打包成APP包后可在AppGallery Connect上架，具体操作参见发布应用（APP）。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameperformance-dev-V14
爬取时间: 2025-04-29 20:30:13
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameperformance-introduction-V14
爬取时间: 2025-04-29 20:30:26
来源: Huawei Developer
功能说明
游戏场景感知提供API接口，帮助开发者快速实现游戏与系统的交互，开发者通过游戏场景感知，可以完成向系统发送游戏信息以及从系统获取设备状态信息两大动作。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170033.99925095736364170907817283178834:50001231000000:2800:7CB2BA699620085B445CC3920483339C084AEA0511AE9A2C6E8C1F822EF225B5.jpg)
场景介绍
游戏场景感知主要服务于游戏场景优化，其特点是可以通过感知游戏场景和运行状态的不同，使用不同策略调度系统资源以达到更精细化的优化效果。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameperformance-config-agc-V14
爬取时间: 2025-04-29 20:30:40
来源: Huawei Developer
创建游戏
若在华为应用市场发布游戏，或使用AGC控制台提供的服务，需要前往AGC控制台创建游戏类应用，具体操作请参见创建项目和创建HarmonyOS应用。其中：
生成签名证书
数字证书和Profile文件等签名信息可以确保游戏的完整性，游戏发布在华为应用市场需通过签名校验，因此，开发者需使用发布证书和Profile文件对游戏进行签名。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameperformance-access-procedure-V14
爬取时间: 2025-04-29 20:30:54
来源: Huawei Developer
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170033.59480156748940702040196044995031:50001231000000:2800:835587FBE98C9FAE58F6447E6DFA97A256544E1448E6622F51E20679B8812EC7.png)
接口说明
具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| init(gamePackageInfo: GamePackageInfo): Promise<void> | 游戏初始化接口，对游戏场景感知进行初始化，通过Promise对象获取返回值。 |
| on(type: 'deviceStateChanged', callback: Callback<DeviceInfo>): void | 订阅设备状态变化接口，主要用于监听deviceStateChanged（设备状态变化）事件。 |
| on(type: 'deviceStateChanged', callback: Callback<DeviceInfo>, scope: Array<DeviceInfoType>): void | 按需订阅设备状态变化接口。主要用于监听deviceStateChanged（设备状态变化）事件，支持传入参数指定订阅的设备状态信息类型。 |
| updateGameInfo<T extends BaseGameInfo>(gameInfo: T): Promise<void> | 更新游戏信息接口，主要用于上报游戏信息（包信息、配置信息、场景信息和网络信息等），通过Promise对象获取返回值。 |
| off(type: 'deviceStateChanged', callback?: Callback<DeviceInfo>): void | 取消订阅设备状态变化接口，主要用于取消监听deviceStateChanged（设备状态变化）事件。 |
| getDeviceInfoByScope(scope: Array<DeviceInfoParameter>):Promise<DeviceInfo> | 查询设备状态信息接口。 |
接口名
描述
init(gamePackageInfo: GamePackageInfo): Promise<void>
游戏初始化接口，对游戏场景感知进行初始化，通过Promise对象获取返回值。
on(type: 'deviceStateChanged', callback: Callback<DeviceInfo>): void
订阅设备状态变化接口，主要用于监听deviceStateChanged（设备状态变化）事件。
on(type: 'deviceStateChanged', callback: Callback<DeviceInfo>, scope: Array<DeviceInfoType>): void
按需订阅设备状态变化接口。主要用于监听deviceStateChanged（设备状态变化）事件，支持传入参数指定订阅的设备状态信息类型。
updateGameInfo<T extends BaseGameInfo>(gameInfo: T): Promise<void>
更新游戏信息接口，主要用于上报游戏信息（包信息、配置信息、场景信息和网络信息等），通过Promise对象获取返回值。
off(type: 'deviceStateChanged', callback?: Callback<DeviceInfo>): void
取消订阅设备状态变化接口，主要用于取消监听deviceStateChanged（设备状态变化）事件。
getDeviceInfoByScope(scope: Array<DeviceInfoParameter>):Promise<DeviceInfo>
查询设备状态信息接口。
接入步骤
导入模块
导入Game Service Kit及公共模块。
```typescript
import { gamePerformance } from '@kit.GameServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
初始化
导入相关模块后，需先调用init接口对游戏场景感知进行初始化。
init接口是调用其他接口的前提，如果未初始化或初始化失败，将无法调用其他接口。
```typescript
let gamePackageInfo: gamePerformance.GamePackageInfo = {
messageType: 0,
bundleName: "com.example.demo", // 仅示例，请替换为实际的游戏包名
appVersion: "1.0"
}
try {
gamePerformance.init(gamePackageInfo).then(() => {
// 初始化成功
hilog.info(0x0001, 'demo', `Succeeded in initing.`);
})
} catch (error) {
// 初始化失败
let err = error as BusinessError;
hilog.error(0x0001, 'demo', `Failed to init. Code: ${err.code}, message: ${err.message}`);
}
```
订阅设备状态变化
调用on接口可以订阅设备状态变化事件，获取设备状态变化的通知（如设备温控档位）。
```typescript
function onDeviceStateChange(data:gamePerformance.DeviceInfo) {
// 设备信息详情
hilog.info(0x0001, 'demo', `device state changed.`);
}
// 订阅deviceStateChanged事件
try {
gamePerformance.on('deviceStateChanged', onDeviceStateChange);
} catch (error) {
// 订阅失败
let err = error as BusinessError;
hilog.error(0x0001, 'demo', `Failed to subscribe. Code: ${err.code}, message: ${err.message}`);
}
```
目前支持订阅GPU和温度变化趋势两种类型的设备状态数据，也可以调用on接口按需订阅，如只订阅GPU数据：
```typescript
function onDeviceStateChange(data:gamePerformance.DeviceInfo) {
// data中仅含有gpuInfo
hilog.info(0x0001, 'demo', `device state changed.`);
}
// 订阅deviceStateChanged事件
try {
let types:Array<gamePerformance.DeviceInfoType> = [gamePerformance.DeviceInfoType.GPU];
gamePerformance.on('deviceStateChanged', onDeviceStateChange, types);
} catch (error) {
// 订阅失败
let err = error as BusinessError;
hilog.error(0x0001, 'demo', `Failed to subscribe. Code: ${err.code}, message: ${err.message}`);
}
```
上报游戏信息
初始化成功后，可以通过调用updateGameInfo接口上报游戏信息（包信息、配置信息、场景信息和网络信息等）。
```typescript
// 以更新游戏场景信息为例
let gameSceneInfo: gamePerformance.GameSceneInfo = {
messageType: 2,
sceneID: 7,
importanceLevel: 4
}
try {
gamePerformance.updateGameInfo(gameSceneInfo).then(() => {
// 更新游戏场景信息成功
hilog.info(0x0001, 'demo', `Succeeded in updating.`);
});
} catch (error) {
// 更新游戏场景信息失败
let err = error as BusinessError;
hilog.error(0x0001, 'demo', `Failed to update. Code: ${err.code}, message: ${err.message}`);
}
```
取消订阅设备状态
如不再需要订阅，则可以通过调用off接口取消订阅设备状态。
```typescript
function onDeviceStateChange(data:gamePerformance.DeviceInfo) {
// 设备信息详情
hilog.info(0x0001, 'demo', `device state changed.`);
}
// 取消订阅deviceStateChanged事件
try {
gamePerformance.off('deviceStateChanged', onDeviceStateChange);
} catch (error) {
// 取消订阅失败
let err = error as BusinessError;
hilog.error(0x0001, 'demo', `Failed to unsubscribe. Code: ${err.code}, message: ${err.message}`);
}
// 取消deviceStateChanged事件的全部订阅
try {
gamePerformance.off("deviceStateChanged");
} catch (error) {
// 取消订阅失败
let err = error as BusinessError;
hilog.error(0x0001, 'demo', `Failed to unsubscribe. Code: ${err.code}, message: ${err.message}`);
}
```
查询设备状态信息
除订阅设备状态变化的方式外，也可以通过调用getDeviceInfoByScope接口主动查询设备状态：
```typescript
// 查询设备状态
try {
let gpuParam: gamePerformance.DeviceInfoParameter = {
deviceInfoType: gamePerformance.DeviceInfoType.GPU
}
let thermalParam: gamePerformance.DeviceInfoParameter = {
deviceInfoType: gamePerformance.DeviceInfoType.THERMAL
}
let gameInfos: Array<gamePerformance.DeviceInfoParameter> = [gpuParam, thermalParam];
gamePerformance.getDeviceInfoByScope(gameInfos).then((deviceInfo:gamePerformance.DeviceInfo) => {
hilog.info(0x0001, 'demo', `Succeeded in querying device info.`);
});
} catch (error) {
// 查询失败
let err = error as BusinessError;
hilog.error(0x0001, 'demo', `Failed to query. Code: ${err.code}, message: ${err.message}`);
}
```
主动查询接口同样支持按需查询，如只查询温度变化趋势数据：
```typescript
// 只查询设备温度数据
try {
let thermalParam: gamePerformance.DeviceInfoParameter = {
deviceInfoType: gamePerformance.DeviceInfoType.THERMAL
}
let gameInfos: Array<gamePerformance.DeviceInfoParameter> = [thermalParam];
gamePerformance.getDeviceInfoByScope(gameInfos).then((deviceInfo:gamePerformance.DeviceInfo) => {
// 此处的查询结果中将不含有gpuInfo
hilog.info(0x0001, 'demo', `Succeeded in querying device info.`);
});
} catch (error) {
// 查询失败
let err = error as BusinessError;
hilog.error(0x0001, 'demo', `Failed to query. Code: ${err.code}, message: ${err.message}`);
}
```
查询温度变化趋势需要历史数据作为计算依据，调用该接口时请保证设备已启动至少一分钟，否则会返回1010300003错误。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-gameperformance-access-procedure-c-V14
爬取时间: 2025-04-29 20:31:08
来源: Huawei Developer
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170033.36041745181969576721313231069066:50001231000000:2800:BD535D01121793515C7106E3E41A1E8FAC03B96056C31CAB2720D52068BC2B45.png)
接口说明
具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| GamePerformance_ErrorCode HMS_GamePerformance_Init (GamePerformance_InitParameters *initParameters) | 游戏初始化接口，对游戏场景感知进行初始化。 |
| GamePerformance_ErrorCode HMS_GamePerformance_RegisterThermalLevelChangedCallback (GamePerformance_DeviceInfoType *types[]， size_t size， GamePerformance_ThermalLevelChangedCallback callback， void *userData) | 注册温度变化回调接口，当达到触发点时，将调用回调函数。 |
| GamePerformance_ErrorCode HMS_GamePerformance_UpdatePackageInfo (GamePerformance_PackageInfo *packageInfo) | 更新游戏包信息接口，用于上报游戏包信息。 |
| GamePerformance_ErrorCode HMS_GamePerformance_UpdateConfigInfo (GamePerformance_ConfigInfo *configInfo) | 更新游戏配置信息接口，用于上报游戏配置信息。 |
| GamePerformance_ErrorCode HMS_GamePerformance_UpdateSceneInfo (GamePerformance_SceneInfo *sceneInfo) | 更新游戏场景信息接口，用于上报游戏场景信息。 |
| GamePerformance_ErrorCode HMS_GamePerformance_UpdateNetInfo (GamePerformance_NetInfo *netInfo) | 更新游戏网络信息接口，用于上报游戏网络信息。 |
| GamePerformance_ErrorCode HMS_GamePerformance_UpdatePlayerInfo (GamePerformance_PlayerInfo *playerInfo) | 更新游戏玩家信息接口，用于上报游戏玩家信息。 |
| GamePerformance_ErrorCode HMS_GamePerformance_UnregisterThermalLevelChangedCallback (GamePerformance_ThermalLevelChangedCallback callback) | 取消注册指定温度变化回调接口。 |
| GamePerformance_ErrorCode HMS_GamePerformance_UnregisterAllThermalLevelChangedCallbacks (void) | 取消注册所有温度变化回调接口。 |
| GamePerformance_ErrorCode HMS_GamePerformance_QueryThermalInfo (GamePerformance_ThermalInfoQueryParameters *parameter， GamePerformance_ThermalInfo **thermalInfo) | 查询温度信息接口。 |
| GamePerformance_ErrorCode HMS_GamePerformance_QueryGpuInfo (GamePerformance_GpuInfo **gpuInfo) | 查询GPU信息接口。 |
接口名
描述
GamePerformance_ErrorCodeHMS_GamePerformance_Init(GamePerformance_InitParameters*initParameters)
游戏初始化接口，对游戏场景感知进行初始化。
GamePerformance_ErrorCodeHMS_GamePerformance_RegisterThermalLevelChangedCallback(GamePerformance_DeviceInfoType*types[]， size_t size，GamePerformance_ThermalLevelChangedCallbackcallback， void *userData)
注册温度变化回调接口，当达到触发点时，将调用回调函数。
GamePerformance_ErrorCodeHMS_GamePerformance_UpdatePackageInfo(GamePerformance_PackageInfo*packageInfo)
更新游戏包信息接口，用于上报游戏包信息。
GamePerformance_ErrorCodeHMS_GamePerformance_UpdateConfigInfo(GamePerformance_ConfigInfo*configInfo)
更新游戏配置信息接口，用于上报游戏配置信息。
GamePerformance_ErrorCodeHMS_GamePerformance_UpdateSceneInfo(GamePerformance_SceneInfo*sceneInfo)
更新游戏场景信息接口，用于上报游戏场景信息。
GamePerformance_ErrorCodeHMS_GamePerformance_UpdateNetInfo(GamePerformance_NetInfo*netInfo)
更新游戏网络信息接口，用于上报游戏网络信息。
GamePerformance_ErrorCodeHMS_GamePerformance_UpdatePlayerInfo(GamePerformance_PlayerInfo*playerInfo)
更新游戏玩家信息接口，用于上报游戏玩家信息。
GamePerformance_ErrorCodeHMS_GamePerformance_UnregisterThermalLevelChangedCallback(GamePerformance_ThermalLevelChangedCallbackcallback)
取消注册指定温度变化回调接口。
GamePerformance_ErrorCodeHMS_GamePerformance_UnregisterAllThermalLevelChangedCallbacks(void)
取消注册所有温度变化回调接口。
GamePerformance_ErrorCodeHMS_GamePerformance_QueryThermalInfo(GamePerformance_ThermalInfoQueryParameters*parameter，GamePerformance_ThermalInfo**thermalInfo)
查询温度信息接口。
GamePerformance_ErrorCodeHMS_GamePerformance_QueryGpuInfo(GamePerformance_GpuInfo**gpuInfo)
查询GPU信息接口。
接入步骤
在 CMake 脚本中链接动态库
导入模块
导入Game Service Kit。
初始化
导入相关模块后，需先调用HMS_GamePerformance_Init接口对游戏场景感知进行初始化。
HMS_GamePerformance_Init接口是调用其他接口的前提，如果未初始化或初始化失败，将无法调用其他接口。
```typescript
// 创建初始化参数
GamePerformance_InitParameters *initParameters = NULL;
HMS_GamePerformance_CreateInitParameters(&initParameters);
// 设置参数，所有SetXXX接口的第二个参数均为示例，请替换成实际参数
GamePerformance_ErrorCode appVersionSetCode = HMS_GamePerformance_InitParameters_SetAppVersion(initParameters, "1.0");
// 所有SetXXX接口，如果参数设置错误，将会返回错误码401；为确保参数设置无误，建议接收返回值并判断错误码
if (appVersionSetCode != GAME_PERFORMANCE_SUCCESS) {
// 异常处理
}
HMS_GamePerformance_InitParameters_SetBundleName(initParameters, "com.example.demo");
// 初始化
GamePerformance_ErrorCode ret = HMS_GamePerformance_Init(initParameters);
if (ret != GAME_PERFORMANCE_SUCCESS) {
// 异常处理
}
// 使用完释放内存
HMS_GamePerformance_DestroyInitParameters(&initParameters);
```
注册温度变化回调
调用HMS_GamePerformance_RegisterThermalLevelChangedCallback接口可以注册温度变化回调，获取设备状态信息的通知（如温控档位、温升趋势、GPU负载等）。
```typescript
// 定义回调函数
static void onThermalLevelChanged(GamePerformance_DeviceInfo *deviceInfo, void *userData) {
// 获取gpu负载等级（须订阅设备信息类型：GAME_PERFORMANCE_DEVICEINFO_TYPE_GPU）
GamePerformance_GpuInfo *gpuInfo = NULL;
HMS_GamePerformance_DeviceInfo_GetGpuInfo(deviceInfo, &gpuInfo);
int32_t gpuloadLevel = -1;
int32_t vertexLevel = -1;
int32_t fragmentLoadLevel = -1;
int32_t bandwidthLoadLevel = -1;
int32_t textureLoadLevel = -1;
int32_t currentFrequency = -1;
HMS_GamePerformance_GpuInfo_GetGpuLoadLevel(gpuInfo, &gpuloadLevel);
HMS_GamePerformance_GpuInfo_GetVertexLoadLevel(gpuInfo, &vertexLevel);
HMS_GamePerformance_GpuInfo_GetFragmentLoadLevel(gpuInfo, &fragmentLoadLevel);
HMS_GamePerformance_GpuInfo_GetBandwidthLoadLevel(gpuInfo, &bandwidthLoadLevel);
HMS_GamePerformance_GpuInfo_GetTextureLoadLevel(gpuInfo, &textureLoadLevel);
HMS_GamePerformance_GpuInfo_GetCurrentFrequency(gpuInfo, &currentFrequency);
// 获取温度相关信息（须订阅设备信息类型：GAME_PERFORMANCE_DEVICEINFO_TYPE_THERMAL）
GamePerformance_ThermalInfo *thermalInfo = NULL;
HMS_GamePerformance_DeviceInfo_GetThermalInfo(deviceInfo, &thermalInfo);
int32_t margin = INT32_MIN;
int32_t trend = INT32_MIN;
int32_t level = -1;
HMS_GamePerformance_ThermalInfo_GetThermalMargin(thermalInfo, &margin);
HMS_GamePerformance_ThermalInfo_GetThermalTrend(thermalInfo, &trend);
HMS_GamePerformance_ThermalInfo_GetThermalLevel(thermalInfo, &level);
// 使用完释放内存
HMS_GamePerformance_DestroyGpuInfo(&gpuInfo);
HMS_GamePerformance_DestroyThermalInfo(&thermalInfo);
}
// 注册回调
void demo(){
// 按需订阅设备信息类型
size_t size = 2; // 订阅的设备信息类型的数量，即下文types[]数组的长度
GamePerformance_DeviceInfoType *types[] = {
new GamePerformance_DeviceInfoType(GAME_PERFORMANCE_DEVICEINFO_TYPE_GPU),
new GamePerformance_DeviceInfoType(GAME_PERFORMANCE_DEVICEINFO_TYPE_THERMAL)};
void *userData = (void *)"mydata"; // 用户自定义任意类型，callback 透传返回
GamePerformance_ErrorCode ret = HMS_GamePerformance_RegisterThermalLevelChangedCallback(types, size, onThermalLevelChanged, userData);
if (ret != GAME_PERFORMANCE_SUCCESS) {
// 异常处理
}
}
```
取消注册指定温度变化回调
调用HMS_GamePerformance_UnregisterThermalLevelChangedCallback接口可以取消注册指定温度变化回调。
```typescript
// 取消注册
GamePerformance_ErrorCode ret = HMS_GamePerformance_UnregisterThermalLevelChangedCallback(onThermalLevelChanged);
if (ret != GAME_PERFORMANCE_SUCCESS) {
// 异常处理
}
```
取消注册所有温度变化回调
可以通过调用HMS_GamePerformance_UnregisterAllThermalLevelChangedCallbacks接口可以取消注册所有温度变化回调。
```typescript
// 取消所有注册的函数
GamePerformance_ErrorCode ret = HMS_GamePerformance_UnregisterAllThermalLevelChangedCallbacks();
if (ret != GAME_PERFORMANCE_SUCCESS) {
// 异常处理
}
```
上报游戏包信息
初始化成功后，可以通过调用HMS_GamePerformance_UpdatePackageInfo接口上报游戏包信息。
```typescript
GamePerformance_PackageInfo *packageInfo = NULL;
HMS_GamePerformance_CreatePackageInfo(&packageInfo);
// SetXXX接口的第二个参数均为示例，请替换成实际参数
// 设置必选参数
HMS_GamePerformance_PackageInfo_SetBundleName(packageInfo, "com.example.demo");
HMS_GamePerformance_PackageInfo_SetAppVersion(packageInfo, "1.0");
// 按需设置可选参数
HMS_GamePerformance_PackageInfo_SetEngineType(packageInfo, GAME_PERFORMANCE_ENGINE_TYPE_COCOS);
HMS_GamePerformance_PackageInfo_SetEngineVersion(packageInfo, "2.0");
HMS_GamePerformance_PackageInfo_SetGameType(packageInfo, GAME_PERFORMANCE_GAME_TYPE_FPS);
// 上报游戏包信息
GamePerformance_ErrorCode ret = HMS_GamePerformance_UpdatePackageInfo(packageInfo);
if (ret != GAME_PERFORMANCE_SUCCESS) {
// 异常处理
}
// 使用完释放内存
HMS_GamePerformance_DestroyPackageInfo(&packageInfo);
```
上报游戏配置信息
初始化成功后，可以通过调用HMS_GamePerformance_UpdateConfigInfo接口上报游戏配置信息。
```typescript
GamePerformance_ConfigInfo *configInfo = NULL;
HMS_GamePerformance_CreateConfigInfo(&configInfo);
// 如需多次上报，若使用同一个实例上报，只需通过set方法更新参数即可（同一个实例将保留上一次设置的数据）
// SetXXX接口的第二个参数均为示例，请替换成实际参数
// 按需设置下列可选字段
HMS_GamePerformance_ConfigInfo_SetMaxPictureQualityLevel(configInfo, GAME_PERFORMANCE_PQL_BALANCED);
HMS_GamePerformance_ConfigInfo_SetCurrentPictureQualityLevel(configInfo, GAME_PERFORMANCE_PQL_HD);
HMS_GamePerformance_ConfigInfo_SetMaxFrameRate(configInfo, 120);
HMS_GamePerformance_ConfigInfo_SetCurrentFrameRate(configInfo, 60);
HMS_GamePerformance_ConfigInfo_SetMaxResolution(configInfo, "1260*2720");
HMS_GamePerformance_ConfigInfo_SetCurrentResolution(configInfo, "1260*2720");
HMS_GamePerformance_ConfigInfo_SetAntiAliasingEnabled(configInfo, true);
HMS_GamePerformance_ConfigInfo_SetShadowEnabled(configInfo, true);
HMS_GamePerformance_ConfigInfo_SetMultithreadingEnabled(configInfo, true);
HMS_GamePerformance_ConfigInfo_SetParticleEnabled(configInfo, true);
HMS_GamePerformance_ConfigInfo_SetHdModeEnabled(configInfo, true);
// 上报游戏配置信息
GamePerformance_ErrorCode ret = HMS_GamePerformance_UpdateConfigInfo(configInfo);
if (ret != GAME_PERFORMANCE_SUCCESS) {
// 异常处理
}
// 使用完释放内存
HMS_GamePerformance_DestroyConfigInfo(&configInfo);
```
上报游戏场景信息
初始化成功后，可以通过调用HMS_GamePerformance_UpdateSceneInfo接口上报游戏场景信息。
```typescript
// SetXXX接口的第二个参数均为示例，请替换成实际参数
GamePerformance_SceneInfo *sceneInfo = NULL;
HMS_GamePerformance_CreateSceneInfo(&sceneInfo);
// 如需多次上报，若使用同一个实例上报，只需通过set方法更新参数即可（同一个实例将保留上一次设置的数据）
// 设置必选字段
HMS_GamePerformance_SceneInfo_SetSceneID(sceneInfo, 1);
HMS_GamePerformance_SceneInfo_SetImportanceLevel(sceneInfo, GAME_PERFORMANCE_SIL_LEVEL1);
// 按需设置下列可选字段
HMS_GamePerformance_SceneInfo_SetDescription(sceneInfo, "this is description of scene");
HMS_GamePerformance_SceneInfo_SetSubSceneID(sceneInfo, "20101020304");
HMS_GamePerformance_SceneInfo_SetSubDescription(sceneInfo, "this is description of subScene");
HMS_GamePerformance_SceneInfo_SetSceneFrequency(sceneInfo, 2);
HMS_GamePerformance_SceneInfo_SetSceneTime(sceneInfo, 15);
HMS_GamePerformance_SceneInfo_SetRecommendedCpuLevel(sceneInfo, GAME_PERFORMANCE_CPU_LEVEL_HIGH);
HMS_GamePerformance_SceneInfo_SetRecommendedGpuLevel(sceneInfo, GAME_PERFORMANCE_GPU_LEVEL_HIGH);
HMS_GamePerformance_SceneInfo_SetRecommendedDdrLevel(sceneInfo, GAME_PERFORMANCE_DDR_LEVEL_HIGH);
HMS_GamePerformance_SceneInfo_SetKeyThread(sceneInfo, "render");
HMS_GamePerformance_SceneInfo_SetDrawCallCount(sceneInfo, 100);
HMS_GamePerformance_SceneInfo_SetVertexCount(sceneInfo, 100);
HMS_GamePerformance_SceneInfo_SetTriangleCount(sceneInfo, 100);
HMS_GamePerformance_SceneInfo_SetShaderCount(sceneInfo, 100);
HMS_GamePerformance_SceneInfo_SetTextureCount(sceneInfo, 100);
HMS_GamePerformance_SceneInfo_SetMeshCount(sceneInfo, 100);
HMS_GamePerformance_SceneInfo_SetChannelCount(sceneInfo, 100);
HMS_GamePerformance_SceneInfo_SetParticipantCount(sceneInfo, 5);
// 上报游戏场景信息
GamePerformance_ErrorCode ret = HMS_GamePerformance_UpdateSceneInfo(sceneInfo);
if (ret != GAME_PERFORMANCE_SUCCESS) {
// 异常处理
}
// 使用完释放内存
HMS_GamePerformance_DestroySceneInfo(&sceneInfo);
```
上报游戏网络信息
初始化成功后，可以通过调用HMS_GamePerformance_UpdateNetInfo接口上报游戏网络信息。
```typescript
// SetXXX接口的第二个参数均为示例，请替换成实际参数
GamePerformance_NetInfo *netInfo = NULL;
HMS_GamePerformance_CreateNetInfo(&netInfo);
// 如需多次上报，若使用同一个实例上报，只需通过set方法更新参数即可（同一个实例将保留上一次设置的数据）
// 设置必选字段
HMS_GamePerformance_NetInfo_SetTotalLatency(netInfo, 60);
// 按需设置下列可选字段
HMS_GamePerformance_NetInfo_SetNetLoad(netInfo, GAME_PERFORMANCE_NET_LOAD_HEAVY);
HMS_GamePerformance_NetInfo_SetUplinkLatency(netInfo, 10);
HMS_GamePerformance_NetInfo_SetDownlinkLatency(netInfo, 20);
HMS_GamePerformance_NetInfo_SetServerLatency(netInfo, 30);
// 上报游戏网络信息
GamePerformance_ErrorCode ret = HMS_GamePerformance_UpdateNetInfo(netInfo);
if (ret != GAME_PERFORMANCE_SUCCESS) {
// 异常处理
}
// 使用完释放内存
HMS_GamePerformance_DestroyNetInfo(&netInfo);
```
上报游戏玩家信息
初始化成功后，可以通过调用HMS_GamePerformance_UpdatePlayerInfo接口上报游戏玩家信息。
```typescript
// SetXXX接口的第二个参数均为示例，请替换成实际参数
GamePerformance_PlayerInfo *playerInfo = NULL;
HMS_GamePerformance_CreatePlayerInfo(&playerInfo);
// 下列三个参数至少设置一个
HMS_GamePerformance_PlayerInfo_SetGamePlayerId(playerInfo, "43JIOdok74***3980sd9453");
HMS_GamePerformance_PlayerInfo_SetTeamPlayerId(playerInfo, "s2546dgs38***374dgwa5g3");
HMS_GamePerformance_PlayerInfo_SetThirdOpenId(playerInfo, "k854Cs367***937efwhi03");
// 上报游戏玩家信息
GamePerformance_ErrorCode ret = HMS_GamePerformance_UpdatePlayerInfo(playerInfo);
if (ret != GAME_PERFORMANCE_SUCCESS) {
// 异常处理
}
// 使用完释放内存
HMS_GamePerformance_DestroyPlayerInfo(&playerInfo);
```
查询GPU信息
除订阅设备状态变化的方式外，也可以通过调用HMS_GamePerformance_QueryGpuInfo接口主动查询设备GPU信息：
```typescript
// 查询GPU信息
GamePerformance_GpuInfo *gpuInfo = NULL;
GamePerformance_ErrorCode ret = HMS_GamePerformance_QueryGpuInfo(&gpuInfo);
if (ret != GAME_PERFORMANCE_SUCCESS) {
// 异常处理
return;
}
// 获取指标数据值
int32_t gpuloadLevel = -1;
int32_t bandwidth = -1;
int32_t currentFrequency = -1;
int32_t fragmentLoadLevel = -1;
int32_t textureLoadLevel = -1;
int32_t vertexLoadLevel = -1;
HMS_GamePerformance_GpuInfo_GetGpuLoadLevel(gpuInfo, &gpuloadLevel);
HMS_GamePerformance_GpuInfo_GetBandwidthLoadLevel(gpuInfo, &bandwidth);
HMS_GamePerformance_GpuInfo_GetCurrentFrequency(gpuInfo, &currentFrequency);
HMS_GamePerformance_GpuInfo_GetFragmentLoadLevel(gpuInfo, &fragmentLoadLevel);
HMS_GamePerformance_GpuInfo_GetTextureLoadLevel(gpuInfo, &textureLoadLevel);
HMS_GamePerformance_GpuInfo_GetVertexLoadLevel(gpuInfo, &vertexLoadLevel);
// 使用完释放内存
HMS_GamePerformance_DestroyGpuInfo(&gpuInfo);
```
查询温度信息
除订阅设备状态变化的方式外，也可以通过调用HMS_GamePerformance_QueryThermalInfo接口主动查询设备温控档位和温升趋势：
```typescript
// 查询温度和温升趋势
GamePerformance_ThermalInfo *thermalInfo = NULL;
GamePerformance_ThermalInfoQueryParameters *parameters = NULL;
// 创建查询参数
HMS_GamePerformance_CreateThermalInfoQueryParameters(&parameters);
// 设置是否预测温升趋势； true：将查询温升趋势预测信息； false:不会查询温升趋势预测信息；默认：false
HMS_GamePerformance_ThermalInfoQueryParameters_SetNeedsPrediction(parameters, true);
// needsPrediction=true时选填（false时无需设置该参数）。若设置目标温度等级, 将以该温度等级作为目标温度等级进行温升趋势预测；若不设置，将使用系统默认档位进行预测。
HMS_GamePerformance_ThermalInfoQueryParameters_SetTargetThermalLevel(parameters, 4);
// 查询温度信息
GamePerformance_ErrorCode ret = HMS_GamePerformance_QueryThermalInfo(parameters, &thermalInfo);
if (ret != GAME_PERFORMANCE_SUCCESS) {
// 异常处理
return;
}
int32_t margin = INT32_MIN;
int32_t trend = INT32_MIN;
int32_t level = -1;
HMS_GamePerformance_ThermalInfo_GetThermalLevel(thermalInfo, &level);
HMS_GamePerformance_ThermalInfo_GetThermalMargin(thermalInfo, &margin); // needsPrediction=true时,返回有效值
HMS_GamePerformance_ThermalInfo_GetThermalTrend(thermalInfo, &trend);  // needsPrediction=true时,返回有效值
// 使用完释放内存
HMS_GamePerformance_DestroyThermalInfo(&thermalInfo);
HMS_GamePerformance_DestroyThermalInfoQueryParameters(&parameters);
```
查询温度变化趋势需要历史数据作为计算依据，调用该接口时请保证设备已启动至少一分钟，否则会返回1010300001错误。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-personal-data-processing-V14
爬取时间: 2025-04-29 20:31:22
来源: Huawei Developer
此文档针对华为作为最终用户数据处理者，开发者作为最终用户数据控制者的数据处理进行说明，包括：
华为处理的个人数据清单
| 个人数据清单  | 使用目的  | 存留期  |
| --- | --- | --- |
| 用户应用基本信息（应用包名、客户端版本号）  | 保障用户正常启动/登录游戏。  | 数据产生后在未销户的情况下最多存储5年（由当地法律法规决定），超期将自动删除。  |
| 应用内角色（应用内角色）  | 数据产生后在未销户的情况下最多存储2年（由当地法律法规决定），超期将自动删除。  |
| 用户应用基本信息（客户端版本号）  | 数据产生后在未销户的情况下最多存储2年（由当地法律法规决定），超期将自动删除。用户如果销户，则30天内自动删除。  |
| 三方账号openID  | 用户如果销户，则30天内自动删除。  |
| 账号信息（华为账号信息、第三方账号信息）  | 用于游戏场景感知上报游戏信息。  | 数据产生后在未销户的情况下最多存储180天（由当地法律法规决定），超期将自动删除。  |
| 应用信息（应用设置信息、应用使用信息、应用基本信息）  |
| 网络信息  |
| 设备信息（操作系统、设备标识符、设备硬件信息、设备型号、设备使用信息）  |
个人数据清单
使用目的
存留期
用户应用基本信息（应用包名、客户端版本号）
保障用户正常启动/登录游戏。
数据产生后在未销户的情况下最多存储5年（由当地法律法规决定），超期将自动删除。
应用内角色（应用内角色）
数据产生后在未销户的情况下最多存储2年（由当地法律法规决定），超期将自动删除。
用户应用基本信息（客户端版本号）
数据产生后在未销户的情况下最多存储2年（由当地法律法规决定），超期将自动删除。用户如果销户，则30天内自动删除。
三方账号openID
用户如果销户，则30天内自动删除。
账号信息（华为账号信息、第三方账号信息）
用于游戏场景感知上报游戏信息。
数据产生后在未销户的情况下最多存储180天（由当地法律法规决定），超期将自动删除。
应用信息（应用设置信息、应用使用信息、应用基本信息）
网络信息
设备信息（操作系统、设备标识符、设备硬件信息、设备型号、设备使用信息）
指导开发者如何帮助最终用户实现对数据的控制
如何清除最终用户的数据
最终用户删除华为账号且操作成功后，Game Service Kit会清除最终用户登录记录中能够绑定到最终用户的数据。
Game Service Kit最多保存最近5年（由当地法律法规决定）的登录记录，超期登录记录会自动删除。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-V14
爬取时间: 2025-04-29 20:31:35
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-1-V14
爬取时间: 2025-04-29 20:31:49
来源: Huawei Developer
无特殊要求，遵从HarmonyOS包名规范即可，但建议正式上架包名不要包含test、dev等信息。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-2-V14
爬取时间: 2025-04-29 20:32:02
来源: Huawei Developer
游戏需先成功调用初始化init接口后再调用其它接口，否则将导致审核被驳回。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-3-V14
爬取时间: 2025-04-29 20:32:16
来源: Huawei Developer
Game Service Kit为HarmonyOS NEXT游戏提供统一的联合登录面板，游戏不能自定义。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-4-V14
爬取时间: 2025-04-29 20:32:30
来源: Huawei Developer
若游戏提供官方账号登录方式时，调用unionLogin接口且将loginParam中的showLoginDialog参数设置为true，游戏即可在玩家切换账号时强制拉起联合登录面板。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-5-V14
爬取时间: 2025-04-29 20:32:44
来源: Huawei Developer
可选但推荐接入。上报角色关系数据后，可用于后续基于角色维度的联运活动规划，为玩家提供更好的体验和更丰富的能力。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-6-V14
爬取时间: 2025-04-29 20:32:57
来源: Huawei Developer
玩家在联合登录面板完成转移流程后，Game Service Kit支持HarmonyOS游戏的账号资产（角色、区服信息、游戏进度等）全部转移至HarmonyOS NEXT游戏中。
转移前后，华为账号不会发生变化，也不涉及开发者服务器和数据库层面的变动。
转移的本质是华为平台将HarmonyOS系统的玩家标识ID值赋给HarmonyOS NEXT系统下的玩家标识ID，同时重置原玩家标识ID的值。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-7-V14
爬取时间: 2025-04-29 20:33:11
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-8-V14
爬取时间: 2025-04-29 20:33:25
来源: Huawei Developer
前往AppGallery Connect控制台配置HarmonyOS游戏与HarmonyOS NEXT游戏的APP ID映射关系，配置映射关系的具体操作请参见配置APP ID映射关系。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-9-V14
爬取时间: 2025-04-29 20:33:38
来源: Huawei Developer
不是。若游戏配置了APP ID映射关系，Game Service Kit会向玩家展示“转移”和“绑定”两种登录方式。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-10-V14
爬取时间: 2025-04-29 20:34:33
来源: Huawei Developer
| 场景  | 补救措施  |
| --- | --- |
| 转移  | 支持玩家前往“游戏中心”客户端进行回退。回退成功后，玩家可在联合登录面板中重新选择游戏的登录方式。玩家转移回退的具体操作请参见转移回退。  |
| 绑定  | 支持玩家点击游戏内的“解绑账号”按钮，解除华为账号与游戏官方账号的绑定关系。解绑成功后，支持玩家在联合登录面板上重新选择游戏的登录方式。游戏侧在游戏内提供解绑账号的开发步骤请参见解绑游戏账号。用户在“游戏中心”客户端解绑的具体操作请参见解绑账号。  |
| 游戏官方账号登录  | 支持玩家点击游戏内的“切换账号”按钮拉起联合登录面板，支持玩家重新选择华为账号登录或游戏官方账号登录。游戏侧在游戏内提供切换账号功能的开发步骤请参见游戏内切换账号。  |
场景
补救措施
转移
支持玩家前往“游戏中心”客户端进行回退。回退成功后，玩家可在联合登录面板中重新选择游戏的登录方式。玩家转移回退的具体操作请参见转移回退。
绑定
支持玩家点击游戏内的“解绑账号”按钮，解除华为账号与游戏官方账号的绑定关系。解绑成功后，支持玩家在联合登录面板上重新选择游戏的登录方式。游戏侧在游戏内提供解绑账号的开发步骤请参见解绑游戏账号。用户在“游戏中心”客户端解绑的具体操作请参见解绑账号。
游戏官方账号登录
支持玩家点击游戏内的“切换账号”按钮拉起联合登录面板，支持玩家重新选择华为账号登录或游戏官方账号登录。游戏侧在游戏内提供切换账号功能的开发步骤请参见游戏内切换账号。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-11-V14
爬取时间: 2025-04-29 20:34:47
来源: Huawei Developer
目前未规划这类能力，未来将考虑为游戏提供云侧API接口进行监听。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-12-V14
爬取时间: 2025-04-29 20:35:01
来源: Huawei Developer
玩家在“游戏中心”客户端完成转移回退后，再登录HarmonyOS NEXT游戏时，游戏调用unionLogin接口（showLoginDialog默认为false），游戏不展示联合登录面板，直接向玩家展示登录提示（玩过，继续游戏/没有，开始游戏）面板，允许玩家重新选择转移流程或绑定流程。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-13-V14
爬取时间: 2025-04-29 20:35:15
来源: Huawei Developer
| 登录场景  | 游戏侧  | 华为侧  |
| --- | --- | --- |
| 转移  | -  | 调用合规校验接口。  |
| 绑定  | 自行实现账号实名认证、未成年人防沉迷以及支付限额逻辑。  |
| 游戏官方账号登录  |
登录场景
游戏侧
华为侧
转移
-
调用合规校验接口。
绑定
自行实现账号实名认证、未成年人防沉迷以及支付限额逻辑。
游戏官方账号登录
“绑定场景”与“游戏官方账号登录场景”游戏侧与华为侧的双重校验均通过，玩家才能进入游戏。若有一方未通过校验，玩家将不能进入游戏。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-14-V14
爬取时间: 2025-04-29 20:35:28
来源: Huawei Developer
游戏先调用createAuthorizationWithHuaweiIDRequest创建授权请求并设置参数，再调用executeRequest执行授权请求，成功后可获取头像昵称等信息。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-15-V14
爬取时间: 2025-04-29 20:35:42
来源: Huawei Developer
游戏不存在转移场景时，请联系华为工程师为屏蔽转移入口。完成配置后，用户点击“华为账号登录”将默认进入授权绑定登录。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-16-V14
爬取时间: 2025-04-29 20:35:55
来源: Huawei Developer
绑定场景下，若未拿到玩家授权的手机号，游戏可以通过玩家手动输入的账号和密码绑定华为账号和游戏官方账号。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-17-V14
爬取时间: 2025-04-29 20:36:49
来源: Huawei Developer
默认使用的是华为账号绑定的手机号，同时也可以手动添加其它手机号，和安全手机号无关。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-18-V14
爬取时间: 2025-04-29 20:37:03
来源: Huawei Developer
是的，游戏必须向玩家提供解绑能力，具体的开发步骤请参见解绑游戏账号。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-19-V14
爬取时间: 2025-04-29 20:37:17
来源: Huawei Developer
游戏调用unionLogin接口（将thirdAccountInfos参数传空数组）即可实现玩家登录游戏时不展示“游戏官方账号登录”选项，默认使用华为账号登录，届时Game Service Kit直接向玩家展示登录提示面板。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-20-V14
爬取时间: 2025-04-29 20:37:31
来源: Huawei Developer
游戏官方账号ICON大小不超过35KB。若超过35KB，调用unionLogin接口时，会出现“1002000001 游戏内部通用错误”报错。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-faq-21-V14
爬取时间: 2025-04-29 20:37:44
来源: Huawei Developer
当前提供游戏场景感知C# SDK，可以实现使用C#语言开发的游戏接入游戏场景感知功能，具体请参见游戏场景感知C# SDK开发指导。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-appendix-V14
爬取时间: 2025-04-29 20:37:58
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-back-V14
爬取时间: 2025-04-29 20:38:12
来源: Huawei Developer
转移
转移是将HarmonyOS游戏的账号资产转移至HarmonyOS NEXT游戏中，玩家可使用如下转移方式。
-
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170034.34755564052274534416756407551750:50001231000000:2800:A3B4DBC5A1795F94BEAB2ABB2062FEBFFE612C72757B483F1886757899C5A204.png)
转移成功后，玩家可以使用华为账号进入HarmonyOS NEXT游戏，但无法再通过该华为账号进入HarmonyOS系统的游戏。
回退
若玩家想要回退游戏的资产数据，支持玩家前往“游戏中心”客户端进行回退。不同系统的客户端操作流程有所不同：
-
-
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170034.25859758700730715788370569921463:50001231000000:2800:B7B2EB2776397BE3A01015F4D7FE622821E5BF76412550F0C7A101A8499EE43A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170035.16317547539634175528757655762649:50001231000000:2800:1F6FFE89471B7FA3FD8C37D79D7D3293538CED2C239FB1DAB8A011E070AD47D5.png)
回退成功后，支持玩家使用华为账号继续登录HarmonyOS系统的游戏。
若未来调整回退策略，华为平台将会提前公告。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/gameservice-unbind-V14
爬取时间: 2025-04-29 20:38:26
来源: Huawei Developer
HarmonyOS NEXT游戏需要支持玩家解除华为账号与游戏官方账号的绑定关系，因此游戏侧与华为平台均为玩家提供了解绑方式。
-
-
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170035.76963964328523802993505728087573:50001231000000:2800:3F1BCC925AC3E7A7A4DEE74D59963FD9A9A99614F802FC2CDBF3044580755722.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170035.21934360766661784904976008256236:50001231000000:2800:FD3D70943AA74639B5E02E56E580BB3EAA1D7A50C7C74DE51439AFE2BF9D4E57.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-service-kit-guide-V14
爬取时间: 2025-04-29 20:38:39
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-service-kit-ability-V14
爬取时间: 2025-04-29 20:38:53
来源: Huawei Developer
Health Service Kit（运动健康服务）是为华为生态应用打造的基于华为账号和用户授权的运动健康数据开放平台。在获取用户授权后，开发者可以使用Health Service Kit提供的开放能力获取运动健康数据，基于多种类型数据构建运动健康领域应用与服务，为用户打造丰富、便捷、专业的运动健康场景体验。
业务介绍
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170035.10842687280228026573917697910954:50001231000000:2800:58BA57F6EE0C38D534E930D186F8FCD382F81322B0A1E10F55C95BF70FE12459.png)
应用服务
优质应用服务联合三方设备，结合Health Service Kit提供的运动健康数据服务，共同打造“智能运动健康设备+华为终端+应用服务”生态，为用户带来安全、智慧、便捷的运动健康体验。
服务包含华为应用及生态应用：
运动健康服务
如上图所示，华为运动健康开放平台提供了多种形式的开放能力，支持应用生态开放能力和设备接入开放能力。提供丰富的运动健康类的API，支持多种运动类型和健康数据的数据开放，如步数、心率等。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-application-access-V14
爬取时间: 2025-04-29 20:39:07
来源: Huawei Developer
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170035.96761705782600171252247612143217:50001231000000:2800:DED3E7B56570FB38E26ED20087E114AF237F4044A9816B3B66B059BBDF6D409E.png)
接入运动健康服务主要包含以下环节：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-application-qualifications-V14
爬取时间: 2025-04-29 20:39:21
来源: Huawei Developer
个人开发者接入资质审核要求
企事业单位、社会团体开发者接入资质审核要求
成立年限要求：上述申请主体存续且成立时间需1年以上。
申请材料准备
为保障用户隐私和数据安全，运动健康服务需要开发者反馈相关材料和信息，以确保应用向用户请求数据权限是合理的。请根据提交应用信息页面中的开发者申请材料清单样例，准备并准确填写相应内容。
请在提交材料前先阅读申请被驳回的常见问题，以避免在您的申请材料中出现同类问题。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-harmonyos-V14
爬取时间: 2025-04-29 20:39:35
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-data-overview-V14
爬取时间: 2025-04-29 20:39:49
来源: Huawei Developer
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170036.42634334781947359251784840999972:50001231000000:2800:FB5D9F5DB0A7C25871F90D029A6A06E92B103E0A55DB5EFE3A0146DDC75C3897.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170036.77322902544528136841829230717981:50001231000000:2800:E6569409D5C8DB233C355CBB50867ACE337C6DB193BEC1F12446BA0E14737020.png)
数据及时性体验依赖用户使用方式，若穿戴设备未连接至手机蓝牙、华为运动健康App未设置后台保活等情况下，将无法保证数据及时性体验。开发者需考虑数据及时性体验各类极端情况，综合判断合适的数据使用场景，确保给用户提供的产品/服务的稳定性，保证用户体验。
| 分类明细  | 数据子类  | 数据项  | 开放等级  | 数据及时性  | 支持读  | 支持写  |
| --- | --- | --- | --- | --- | --- | --- |
| 采样数据  | 日常活动  | 步数、热量、距离等日常活动数据  |   | 小时级  | Y  | Y  |
| 心率  | 动态心率、静息心率  |   | 小时级  | Y  | Y  |
| 血氧  | 瞬时血氧饱和度  |   | 小时级  | Y  | Y  |
| 压力  | 压力得分  |   | 小时级  | Y  | Y  |
| 体温  | 体温、皮肤体温  |   | 分钟级  | Y  | Y  |
| 血压  | 收缩压、舒张压、脉搏等  |   | 分钟级  | Y  | Y  |
| 体重  | 体重、体脂、BMI等  |   | 分钟级  | Y  | Y  |
| 身高  | 身高  |   | 分钟级  | Y  | Y  |
| 健康记录  | 睡眠  | 睡眠分期采样数据、睡眠记录  |   | 分钟级  | Y  | Y  |
| 锻炼记录  | 锻炼记录数据  | 跑步、骑行、健走、跳绳、跑步机等运动&健身类型  |   | 分钟级  | Y  | Y  |
分类明细
数据子类
数据项
开放等级
数据及时性
支持读
支持写
采样数据
日常活动
步数、热量、距离等日常活动数据
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170036.21980419731307884512370371443907:50001231000000:2800:AB721074221376699E846B39E5A804166003EB898BD04BAB6655521A23F8E6CF.png)
小时级
Y
Y
心率
动态心率、静息心率
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170036.58917206891568958622735962880813:50001231000000:2800:8159689176AA0380D12C892220B7A715B33A147D4C6370235CAC4BE4AB25CDF6.png)
小时级
Y
Y
血氧
瞬时血氧饱和度
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170036.45396951102105362715988947782644:50001231000000:2800:9E021BC8278FD1E607F54BE9F000EB31A5F4251AB661AAEC9559D184D1A1A2A4.png)
小时级
Y
Y
压力
压力得分
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170036.12093347731116010388065355345128:50001231000000:2800:C2D890B91AB521CF09F981C9E23C6FCE1F5CE68249C10A9BCEE4A10319BB1FCE.png)
小时级
Y
Y
体温
体温、皮肤体温
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170036.39759301977799915684892891295996:50001231000000:2800:5EE40D3503C5F386466378BF27A48AE0818E894495932EB37236A5052BCD78FF.png)
分钟级
Y
Y
血压
收缩压、舒张压、脉搏等
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170036.93183895769290745088966466012821:50001231000000:2800:6CD7A4721F0264BA61F9245462123E493EC1D370563E529D6D6F652D134DDCCC.png)
分钟级
Y
Y
体重
体重、体脂、BMI等
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170036.73692959260088666908983722190209:50001231000000:2800:29D90C18B43303C2E3E433F51C1F32A54EB696E2B14EF3603336734474A56914.png)
分钟级
Y
Y
身高
身高
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170036.15584654486988101157187525020421:50001231000000:2800:40E3CD8FB21CAD72651E87065A5A9FC656E9C52A90F846F5E76B1BEB4BCC0F07.png)
分钟级
Y
Y
健康记录
睡眠
睡眠分期采样数据、睡眠记录
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170036.61284584957573526176587416608689:50001231000000:2800:438C238052370AFC1C309FED9825B52533A05627B583D5EEA7ED8FF3C9568847.png)
分钟级
Y
Y
锻炼记录
锻炼记录数据
跑步、骑行、健走、跳绳、跑步机等运动&健身类型
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170036.55123481974729160585683737223580:50001231000000:2800:DCC2748038E2A27EAD00E6C4C01A3EE3F3220C8A7245FB0ABB53ED811FC7170A.png)
分钟级
Y
Y
相关数据类型对应权限参考权限说明。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-preparations-V14
爬取时间: 2025-04-29 20:40:02
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-apply-V14
爬取时间: 2025-04-29 20:40:16
来源: Huawei Developer
申请运动健康服务前，请先参考应用开发准备，确认开发环境并完成创建项目、创建HarmonyOS应用/元服务、添加公钥指纹等基本准备工作，再继续进行以下开发活动。
1.  若您之前未注册开发者账号，请参见注册账号和实名认证成为开发者并完成实名认证。开发者可实名认证为个人开发者或者企业开发者，认证前，请先了解二者的权益区别。
2.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170036.67340069742264503476327650260342:50001231000000:2800:84DC1C41A8FACA7FA7CC7A626D4C29B2B83FA9C3355FCA9130321B99913F39E1.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170037.32651830509883041725989450420666:50001231000000:2800:755AC09404F027697AB7CC69A8822CFED4D5A80E4F611CB0481CA06F9BA1D5E3.png)
1.
2.
3.  请在提交材料前先阅读申请被驳回的常见问题，以避免在您的申请材料中出现同类问题。
4.  您提交的申请需要经过人工审核，审核周期约15个工作日，请耐心等待，审批结果将以短信和邮件的形式通知您。
5.
6.  若您的业务范围发生变动，需要修改相应的数据权限，您可以单击“管理”更新权限再次提交申请。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170037.58575127106306352652514964579376:50001231000000:2800:2E3DFAC7BEEE383D49AA676D9A6FB0D1D48CB4D0FDF697D94552516A268AE640.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170037.09743834258438225019923593830971:50001231000000:2800:E496E5C361351332774B5E7604DE5AB1EE7FDAB0109CDE91AE826E00D1066EE8.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170037.90284895330666695530290818772886:50001231000000:2800:1D6D66C3EFD834866A74BB564A0E374EB5089C1CAD47E3FC432CEB2771734CAA.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170037.03464757245872861753381858053269:50001231000000:2800:45C2C9896F26AF147B670F3D81AB75B3D32F1755D06D5A035C52B94D43B98303.png)
-
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170037.07740102114942580819613664590180:50001231000000:2800:98C72D32964455F5091839AFA0EB914AFFE0427E80108414DCEE18F22AF481D9.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170037.85306958789248221826228434741996:50001231000000:2800:353AFCAAB751A02BC52B3AFC52CAC205D130806DF003B0C01D9C0F1793A72C09.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170037.48399341052425745269701194596539:50001231000000:2800:25495B962C458D75D18F594F337989EA6AF0ED91C436AF1ED45C31BF09F4C433.png)
申请被驳回的常见问题
以下为申请服务被驳回的高频典型问题，请您在申请前阅读以下内容以避免在您的申请材料中出现下述问题，若您已提交申请并被驳回，也可参考以下解决方案修改申请材料并重新提交。
权限说明缺失
要求：申请的每一个读/写数据权限都要在材料中说明。
解决办法：您提交的申请材料页签1和页签2中说明的权限少于所申请的权限，请检查填写的权限与所申请的权限是否一一对应，在页签1和页签2中补齐所申请的每一项权限的使用说明。
如您申请的数据读/写权限的使用场景在应用开发过程中发生变化，请在申请验证前更新申请材料清单。
图标使用不规范
要求：图标的使用需遵循标志使用规范。
解决办法：您提交的申请材料中涉及华为运动健康图标展示的场景，按照标志使用规范中要求的视觉效果进行呈现。
必选内容未填写
要求：申请材料中每个标注“必填”的页签都需要填写。
解决办法：您提交的申请材料中存在未填写的页签，尤其是企业开发者需要填写“企业介绍”页签，若您为个人开发者，请填写“开发者信息”，并明确个人所在科研机构或大学等。
企事业单位、社会团体实缴注册资本不符合审核要求
要求：
成立年限要求：上述申请主体存续且成立时间需1年以上。
解决办法：如您的资质不符合以上要求，需要由符合以上企业资质的公司作为保证人并提供《担保函》。您需要通过hihealth@huawei.com邮箱提供如下文件：
个人开发者接入资质不符合审核要求
要求：个人开发者应用未上架华为应用市场，或者个人开发者应用非移动应用，暂不开放运动健康服务数据；申请访问开放等级为基础的用户数据，个人开发者不得有个人信用不良记录。开放等级为高阶的用户数据暂不向个人开发者开放。数据开放等级请参见数据开放总览。
解决办法：将您的移动应用上架至华为应用市场，或重新注册企业开发者账号申请运动健康服务；申请运动健康服务时，仅勾选开放等级为“基础”的用户数据。
若仍未解决您的申请被驳回的问题，您可以选择以下方式寻求帮助：
提交问题后，通常会在1~2个工作日内收到回复。有时需要您进一步澄清问题，请及时关注进展并予以回复，以便更好地解决问题。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-configuration-client-id-V14
爬取时间: 2025-04-29 20:40:30
来源: Huawei Developer
1.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170037.68209802459901875950917838561336:50001231000000:2800:54C8A81F49C48434BF2984F5EB195D90776EFD4385E7C2D2266824BD77875B2B.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-app-dev-V14
爬取时间: 2025-04-29 20:40:44
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-privacy-authorization-V14
爬取时间: 2025-04-29 20:40:58
来源: Huawei Developer
场景介绍
用户在设备上首次使用运动健康服务时，需要用户同意运动健康服务隐私协议，当前隐私授权依赖运动健康App，需引导用户打开运动健康App并完成隐私授权。
开发者调用后续章节的接口后，如果返回错误码1002703001，可参考本章节，引导用户同意运动健康服务隐私。
开发步骤
1.  "huaweischeme"为需要跳转到的运动健康App首页的scheme，页面参考如下：
```typescript
import { bundleManager, common, Want } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { productViewManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
```typescript
try {
let result = bundleManager.canOpenLink('huaweischeme://healthapp/home/main');
let context = globalThis.context as common.UIAbilityContext;
if (result) {
// 拉起运动健康App首页，进行隐私授权
let link: string = 'huaweischeme://healthapp/home/main';
await context.openLink(link)
} else {
// 拉起应用市场推荐，引导用户下载运动健康App，进行隐私授权
const wantParam: Want = {
parameters: {
bundleName: 'com.huawei.hmos.health'
}
};
const callback: productViewManager.ProductViewCallback = {
onError: (error: BusinessError) => {
hilog.error(0x0001, 'TAG', `Failed to open AppGallery.Code: ${error.code}, message: ${error.message}`);
}
}
productViewManager.loadProduct(context, wantParam, callback);
}
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to agree user privacy.Code: ${err.code}, message: ${err.message}`);
}
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170038.11241910846943155173934112358758:50001231000000:2800:7AE7D0F7988E703AAAEADAC0C44A428599606C9D44EBD8A3B9ECC929C30060C9.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-add-permissions-V14
爬取时间: 2025-04-29 20:41:12
来源: Huawei Developer
场景介绍
应用拉起华为账号登录和授权界面，由用户授权相应的数据访问权限。用户可以自主选择授权的数据类型，可以只授权部分数据权限。
应用所能操作的用户数据，是用户授权和运动健康服务审批通过的数据权限的交集。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170038.43255836578228891953264652194394:50001231000000:2800:7925D66BED29DD3C4D10B65E97158579E996CF4C2744BADBD1E797E73E55E9C9.png)
接口说明
| 接口名 | 描述 |
| --- | --- |
| requestAuthorizations(context: common.UIAbilityContext, request: AuthorizationRequest): Promise<AuthorizationResponse> | 用户授权，入参为UIAbility上下文和授权参数AuthorizationRequest，添加需要读写的数据类型，拉起账号授权页面，引导用户完成授权，返回结果中的数据类型列表，其对应权限在应用申请权限和用户授权权限的交集中。 |
| getAuthorizations(request: AuthorizationRequest): Promise<AuthorizationResponse> | 查询用户权限，入参为AuthorizationRequest，添加需要查询的数据类型，查询传入类型是否有权限，返回结果中的数据类型列表，其对应权限在应用申请权限和用户授权权限的交集中。 |
| cancelAuthorizations(): Promise<void> | 取消用户所有授权。 |
接口名
描述
requestAuthorizations(context:common.UIAbilityContext, request:AuthorizationRequest): Promise<AuthorizationResponse>
用户授权，入参为UIAbility上下文和授权参数AuthorizationRequest，添加需要读写的数据类型，拉起账号授权页面，引导用户完成授权，返回结果中的数据类型列表，其对应权限在应用申请权限和用户授权权限的交集中。
getAuthorizations(request:AuthorizationRequest): Promise<AuthorizationResponse>
查询用户权限，入参为AuthorizationRequest，添加需要查询的数据类型，查询传入类型是否有权限，返回结果中的数据类型列表，其对应权限在应用申请权限和用户授权权限的交集中。
cancelAuthorizations(): Promise<void>
取消用户所有授权。
开发前检查
开发步骤
用户授权
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { common } from '@kit.AbilityKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
```typescript
let authorizationParameter: healthStore.AuthorizationRequest = {
readDataTypes: [healthStore.exerciseSequenceHelper.DATA_TYPE, healthStore.samplePointHelper.heartRate.DATA_TYPE],
writeDataTypes: [healthStore.exerciseSequenceHelper.DATA_TYPE, healthStore.samplePointHelper.heartRate.DATA_TYPE]
}
```
```typescript
try {
let authorizationResponse = await healthStore.requestAuthorizations(getContext(this) as common.UIAbilityContext, authorizationParameter);
hilog.info(0x0000, 'testTag', 'Succeeded in requesting authorization.');
authorizationResponse.writeDataTypes.forEach(dataType => {
hilog.info(0x0000, 'testTag', `grantedWriteDataType is : ${dataType.name}`);
});
authorizationResponse.readDataTypes.forEach(dataType => {
hilog.info(0x0000, 'testTag', `grantedReadDataTypes is : ${dataType.name}`);
});
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to request authorization. Code: ${err.code}, message: ${err.message}`);
}
```
查询权限
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
```typescript
let queryAuthorizationRequest: healthStore.AuthorizationRequest = {
readDataTypes: [healthStore.exerciseSequenceHelper.DATA_TYPE, healthStore.samplePointHelper.heartRate.DATA_TYPE],
writeDataTypes: [healthStore.exerciseSequenceHelper.DATA_TYPE, healthStore.samplePointHelper.heartRate.DATA_TYPE]
}
```
```typescript
try {
let queryAuthorizationResponse = await healthStore.getAuthorizations(queryAuthorizationRequest);
hilog.info(0x0000, 'testTag', 'Succeeded in getting authorization.');
queryAuthorizationResponse.writeDataTypes.forEach(dataType => {
hilog.info(0x0000, 'testTag', `grantedWriteDataType is : ${dataType.name}`);
});
queryAuthorizationResponse.readDataTypes.forEach(dataType => {
hilog.info(0x0000, 'testTag', `grantedReadDataTypes is : ${dataType.name}`);
});
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to get authorization. Code: ${err.code}, message: ${err.message}`);
}
```
取消授权
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
```typescript
try {
await healthStore.cancelAuthorizations();
hilog.info(0x0000, 'testTag', 'Succeeded in cancelling authorization.');
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to cancel authorization. Code: ${err.code}, message: ${err.message}`);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-datasource-manage-V14
爬取时间: 2025-04-29 20:41:26
来源: Huawei Developer
场景介绍
数据源提供了应用或者设备的信息，每一个运动健康数据必须关联数据源信息，通过DataSourceId进行关联。
DataSourceId在插入数据源信息时由平台生成，无法更改。
接口说明
| 接口名 | 描述 |
| --- | --- |
| insertDataSource(dataSource: DataSourceBase): Promise<string> | 插入数据源，入参为数据源基类DataSourceBase。 |
| readDataSource(request: DataSourceReadRequest): Promise<DataSource[]> | 查询数据源，通过DataSourceReadRequest设置查询条件，可按DataSourceId/包名/设备UniqueId查询数据源。 |
| updateDataSource(dataSource: DataSource): Promise<void> | 更新数据源，其中数据源的dataSourceId和uniqueId字段无法更新。 |
接口名
描述
insertDataSource(dataSource:DataSourceBase): Promise<string>
插入数据源，入参为数据源基类DataSourceBase。
readDataSource(request:DataSourceReadRequest): Promise<DataSource[]>
查询数据源，通过DataSourceReadRequest设置查询条件，可按DataSourceId/包名/设备UniqueId查询数据源。
updateDataSource(dataSource:DataSource): Promise<void>
更新数据源，其中数据源的dataSourceId和uniqueId字段无法更新。
开发前检查
开发步骤
插入数据源
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
```typescript
let dataSource: healthStore.DataSourceBase = {
deviceInfo: {
uniqueId: 'test',
name: 'test', // 插入数据源时此字段必填
category: healthStore.DeviceCategory.WEARABLE_BAND, // 插入数据源时此字段必填
productId: '0554', // 插入数据源时此字段必填
model: 'lotana',
manufacturer: 'HUAWEI',
mac: 'testDeviceMac',
sn: 'testDeviceSn',
hardwareVersion: '1',
softwareVersion: '2',
firmwareVersion: '3',
udid: ''
}
}
```
```typescript
try {
const dataSourceId = await healthStore.insertDataSource(dataSource);
hilog.info(0x0000, 'testTag', `Succeeded in inserting dataSource, the dataSourceId is ${dataSourceId}.`);
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to insert dataSource. Code: ${err.code}, message: ${err.message}`);
}
```
读取数据源
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
```typescript
let readSourceRequest: healthStore.DataSourceReadRequest = {
deviceUniqueId: 'testudidupdate'
}
```
```typescript
try {
let dataSources = await healthStore.readDataSource(readSourceRequest);
dataSources.forEach((dataSource) => {
hilog.info(0x0000, 'testTag', `Succeeded in reading dataSource, the dataSourceId is ${dataSource.dataSourceId}.`);
});
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to read dataSource. Code: ${err.code}, message: ${err.message}`);
}
```
更新数据源
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
```typescript
let newDataSource: healthStore.DataSource = {
deviceInfo: {
uniqueId: 'test',
name: 'test',
category: healthStore.DeviceCategory.WEARABLE_BAND,
productId: '0554',
model: 'lotana',
manufacturer: 'HUAWEI',
mac: 'testDeviceMac',
sn: 'testDeviceSn',
hardwareVersion: '1',
softwareVersion: '2',
firmwareVersion: '3',
// 修改udid
udid: 'updateudid'
},
// 此处dataSourceId值为开发步骤插入数据源时，返回的dataSourceId
dataSourceId: 'xxx'
}
```
```typescript
try {
await healthStore.updateDataSource(newDataSource);
hilog.info(0x0000, 'testTag', 'Succeeded in updating dataSource.');
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to update dataSource. Code: ${err.code}, message: ${err.message}`);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-data-manage-V14
爬取时间: 2025-04-29 20:41:40
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-samplepoint-manage-V14
爬取时间: 2025-04-29 20:41:53
来源: Huawei Developer
场景介绍
运动健康采样数据(SamplePoint)，表示在某时刻（或一段时间）采集到的特定数据类型的样本，由时间、样本值及采样的数据源组成，支持保存、读取和删除等操作。
接口说明
| 接口名 | 描述 |
| --- | --- |
| saveData(sampleData: SamplePoint[] | SamplePoint): Promise<void> | 保存运动健康采样数据，入参为单个SamplePoint或SamplePoint数组。 |
| readData<T extends SamplePoint>(request: SamplePointReadRequest): Promise<T[]> | 查询运动健康采样数据，通过SamplePointReadRequest设置查询条件，可按数据类型，字段、时间范围等条件查询。 |
| deleteData(samplePoint: SamplePoint | SamplePoint[]): Promise<void> | 删除运动健康采样数据，按入参删除指定的采样数据，可传入单个SamplePoint或SamplePoint数组。 |
| deleteData(request: SamplePointDeleteRequest | SamplePointDeleteRequest[]): Promise<void> | 删除运动健康采样数据，按SamplePointDeleteRequest条件删除，可设置数据类型、时间范围、数据源等删除条件。 |
| aggregateData<T extends AggregateResult>(request: AggregateRequest | AggregateRequest[]): Promise<T[]> | 聚合查询运动健康采样数据，通过AggregateRequest设置查询的数据类型、聚合策略。 |
接口名
描述
saveData(sampleData:SamplePoint[] |SamplePoint): Promise<void>
保存运动健康采样数据，入参为单个SamplePoint或SamplePoint数组。
readData<T extendsSamplePoint>(request:SamplePointReadRequest): Promise<T[]>
查询运动健康采样数据，通过SamplePointReadRequest设置查询条件，可按数据类型，字段、时间范围等条件查询。
deleteData(samplePoint:SamplePoint|SamplePoint[]): Promise<void>
删除运动健康采样数据，按入参删除指定的采样数据，可传入单个SamplePoint或SamplePoint数组。
deleteData(request:SamplePointDeleteRequest|SamplePointDeleteRequest[]): Promise<void>
删除运动健康采样数据，按SamplePointDeleteRequest条件删除，可设置数据类型、时间范围、数据源等删除条件。
aggregateData<T extendsAggregateResult>(request:AggregateRequest|AggregateRequest[]): Promise<T[]>
聚合查询运动健康采样数据，通过AggregateRequest设置查询的数据类型、聚合策略。
aggregateData接口读取今日日常活动数据，数据上报存在延时，读取实时日常活动数据建议使用读取实时三环数据接口。
开发前检查
开发步骤
保存用户的运动健康数据
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.获取dataSourceId，参考管理数据源，插入一个新的数据源或读取已有数据源。
3.创建运动健康采样数据。
```typescript
let samplePoint: healthStore.samplePointHelper.bodyTemperature.Model = {
dataType: healthStore.samplePointHelper.bodyTemperature.DATA_TYPE,
startTime: 1698633801000,
endTime: 1698633801000,
localDate: '10/30/2023',
timeZone: '+0800',
modifiedTime: 1698633801000,
// insertDataSource插入数据源接口返回的dataSourceId，或读取已有数据源的dataSourceId
dataSourceId: 'xxx',
fields: {
bodyTemperature: 39
}
}
```
```typescript
try {
await healthStore.saveData(samplePoint);
hilog.info(0x0000, 'testTag', 'Succeeded in saving data.');
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to save data. Code: ${err.code}, message: ${err.message}`);
}
```
读取用户的运动健康数据
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.创建查询请求。
```typescript
let samplePointReadRequest: healthStore.SamplePointReadRequest = {
samplePointDataType: healthStore.samplePointHelper.bodyTemperature.DATA_TYPE,
startTime: 1698633801000,
endTime: 1698633801000,
fields: {
bodyTemperature: 39
}
}
```
```typescript
try {
let samplePoints = await healthStore.readData(samplePointReadRequest);
samplePoints.forEach((samplePoint) => {
hilog.info(0x0000, 'testTag', `Succeeded in reading data, the bodyTemperature is ${samplePoint.fields.bodyTemperature}.`);
});
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to read data. Code: ${err.code}, message: ${err.message}`);
}
```
删除指定的运动健康采样数据
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.查询待删除的运动健康采样数据。
```typescript
let samplePointReadRequest: healthStore.SamplePointReadRequest = {
samplePointDataType: healthStore.samplePointHelper.bodyTemperature.DATA_TYPE,
startTime: 1698633801000,
endTime: 1698633801000
}
let samplePoints: healthStore.SamplePoint[] = await healthStore.readData(samplePointReadRequest);
```
```typescript
try {
for (let index = 0; index < samplePoints.length; index++) {
const samplePoint = samplePoints[index];
await healthStore.deleteData(samplePoint);
}
hilog.info(0x0000, 'testTag', 'Succeeded in deleting data.');
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to delete data. Code: ${err.code}, message: ${err.message}`);
}
```
根据请求删除用户运动健康数据
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.创建删除请求。
```typescript
let samplePointDeleteRequest: healthStore.SamplePointDeleteRequest = {
dataType: healthStore.samplePointHelper.bodyTemperature.DATA_TYPE,
startTime: 1698633801000,
endTime: 1698633801000
}
```
```typescript
try {
await healthStore.deleteData(samplePointDeleteRequest);
hilog.info(0x0000, 'testTag', 'Succeeded in deleting data.');
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to delete data. Code: ${err.code}, message: ${err.message}`);
}
```
聚合查询
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.创建聚合查询请求。
```typescript
let aggregateRequest: healthStore.AggregateRequest<healthStore.samplePointHelper.dailyActivities.AggregateFields> = {
dataType: healthStore.samplePointHelper.dailyActivities.DATA_TYPE,
metrics: {
step: ['sum'],
calorie: ['sum'],
distance: ['sum'],
climbHighAltitude:['sum'],
isIntensity: ['sum'],
isStand: ['sum']
},
groupBy: {
unitType: healthStore.GroupUnitType.DAY
},
startLocalDate: '10/30/2023',
endLocalDate: '10/30/2023'
}
```
```typescript
try {
const aggregateResults = await healthStore.aggregateData<healthStore.samplePointHelper.dailyActivities.AggregateResult>(aggregateRequest);
hilog.info(0x0000, 'testTag', 'Succeeded in reading data.');
aggregateResults.forEach((aggregateResult) => {
hilog.info(0x0000, 'testTag', `the start time is ${aggregateResult.startTime}.`);
hilog.info(0x0000, 'testTag', `the end time is ${aggregateResult.endTime}.`);
Object.keys(aggregateResult.fields).forEach((fieldName) => {
hilog.info(0x0000, 'testTag', `the sum of ${fieldName} is ${aggregateResult.fields[fieldName].sum}.`);
});
});
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to read data. Code: ${err.code}, message: ${err.message}`);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-exercisesequence-manage-V14
爬取时间: 2025-04-29 20:42:07
来源: Huawei Developer
场景介绍
锻炼记录，记录用户一次活动的基本信息，包括锻炼的起止时间，运动类型，统计数据，详情数据等，支持写入、读取和删除，每条锻炼记录数据需要关联数据源。
接口说明
| 接口名 | 描述 |
| --- | --- |
| saveData(exerciseSequence: ExerciseSequence[] | ExerciseSequence): Promise<void> | 保存锻炼记录，入参为单个ExerciseSequence或ExerciseSequence数组。 |
| readData<T extends ExerciseSequence>(request: ExerciseSequenceReadRequest): Promise<T[]> | 查询锻炼记录，通过ExerciseSequenceReadRequest设置查询条件，可按数据类型，字段、时间范围等条件查询。 |
| deleteData(exerciseSequence: ExerciseSequence | ExerciseSequence[]): Promise<void> | 删除锻炼记录，按入参删除指定的锻炼记录，可传入单个ExerciseSequence或ExerciseSequence数组。 |
| deleteData(request: ExerciseSequenceDeleteRequest | ExerciseSequenceDeleteRequest[]): Promise<void> | 删除锻炼记录，按ExerciseSequenceDeleteRequest删除，可设置数据类型、时间范围、数据源等删除条件。 |
接口名
描述
saveData(exerciseSequence:ExerciseSequence[] |ExerciseSequence): Promise<void>
保存锻炼记录，入参为单个ExerciseSequence或ExerciseSequence数组。
readData<T extendsExerciseSequence>(request:ExerciseSequenceReadRequest): Promise<T[]>
查询锻炼记录，通过ExerciseSequenceReadRequest设置查询条件，可按数据类型，字段、时间范围等条件查询。
deleteData(exerciseSequence:ExerciseSequence|ExerciseSequence[]): Promise<void>
删除锻炼记录，按入参删除指定的锻炼记录，可传入单个ExerciseSequence或ExerciseSequence数组。
deleteData(request:ExerciseSequenceDeleteRequest|ExerciseSequenceDeleteRequest[]): Promise<void>
删除锻炼记录，按ExerciseSequenceDeleteRequest删除，可设置数据类型、时间范围、数据源等删除条件。
开发前检查
开发步骤
保存用户的锻炼记录
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.获取dataSourceId，参考管理数据源，插入一个新的数据源或读取已有数据源。
3.创建锻炼记录。
```typescript
// 构造跑步记录
const startTime = 1698040800000; // 2023-10-23 14:00:00
const endTime = 1698042600000; // 2023-10-23 14:30:00
const runningSequence: healthStore.exerciseSequenceHelper.running.Model = {
dataType: healthStore.exerciseSequenceHelper.DATA_TYPE,
// insertDataSource插入数据源接口返回的dataSourceId，或读取已有数据源的dataSourceId
dataSourceId: 'xxx',
startTime: startTime, // 2023-10-23 14:00:00
endTime: endTime, // 2023-10-23 14:30:00
localDate: '10/23/2023',
timeZone: '+0800',
modifiedTime: new Date().getTime(),
exerciseType: healthStore.exerciseSequenceHelper.running.EXERCISE_TYPE,
duration: 1800,
summaries: {
distance: {
totalDistance: 2000
},
calorie: {
totalCalories: 20
},
speed: {
avg: 5,
max: 6
}
},
details: {
exerciseHeartRate: [
{
startTime: startTime,
bpm: 88
},
{
startTime: startTime + 5000,
bpm: 89
}
],
speed: [
{
startTime: startTime,
speed: 2.5
},
{
startTime: startTime + 5000,
speed: 2.3
}
],
altitude: [
{
startTime: startTime,
altitude: 100
},
{
startTime: startTime + 5000,
altitude: 101
}
]
}
};
```
```typescript
try {
await healthStore.saveData(runningSequence);
hilog.info(0x0000, 'testTag', 'Succeeded in saving data.');
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to save data. Code: ${err.code}, message: ${err.message}`);
}
```
读取用户的锻炼记录
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.创建查询请求。
```typescript
// 查询跑步记录
const sequenceReadRequest: healthStore.ExerciseSequenceReadRequest<healthStore.exerciseSequenceHelper.running.DetailFields> = {
startTime: 1698040800000,
endTime: 1698042600000,
exerciseType: healthStore.exerciseSequenceHelper.running.EXERCISE_TYPE,
count: 1,
sortOrder: 1,
readOptions: {
withPartialDetails: ['exerciseHeartRate', 'altitude']
}
};
```
```typescript
try {
const runningSequences = await healthStore.readData<healthStore.exerciseSequenceHelper.running.Model>(sequenceReadRequest);
hilog.info(0x0000, 'testTag', 'Succeeded in reading data.');
runningSequences.forEach((runningSequence) => {
hilog.info(0x0000, 'testTag', `the start time is ${runningSequence.startTime}.`);
hilog.info(0x0000, 'testTag', `the end time is ${runningSequence.endTime}.`);
Object.keys(runningSequence.summaries).forEach((key) => {
Object.keys(runningSequence.summaries[key]).forEach((fieldName) => {
hilog.info(0x0000, 'testTag', `the summaries of ${key} field ${fieldName} is ${runningSequence.summaries[key][fieldName]}.`);
});
});
});
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to read data. Code: ${err.code}, message: ${err.message}`);
}
```
删除指定的锻炼记录
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.查询待删除的锻炼记录。
```typescript
// 查询跑步记录
const sequenceReadRequest: healthStore.ExerciseSequenceReadRequest<healthStore.exerciseSequenceHelper.running.DetailFields> = {
startTime: 1698040800000,
endTime: 1698042600000,
exerciseType: healthStore.exerciseSequenceHelper.running.EXERCISE_TYPE
};
const runningSequences = await healthStore.readData<healthStore.exerciseSequenceHelper.running.Model>(sequenceReadRequest);
```
```typescript
try {
for (let index = 0; index < runningSequences.length; index++) {
const runningSequence = runningSequences[index];
await healthStore.deleteData(runningSequence);
}
hilog.info(0x0000, 'testTag', 'Succeeded in deleting data.');
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to delete data. Code: ${err.code}, message: ${err.message}`);
}
```
根据请求删除用户锻炼记录
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.创建删除请求。
```typescript
let exerciseSequenceDeleteRequest: healthStore.ExerciseSequenceDeleteRequest= {
exerciseType: healthStore.exerciseSequenceHelper.running.EXERCISE_TYPE,
startTime: 1698633801000,
endTime: 1698633801000
}
```
```typescript
try {
await healthStore.deleteData(exerciseSequenceDeleteRequest);
hilog.info(0x0000, 'testTag', 'Succeeded in deleting data.');
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to delete data. Code: ${err.code}, message: ${err.message}`);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-healthsequence-manage-V14
爬取时间: 2025-04-29 20:42:21
来源: Huawei Developer
场景介绍
健康记录，记录健康记录的基本信息，包括健康记录的起止时间，数据类型，字段值，明细数据等，支持写入、读取和删除，每条健康记录需要关联数据源。
接口说明
| 接口名 | 描述 |
| --- | --- |
| saveData(healthSequence: HealthSequence[] | HealthSequence): Promise<void> | 保存健康记录，入参为单个HealthSequence或HealthSequence数组。 |
| readData<T extends HealthSequence>(request: HealthSequenceReadRequest): Promise<T[]> | 查询健康记录，通过HealthSequenceReadRequest设置查询条件，可按数据类型，字段、时间范围等条件查询。 |
| deleteData(healthSequence: HealthSequence | HealthSequence[]): Promise<void> | 删除健康记录，按入参删除指定的健康记录，可传入单个HealthSequence或HealthSequence数组。 |
| deleteData(request: HealthSequenceDeleteRequest | HealthSequenceDeleteRequest[]): Promise<void> | 删除健康记录，按HealthSequenceDeleteRequest删除，可设置数据类型、时间范围、数据源等删除条件。 |
接口名
描述
saveData(healthSequence:HealthSequence[] |HealthSequence): Promise<void>
保存健康记录，入参为单个HealthSequence或HealthSequence数组。
readData<T extendsHealthSequence>(request:HealthSequenceReadRequest): Promise<T[]>
查询健康记录，通过HealthSequenceReadRequest设置查询条件，可按数据类型，字段、时间范围等条件查询。
deleteData(healthSequence:HealthSequence|HealthSequence[]): Promise<void>
删除健康记录，按入参删除指定的健康记录，可传入单个HealthSequence或HealthSequence数组。
deleteData(request:HealthSequenceDeleteRequest|HealthSequenceDeleteRequest[]): Promise<void>
删除健康记录，按HealthSequenceDeleteRequest删除，可设置数据类型、时间范围、数据源等删除条件。
开发前检查
开发步骤
保存用户的健康记录
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.获取dataSourceId，参考管理数据源，插入一个新的数据源或读取已有数据源。
3.创建健康记录。
```typescript
let healthSequence: healthStore.healthSequenceHelper.sleepRecord.Model = {
summaries: {
fallAsleepTime: 1695740400000, // 2023-09-26 23:00:00
wakeupTime: 1695769200000, // 2023-09-27 7:00:00
sleepScore: 80,
wakeCount: 2,
sleepType: 1,
shallowDuration: 14400,
deepDuration: 7200,
dreamDuration: 7200,
wakeDuration: 0,
duration: 28800
},
dataType: healthStore.healthSequenceHelper.sleepRecord.DATA_TYPE,
// insertDataSource插入数据源接口返回的dataSourceId，或读取已有数据源的dataSourceId
dataSourceId: 'xxx',
localDate: '09/26/2023',
startTime: 1695740400000,
endTime: 1695769200000,
timeZone: '+0800',
modifiedTime: 1695769200000,
details: {
sleepSegment: [
{
startTime: 1695740400000, // 2023-09-26 23:00:00
endTime: 1695747600000, // 2023-09-27 01:00:00
sleepStatus: 2
},
{
startTime: 1695747600000, // 2023-09-27 01:00:00
endTime: 1695754800000, // 2023-09-27 03:00:00
sleepStatus: 1
},
{
startTime: 1695754800000, // 2023-09-27 03:00:00
endTime: 1695762000000, // 2023-09-27 05:00:00
sleepStatus: 3
},
{
startTime: 1695762000000, // 2023-09-27 05:00:00
endTime: 1695769200000, // 2023-09-27 07:00:00
sleepStatus: 2
}
]
}
}
```
```typescript
try {
await healthStore.saveData(healthSequence);
hilog.info(0x0000, 'testTag', 'Succeeded in saving data.');
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to save data. Code: ${err.code}, message: ${err.message}`);
}
```
读取用户的健康记录
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.创建查询健康记录请求。
```typescript
let healthSequenceReadRequest: healthStore.HealthSequenceReadRequest = {
healthSequenceDataType: healthStore.healthSequenceHelper.sleepRecord.DATA_TYPE,
startTime: 1695740400000,
endTime: 1695769200000,
readOptions: {
withDetails: true
}
}
```
```typescript
try {
const healthSequences = await healthStore.readData(healthSequenceReadRequest);
hilog.info(0x0000, 'testTag', 'Succeeded in reading data.');
healthSequences.forEach((healthSequence) => {
hilog.info(0x0000, 'testTag', `the start time is ${healthSequence.startTime}.`);
hilog.info(0x0000, 'testTag', `the end time is ${healthSequence.endTime}.`);
Object.keys(healthSequence.summaries).forEach((key) => {
hilog.info(0x0000, 'testTag', `the summaries of ${key} is ${healthSequence.summaries[key]}.`);
});
});
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to read data. Code: ${err.code}, message: ${err.message}`);
}
```
删除指定的健康记录
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.查询待删除健康记录。
```typescript
let healthSequenceReadRequest: healthStore.HealthSequenceReadRequest = {
healthSequenceDataType: healthStore.healthSequenceHelper.sleepRecord.DATA_TYPE,
startTime: 1695740400000,
endTime: 1695769200000
}
const healthSequences = await healthStore.readData(healthSequenceReadRequest);
```
```typescript
try {
for (let index = 0; index < healthSequences.length; index++) {
const healthSequence = healthSequences[index];
await healthStore.deleteData(healthSequence);
}
hilog.info(0x0000, 'testTag', 'Succeeded in deleting data.');
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to delete data. Code: ${err.code}, message: ${err.message}`);
}
```
根据请求删除用户健康记录
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthStore } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.创建删除健康记录请求。
```typescript
const healthSequenceDeleteRequest: healthStore.HealthSequenceDeleteRequest= {
healthSequenceDataType: healthStore.healthSequenceHelper.sleepRecord.DATA_TYPE,
startTime: 1695740400000,
endTime: 1695769200000
}
```
```typescript
try {
await healthStore.deleteData(healthSequenceDeleteRequest);
hilog.info(0x0000, 'testTag', 'Succeeded in deleting data.');
} catch (err) {
hilog.error(0x0000, 'testTag', `Failed to delete data. Code: ${err.code}, message: ${err.message}`);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-three-ring-read-V14
爬取时间: 2025-04-29 20:42:34
来源: Huawei Developer
场景介绍
实时三环数据，包括实时步数，活动热量，锻炼时长，活动小时数以及目标类数据。
此接口使用日常活动数据类型读权限，参考权限说明。
接口说明
| 接口名 | 描述 |
| --- | --- |
| readActivityReport(): Promise<ActivityReport> | 读取实时三环数据。 |
接口名
描述
readActivityReport(): Promise<ActivityReport>
读取实时三环数据。
开发前检查
开发步骤
读取实时三环数据
1.导入运动健康服务功能模块及相关公共模块。
```typescript
import { healthService } from '@kit.HealthServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
```typescript
try {
const result: healthService.workout.ActivityReport = await healthService.workout.readActivityReport();
hilog.info(0x0000, 'testTag', 'Succeeded in reading ActivityReport');
Object.keys(result).forEach(key => {
hilog.info(0x0000, 'testTag', `the ${key} is ${result[key]}`);
});
} catch(err) {
hilog.error(0x0000, 'testTag', `Failed to read ActivityReport. Code: ${err.code}, message: ${err.message}`);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-data-type-V14
爬取时间: 2025-04-29 20:42:48
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-data-type-summary-V14
爬取时间: 2025-04-29 20:43:01
来源: Huawei Developer
运动健康服务提供了一系列运动和健康数据类型，主要分三组：
采样数据
运动健康服务提供了一组公共的采样数据类型，包括：
锻炼记录数据
用户一段持续时间的锻炼记录数据，由运动类型、数据源信息、起止时间、关联的统计数据、关联的详情数据等组成，如跑步、骑行等锻炼记录。
锻炼记录数据总体介绍以及每个运动类型的详细介绍请参见锻炼记录数据。
健康记录数据
用户一段持续时间的健康测量记录数据，由健康记录类型、数据源信息、起止时间、关联的统计数据、关联的详情数据等组成，如睡眠记录。
健康记录数据总体介绍以及每个健康记录类型的详细介绍请参见健康记录数据。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-permission-description-V14
爬取时间: 2025-04-29 20:43:15
来源: Huawei Developer
运动健康数据读写需要相应的权限，权限申请参考申请运动健康服务，数据类型对应权限如下：
| 数据类型 | Harmony SDK类型常量 | 读权限 | 写权限 |
| --- | --- | --- | --- |
| 日常活动 | samplePointHelper.dailyActivities.DATA_TYPE | 日常活动数据（读） | 日常活动数据（写） |
| 动态心率 | samplePointHelper.heartRate.DATA_TYPE | 心率数据（读） | 心率数据（写） |
| 静息心率 | samplePointHelper.restingHeartRate.DATA_TYPE | 心率数据（读） | 心率数据（写） |
| 血氧 | samplePointHelper.bloodOxygenSaturation.DATA_TYPE | 血氧数据（读） | 血氧数据（写） |
| 压力 | samplePointHelper.stress.DATA_TYPE | 压力数据（读） | 压力数据（写） |
| 体温 | samplePointHelper.bodyTemperature.DATA_TYPE | 体温数据（读） | 体温数据（写） |
| 皮肤体温 | samplePointHelper.skinTemperature.DATA_TYPE | 体温数据（读） | 体温数据（写） |
| 血压 | samplePointHelper.bloodPressure.DATA_TYPE | 血压数据（读） | 血压数据（写） |
| 身高 | samplePointHelper.height.DATA_TYPE | 体脂数据（读） | 体脂数据（写） |
| 体重 | samplePointHelper.weight.DATA_TYPE | 体脂数据（读） | 体脂数据（写） |
| 睡眠  | healthSequenceHelper.sleepRecord.DATA_TYPE | 睡眠数据（读） | 睡眠数据（写） |
| healthSequenceHelper.sleepNapRecord.DATA_TYPE |
| 锻炼记录 | exerciseSequenceHelper.DATA_TYPE | 锻炼记录概要（读） 锻炼记录详情数据（读） 锻炼记录位置详情数据（读） | 锻炼记录概要（写） 锻炼记录详情数据（写） 锻炼记录位置详情数据（写） |
数据类型
Harmony SDK类型常量
读权限
写权限
日常活动
samplePointHelper.dailyActivities.DATA_TYPE
日常活动数据（读）
日常活动数据（写）
动态心率
samplePointHelper.heartRate.DATA_TYPE
心率数据（读）
心率数据（写）
静息心率
samplePointHelper.restingHeartRate.DATA_TYPE
心率数据（读）
心率数据（写）
血氧
samplePointHelper.bloodOxygenSaturation.DATA_TYPE
血氧数据（读）
血氧数据（写）
压力
samplePointHelper.stress.DATA_TYPE
压力数据（读）
压力数据（写）
体温
samplePointHelper.bodyTemperature.DATA_TYPE
体温数据（读）
体温数据（写）
皮肤体温
samplePointHelper.skinTemperature.DATA_TYPE
体温数据（读）
体温数据（写）
血压
samplePointHelper.bloodPressure.DATA_TYPE
血压数据（读）
血压数据（写）
身高
samplePointHelper.height.DATA_TYPE
体脂数据（读）
体脂数据（写）
体重
samplePointHelper.weight.DATA_TYPE
体脂数据（读）
体脂数据（写）
睡眠
healthSequenceHelper.sleepRecord.DATA_TYPE
睡眠数据（读）
睡眠数据（写）
healthSequenceHelper.sleepNapRecord.DATA_TYPE
锻炼记录
exerciseSequenceHelper.DATA_TYPE
锻炼记录概要（读）
锻炼记录详情数据（读）
锻炼记录位置详情数据（读）
锻炼记录概要（写）
锻炼记录详情数据（写）
锻炼记录位置详情数据（写）

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-samplepoint-V14
爬取时间: 2025-04-29 20:43:29
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-daily-activities-V14
爬取时间: 2025-04-29 20:43:43
来源: Huawei Developer
此数据记录用户在一小段时间内的日常活动数据。
采样明细数据
明细字段说明
| 字段列表 | 描述 | 类型 | 可选/必选 | 单位 | 取值范围 |
| --- | --- | --- | --- | --- | --- |
| step | 步数 | number | M | 步 | [0, 500) |
| calorie | 热量 | number | M | 卡 | [0, 65536) |
| distance | 距离 | number | M | 米 | [0, ∞) |
| duration | 时长 | number | O | 分钟 | 0 或 1 |
| status | 状态（走、跑、骑、爬等） | number | O | - | 2： 登山 3： 骑行 4： 跑步 5：走路 9：游泳 10：健身 13：站立 |
| isIntensity | 是否中高强度 | number | O | - | 0：否 1：是 |
| climbHighAltitude | 爬高海拔差（支持正负） | number | O | 米 | - |
| isStand | 是否站立（一个小时有活动记录，就标志这个小时的第一分钟为1） | number | O | - | 0：否 1：是 |
字段列表
描述
类型
可选/必选
单位
取值范围
step
步数
number
M
步
[0, 500)
calorie
热量
number
M
卡
[0, 65536)
distance
距离
number
M
米
[0, ∞)
duration
时长
number
O
分钟
0 或 1
status
状态（走、跑、骑、爬等）
number
O
-
2： 登山
3： 骑行
4： 跑步
5：走路
9：游泳
10：健身
13：站立
isIntensity
是否中高强度
number
O
-
0：否
1：是
climbHighAltitude
爬高海拔差（支持正负）
number
O
米
-
isStand
是否站立（一个小时有活动记录，就标志这个小时的第一分钟为1）
number
O
-
0：否
1：是
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.readData | 10分钟级 | 手机、手表、手环等 |
开放API
查询及时性
数据源
healthStore.readData
10分钟级
手机、手表、手环等
采样统计数据
聚合统计策略说明
| 字段列表 | 描述 | 聚合策略 | 类型 | 单位 |
| --- | --- | --- | --- | --- |
| step | 步数 | sum | number | 步 |
| calorie | 热量 | sum | number | 卡 |
| distance | 距离 | sum | number | 米 |
| isIntensity | 是否中高强度（按天聚合对应运动健康App三环数据中锻炼时长） | sum | number | - |
| climbHighAltitude | 爬高海拔差（支持正负） | sum | number | 米 |
| isStand | 是否站立（一个小时有活动记录，就标志这个小时的第一分钟为1，按天聚合对应运动健康App三环数据中活动小时数） | sum | number | - |
字段列表
描述
聚合策略
类型
单位
step
步数
sum
number
步
calorie
热量
sum
number
卡
distance
距离
sum
number
米
isIntensity
是否中高强度（按天聚合对应运动健康App三环数据中锻炼时长）
sum
number
-
climbHighAltitude
爬高海拔差（支持正负）
sum
number
米
isStand
是否站立（一个小时有活动记录，就标志这个小时的第一分钟为1，按天聚合对应运动健康App三环数据中活动小时数）
sum
number
-
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.aggregateData | 10分钟级 | 手机、手表、手环等 |
开放API
查询及时性
数据源
healthStore.aggregateData
10分钟级
手机、手表、手环等

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-heart-rate-V14
爬取时间: 2025-04-29 20:43:57
来源: Huawei Developer
动态心率
此数据记录用户在一段时间内的动态心率。
采样明细数据
明细字段说明
字段定义：samplePointHelper.heartRate.Fields
| 字段列表 | 描述 | 类型 | 可选/必选 | 单位 | 取值范围 |
| --- | --- | --- | --- | --- | --- |
| bpm | 心率 | number | M | 次/分钟 | [0, ∞) |
字段列表
描述
类型
可选/必选
单位
取值范围
bpm
心率
number
M
次/分钟
[0, ∞)
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.readData | 小时级 | 手表、手环等 |
开放API
查询及时性
数据源
healthStore.readData
小时级
手表、手环等
采样统计数据
聚合统计策略说明
| 字段列表 | 描述 | 聚合策略 | 类型 | 单位 |
| --- | --- | --- | --- | --- |
| bpm | 心率 | max | min | last | number | 次/分钟 |
字段列表
描述
聚合策略
类型
单位
bpm
心率
max | min | last
number
次/分钟
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.aggregateData | 小时级 | 手表、手环等 |
开放API
查询及时性
数据源
healthStore.aggregateData
小时级
手表、手环等
静息心率
此数据记录用户一天中在静止且清醒状态下静息心率值。
Harmony SDK类型常量：samplePointHelper.restingHeartRate.DATA_TYPE
采样明细数据
明细字段说明
字段定义：samplePointHelper.restingHeartRate.Fields
| 字段列表 | 描述 | 类型 | 可选/必选 | 单位 | 取值范围 |
| --- | --- | --- | --- | --- | --- |
| restBpm | 静息心率 | number | M | 次/分钟 | [0, ∞) |
字段列表
描述
类型
可选/必选
单位
取值范围
restBpm
静息心率
number
M
次/分钟
[0, ∞)
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.readData | 小时级 | 手表、手环等 |
开放API
查询及时性
数据源
healthStore.readData
小时级
手表、手环等
采样统计数据
聚合统计策略说明
字段定义：samplePointHelper.restingHeartRate.AggregateFields
| 字段列表 | 描述 | 聚合策略 | 类型 | 单位 |
| --- | --- | --- | --- | --- |
| restBpm | 静息心率 | last | number | 次/分钟 |
字段列表
描述
聚合策略
类型
单位
restBpm
静息心率
last
number
次/分钟
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.aggregateData | 小时级 | 手表、手环等 |
开放API
查询及时性
数据源
healthStore.aggregateData
小时级
手表、手环等

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-blood-oxygen-V14
爬取时间: 2025-04-29 20:44:10
来源: Huawei Developer
此数据记录用户在某时刻的血氧，每一条数据都代表该时刻的血氧值。每条数据不能存在交叉，后一条数据的开始时间应该大于或等于前一条数据的结束时间。
采样明细数据
明细字段说明
| 字段列表 | 描述 | 类型 | 可选/必选 | 单位 | 取值范围 |
| --- | --- | --- | --- | --- | --- |
| spo2 | 血氧饱和度 | number | M | 百分比 | (0, 100] |
字段列表
描述
类型
可选/必选
单位
取值范围
spo2
血氧饱和度
number
M
百分比
(0, 100]
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.readData | 小时级 | 部分手表、手环等 |
开放API
查询及时性
数据源
healthStore.readData
小时级
部分手表、手环等
采样统计数据
聚合统计策略说明
字段定义：samplePointHelper.bloodOxygenSaturation.AggregateFields
| 字段列表 | 描述 | 聚合策略 | 类型 | 单位 |
| --- | --- | --- | --- | --- |
| spo2 | 血氧饱和度 | avg | max | min | last | number | 百分比 |
字段列表
描述
聚合策略
类型
单位
spo2
血氧饱和度
avg | max | min | last
number
百分比
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.aggregateData | 小时级 | 部分手表、手环等 |
开放API
查询及时性
数据源
healthStore.aggregateData
小时级
部分手表、手环等

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-pressure-V14
爬取时间: 2025-04-29 20:44:24
来源: Huawei Developer
此数据记录用户在某一刻的压力数据，每一条数据都代表该时刻的压力状态。
采样明细数据
明细字段说明
| 字段列表 | 描述 | 类型 | 可选/必选 | 单位 | 取值范围 |
| --- | --- | --- | --- | --- | --- |
| stressScore | 压力得分 | number | M | - | [1, 99] |
字段列表
描述
类型
可选/必选
单位
取值范围
stressScore
压力得分
number
M
-
[1, 99]
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.readData | 小时级 | 手表、手环等 |
开放API
查询及时性
数据源
healthStore.readData
小时级
手表、手环等
采样统计数据
聚合统计策略说明
| 字段列表 | 描述 | 聚合策略 | 类型 | 单位 |
| --- | --- | --- | --- | --- |
| stressScore | 压力得分 | avg | max | min | last | count | number | - |
字段列表
描述
聚合策略
类型
单位
stressScore
压力得分
avg | max | min | last | count
number
-
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.aggregateData | 小时级 | 手表、手环等 |
开放API
查询及时性
数据源
healthStore.aggregateData
小时级
手表、手环等

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-body-temperature-V14
爬取时间: 2025-04-29 20:44:38
来源: Huawei Developer
体温
此数据记录用户在一小段时间内的体温数据。
Harmony SDK类型常量：samplePointHelper.bodyTemperature.DATA_TYPE
采样明细数据
明细字段说明
| 字段列表 | 描述 | 类型 | 可选/必选 | 单位 | 取值范围 |
| --- | --- | --- | --- | --- | --- |
| bodyTemperature | 体温 | number | M | 摄氏度 | [34, 42] |
字段列表
描述
类型
可选/必选
单位
取值范围
bodyTemperature
体温
number
M
摄氏度
[34, 42]
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.readData | 分钟级 | 部分手表支持 |
开放API
查询及时性
数据源
healthStore.readData
分钟级
部分手表支持
采样统计数据
聚合统计策略说明
字段定义：samplePointHelper.bodyTemperature.AggregateFields
| 字段列表 | 描述 | 聚合策略 | 类型 | 单位 |
| --- | --- | --- | --- | --- |
| bodyTemperature | 体温 | avg | max | min | count | number | 摄氏度 |
字段列表
描述
聚合策略
类型
单位
bodyTemperature
体温
avg | max | min | count
number
摄氏度
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.aggregateData | 分钟级 | 部分手表支持 |
开放API
查询及时性
数据源
healthStore.aggregateData
分钟级
部分手表支持
皮肤体温
此数据记录用户在一小段时间内的皮肤温度数据。
采样明细数据
明细字段说明
| 字段列表 | 描述 | 类型 | 可选/必选 | 单位 | 取值范围 |
| --- | --- | --- | --- | --- | --- |
| skinTemperature | 皮肤温度 | number | M | 摄氏度 | [20, 42] |
字段列表
描述
类型
可选/必选
单位
取值范围
skinTemperature
皮肤温度
number
M
摄氏度
[20, 42]
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.readData | 分钟级 | 部分手表支持 |
开放API
查询及时性
数据源
healthStore.readData
分钟级
部分手表支持
采样统计数据
聚合统计策略说明
字段定义：samplePointHelper.skinTemperature.AggregateFields
| 字段列表 | 描述 | 聚合策略 | 类型 | 单位 |
| --- | --- | --- | --- | --- |
| skinTemperature | 皮肤温度 | avg | max | min | count | number | 摄氏度 |
字段列表
描述
聚合策略
类型
单位
skinTemperature
皮肤温度
avg | max | min | count
number
摄氏度
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.aggregateData | 分钟级 | 部分手表支持 |
开放API
查询及时性
数据源
healthStore.aggregateData
分钟级
部分手表支持

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-blood-pressure-V14
爬取时间: 2025-04-29 20:44:52
来源: Huawei Developer
此数据记录用户在某时刻的血压数据。
Harmony SDK类型常量：samplePointHelper.bloodPressure.DATA_TYPE
采样明细数据
明细字段说明
字段定义：samplePointHelper.bloodPressure.Fields
| 字段列表 | 描述 | 类型 | 可选/必选 | 单位 | 取值范围 |
| --- | --- | --- | --- | --- | --- |
| bloodPressureSystolic | 收缩压，即高压 | number | M | mmHg | (0, ∞) |
| bloodPressureDiastolic | 舒张压，即低压 | number | M | mmHg | (0, ∞) |
| sphygmus | 脉搏 | number | O | 次/分钟 | (0, ∞) |
| measurementAnomalyFlag | 测量异常事件 | number | O | - | (0, ∞) 取值参考如下： 1：正常 2：测量时未和心脏平齐 3：测量时有轻微抖动 4：测量前没有至少5min休息 |
| beforeMeasureActivity | 测量前活动 | number | O | - | (0, ∞) 取值参考如下： 1：剧烈运动 2：吸烟 3：进食 4：饮酒 5：喝咖啡 6：无活动 7：起床后 8：睡前 100：自定义 |
字段列表
描述
类型
可选/必选
单位
取值范围
bloodPressureSystolic
收缩压，即高压
number
M
mmHg
(0, ∞)
bloodPressureDiastolic
舒张压，即低压
number
M
mmHg
(0, ∞)
sphygmus
脉搏
number
O
次/分钟
(0, ∞)
measurementAnomalyFlag
测量异常事件
number
O
-
(0, ∞)
取值参考如下：
1：正常
2：测量时未和心脏平齐
3：测量时有轻微抖动
4：测量前没有至少5min休息
beforeMeasureActivity
测量前活动
number
O
-
(0, ∞)
取值参考如下：
1：剧烈运动
2：吸烟
3：进食
4：饮酒
5：喝咖啡
6：无活动
7：起床后
8：睡前
100：自定义
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.readData | 分钟级 | 血压计、血压表等 |
开放API
查询及时性
数据源
healthStore.readData
分钟级
血压计、血压表等

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-weight-V14
爬取时间: 2025-04-29 20:45:05
来源: Huawei Developer
此数据记录用户在某时刻的体重数据。
Harmony SDK类型常量：samplePointHelper.weight.DATA_TYPE
采样明细数据
明细字段说明
字段定义：samplePointHelper.weight.Fields
| 字段列表 | 描述 | 类型 | 可选/必选 | 单位 | 取值范围 |
| --- | --- | --- | --- | --- | --- |
| bodyWeight | 体重 | number | M | 千克 | [0.1, 500] |
| bmi | 身体质量指数 | number | O | 千克/平方米 | [1, 200] |
| bodyFat | 体脂量 | number | O | 千克 | [0, 500] |
| bodyFatRate | 体脂率 | number | O | 百分比 | [0, 100] |
| muscleMass | 肌肉量 | number | O | 千克 | [0.1, 150] |
| basalMetabolism | 基础代谢 | number | O | 千卡/天 | [0, ∞) |
| moisture | 水分量 | number | O | 千克 | [0, 500] |
| moistureRate | 水分率 | number | O | 百分比 | [0, 100] |
| visceralFatLevel | 内脏脂肪等级 | number | O | - | [1, 59] |
| boneSalt | 骨盐量 | number | O | 千克 | [0.5, 5] |
| proteinRate | 蛋白质率 | number | O | 百分比 | [0, 100] |
| bodyScore | 身体得分 | number | O | 百分比 | [0, 100] |
| bodyAge | 身体年龄 | number | O | - | [5, 99] |
| skeletalMuscleMass | 骨骼肌量 | number | O | 千克 | [1, 150] |
| impedance | 阻抗 | number | O | 欧姆 | [0.1, 100000] |
字段列表
描述
类型
可选/必选
单位
取值范围
bodyWeight
体重
number
M
千克
[0.1, 500]
bmi
身体质量指数
number
O
千克/平方米
[1, 200]
bodyFat
体脂量
number
O
千克
[0, 500]
bodyFatRate
体脂率
number
O
百分比
[0, 100]
muscleMass
肌肉量
number
O
千克
[0.1, 150]
basalMetabolism
基础代谢
number
O
千卡/天
[0, ∞)
moisture
水分量
number
O
千克
[0, 500]
moistureRate
水分率
number
O
百分比
[0, 100]
visceralFatLevel
内脏脂肪等级
number
O
-
[1, 59]
boneSalt
骨盐量
number
O
千克
[0.5, 5]
proteinRate
蛋白质率
number
O
百分比
[0, 100]
bodyScore
身体得分
number
O
百分比
[0, 100]
bodyAge
身体年龄
number
O
-
[5, 99]
skeletalMuscleMass
骨骼肌量
number
O
千克
[1, 150]
impedance
阻抗
number
O
欧姆
[0.1, 100000]
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.readData | 分钟级 | 华为体脂称和三方体脂称（生态设备） |
开放API
查询及时性
数据源
healthStore.readData
分钟级
华为体脂称和三方体脂称（生态设备）

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-height-V14
爬取时间: 2025-04-29 20:45:19
来源: Huawei Developer
此数据记录用户在某时刻的身高数据。
Harmony SDK类型常量：samplePointHelper.height.DATA_TYPE
采样明细数据
明细字段说明
字段定义：samplePointHelper.height.Fields
| 字段列表 | 描述 | 类型 | 可选/必选 | 单位 | 取值范围 |
| --- | --- | --- | --- | --- | --- |
| height | 身高 | number | M | 厘米 | - |
字段列表
描述
类型
可选/必选
单位
取值范围
height
身高
number
M
厘米
-
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.readData | 小时级 | 运动健康App个人信息 |
开放API
查询及时性
数据源
healthStore.readData
小时级
运动健康App个人信息

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-exercisesequence-V14
爬取时间: 2025-04-29 20:45:33
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-exercisesequence-summary-V14
爬取时间: 2025-04-29 20:45:47
来源: Huawei Developer
用户一段持续时间的锻炼记录数据，由运动类型、应用信息、时间范围、关联的详情数据、关联的统计数据等组成，如跑步、跳绳等锻炼记录。
开发者可以通过锻炼记录数据查询接口获取华为运动健康App“运动记录”卡片中的数据。
锻炼记录数据模型组成参考ExerciseSequence。
锻炼记录类型常量：exerciseSequenceHelper.DATA_TYPE
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.readData | 分钟级 | 手机、手表、手环等 |
开放API
查询及时性
数据源
healthStore.readData
分钟级
手机、手表、手环等

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-running-V14
爬取时间: 2025-04-29 20:46:01
来源: Huawei Developer
跑步相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.running.EXERCISE_TYPE | 户外跑步 | 手机、手表、手环 |
| exerciseSequenceHelper.indoorRunning.EXERCISE_TYPE | 室内跑步/跑步机 | 手机、手表、手环 |
| exerciseSequenceHelper.trailRunning.EXERCISE_TYPE | 越野跑 | 手机、手表、手环 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.running.EXERCISE_TYPE
户外跑步
手机、手表、手环
exerciseSequenceHelper.indoorRunning.EXERCISE_TYPE
室内跑步/跑步机
手机、手表、手环
exerciseSequenceHelper.trailRunning.EXERCISE_TYPE
越野跑
手机、手表、手环
关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| distance | 距离统计 | DistanceSummary | M |
| calorie | 热量统计 | CalorieSummary | M |
| speed | 速度统计 | SpeedSummary | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
| step | 步数统计 | StepSummary | O |
| cadence | 步频统计 | CadenceSummary | O |
| altitude | 海拔统计 | AltitudeSummary | O |
| location | 位置统计 | LocationSummary | O |
| runningForm | 跑姿统计 | RunningFormSummary | O |
| runningFeature | 跑步特征数据 | RunningFeature | O |
字段列表
描述
类型
可选/必选
distance
距离统计
DistanceSummary
M
calorie
热量统计
CalorieSummary
M
speed
速度统计
SpeedSummary
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
step
步数统计
StepSummary
O
cadence
步频统计
CadenceSummary
O
altitude
海拔统计
AltitudeSummary
O
location
位置统计
LocationSummary
O
runningForm
跑姿统计
RunningFormSummary
O
runningFeature
跑步特征数据
RunningFeature
O
关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| speed | 速度详情 | Speed[] | O |
| cadence | 步频详情 | Cadence[] | O |
| runningForm | 跑姿详情 | RunningForm[] | O |
| location | 位置详情 | Location[] | O |
| altitude | 海拔详情 | Altitude[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
speed
速度详情
Speed[]
O
cadence
步频详情
Cadence[]
O
runningForm
跑姿详情
RunningForm[]
O
location
位置详情
Location[]
O
altitude
海拔详情
Altitude[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-walking-V14
爬取时间: 2025-04-29 20:46:14
来源: Huawei Developer
健走相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.walking.EXERCISE_TYPE | 户外步行 | 手机、手表、手环 |
| exerciseSequenceHelper.indoorWalking.EXERCISE_TYPE | 室内步行 | 漫步机 |
| exerciseSequenceHelper.hiking.EXERCISE_TYPE | 徒步/远足 | 手机、手表、手环 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.walking.EXERCISE_TYPE
户外步行
手机、手表、手环
exerciseSequenceHelper.indoorWalking.EXERCISE_TYPE
室内步行
漫步机
exerciseSequenceHelper.hiking.EXERCISE_TYPE
徒步/远足
手机、手表、手环
关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| distance | 距离统计 | DistanceSummary | M |
| calorie | 热量统计 | CalorieSummary | M |
| speed | 速度统计 | SpeedSummary | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
| step | 步数统计 | StepSummary | O |
| cadence | 步频统计 | CadenceSummary | O |
| altitude | 海拔统计 | AltitudeSummary | O |
| location | 位置统计 | LocationSummary | O |
字段列表
描述
类型
可选/必选
distance
距离统计
DistanceSummary
M
calorie
热量统计
CalorieSummary
M
speed
速度统计
SpeedSummary
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
step
步数统计
StepSummary
O
cadence
步频统计
CadenceSummary
O
altitude
海拔统计
AltitudeSummary
O
location
位置统计
LocationSummary
O
关联的详情数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| speed | 速度详情 | Speed[] | O |
| cadence | 步频详情 | Cadence[] | O |
| location | 位置详情 | Location[] | O |
| altitude | 海拔详情 | Altitude[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
speed
速度详情
Speed[]
O
cadence
步频详情
Cadence[]
O
location
位置详情
Location[]
O
altitude
海拔详情
Altitude[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-cycling-V14
爬取时间: 2025-04-29 20:46:28
来源: Huawei Developer
骑行相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.cycling.EXERCISE_TYPE | 户外骑行 | 手机、手表、手环 |
| exerciseSequenceHelper.indoorCycling.EXERCISE_TYPE | 室内单车 | 室内自行车、室内骑行台 |
| exerciseSequenceHelper.spinning.EXERCISE_TYPE | 动感单车 | 动感单车 |
| exerciseSequenceHelper.bmx.EXERCISE_TYPE | BMX自行车 | 越野自行车 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.cycling.EXERCISE_TYPE
户外骑行
手机、手表、手环
exerciseSequenceHelper.indoorCycling.EXERCISE_TYPE
室内单车
室内自行车、室内骑行台
exerciseSequenceHelper.spinning.EXERCISE_TYPE
动感单车
动感单车
exerciseSequenceHelper.bmx.EXERCISE_TYPE
BMX自行车
越野自行车
关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| distance | 距离统计 | DistanceSummary | M |
| calorie | 热量统计 | CalorieSummary | M |
| speed | 速度统计 | SpeedSummary | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
| resistance | 阻力统计 | ResistanceSummary | O |
| pedalingCadence | 踏频统计 | PedalingCadenceSummary | O |
| power | 功率统计 | PowerSummary | O |
| altitude | 海拔统计 | AltitudeSummary | O |
| location | 位置统计 | LocationSummary | O |
字段列表
描述
类型
可选/必选
distance
距离统计
DistanceSummary
M
calorie
热量统计
CalorieSummary
M
speed
速度统计
SpeedSummary
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
resistance
阻力统计
ResistanceSummary
O
pedalingCadence
踏频统计
PedalingCadenceSummary
O
power
功率统计
PowerSummary
O
altitude
海拔统计
AltitudeSummary
O
location
位置统计
LocationSummary
O
关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| speed | 速度详情 | Speed[] | O |
| pedalingCadence | 踏频详情 | PedalingCadence[] | O |
| power | 功率详情 | Power[] | O |
| location | 位置详情 | Location[] | O |
| altitude | 海拔详情 | Altitude[] | O |
| resistance | 阻力详情 | Resistance[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
speed
速度详情
Speed[]
O
pedalingCadence
踏频详情
PedalingCadence[]
O
power
功率详情
Power[]
O
location
位置详情
Location[]
O
altitude
海拔详情
Altitude[]
O
resistance
阻力详情
Resistance[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-jumping-rope-V14
爬取时间: 2025-04-29 20:46:42
来源: Huawei Developer
跳绳相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.jumpingRope.EXERCISE_TYPE | 跳绳 | AI跳绳、智能跳绳设备 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.jumpingRope.EXERCISE_TYPE
跳绳
AI跳绳、智能跳绳设备
关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| jumpingRopeFeature | 跳绳特征数据 | JumpingRopeFeature | M |
| calorie | 热量统计 | CalorieSummary | M |
| skipSpeed | 跳跃速度统计 | SkipSpeedSummary | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
字段列表
描述
类型
可选/必选
jumpingRopeFeature
跳绳特征数据
JumpingRopeFeature
M
calorie
热量统计
CalorieSummary
M
skipSpeed
跳跃速度统计
SkipSpeedSummary
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| skipSpeed | 跳跃速度详情 | SkipSpeed[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
skipSpeed
跳跃速度详情
SkipSpeed[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-adventures-V14
爬取时间: 2025-04-29 20:46:55
来源: Huawei Developer
户外探险相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.adventures.EXERCISE_TYPE | 户外探险 | 部分专业手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.adventures.EXERCISE_TYPE
户外探险
部分专业手表
关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| calorie | 热量统计 | CalorieSummary | M |
| distance | 距离统计 | DistanceSummary | M |
| step | 步数统计 | StepSummary | O |
| cadence | 步频统计 | CadenceSummary | O |
| altitude | 海拔统计 | AltitudeSummary | O |
字段列表
描述
类型
可选/必选
calorie
热量统计
CalorieSummary
M
distance
距离统计
DistanceSummary
M
step
步数统计
StepSummary
O
cadence
步频统计
CadenceSummary
O
altitude
海拔统计
AltitudeSummary
O
关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| markPoint | 标记点采样详情 | MarkPoint[] | O |
| altitude | 海拔详情 | Altitude[] | O |
字段列表
描述
类型
可选/必选
markPoint
标记点采样详情
MarkPoint[]
O
altitude
海拔详情
Altitude[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-basketball-V14
爬取时间: 2025-04-29 20:47:09
来源: Huawei Developer
篮球相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.basketball.EXERCISE_TYPE | 篮球 | 篮球精灵手环 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.basketball.EXERCISE_TYPE
篮球
篮球精灵手环
关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| basketballFeature | 篮球特征数据 | BasketballFeature | M |
| calorie | 热量统计 | CalorieSummary | M |
| jump | 跳跃统计 | JumpSummary | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
字段列表
描述
类型
可选/必选
basketballFeature
篮球特征数据
BasketballFeature
M
calorie
热量统计
CalorieSummary
M
jump
跳跃统计
JumpSummary
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| jump | 跳跃详情 | Jump[] | O |
| speed | 速度详情 | Speed[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
jump
跳跃详情
Jump[]
O
speed
速度详情
Speed[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-skiing-V14
爬取时间: 2025-04-29 20:47:23
来源: Huawei Developer
冬季两项
冬季两项相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.biathlon.EXERCISE_TYPE | 冬季两项 | 手环、手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.biathlon.EXERCISE_TYPE
冬季两项
手环、手表
冬季两项关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| calorie | 热量统计 | CalorieSummary | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
字段列表
描述
类型
可选/必选
calorie
热量统计
CalorieSummary
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
冬季两项关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| speed | 速度详情 | Speed[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
speed
速度详情
Speed[]
O
滑雪
滑雪相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.skiing.EXERCISE_TYPE | 滑雪 | 手环、手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.skiing.EXERCISE_TYPE
滑雪
手环、手表
滑雪关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| distance | 距离统计 | DistanceSummary | M |
| calorie | 热量统计 | CalorieSummary | M |
| skiingFeature | 滑雪特征数据 | SkiingFeature | M |
| altitude | 海拔统计 | AltitudeSummary | O |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
字段列表
描述
类型
可选/必选
distance
距离统计
DistanceSummary
M
calorie
热量统计
CalorieSummary
M
skiingFeature
滑雪特征数据
SkiingFeature
M
altitude
海拔统计
AltitudeSummary
O
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
滑雪关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| speed | 速度详情 | Speed[] | O |
| location | 位置详情 | Location[] | O |
| altitude | 海拔详情 | Altitude[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
speed
速度详情
Speed[]
O
location
位置详情
Location[]
O
altitude
海拔详情
Altitude[]
O
单板滑雪
单板滑雪相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.snowboarding.EXERCISE_TYPE | 单板滑雪 | 手环、手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.snowboarding.EXERCISE_TYPE
单板滑雪
手环、手表
单板滑雪关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| distance | 距离统计 | DistanceSummary | M |
| calorie | 热量统计 | CalorieSummary | M |
| snowboardingFeature | 单板滑雪特征数据 | SnowboardingFeature | M |
| altitude | 海拔统计 | AltitudeSummary | O |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
字段列表
描述
类型
可选/必选
distance
距离统计
DistanceSummary
M
calorie
热量统计
CalorieSummary
M
snowboardingFeature
单板滑雪特征数据
SnowboardingFeature
M
altitude
海拔统计
AltitudeSummary
O
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
单板滑雪关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| speed | 速度详情 | Speed[] | O |
| location | 位置详情 | Location[] | O |
| altitude | 海拔详情 | Altitude[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
speed
速度详情
Speed[]
O
location
位置详情
Location[]
O
altitude
海拔详情
Altitude[]
O
滑雪橇
滑雪橇相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.sled.EXERCISE_TYPE | 滑雪橇 | 手环、手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.sled.EXERCISE_TYPE
滑雪橇
手环、手表
滑雪橇关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| calorie | 热量统计 | CalorieSummary | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
字段列表
描述
类型
可选/必选
calorie
热量统计
CalorieSummary
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
滑雪橇关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| speed | 速度详情 | Speed[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
speed
速度详情
Speed[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-breath-holding-test-V14
爬取时间: 2025-04-29 20:47:37
来源: Huawei Developer
潜水闭气测试相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.breathHoldingTest.EXERCISE_TYPE | 潜水闭气测试 | 部分专业手表、手环 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.breathHoldingTest.EXERCISE_TYPE
潜水闭气测试
部分专业手表、手环
关联的统计数据说明
字段定义：exerciseSequenceHelper.breathHoldingTest.SummaryFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| breathHoldingTestFeature | 潜水闭气测试特征数据 | BreathHoldingTestFeature | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
字段列表
描述
类型
可选/必选
breathHoldingTestFeature
潜水闭气测试特征数据
BreathHoldingTestFeature
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
关联的明细数据说明
字段定义：exerciseSequenceHelper.breathHoldingTest.DetailFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-breath-holding-train-V14
爬取时间: 2025-04-29 20:47:51
来源: Huawei Developer
潜水闭气训练相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.breathHoldingTrain.EXERCISE_TYPE | 潜水闭气训练 | 部分专业手表、手环 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.breathHoldingTrain.EXERCISE_TYPE
潜水闭气训练
部分专业手表、手环
关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| breathHoldingTrainFeature | 潜水闭气训练特征数据 | BreathHoldingTrainFeature | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
字段列表
描述
类型
可选/必选
breathHoldingTrainFeature
潜水闭气训练特征数据
BreathHoldingTrainFeature
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-diving-V14
爬取时间: 2025-04-29 20:48:05
来源: Huawei Developer
自由潜水
自由潜水相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.diving.EXERCISE_TYPE | 自由潜水 | 部分专业手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.diving.EXERCISE_TYPE
自由潜水
部分专业手表
自由潜水关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| divingFeature | 自由潜水特征数据 | DivingFeature | M |
| location | 位置统计 | LocationSummary | O |
| divingDepth | 潜水深度统计 | DivingDepthSummary | O |
| waterTemperature | 水温统计 | WaterTemperatureSummary | O |
字段列表
描述
类型
可选/必选
divingFeature
自由潜水特征数据
DivingFeature
M
location
位置统计
LocationSummary
O
divingDepth
潜水深度统计
DivingDepthSummary
O
waterTemperature
水温统计
WaterTemperatureSummary
O
自由潜水关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| divingDepth | 潜水深度详情 | DivingDepth[] | O |
| waterTemperature | 水温详情 | WaterTemperature[] | O |
字段列表
描述
类型
可选/必选
divingDepth
潜水深度详情
DivingDepth[]
O
waterTemperature
水温详情
WaterTemperature[]
O
水肺潜水
水肺潜水相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.scubaDiving.EXERCISE_TYPE | 水肺潜水 | 部分专业手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.scubaDiving.EXERCISE_TYPE
水肺潜水
部分专业手表
水肺潜水关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| scubaDivingFeature | 水肺潜水特征数据 | ScubaDivingFeature | M |
| location | 位置统计 | LocationSummary | O |
| divingDepth | 潜水深度统计 | DivingDepthSummary | O |
| waterTemperature | 水温统计 | WaterTemperatureSummary | O |
字段列表
描述
类型
可选/必选
scubaDivingFeature
水肺潜水特征数据
ScubaDivingFeature
M
location
位置统计
LocationSummary
O
divingDepth
潜水深度统计
DivingDepthSummary
O
waterTemperature
水温统计
WaterTemperatureSummary
O
水肺潜水关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| divingDepth | 潜水深度详情 | DivingDepth[] | O |
| waterTemperature | 水温详情 | WaterTemperature[] | O |
字段列表
描述
类型
可选/必选
divingDepth
潜水深度详情
DivingDepth[]
O
waterTemperature
水温详情
WaterTemperature[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-elliptical-V14
爬取时间: 2025-04-29 20:48:59
来源: Huawei Developer
椭圆机相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.elliptical.EXERCISE_TYPE | 椭圆机 | 手环、手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.elliptical.EXERCISE_TYPE
椭圆机
手环、手表
椭圆机关联的统计数据说明
字段定义：exerciseSequenceHelper.elliptical.SummaryFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| calorie | 热量统计 | CalorieSummary | M |
| distance | 距离统计 | DistanceSummary | O |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
| speed | 速度统计 | SpeedSummary | O |
| step | 步数统计 | StepSummary | O |
| cadence | 步频统计 | CadenceSummary | O |
| resistance | 阻力统计 | ResistanceSummary | O |
| pedalingCadence | 踏频统计 | PedalingCadenceSummary | O |
| power | 功率统计 | PowerSummary | O |
字段列表
描述
类型
可选/必选
calorie
热量统计
CalorieSummary
M
distance
距离统计
DistanceSummary
O
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
speed
速度统计
SpeedSummary
O
step
步数统计
StepSummary
O
cadence
步频统计
CadenceSummary
O
resistance
阻力统计
ResistanceSummary
O
pedalingCadence
踏频统计
PedalingCadenceSummary
O
power
功率统计
PowerSummary
O
关联的明细数据说明
字段定义：exerciseSequenceHelper.elliptical.DetailFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| speed | 速度详情 | Speed[] | O |
| pedalingCadence | 踏频详情 | PedalingCadence[] | O |
| power | 功率详情 | Power[] | O |
| cadence | 步频详情 | Cadence[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
speed
速度详情
Speed[]
O
pedalingCadence
踏频详情
PedalingCadence[]
O
power
功率详情
Power[]
O
cadence
步频详情
Cadence[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-golf-V14
爬取时间: 2025-04-29 20:49:13
来源: Huawei Developer
高尔夫练习场
高尔夫练习场相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.golfPractice.EXERCISE_TYPE | 高尔夫练习场 | 手环、手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.golfPractice.EXERCISE_TYPE
高尔夫练习场
手环、手表
高尔夫练习场关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| golfPracticeFeature | 高尔夫练习场特征数据 | GolfPracticeFeature | M |
| calorie | 热量统计 | CalorieSummary | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
字段列表
描述
类型
可选/必选
golfPracticeFeature
高尔夫练习场特征数据
GolfPracticeFeature
M
calorie
热量统计
CalorieSummary
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
高尔夫练习场关联的明细数据说明
字段定义：exerciseSequenceHelper.golfPractice.DetailFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
高尔夫场地模式
高尔夫场地模式相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.golfCourseModel.EXERCISE_TYPE | 高尔夫场地模式 | 手环、手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.golfCourseModel.EXERCISE_TYPE
高尔夫场地模式
手环、手表
高尔夫场地模式关联的统计数据说明
字段定义：exerciseSequenceHelper.golfCourseModel.SummaryFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| golfCourseModelFeature | 高尔夫场地模式特征数据 | GolfCourseModelFeature | M |
| calorie | 热量统计 | CalorieSummary | M |
| step | 步数统计 | StepSummary | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
| distance | 距离统计 | DistanceSummary | O |
| cadence | 步频统计 | CadenceSummary | O |
| altitude | 海拔统计 | AltitudeSummary | O |
字段列表
描述
类型
可选/必选
golfCourseModelFeature
高尔夫场地模式特征数据
GolfCourseModelFeature
M
calorie
热量统计
CalorieSummary
M
step
步数统计
StepSummary
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
distance
距离统计
DistanceSummary
O
cadence
步频统计
CadenceSummary
O
altitude
海拔统计
AltitudeSummary
O
高尔夫场地模式关联的明细数据说明
字段定义：exerciseSequenceHelper.golfCourseModel.DetailFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| altitude | 海拔详情 | Altitude[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
altitude
海拔详情
Altitude[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-mountain-hike-V14
爬取时间: 2025-04-29 20:49:26
来源: Huawei Developer
登山相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.mountainHike.EXERCISE_TYPE | 登山 | 手环、手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.mountainHike.EXERCISE_TYPE
登山
手环、手表
关联的统计数据说明
字段定义：exerciseSequenceHelper.mountainHike.SummaryFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| distance | 距离统计 | DistanceSummary | M |
| calorie | 热量统计 | CalorieSummary | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
| step | 步数统计 | StepSummary | O |
| altitude | 海拔统计 | AltitudeSummary | O |
字段列表
描述
类型
可选/必选
distance
距离统计
DistanceSummary
M
calorie
热量统计
CalorieSummary
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
step
步数统计
StepSummary
O
altitude
海拔统计
AltitudeSummary
O
关联的明细数据说明
字段定义：exerciseSequenceHelper.mountainHike.DetailFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| speed | 速度详情 | Speed[] | O |
| location | 位置详情 | Location[] | O |
| altitude | 海拔详情 | Altitude[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
speed
速度详情
Speed[]
O
location
位置详情
Location[]
O
altitude
海拔详情
Altitude[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-swim-V14
爬取时间: 2025-04-29 20:49:40
来源: Huawei Developer
开放水域游泳
开放水域游泳相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.openWaterSwim.EXERCISE_TYPE | 开放水域游泳 | 手环、手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.openWaterSwim.EXERCISE_TYPE
开放水域游泳
手环、手表
开放水域游泳关联的统计数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| openWaterSwimFeature | 开放水域游泳特征数据 | OpenWaterSwimFeature | M |
| distance | 距离统计 | DistanceSummary | M |
| calorie | 热量统计 | CalorieSummary | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
| swimStrokeRate | 划水频率统计 | SwimStrokeRateSummary | O |
| swolf | SWOLF统计 | SwolfSummary | O |
字段列表
描述
类型
可选/必选
openWaterSwimFeature
开放水域游泳特征数据
OpenWaterSwimFeature
M
distance
距离统计
DistanceSummary
M
calorie
热量统计
CalorieSummary
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
swimStrokeRate
划水频率统计
SwimStrokeRateSummary
O
swolf
SWOLF统计
SwolfSummary
O
开放水域游泳关联的明细数据说明
字段定义：exerciseSequenceHelper.openWaterSwim.DetailFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| location | 位置详情 | Location[] | O |
| speed | 速度详情 | Speed[] | O |
| swimStrokeRate | 划水频率详情 | SwimStrokeRate[] | O |
| swolf | SWOLF详情 | Swolf[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
location
位置详情
Location[]
O
speed
速度详情
Speed[]
O
swimStrokeRate
划水频率详情
SwimStrokeRate[]
O
swolf
SWOLF详情
Swolf[]
O
泳池游泳
泳池游泳相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.poolSwim.EXERCISE_TYPE | 泳池游泳 | 手环、手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.poolSwim.EXERCISE_TYPE
泳池游泳
手环、手表
泳池游泳关联的统计数据说明
字段定义：exerciseSequenceHelper.poolSwim.SummaryFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| poolSwimFeature | 泳池游泳特征数据 | PoolSwimFeature | M |
| distance | 距离统计 | DistanceSummary | M |
| calorie | 热量统计 | CalorieSummary | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
| speed | 速度统计 | SpeedSummary | O |
| swimStrokeRate | 划水频率统计 | SwimStrokeRateSummary | O |
| swolf | SWOLF统计 | SwolfSummary | O |
字段列表
描述
类型
可选/必选
poolSwimFeature
泳池游泳特征数据
PoolSwimFeature
M
distance
距离统计
DistanceSummary
M
calorie
热量统计
CalorieSummary
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
speed
速度统计
SpeedSummary
O
swimStrokeRate
划水频率统计
SwimStrokeRateSummary
O
swolf
SWOLF统计
SwolfSummary
O
泳池游泳关联的明细数据说明
字段定义：exerciseSequenceHelper.poolSwim.DetailFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| speed | 速度详情 | Speed[] | O |
| swimStrokeRate | 划水频率详情 | SwimStrokeRate[] | O |
| swolf | SWOLF详情 | Swolf[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
speed
速度详情
Speed[]
O
swimStrokeRate
划水频率详情
SwimStrokeRate[]
O
swolf
SWOLF详情
Swolf[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-rower-V14
爬取时间: 2025-04-29 20:49:54
来源: Huawei Developer
划船机
划船机相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.rower.EXERCISE_TYPE | 划船机 | 划船机等专业设备 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.rower.EXERCISE_TYPE
划船机
划船机等专业设备
划船机关联的统计数据说明
字段定义：exerciseSequenceHelper.rower.SummaryFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| rowerFeature | 划船机特征数据 | RowerFeature | M |
| calorie | 热量统计 | CalorieSummary | M |
| distance | 距离统计 | DistanceSummary | O |
| speed | 速度统计 | SpeedSummary | O |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
| resistance | 阻力统计 | ResistanceSummary | O |
| power | 功率统计 | PowerSummary | O |
| strokeRate | 桨频统计 | StrokeRateSummary | O |
字段列表
描述
类型
可选/必选
rowerFeature
划船机特征数据
RowerFeature
M
calorie
热量统计
CalorieSummary
M
distance
距离统计
DistanceSummary
O
speed
速度统计
SpeedSummary
O
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
resistance
阻力统计
ResistanceSummary
O
power
功率统计
PowerSummary
O
strokeRate
桨频统计
StrokeRateSummary
O
划船机关联的明细数据说明
字段定义：exerciseSequenceHelper.rower.DetailFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| speed | 速度详情 | Speed[] | O |
| power | 功率详情 | Power[] | O |
| resistance | 阻力详情 | Resistance[] | O |
| strokeRate | 桨频详情 | StrokeRate[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
speed
速度详情
Speed[]
O
power
功率详情
Power[]
O
resistance
阻力详情
Resistance[]
O
strokeRate
桨频详情
StrokeRate[]
O
赛艇
赛艇相关锻炼记录类型如下：
| 锻炼记录子类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.rowing.EXERCISE_TYPE | 赛艇 | 手环、手表 |
锻炼记录子类型常量
描述
数据来源
exerciseSequenceHelper.rowing.EXERCISE_TYPE
赛艇
手环、手表
赛艇关联的统计数据说明
字段定义：exerciseSequenceHelper.rowing.SummaryFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| rowingFeature | 赛艇特征数据 | RowingFeature | M |
| calorie | 热量统计 | CalorieSummary | M |
| distance | 距离统计 | DistanceSummary | O |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
| strokeRate | 桨频统计 | StrokeRateSummary | O |
字段列表
描述
类型
可选/必选
rowingFeature
赛艇特征数据
RowingFeature
M
calorie
热量统计
CalorieSummary
M
distance
距离统计
DistanceSummary
O
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
strokeRate
桨频统计
StrokeRateSummary
O
赛艇关联的明细数据说明
字段定义：exerciseSequenceHelper.rowing.DetailFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
| strokeRate | 桨频详情 | StrokeRate[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O
strokeRate
桨频详情
StrokeRate[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-other-sport-V14
爬取时间: 2025-04-29 20:50:09
来源: Huawei Developer
本章节锻炼记录类型，共用相同的统计数据模型与明细数据模型，后续部分锻炼记录类型可能扩充，扩充后的锻炼记录类型将拥有独立的命名空间，关联更多的统计/明细数据。
其他运动类型相关锻炼记录类型如下：
| 名称 | 描述 | 数据来源 |
| --- | --- | --- |
| exerciseSequenceHelper.sports.AEROBICS | 健美操 | 手环、手表 |
| exerciseSequenceHelper.sports.AIR_WALKER | 漫步机 | 手环、手表 |
| exerciseSequenceHelper.sports.ARCHERY | 射箭 | 手环、手表 |
| exerciseSequenceHelper.sports.BADMINTON | 羽毛球 | 手环、手表 |
| exerciseSequenceHelper.sports.BALLET | 芭蕾舞 | 手环、手表 |
| exerciseSequenceHelper.sports.BASEBALL | 棒球 | 手环、手表 |
| exerciseSequenceHelper.sports.BEACH_SOCCER | 沙滩足球 | 手环、手表 |
| exerciseSequenceHelper.sports.BEACH_VOLLEYBALL | 沙滩排球 | 手环、手表 |
| exerciseSequenceHelper.sports.BELLY_DANCE | 肚皮舞 | 手环、手表 |
| exerciseSequenceHelper.sports.BODY_COMBAT | 搏击操 | 手环、手表 |
| exerciseSequenceHelper.sports.BOWLING | 保龄球 | 手环、手表 |
| exerciseSequenceHelper.sports.BOXING | 拳击 | 手环、手表 |
| exerciseSequenceHelper.sports.BUNGEE_JUMPING | 蹦极 | 手环、手表 |
| exerciseSequenceHelper.sports.CANOEING | 皮划艇 | 手环、手表 |
| exerciseSequenceHelper.sports.CORE_TRAINING | 核心训练 | 手环、手表 |
| exerciseSequenceHelper.sports.CRICKET | 板球 | 手环、手表 |
| exerciseSequenceHelper.sports.CROSS_COUNTRY_SKIING | 越野滑雪 | 手环、手表 |
| exerciseSequenceHelper.sports.CROSS_FIT | Cross fit | 手环、手表 |
| exerciseSequenceHelper.sports.CURLING | 冰壶 | 手环、手表 |
| exerciseSequenceHelper.sports.DANCE | 舞蹈 | 手环、手表 |
| exerciseSequenceHelper.sports.DARTS | 飞镖 | 手环、手表 |
| exerciseSequenceHelper.sports.DODGE_BALL | 躲避球 | 手环、手表 |
| exerciseSequenceHelper.sports.DRAGON_BOAT | 龙舟 | 手环、手表 |
| exerciseSequenceHelper.sports.DRIFTING | 漂流 | 手环、手表 |
| exerciseSequenceHelper.sports.ESPORTS | 电子竞技 | 手环、手表 |
| exerciseSequenceHelper.sports.FENCING | 击剑 | 手环、手表 |
| exerciseSequenceHelper.sports.FISHING | 钓鱼 | 手环、手表 |
| exerciseSequenceHelper.sports.FREE_SPARRING | 自由搏击 | 手环、手表 |
| exerciseSequenceHelper.sports.FREE_TRAINING | 自由训练 | 手环、手表 |
| exerciseSequenceHelper.sports.FRISBEE | 飞盘 | 手环、手表 |
| exerciseSequenceHelper.sports.FUNCTIONAL_TRAINING | 功能性训练 | 手环、手表 |
| exerciseSequenceHelper.sports.GATEBALL | 门球 | 手环、手表 |
| exerciseSequenceHelper.sports.HANDBALL | 手球 | 手环、手表 |
| exerciseSequenceHelper.sports.HIIT | HIIT | 手环、手表 |
| exerciseSequenceHelper.sports.HOCKEY | 曲棍球 | 手环、手表 |
| exerciseSequenceHelper.sports.HORSE_RIDING | 骑马 | 手环、手表 |
| exerciseSequenceHelper.sports.HULA_HOOP | 呼啦圈 | 手环、手表 |
| exerciseSequenceHelper.sports.HUNTING | 对战游戏 | 手环、手表 |
| exerciseSequenceHelper.sports.ICE_HOCKEY | 冰球 | 手环、手表 |
| exerciseSequenceHelper.sports.JAZZ_DANCE | 爵士舞 | 手环、手表 |
| exerciseSequenceHelper.sports.KARATE | 空手道 | 手环、手表 |
| exerciseSequenceHelper.sports.KENDO | 剑道 | 手环、手表 |
| exerciseSequenceHelper.sports.KITE_FLYING | 放风筝 | 手环、手表 |
| exerciseSequenceHelper.sports.LATIN_DANCE | 拉丁舞 | 手环、手表 |
| exerciseSequenceHelper.sports.MARTIAL_ARTS | 武术 | 手环、手表 |
| exerciseSequenceHelper.sports.MOTORBOAT | 摩托艇 | 手环、手表 |
| exerciseSequenceHelper.sports.OBSTACLE_RACE | 障碍赛 | 手环、手表 |
| exerciseSequenceHelper.sports.ORIENTEERING | 定向越野 | 手环、手表 |
| exerciseSequenceHelper.sports.PADEL | 笼式网球 | 手环、手表 |
| exerciseSequenceHelper.sports.PARACHUTE | 跳伞 | 手环、手表 |
| exerciseSequenceHelper.sports.PARALLEL_BARS | 双杠 | 手环、手表 |
| exerciseSequenceHelper.sports.PARKOUR | 跑酷 | 手环、手表 |
| exerciseSequenceHelper.sports.PHYSICAL_TRAINING | 体能训练 | 手环、手表 |
| exerciseSequenceHelper.sports.PILATES | 普拉提 | 手环、手表 |
| exerciseSequenceHelper.sports.PLAYGROUND_RACE | 操场赛跑 | 手环、手表 |
| exerciseSequenceHelper.sports.PLAZA_DANCING | 广场舞 | 手环、手表 |
| exerciseSequenceHelper.sports.POOL | 台球 | 手环、手表 |
| exerciseSequenceHelper.sports.RACING_CAR | 赛车 | 手环、手表 |
| exerciseSequenceHelper.sports.ROCK_CLIMBING | 攀岩 | 手环、手表 |
| exerciseSequenceHelper.sports.ROLLER_SKATING | 轮滑 | 手环、手表 |
| exerciseSequenceHelper.sports.RUGBY | 橄榄球 | 手环、手表 |
| exerciseSequenceHelper.sports.SAILBOAT | 帆船 | 手环、手表 |
| exerciseSequenceHelper.sports.SENSE_SPORT | 体感运动 | 手环、手表 |
| exerciseSequenceHelper.sports.SEPAKTAKRAW | 藤球 | 手环、手表 |
| exerciseSequenceHelper.sports.SHUTTLECOCK | 毽球 | 手环、手表 |
| exerciseSequenceHelper.sports.SINGLE_BAR | 单杠 | 手环、手表 |
| exerciseSequenceHelper.sports.SKATEBOARD | 滑板 | 手环、手表 |
| exerciseSequenceHelper.sports.SKATING | 滑冰 | 手环、手表 |
| exerciseSequenceHelper.sports.SNOWMOBILE | 雪地摩托 | 手环、手表 |
| exerciseSequenceHelper.sports.SOCCER | 足球 | 手环、手表 |
| exerciseSequenceHelper.sports.SOFTBALL | 垒球 | 手环、手表 |
| exerciseSequenceHelper.sports.SQUASH | 壁球 | 手环、手表 |
| exerciseSequenceHelper.sports.STAIR_CLIMBING | 爬楼 | 手环、手表 |
| exerciseSequenceHelper.sports.STEPPER | 踏步机 | 手环、手表 |
| exerciseSequenceHelper.sports.STREET_DANCE | 街舞 | 手环、手表 |
| exerciseSequenceHelper.sports.STRENGTH_TRAINING | 力量训练 | 手环、手表 |
| exerciseSequenceHelper.sports.SUP | 桨板冲浪 | 手环、手表 |
| exerciseSequenceHelper.sports.SURFING | 冲浪 | 手环、手表 |
| exerciseSequenceHelper.sports.SWINGING | 秋千 | 手环、手表 |
| exerciseSequenceHelper.sports.TABLE_TENNIS | 乒乓球 | 手环、手表 |
| exerciseSequenceHelper.sports.TAEKWONDO | 跆拳道 | 手环、手表 |
| exerciseSequenceHelper.sports.TAI_CHI | 太极拳 | 手环、手表 |
| exerciseSequenceHelper.sports.TENNIS | 网球 | 手环、手表 |
| exerciseSequenceHelper.sports.TRIATHLON | 铁人三项 | 手环、手表 |
| exerciseSequenceHelper.sports.TUG_OF_WAR | 拔河 | 手环、手表 |
| exerciseSequenceHelper.sports.VOLLEYBALL | 排球 | 手环、手表 |
| exerciseSequenceHelper.sports.YOGA | 瑜伽 | 手环、手表 |
名称
描述
数据来源
exerciseSequenceHelper.sports.AEROBICS
健美操
手环、手表
exerciseSequenceHelper.sports.AIR_WALKER
漫步机
手环、手表
exerciseSequenceHelper.sports.ARCHERY
射箭
手环、手表
exerciseSequenceHelper.sports.BADMINTON
羽毛球
手环、手表
exerciseSequenceHelper.sports.BALLET
芭蕾舞
手环、手表
exerciseSequenceHelper.sports.BASEBALL
棒球
手环、手表
exerciseSequenceHelper.sports.BEACH_SOCCER
沙滩足球
手环、手表
exerciseSequenceHelper.sports.BEACH_VOLLEYBALL
沙滩排球
手环、手表
exerciseSequenceHelper.sports.BELLY_DANCE
肚皮舞
手环、手表
exerciseSequenceHelper.sports.BODY_COMBAT
搏击操
手环、手表
exerciseSequenceHelper.sports.BOWLING
保龄球
手环、手表
exerciseSequenceHelper.sports.BOXING
拳击
手环、手表
exerciseSequenceHelper.sports.BUNGEE_JUMPING
蹦极
手环、手表
exerciseSequenceHelper.sports.CANOEING
皮划艇
手环、手表
exerciseSequenceHelper.sports.CORE_TRAINING
核心训练
手环、手表
exerciseSequenceHelper.sports.CRICKET
板球
手环、手表
exerciseSequenceHelper.sports.CROSS_COUNTRY_SKIING
越野滑雪
手环、手表
exerciseSequenceHelper.sports.CROSS_FIT
Cross fit
手环、手表
exerciseSequenceHelper.sports.CURLING
冰壶
手环、手表
exerciseSequenceHelper.sports.DANCE
舞蹈
手环、手表
exerciseSequenceHelper.sports.DARTS
飞镖
手环、手表
exerciseSequenceHelper.sports.DODGE_BALL
躲避球
手环、手表
exerciseSequenceHelper.sports.DRAGON_BOAT
龙舟
手环、手表
exerciseSequenceHelper.sports.DRIFTING
漂流
手环、手表
exerciseSequenceHelper.sports.ESPORTS
电子竞技
手环、手表
exerciseSequenceHelper.sports.FENCING
击剑
手环、手表
exerciseSequenceHelper.sports.FISHING
钓鱼
手环、手表
exerciseSequenceHelper.sports.FREE_SPARRING
自由搏击
手环、手表
exerciseSequenceHelper.sports.FREE_TRAINING
自由训练
手环、手表
exerciseSequenceHelper.sports.FRISBEE
飞盘
手环、手表
exerciseSequenceHelper.sports.FUNCTIONAL_TRAINING
功能性训练
手环、手表
exerciseSequenceHelper.sports.GATEBALL
门球
手环、手表
exerciseSequenceHelper.sports.HANDBALL
手球
手环、手表
exerciseSequenceHelper.sports.HIIT
HIIT
手环、手表
exerciseSequenceHelper.sports.HOCKEY
曲棍球
手环、手表
exerciseSequenceHelper.sports.HORSE_RIDING
骑马
手环、手表
exerciseSequenceHelper.sports.HULA_HOOP
呼啦圈
手环、手表
exerciseSequenceHelper.sports.HUNTING
对战游戏
手环、手表
exerciseSequenceHelper.sports.ICE_HOCKEY
冰球
手环、手表
exerciseSequenceHelper.sports.JAZZ_DANCE
爵士舞
手环、手表
exerciseSequenceHelper.sports.KARATE
空手道
手环、手表
exerciseSequenceHelper.sports.KENDO
剑道
手环、手表
exerciseSequenceHelper.sports.KITE_FLYING
放风筝
手环、手表
exerciseSequenceHelper.sports.LATIN_DANCE
拉丁舞
手环、手表
exerciseSequenceHelper.sports.MARTIAL_ARTS
武术
手环、手表
exerciseSequenceHelper.sports.MOTORBOAT
摩托艇
手环、手表
exerciseSequenceHelper.sports.OBSTACLE_RACE
障碍赛
手环、手表
exerciseSequenceHelper.sports.ORIENTEERING
定向越野
手环、手表
exerciseSequenceHelper.sports.PADEL
笼式网球
手环、手表
exerciseSequenceHelper.sports.PARACHUTE
跳伞
手环、手表
exerciseSequenceHelper.sports.PARALLEL_BARS
双杠
手环、手表
exerciseSequenceHelper.sports.PARKOUR
跑酷
手环、手表
exerciseSequenceHelper.sports.PHYSICAL_TRAINING
体能训练
手环、手表
exerciseSequenceHelper.sports.PILATES
普拉提
手环、手表
exerciseSequenceHelper.sports.PLAYGROUND_RACE
操场赛跑
手环、手表
exerciseSequenceHelper.sports.PLAZA_DANCING
广场舞
手环、手表
exerciseSequenceHelper.sports.POOL
台球
手环、手表
exerciseSequenceHelper.sports.RACING_CAR
赛车
手环、手表
exerciseSequenceHelper.sports.ROCK_CLIMBING
攀岩
手环、手表
exerciseSequenceHelper.sports.ROLLER_SKATING
轮滑
手环、手表
exerciseSequenceHelper.sports.RUGBY
橄榄球
手环、手表
exerciseSequenceHelper.sports.SAILBOAT
帆船
手环、手表
exerciseSequenceHelper.sports.SENSE_SPORT
体感运动
手环、手表
exerciseSequenceHelper.sports.SEPAKTAKRAW
藤球
手环、手表
exerciseSequenceHelper.sports.SHUTTLECOCK
毽球
手环、手表
exerciseSequenceHelper.sports.SINGLE_BAR
单杠
手环、手表
exerciseSequenceHelper.sports.SKATEBOARD
滑板
手环、手表
exerciseSequenceHelper.sports.SKATING
滑冰
手环、手表
exerciseSequenceHelper.sports.SNOWMOBILE
雪地摩托
手环、手表
exerciseSequenceHelper.sports.SOCCER
足球
手环、手表
exerciseSequenceHelper.sports.SOFTBALL
垒球
手环、手表
exerciseSequenceHelper.sports.SQUASH
壁球
手环、手表
exerciseSequenceHelper.sports.STAIR_CLIMBING
爬楼
手环、手表
exerciseSequenceHelper.sports.STEPPER
踏步机
手环、手表
exerciseSequenceHelper.sports.STREET_DANCE
街舞
手环、手表
exerciseSequenceHelper.sports.STRENGTH_TRAINING
力量训练
手环、手表
exerciseSequenceHelper.sports.SUP
桨板冲浪
手环、手表
exerciseSequenceHelper.sports.SURFING
冲浪
手环、手表
exerciseSequenceHelper.sports.SWINGING
秋千
手环、手表
exerciseSequenceHelper.sports.TABLE_TENNIS
乒乓球
手环、手表
exerciseSequenceHelper.sports.TAEKWONDO
跆拳道
手环、手表
exerciseSequenceHelper.sports.TAI_CHI
太极拳
手环、手表
exerciseSequenceHelper.sports.TENNIS
网球
手环、手表
exerciseSequenceHelper.sports.TRIATHLON
铁人三项
手环、手表
exerciseSequenceHelper.sports.TUG_OF_WAR
拔河
手环、手表
exerciseSequenceHelper.sports.VOLLEYBALL
排球
手环、手表
exerciseSequenceHelper.sports.YOGA
瑜伽
手环、手表
关联的统计数据说明
字段定义：exerciseSequenceHelper.sports.SummaryFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| calorie | 热量统计 | CalorieSummary | M |
| exerciseHeartRate | 运动心率统计 | ExerciseHeartRateSummary | O |
字段列表
描述
类型
可选/必选
calorie
热量统计
CalorieSummary
M
exerciseHeartRate
运动心率统计
ExerciseHeartRateSummary
O
关联的明细数据说明
字段定义：exerciseSequenceHelper.sports.DetailFields
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| exerciseHeartRate | 运动心率详情 | ExerciseHeartRate[] | O |
字段列表
描述
类型
可选/必选
exerciseHeartRate
运动心率详情
ExerciseHeartRate[]
O

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-healthsequence-V14
爬取时间: 2025-04-29 20:50:23
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-sleeprecord-V14
爬取时间: 2025-04-29 20:50:36
来源: Huawei Developer
夜间睡眠
从入睡到出睡的一段完整睡眠记录（睡眠时长超过3小时），包括夜间睡眠数据以及每个时刻的睡眠状态采样数据。
健康记录类型如下：
| 健康记录类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| healthSequenceHelper.sleepRecord.DATA_TYPE | 夜间睡眠 | 部分手表、手环等 |
健康记录类型常量
描述
数据来源
healthSequenceHelper.sleepRecord.DATA_TYPE
夜间睡眠
部分手表、手环等
夜间睡眠数据类型
| 字段列表 | 描述 | 类型 | 可选/必选 | 单位 | 取值范围 |
| --- | --- | --- | --- | --- | --- |
| fallAsleepTime | 分期睡眠最早入睡时间点 | number | M | 毫秒 | [0，∞） |
| wakeupTime | 分期睡眠最晚出睡时间点 | number | M | 毫秒 | [0，∞） |
| duration | 夜间/普通睡眠时长（不含零星小睡时长） | number | M | 秒 | [0，∞） |
| bedTime | 最早上床时间点 | number | O | - | [0，∞） |
| risingTime | 最晚起床时间点 | number | O | - | [0，∞） |
| prepareSleepTime | 准备入睡时间点 | number | O | 毫秒 | [0，∞） |
| shallowDuration | 浅睡时长 | number | O | 秒 | [0，∞） |
| deepDuration | 深睡时长 | number | O | 秒 | [0，∞） |
| dreamDuration | REM时长 | number | O | 秒 | [0，∞） |
| wakeDuration | 清醒时长 | number | O | 秒 | [0，∞） |
| wakeCount | 清醒次数 | number | O | - | [0，∞） |
| onBedDuration | 卧床时长 | number | O | 秒 | [0，∞） |
| recordDuration | 睡眠记录时长（手动输入睡眠就是总时长） | number | O | 秒 | [0，∞） |
| sleepEfficiency | 睡眠效率 | number | O | - | [0,100] |
| sleepScore | 睡眠得分 | number | O | - | [0,100] |
| deepSleepContinuity | 深睡连续性 | number | O | - | [0,100] |
| respiratoryQualityScore | 呼吸质量分 | number | O | - | [0,100] |
| turnOverCount | 翻身次数 | number | O | - | [0，∞） |
| sleepEndReason | 睡眠结束原因 | number | O | - | [0，∞） 取值参考如下： 0：手动结束睡眠监测 1：自动结束睡眠监测 2：中断睡眠监测 3：电量过低结束 |
| sleepSymptoms | 睡眠症状 | string | O | - | - |
| sleepType | 睡眠数据类型 | number | O | - | 1：科学睡眠 2：普通睡眠 3：手动输入睡眠 4：手机记录睡眠 未设置时，默认值为2。 |
字段列表
描述
类型
可选/必选
单位
取值范围
fallAsleepTime
分期睡眠最早入睡时间点
number
M
毫秒
[0，∞）
wakeupTime
分期睡眠最晚出睡时间点
number
M
毫秒
[0，∞）
duration
夜间/普通睡眠时长（不含零星小睡时长）
number
M
秒
[0，∞）
bedTime
最早上床时间点
number
O
-
[0，∞）
risingTime
最晚起床时间点
number
O
-
[0，∞）
prepareSleepTime
准备入睡时间点
number
O
毫秒
[0，∞）
shallowDuration
浅睡时长
number
O
秒
[0，∞）
deepDuration
深睡时长
number
O
秒
[0，∞）
dreamDuration
REM时长
number
O
秒
[0，∞）
wakeDuration
清醒时长
number
O
秒
[0，∞）
wakeCount
清醒次数
number
O
-
[0，∞）
onBedDuration
卧床时长
number
O
秒
[0，∞）
recordDuration
睡眠记录时长（手动输入睡眠就是总时长）
number
O
秒
[0，∞）
sleepEfficiency
睡眠效率
number
O
-
[0,100]
sleepScore
睡眠得分
number
O
-
[0,100]
deepSleepContinuity
深睡连续性
number
O
-
[0,100]
respiratoryQualityScore
呼吸质量分
number
O
-
[0,100]
turnOverCount
翻身次数
number
O
-
[0，∞）
sleepEndReason
睡眠结束原因
number
O
-
[0，∞）
取值参考如下：
0：手动结束睡眠监测
1：自动结束睡眠监测
2：中断睡眠监测
3：电量过低结束
sleepSymptoms
睡眠症状
string
O
-
-
sleepType
睡眠数据类型
number
O
-
1：科学睡眠
2：普通睡眠
3：手动输入睡眠
4：手机记录睡眠
未设置时，默认值为2。
关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| sleepSegment | 睡眠状态采样 | SleepSegment[] | O |
字段列表
描述
类型
可选/必选
sleepSegment
睡眠状态采样
SleepSegment[]
O
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.readData | 分钟级 | 部分手表、手环等 |
开放API
查询及时性
数据源
healthStore.readData
分钟级
部分手表、手环等
零星小睡
日间进行的短时间睡眠，包括零星小睡睡眠数据以及每个时刻的睡眠状态采样数据。
健康记录类型如下：
| 健康记录类型常量 | 描述 | 数据来源 |
| --- | --- | --- |
| healthSequenceHelper.sleepNapRecord.DATA_TYPE | 零星小睡 | 部分手表、手环等 |
健康记录类型常量
描述
数据来源
healthSequenceHelper.sleepNapRecord.DATA_TYPE
零星小睡
部分手表、手环等
零星小睡数据类型
| 字段列表 | 描述 | 类型 | 可选/必选 | 单位 | 取值范围 |
| --- | --- | --- | --- | --- | --- |
| noonDuration | 午睡时长(零星小睡） | number | M | 秒 | [0，∞） |
| noonRecordDuration | 零星小睡记录时长 | number | O | 秒 | [0，∞） |
字段列表
描述
类型
可选/必选
单位
取值范围
noonDuration
午睡时长(零星小睡）
number
M
秒
[0，∞）
noonRecordDuration
零星小睡记录时长
number
O
秒
[0，∞）
关联的明细数据说明
| 字段列表 | 描述 | 类型 | 可选/必选 |
| --- | --- | --- | --- |
| sleepSegment | 睡眠状态采样 | SleepSegment[] | O |
字段列表
描述
类型
可选/必选
sleepSegment
睡眠状态采样
SleepSegment[]
O
数据开放说明
| 开放API | 查询及时性 | 数据源 |
| --- | --- | --- |
| healthStore.readData | 分钟级 | 部分手表、手环等 |
开放API
查询及时性
数据源
healthStore.readData
分钟级
部分手表、手环等

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-verification-V14
爬取时间: 2025-04-29 20:50:50
来源: Huawei Developer
完成申请运动健康服务后，审核通过的权限为测试权限，有100个用户数量的限制。为解除用户数的限制，应用开发完成后，在上架之前，请按照以下步骤提交验证申请，以获取正式权限。完成验证后，您的应用可支持正式大规模商用。
申请验证
1.
2.  审核结果会出现以下两种类型，将以短信和邮件的形式通知您。 申请验证审核通过后，您申请的权限将于24小时后生效。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170040.43754899466369367246162619124238:50001231000000:2800:BE8AFE384EA157E71B74EC54C1653680C601368E37563DE81178C326EF19635C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170040.50534741301974948739371612427981:50001231000000:2800:7E0E23B5F3230A8D4F9C99E8E1F760FBD5606EB77C7F25C6F3E1E18DE4D8887A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170040.04851266295020379590188267346705:50001231000000:2800:F6EB064295975518F90712BA82A59FDCDE43ADB867AA4C22782949CDD1AD25EB.png)
申请验证被驳回的常见问题
以下为申请验证被驳回的高频问题，请您在申请前阅读以下内容，避免在您的申请材料中出现下述问题影响您审核通过的进度。若您已提交申请并被驳回，也可参考以下解决方案修改申请材料并重新提交。
未提供隐私政策声明视频或隐私政策内容不准确
-  举证视频中需要包含应用中打开“隐私政策”，以及页面中对应的公司和应用名称准确无误。
-  1.未提供隐私政策声明视频。 2.隐私政策内容不准确：页面中对应的公司名和应用名称、申请验证的公司名称和应用名称不一致。 3.应用实际名称、隐私政策里的应用名称、申请验证的应用名称三者均不一致。
-  1.按照要求提供隐私政策声明举证视频。 2.需要在隐私政策声明中解释清楚，应用实际名称与隐私政策里的应用名称、申请验证的应用名称之间的关系（包括公司名称，英文名称关注大小写），或提供有正式文件、正式邮件、公司盖章等正式说明材料。
华为运动健康标志及文字的使用描述错误
-  如果应用涉及华为相关的文字展示，文字描述使用“华为运动健康”（英文为“HUAWEI Health”）。
-  1.错误使用“华为开关”、“华为健康数据”、“华为Health Service Kit”、“华为运动平台”、“华为手环”等文字作为功能入口文字或提示信息。 2.品牌图标未使用最新版本，或者错误使用华为图标。
-  1.文字描述中使用“华为运动健康”或“HUAWEI Health”。 2.开发者应用面向用户界面，统一使用华为运动健康品牌logo。
授权页面权限展示不一致，图标不一致
-  首次使用场景弹出的授权页面展示权限列表必须与申请验证勾选权限一致，授权页面应用图标展示正常。
-  1.授权页面展示权限列表与申请验证勾选权限不一致（已通过验证的全部权限、本次申请验证的权限）。 2.授权页面缺少应用图标或应用实际使用的图标与平台申请验证的应用图标不一致。
-  检查本次申请验证勾选的商用测试权限，与您的应用权限是否对应（暂未准备进行商用的测试权限，请勿展示在授权页面）。 可以通过以下两种方式修改应用名称或图标： 您可以在AGC-我的应用中找到当前申请验证的应用，在应用信息中编辑应用名称、上传应用图标。 您可以在平台-开发服务-账号-找到当前申请验证的应用，在应用信息中修改应用图标。
未集成取消授权功能
-  您的应用需要为用户提供取消授权功能。
-  请参见管理用户授权章节集成取消授权功能。
用户需要全部授权后才能使用服务、缺少授权不足提示
-  1.用户授权不足只会影响未授权权限对应的功能，不能强制用户授权全部权限后才能使用应用，允许用户只选择部分数据的授权时不影响基本功能的使用。 2.应用授权不足时给出相应提示或引导重新授权。
-  1.应用需要全部授权后才能使用。 2.缺少授权不足提示或未引导重新授权。
-  1.如果应用的某些功能必须将所有数据全部授权才可使用，需提供合理解释或者法律依据。 合理的解释案例：计算压力模型，需要心率，步数，体重、睡眠情况等，综合参与计算，此时，对以上数据需要全部授权才能使用压力模型计算功能。 法律依据：需提供所在国家法律不反对“数据权限必须全部授权才能使用APP”的证据。 2.应用授权不足时给出相应提示或引导重新授权。
未提供举证材料、举证材料提供不完整或不正确
-  正确完整地在应用上线CheckList中填写自检结果，并根据场景说明和验收标准提供相应的举证材料。应用上线CheckList可以在提交验证信息页面的样例中获取。
-  1.服务器应用未实现手工同步数据功能或者未提供举证材料； 2.涉及使用订阅机制，但是未提供举证材料。 3.缺少简易用户操作手册。 4.举证视频录制场景与对应检查项内容场景不一致。 5.举证视频内容缺少对应检查项验收标准包含的内容要素。 6.未提供您的应用使用的数据类型华为运动健康App中的数据类型的准确性对比材料，或提供的举证图片数据比对不完全一致。
-  1.仔细阅读应用上线CheckList中场景说明和验收标准按照要求提供准确性材料。 2.针对表格中“4.1数据准确性”，如您的应用涉及获取华为运动健康App的数据，需要对申请的每个数据类型与华为运动健康App中对应页签下的的数据一致性分别举证（如果您的应用获取数据后用作算法分析等，请提供您的计算公式或算法，并举例说明)。 3.如果您的应用使用云侧API，请为用户提供手工同步数据的入口，并提供手工同步功能正常的举证材料。 4.如果您的应用使用运动健康服务云提供的订阅通知机制感知用户数据发生变化时，请提供华为运动健康App数据变化后，您的应用实时获取最新数据的举证材料。 5.请根据应用上线CheckList中的参考模板提供应用的简易用户操作手册。
举证场景混淆
-  您提供的举证材料需要与各检查项的场景说明内容对应。
-  应用上线CheckList中的“3.3授权失败异常处理”场景举证内容混淆。
-  “3.3授权失败异常处理”场景下，请参照如下方式取消用户对华为账号的授权： 方式一：在手机“设置 > 华为账号 > 账号安全 > 使用华为账号的应用”选取您想要取消授权的应用，进行取消授权。 方式二：在“华为运动健康App > 我的 > 隐私管理 > 运动健康数据管理 > 数据分享与授权””选取您想要取消授权的应用，进行取消授权。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-personal-data-processing-V14
爬取时间: 2025-04-29 20:51:04
来源: Huawei Developer
最后修改时间： 2024/5/16
华为是数据处理者，不是数据控制者，数据使用目的和方式由用户自己决定。
此文档针对华为作为最终用户数据处理者，开发者作为最终用户数据控制者的数据处理进行说明，包括：
华为处理的个人数据清单
| 个人数据 | 使用目的 | 存留期 |
| --- | --- | --- |
| 个人信息：身高和体重 | Health Service Kit为用户提供数据存储和共享的平台，不会主动处理任何用户数据。所有的数据显示和运动健康服务由开发者为用户提供，数据来源于华为运动健康App与三方服务写入，数据存储在运动健康服务本地数据库，会随端云同步到运动健康服务云侧。 | 用户删除华为账号后，其所有个人数据会删除。 |
| 运动数据：日常活动（步数、热量、距离、中高强度、爬高、活动小时数）、锻炼记录、位置数据 |
| 健康数据：睡眠数据、心率数据、压力数据、血氧数据、体温数据、血压数据 |
| 数据源的设备ID（MAC或其他设备标识，由三方服务提供） | 设备ID用于标记数据来源。 |
| 华为账号ID | 最终用户的华为账号绑定三方服务时的用户标识符。 |
个人数据
使用目的
存留期
个人信息：身高和体重
Health Service Kit为用户提供数据存储和共享的平台，不会主动处理任何用户数据。所有的数据显示和运动健康服务由开发者为用户提供，数据来源于华为运动健康App与三方服务写入，数据存储在运动健康服务本地数据库，会随端云同步到运动健康服务云侧。
用户删除华为账号后，其所有个人数据会删除。
运动数据：日常活动（步数、热量、距离、中高强度、爬高、活动小时数）、锻炼记录、位置数据
健康数据：睡眠数据、心率数据、压力数据、血氧数据、体温数据、血压数据
数据源的设备ID（MAC或其他设备标识，由三方服务提供）
设备ID用于标记数据来源。
华为账号ID
最终用户的华为账号绑定三方服务时的用户标识符。
指导开发者如何帮助最终用户实现对数据的控制
如何清除最终用户数据
如何导出最终用户的数据
开发者通过华为运动健康服务API，可以通过数据访问接口获取用户数据，为用户提供数据导出服务，具体方法见healthStore.readData，详细使用请参见运动健康采样数据开发指导。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-faqs-V14
爬取时间: 2025-04-29 20:51:17
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-faqs-1-V14
爬取时间: 2025-04-29 20:51:31
来源: Huawei Developer
聚合查询接口读取今日日常活动数据，数据上报存在延时，读取实时日常活动数据建议使用读取实时三环数据接口。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-faqs-2-V14
爬取时间: 2025-04-29 20:51:45
来源: Huawei Developer
鉴权时使用的权限是用户授权的权限与应用申请的权限的交集，需确认：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-faqs-3-V14
爬取时间: 2025-04-29 20:51:59
来源: Huawei Developer
参考配置Client ID，请登录AppGallery Connect平台，确认代码中配置的包名与client ID是匹配的。若仍无法解决通过在线提单提交问题，华为支持人员会及时处理。
更多错误码请参考ArkTS API错误码。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-faqs-4-V14
爬取时间: 2025-04-29 20:52:13
来源: Huawei Developer
确保授权请求参数中的数据类型已经在Health Service Kit卡片中申请相应的权限，申请步骤请参考申请运动健康服务，数据类型对应的权限参考权限说明。
更多错误码请参考ArkTS API错误码。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-faqs-5-V14
爬取时间: 2025-04-29 20:52:26
来源: Huawei Developer
接口响应错误码1002703001，可通过以下方式引导用户打开运动健康App，同意隐私授权：
调用canOpenLink判断运动健康App是否安装。运动健康App Scheme：huaweischeme://healthapp/home/main。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-appendix-V14
爬取时间: 2025-04-29 20:52:40
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-help-V14
爬取时间: 2025-04-29 20:52:54
来源: Huawei Developer
-  文档修改和版本更新发布需要一定的周期，非紧急问题可以通过该途径反馈。 文档反馈系统不支持问题答复。问题描述得越清晰，将越有可能得以解决。
-  文档修改和版本更新发布需要一定的周期，非紧急问题可以通过该途径反馈。 文档反馈系统不支持问题答复。问题描述得越清晰，将越有可能得以解决。
-  文档修改和版本更新发布需要一定的周期，非紧急问题可以通过该途径反馈。
-  文档反馈系统不支持问题答复。问题描述得越清晰，将越有可能得以解决。
1.  文档修改和版本更新发布需要一定的周期，非紧急问题可以通过该途径反馈。 文档反馈系统不支持问题答复。问题描述得越清晰，将越有可能得以解决。
2.  文档修改和版本更新发布需要一定的周期，非紧急问题可以通过该途径反馈。
3.  文档反馈系统不支持问题答复。问题描述得越清晰，将越有可能得以解决。
-  文档修改和版本更新发布需要一定的周期，非紧急问题可以通过该途径反馈。
-  文档反馈系统不支持问题答复。问题描述得越清晰，将越有可能得以解决。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/health-logo-usage-regulations-V14
爬取时间: 2025-04-29 20:53:07
来源: Huawei Developer
开发者应用在⾯向用户呈现华为运动健康品牌图标时，需要遵循《HUAWEI Health授权使用规范》，图标样式请点击资源下载获取。
标志说明
| 标志以“心形”为主要图形元素，并结合了运动跑道元素， 凸显了运动健康品牌的专属性和识别性，品牌色用橙色来体现运动的活力。  |    |   |
| --- | --- | --- |
标志以“心形”为主要图形元素，并结合了运动跑道元素， 凸显了运动健康品牌的专属性和识别性，品牌色用橙色来体现运动的活力。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170041.02003212272263735012820936007037:50001231000000:2800:CB6B2A141525BF76A595CCCD11BD8298254A06F574575CB39DFF673C7002F14D.png)
标志使用
仅使用图标
单图标可用于授权入口、授权连接详情页面等场景，用于向用户展示数据来源。
-
-
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170041.06993273776941915984884838811030:50001231000000:2800:48E84F8626A29C2474305DE913FF84E48FB0B071329269376C585F80CE89AE6A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170041.27587953391944301388371949980067:50001231000000:2800:14A2A9CA1F6D89C9DB2A27460002B9E78074732B32DD1BCD378FB96641DCA74F.png)
使用HUAWEI Health标志
包括英文和中文标志，且有横版和竖版两种版式，需要满足《HUAWEI Health授权使用规范》中横版和竖版网格正确比例的要求。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170041.72947157967919349817924331892473:50001231000000:2800:DC127CE860228120576E088DE218A15D04177EFB5DE587AF7CA6EAAAD6CB6539.png)
仅使用文本
如开发者应用仅通过文本向用户展示数据来源时，请使用华为运动健康或HUAWEI Health。
使用Work with HUAWEI Health徽章标志（以下简称：Health徽章）
1.Health 徽章使用原则
除联合品牌使用HUAWEI Health标志外，仅华为运动健康授权的软件生态合作伙伴可以使用Health徽章。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170041.90232110136468656735758993282974:50001231000000:2800:FD90DA03EAE05CE15A112C8342BBC2D83C2F8B91BE6B1B3040400DD00827B9DA.png)
2.Health 徽章使用场景及示例
-  核心原则 Health 徽章使用原则
-  核心原则 当需要在App下载详情页面，提示用户下载的App支持连接华为运动健康数据功能时，Health徽章位于App简介图片下方，页面水平居中位置。 Health徽章大小比例规范 徽章的宽度为页面宽度的1/3，取徽章的宽度为X，徽章与上方信息内容的间距为0.24X，此间距可根据实际情况适配调整。
-  核心原则 在已授权的硬件合作伙伴的产品宣传视频中，需要提示设备支持连接华为运动健康的功能时，使用文案方式书写为：支持连接华为运动健康。
-  在已授权的硬件合作伙伴的产品宣传视频中，需要提示设备支持连接华为运动健康的功能时，使用文案方式书写为：支持连接华为运动健康。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170041.60415301084043768766494213055199:50001231000000:2800:CD2A6F8669EE1BD5D4B7C314541712149613214B5093B2DC65F3DC81429F2AEE.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170041.62866084187110238001094747423195:50001231000000:2800:78A5BD47CDA8FF9A12E2402151CDE0BD570F3B96EBAA83186274104E34DF008A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170041.90096597323559175208638414888047:50001231000000:2800:5F1CF06EB31588A3DFE45F0B5F9B81D22FA67DEA31C0943293EAC7AEC093CBFC.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170041.00766867526792554587119193670083:50001231000000:2800:20505CE18060885DAB8A85844E9AF68F9969B3DFCB8CCF7C6DD1D9974D8E3599.png)
-  在已授权的硬件合作伙伴的产品宣传视频中，需要提示设备支持连接华为运动健康的功能时，使用文案方式书写为：支持连接华为运动健康。
当您需要华为运动健康徽章使用授权，或对Health徽章使用场景有疑问时，可邮件联系hihealth@huawei.com获取帮助。
错误用法
HUAWEI Health标志的比例、颜色以及图形在任何情况下都不得改变。以下为常见错误用法示例。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170041.98813260079915376392640710354321:50001231000000:2800:D761140F643437F574E9F2AFB343190655E80A974352E1EBE44BB5DDE9D4FF13.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-kit-guide-V14
爬取时间: 2025-04-29 20:53:21
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-introduction-V14
爬取时间: 2025-04-29 20:53:35
来源: Huawei Developer
IAP Kit（应用内支付服务）为开发者提供便捷的应用内支付体验和简便的接入流程，让开发者聚焦应用本身的业务能力，助力开发者商业变现。开发者应用可通过使用IAP Kit提供的系统级支付API快速启动IAP收银台，即可实现应用内支付。
| 商品类型  | 定义  | 用户权益时间  | 开发者权益处理  | 场景举例  |
| --- | --- | --- | --- | --- |
| 消耗型商品  | 使用一次后即消耗掉，随使用减少，需要再次购买的商品  | 无限制  | 开发者发放权益后，后续不再进行管理  | 游戏货币，游戏道具等  |
| 非消耗型商品  | 一次性购买，永久拥有，无需消耗  | 永久  | 开发者永久维护用户权益  | 游戏中额外的游戏关卡、应用中无时限的高级会员等  |
| 自动续期订阅商品  | 用户购买后在一段时间内允许访问增值功能或内容，周期结束前自动续期购买下一期的服务  | 连续性周期  | 开发者周期性维护用户权益  | 应用中有时限的自动续期高级会员，如：视频连续包月会员  |
| 非续期订阅商品  | 用户购买后在一段时间内允许访问增值功能或内容，周期结束后禁止访问，除非再次购买自动续期订阅或非续期订阅商品  | 一个周期  | 开发者在一个周期内要进行权益维护  | 应用中有时限的高级会员，如：视频一个月会员  |
商品类型
定义
用户权益时间
开发者权益处理
场景举例
消耗型商品
使用一次后即消耗掉，随使用减少，需要再次购买的商品
无限制
开发者发放权益后，后续不再进行管理
游戏货币，游戏道具等
非消耗型商品
一次性购买，永久拥有，无需消耗
永久
开发者永久维护用户权益
游戏中额外的游戏关卡、应用中无时限的高级会员等
自动续期订阅商品
用户购买后在一段时间内允许访问增值功能或内容，周期结束前自动续期购买下一期的服务
连续性周期
开发者周期性维护用户权益
应用中有时限的自动续期高级会员，如：视频连续包月会员
非续期订阅商品
用户购买后在一段时间内允许访问增值功能或内容，周期结束后禁止访问，除非再次购买自动续期订阅或非续期订阅商品
一个周期
开发者在一个周期内要进行权益维护
应用中有时限的高级会员，如：视频一个月会员

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-access-specifications-V14
爬取时间: 2025-04-29 20:53:49
来源: Huawei Developer
为了确保用户获得良好的支付体验，IAP Kit制定了应用接入IAP Kit的设计规范，请开发者遵照执行，否则可能影响应用上架。具体要求如下：
界面设计规范
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170041.18458097460049201953730665912026:50001231000000:2800:846F824091DBCDBBC83789441BE8935BAC07DC70DBE6821829A81C499EBC06E5.png)
接入限制
数字商品（虚拟商品）要求通过IAP Kit接入购买能力，不能独立对接支付宝、微信支付等三方支付，否则可能影响应用上架。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-dev-guide-V14
爬取时间: 2025-04-29 20:54:02
来源: Huawei Developer
快速上手体验
在正式开发应用之前，开发者可以通过Codelab快速体验一个应用的开发过程。
开发流程
开发者需要按照流程来完成应用的开发工作，完整的开发流程如下。
| 序号  | 步骤  | 说明  |
| --- | --- | --- |
| 1  | 开通商户服务  | 在开发应用前，请先参考“应用开发准备”完成基本准备工作。其中配置签名信息时，请使用手动签名方式。 开发者需开通商户服务才能开启应用内购买服务。商户服务里配置的银行卡账号、币种，用于开发者接收华为分成收益。  |
| 2  | 开启和激活应用内购买服务  | 开发者需开启和激活应用内购买服务才能使用华为应用内支付服务。  |
| 3  | （可选）配置应用内购买服务参数  | 配置订单/订阅通知接收地址。配置密钥。  |
| 4  | 配置应用身份信息  | 在应用工程中配置bundleName、Client ID。  |
| 5  | 配置商品信息  | 开发者需要在AppGallery Connect中完成相关商品配置。在应用调用购买接口时，需传入此处配置的商品ID和商品类型。  |
| 6  | 商品购买  | 开发消耗型、非消耗型商品购买功能：接入消耗型、非消耗型商品购买功能，主要包括商品列表展示、购买、权益发放等，具体请参见接入购买。开发自动续期订阅商品购买功能：开发者可通过自动续期订阅说明了解订阅的相关概念以及支持的功能。具体开发过程可参见接入自动续期订阅。开发非续期订阅商品购买功能：接入非续期订阅商品购买功能，主要包括商品列表展示、购买、权益发放等，具体请参见接入购买。 说明在开发过程中，可通过沙盒测试辅助功能测试。沙盒测试允许开发者在接入华为应用内支付调测过程中无需真实支付即可完成购买测试。   |
序号
步骤
说明
1
开通商户服务
在开发应用前，请先参考“应用开发准备”完成基本准备工作。其中配置签名信息时，请使用手动签名方式。
开发者需开通商户服务才能开启应用内购买服务。商户服务里配置的银行卡账号、币种，用于开发者接收华为分成收益。
2
开启和激活应用内购买服务
开发者需开启和激活应用内购买服务才能使用华为应用内支付服务。
3
（可选）配置应用内购买服务参数
4
配置应用身份信息
在应用工程中配置bundleName、Client ID。
5
配置商品信息
开发者需要在AppGallery Connect中完成相关商品配置。在应用调用购买接口时，需传入此处配置的商品ID和商品类型。
6
商品购买
在开发过程中，可通过沙盒测试辅助功能测试。沙盒测试允许开发者在接入华为应用内支付调测过程中无需真实支付即可完成购买测试。
示例代码
开发者可参见示例代码了解如何在应用中提供消耗型商品、非消耗型商品、自动续期订阅商品购买能力。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-preparations-V14
爬取时间: 2025-04-29 20:54:16
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-enable-merchant-service-V14
爬取时间: 2025-04-29 20:54:30
来源: Huawei Developer
在开发应用前，请先参考“应用开发准备”完成基本准备工作。其中配置签名信息时，请使用手动签名方式。
开通商户服务是开发者分发付费内容（付费应用/主题、应用内付费、广告变现等）的前提。商户服务里需要配置银行卡账户、币种等信息，用于开发者接收华为分成收益。详细信息和操作请参见商户服务。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-enable-in-app-purchases-V14
爬取时间: 2025-04-29 20:54:43
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-set-necessary-parameters-V14
爬取时间: 2025-04-29 20:54:57
来源: Huawei Developer
配置订单/订阅通知接收地址
IAP服务器具备提供服务端关键事件通知的能力。用户购买商品后，IAP服务器会在订单（消耗型/非消耗型商品）和订阅场景的某些关键事件发生时发送通知至开发者配置的订单/订阅通知接收地址，具体的通知接收地址配置请参见激活服务和配置事件通知。
配置密钥
IAP服务器要求对每个服务端API请求进行JSON Web Token（JWT）授权。开发者可以使用从AppGallery Connect下载的API密钥对Token签名生成JWT，授权发起的服务端API请求。
开发者可参见创建密钥、下载密钥、撤销密钥管理服务端密钥。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-config-app-identity-info-V14
爬取时间: 2025-04-29 20:55:11
来源: Huawei Developer
bundleName配置
工程“AppScope/app.json5”下的bundleName需要与开发者在应用开发准备中创建应用时的包名保持一致。
配置内容示例如下：
配置应用身份信息
1.  下图中的APP ID可用于服务器API接口请求。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170042.78819089823530797932924352641835:50001231000000:2800:D3CF37E0266AA63A8A27C2A72F8458AECB46B75D302C3238264CC895937E5C45.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-config-product-V14
爬取时间: 2025-04-29 20:55:24
来源: Huawei Developer
在接入商品购买前，开发者需要在AppGallery Connect中录入商品信息（包括商品ID、商品类型、不同国家/地区的商品价格、商品名称等）。在客户端调用购买接口时，只需传入此处配置的商品ID和商品类型，IAP Kit会根据用户当前的账号服务地自动展示对应国家/地区的商品信息（包括商品价格、商品名称等），无需开发者处理因账号所在服务地变动带来的商品价格适配问题。
配置消耗型/非消耗型/非续期订阅商品
配置自动续期订阅型商品
在AppGallery Connect完成商品配置后，AppGallery Connect不会跟随汇率实时刷新商品价格，需要开发者定期手动刷新价格，具体请参见修改单个商品。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-purchases-V14
爬取时间: 2025-04-29 20:55:38
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-purchase-V14
爬取时间: 2025-04-29 20:55:52
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-integrate-purchase-V14
爬取时间: 2025-04-29 20:56:06
来源: Huawei Developer
场景介绍
在应用内购买场景中，用户会采用一次性付款的方式购买消耗型商品或非消耗型商品。请结合实际业务场景选择提供的商品类型。
在接入消耗型/非消耗型商品购买能力前，需要提前配置商品信息。用户在应用内购买时，应用拉起IAP Kit的收银台，收银台处会展示商品名称、商品价格等信息，用户根据需求完成商品购买。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170042.50821745284420431977608587022054:50001231000000:2800:6AB9523856E75DC4A45F0781D935017B72D2E038560F19AC5CEC97388696EF1A.png)
业务流程
如下业务流程对于单机应用同样适用。在单机应用中，应用服务器和应用客户端的交互放在应用客户端完成，应用服务器和IAP服务器交互的部分可不处理。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170042.59420931399419489382115599600345:50001231000000:2800:DD9582F183CA2F85EA61971411039B1B1BF7680FFD9327FBC7709783A658A593.png)
展示商品
1.  如请求失败，应用需隐藏相关IAP功能入口。
购买及结果确认
如果购买失败，请参见权益发放处理，及时发放权益。
发放权益
1.  应用成功执行此步骤后，IAP服务器会将相应商品标记为已发货状态。对于消耗型商品，IAP服务器会将相应商品重新设置为可购买状态，用户即可再次购买该商品。对于非消耗型商品，用户购买后永久拥有，无法再次购买该商品。 此步骤也可放到应用服务器处理。应用服务器可通过请求服务端订单确认发货接口来确认发货，完成购买流程。 确保在发货成功之后再执行此步骤，否则可能导致IAP服务器已经确认发货但是应用没有发货的问题。
开发步骤
展示商品
1.  在使用应用内支付之前，应用客户端需要向IAP Kit发送queryEnvironmentStatus请求，以此判断用户当前登录的华为账号所在的服务地是否在IAP Kit支持结算的国家/地区中。如请求失败，则隐藏相关IAP功能入口。 当前IAP Kit支持结算的国家/地区仅有中国大陆。
```typescript
import { iap } from '@kit.IAPKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
queryEnvironmentStatus() {
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.queryEnvironmentStatus(context).then(() => {
// 请求成功
console.info('Succeeded in querying environment status.');
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query environment status. Code is ${err.code}, message is ${err.message}`);
});
}
```
1.  应用客户端通过queryProducts来获取在AppGallery Connect上配置的商品信息。发起请求时，需在请求参数QueryProductsParameter中携带相关的商品ID，并根据实际配置指定其商品类型productType。 queryProducts每次只能查询一种商品类型的商品，每次最多查询200个商品，否则请求将报错。
```typescript
import { iap } from '@kit.IAPKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
queryProducts() {
const queryProductParam: iap.QueryProductsParameter = {
// iap.ProductType.CONSUMABLE：消耗型商品
// iap.ProductType.NONCONSUMABLE：非消耗型商品
productType: iap.ProductType.CONSUMABLE,
// productIds中的商品需要替换成开发者在AppGallery Connect网站配置的商品
productIds: ['ohos_consume_001']
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.queryProducts(context, queryProductParam).then((result) => {
// 请求成功
console.info('Succeeded in querying products.');
// 展示商品信息
// ...
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query products. Code is ${err.code}, message is ${err.message}`);
});
}
```
发起购买
用户发起购买时，应用客户端向IAP Kit发送createPurchase请求来拉起IAP Kit收银台。发起请求时，需在请求参数PurchaseParameter中携带此前已在华为AppGallery Connect网站上配置并生效的商品ID，并根据实际配置指定其productType。
开发过程中易出现频繁调用接口的现象，建议控制接口调用频度，具体可参见1001860004 接口访问过频。
```typescript
import { iap } from '@kit.IAPKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
createPurchase() {
const createPurchaseParam: iap.PurchaseParameter = {
// iap.ProductType.CONSUMABLE：消耗型商品
// iap.ProductType.NONCONSUMABLE：非消耗型商品
productType: iap.ProductType.CONSUMABLE,
// productId需要替换成开发者在AppGallery Connect网站配置商品信息时设置的“商品ID”
productId: 'ohos_consume_001'
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.createPurchase(context, createPurchaseParam).then(async (result) => {
console.info('Succeeded in creating purchase.');
// 购买成功，处理购买结果
// dealPurchaseResult实现请参见下一步
this.dealPurchaseResult(result);
}).catch((err: BusinessError) => {
// 购买失败
console.error(`Failed to create purchase. Code is ${err.code}, message is ${err.message}`);
// dealPurchaseError实现请参见下一步
this.dealPurchaseError(err);
})
}
```
购买结果处理
【结果1：购买成功】
1.  建议先检查此笔订单权益的发放状态，未发放则发放权益，成功后记录PurchaseOrderPayload等信息，用于后续检查权益发放状态。
2.  发放权益后，应用客户端需要发送finishPurchase请求确认发货，以此通知IAP服务器更新商品的发货状态，完成购买流程。发送finishPurchase请求时，需在请求参数FinishPurchaseParameter中携带PurchaseOrderPayload中的productType、purchaseToken、purchaseOrderId。 应用成功执行此步骤后，IAP服务器会将相应商品标记为已发货状态。对于消耗型商品，IAP服务器会将相应商品重新设置为可购买状态，用户即可再次购买该商品。对于非消耗型商品，用户购买后永久拥有，无法再次购买该商品。
```typescript
import { iap } from '@kit.IAPKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
// JWSUtil为自定义类，可参见示例代码
import { JWSUtil } from '../common/JWSUtil';
dealPurchaseResult(result: iap.CreatePurchaseResult) {
const jwsPurchaseOrder: string = JSON.parse(result.purchaseData).jwsPurchaseOrder;
if (!jwsPurchaseOrder) {
return;
}
// 对jwsPurchaseOrder进行解码验签
const purchaseStr = JWSUtil.decodeJwsObj(jwsPurchaseOrder);
// 需自定义PurchaseOrderPayload类，包含的信息请参见PurchaseOrderPayload
const purchaseOrderPayload = JSON.parse(purchaseStr) as PurchaseOrderPayload;
// 处理发货
// ...
// 发货成功后向IAP Kit发送finishPurchase请求，确认发货，完成购买
// finishPurchase请求的参数来源于purchaseOrderPayload
this.finishPurchase(purchaseOrderPayload);
}
/**
* 确认发货，完成购买
*
* @param purchaseOrder 订单信息，来源于购买请求
*/
finishPurchase(purchaseOrder: PurchaseOrderPayload) {
const finishPurchaseParam: iap.FinishPurchaseParameter = {
productType: Number(purchaseOrder.productType),
purchaseToken: purchaseOrder.purchaseToken,
purchaseOrderId: purchaseOrder.purchaseOrderId
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.finishPurchase(context, finishPurchaseParam).then(() => {
// 请求成功
console.info('Succeeded in finishing purchase.');
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to finish purchase. Code is ${err.code}, message is ${err.message}`);
});
}
```
【结果2：购买失败】
当用户购买失败时，需要针对code为iap.IAPErrorCode.PRODUCT_OWNED和iap.IAPErrorCode.SYSTEM_ERROR的场景，检查是否需要补发货，确保权益发放，具体请参见权益发放。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-delivering-products-V14
爬取时间: 2025-04-29 20:56:59
来源: Huawei Developer
场景介绍
应用在收到用户购买消耗型/非消耗型商品成功的结果后，需要发放相关权益，并在权益发放后，向IAP Kit确认发货，完成购买流程，具体实现请参见接入购买。此外，还需要补充如下处理，确保权益发放：
确保权益发放
用户购买商品后，开发者需要及时发放相关权益。但实际应用场景中，若出现异常（网络错误、进程被中止等）将导致应用无法知道用户实际是否支付成功，从而无法及时发放权益，即出现掉单情况。为了确保权益发放，需要在以下场景检查用户是否存在已购未发货的商品：
如果存在已购未发货商品，则发放相关权益，然后向IAP Kit确认发货，完成购买。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170043.87168963916707169974711775560784:50001231000000:2800:BC09EFE9E35F64EFC84DE329E40E54AC25EC7DC815C2C155A13278727C38843B.png)
1.  确保在发货成功之后再执行此步骤，否则可能导致IAP服务器已经确认发货但是应用没有发货的问题。
开发步骤
1.  在请求参数QueryPurchasesParameter中指定对应的productType，同时指定queryType为iap.PurchaseQueryType.UNFINISHED。当接口请求成功时，IAP Kit将返回一个QueryPurchaseResult对象，该对象包含承载了订单信息的PurchaseData的列表。
2.  建议先检查此笔订单权益的发放状态，未发放则发放权益，成功后记录PurchaseOrderPayload等信息，用于后续检查权益发放状态。
3.  发起请求时，需在请求参数FinishPurchaseParameter中携带PurchaseOrderPayload中的productType、purchaseToken、purchaseOrderId。 请求成功后，IAP服务器会将相应商品标记为已发货状态。对于消耗型商品，IAP服务器会将相应商品重新设置为可购买状态，用户即可再次购买该商品。对于非消耗型商品，用户购买后永久拥有，无法再次购买该商品。
```typescript
import { iap } from '@kit.IAPKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
// JWSUtil为自定义类，可参见示例代码
import { JWSUtil } from '../common/JWSUtil';
queryPurchases() {
const param: iap.QueryPurchasesParameter = {
productType: iap.ProductType.CONSUMABLE,
queryType: iap.PurchaseQueryType.UNFINISHED
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.queryPurchases(context, param).then((res: iap.QueryPurchaseResult) => {
console.info('Succeeded in querying purchases.');
const purchaseDataList: string[] = res.purchaseDataList;
if (purchaseDataList === undefined || purchaseDataList.length <= 0) {
return;
}
for (let i = 0; i < purchaseDataList.length; i++) {
const jwsPurchaseOrder: string = JSON.parse(purchaseDataList[i]).jwsPurchaseOrder;
if (!jwsPurchaseOrder) {
continue;
}
const purchaseStr = JWSUtil.decodeJwsObj(jwsPurchaseOrder);
// 需自定义PurchaseOrderPayload类，包含的信息请参见PurchaseOrderPayload
const purchaseOrderPayload = JSON.parse(purchaseStr) as PurchaseOrderPayload;
// 处理发货
// ...
// 发货成功后向IAP Kit发送finishPurchase请求，确认发货，完成购买
this.finishPurchase(purchaseOrderPayload);
}
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query purchases. Code is ${err.code}, message is ${err.message}`);
});
}
finishPurchase(purchaseOrder: PurchaseOrderPayload) {
const finishPurchaseParam: iap.FinishPurchaseParameter = {
productType: Number(purchaseOrder.productType),
purchaseToken: purchaseOrder.purchaseToken,
purchaseOrderId: purchaseOrder.purchaseOrderId
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.finishPurchase(context, finishPurchaseParam).then(() => {
// 请求成功
console.info('Succeeded in finishing purchase.');
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query purchases. Code is ${err.code}, message is ${err.message}`);
});
}
```
单机应用权益发放（非消耗型商品）
用户在购买非消耗型商品后，将永久拥有该商品的权益。应用需要在用户购买非消耗型商品后，始终为其发放相关权益。
请在以下场景获取用户已购非消耗型商品的信息，并发放相关权益。
开发步骤
1.  在请求参数QueryPurchasesParameter中指定productType为iap.ProductType.NONCONSUMABLE，同时指定queryType为iap.PurchaseQueryType.CURRENT_ENTITLEMENT。当接口请求成功时，IAP Kit将返回一个QueryPurchaseResult对象，该对象包含承载了订单信息的PurchaseData的列表。
2.  发起请求时，需在请求参数FinishPurchaseParameter中携带PurchaseOrderPayload中的productType、purchaseToken、purchaseOrderId。 请求成功后，IAP服务器会将相应商品标记为已发货。对于非消耗型商品，用户购买后永久拥有，无法再次购买该商品。
```typescript
import { iap } from '@kit.IAPKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
// JWSUtil为自定义类，可参见示例代码
import { JWSUtil } from '../common/JWSUtil';
queryPurchases() {
const param: iap.QueryPurchasesParameter = {
productType: iap.ProductType.NONCONSUMABLE,
queryType: iap.PurchaseQueryType.CURRENT_ENTITLEMENT
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.queryPurchases(context, param).then((res: iap.QueryPurchaseResult) => {
console.info('Succeeded in querying purchases.');
const purchaseDataList: string[] = res.purchaseDataList;
if (purchaseDataList === undefined || purchaseDataList.length <= 0) {
return;
}
for (let i = 0; i < purchaseDataList.length; i++) {
const jwsPurchaseOrder: string = JSON.parse(purchaseDataList[i]).jwsPurchaseOrder;
if (!jwsPurchaseOrder) {
continue;
}
// 对jwsPurchaseOrder进行解码验签
const purchaseStr = JWSUtil.decodeJwsObj(jwsPurchaseOrder);
// 需自定义PurchaseOrderPayload类，包含的信息请参见PurchaseOrderPayload
const purchaseOrderPayload = JSON.parse(purchaseStr) as PurchaseOrderPayload;
// 处理权益发放
// ...
// 发放权益后向IAP Kit发送finishPurchase请求，确认发货，完成购买
if (purchaseOrderPayload && purchaseOrderPayload.finishStatus !== '1') {
this.finishPurchase(purchaseOrderPayload);
}
}
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query purchases. Code is ${err.code}, message is ${err.message}`);
});
}
finishPurchase(purchaseOrder: PurchaseOrderPayload) {
const finishPurchaseParam: iap.FinishPurchaseParameter = {
productType: Number(purchaseOrder.productType),
purchaseToken: purchaseOrder.purchaseToken,
purchaseOrderId: purchaseOrder.purchaseOrderId
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.finishPurchase(context, finishPurchaseParam).then(() => {
// 请求成功
console.info('Succeeded in finishing purchase.');
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query purchases. Code is ${err.code}, message is ${err.message}`);
});
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-subscription-V14
爬取时间: 2025-04-29 20:57:13
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-subscription-functions-V14
爬取时间: 2025-04-29 20:57:27
来源: Huawei Developer
订阅是指用户在购买自动续期订阅商品后，可以在一段时间访问App的增值功能或内容，并且会在订阅周期结束后自动续期（自动购买下一期服务）的能力。如果期间用户取消订阅，则订阅在当期结束后将不再自动续期。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170043.70461845263911850404181519974219:50001231000000:2800:FA560DDB3C1097B15DF22DBE57A383BE074B6CFD7DC8191AB5F9117C77CBA091.png)
配置自动续期订阅商品
订阅组
自动续期订阅商品由订阅组来管理维护，所以在创建自动续期订阅商品前，需要先创建订阅组，并在创建自动续期订阅商品时指定商品所在的订阅组。
订阅组机制为开发者提供了便捷方式，让商品服务大致相同但有细微差别的需求得以快速实现。
续费周期
当前自动续期订阅商品的续费周期可选值有1周、30天、31天、1个月、2个月、3个月、6个月和12个月，具体配置方法请参见配置商品信息。
保留期
当用户的订阅因取消、续期扣费失败等原因而失效时，该订阅将进入最长180天的保留期。在此期间，用户无法使用订阅服务。不过，如果用户在保留期内恢复订阅，即可立即恢复使用该订阅的所有权益。
订阅状态及变更
订阅状态
| 订阅状态 | 是否生效 | 说明 |
| --- | --- | --- |
| 待生效 | 否 | 订阅还未开始生效，用户暂时还无法享受该自动续期订阅商品的服务（该状态订阅不支持查询）。 当用户在订阅组内进行切换订阅时，如果切换到一个下周期生效的订阅，则原订阅会变为将到期状态，而新切换的商品为待生效状态。用户可在原商品的订阅详情页内查看新切换商品的开始时间。 |
| 生效中 | 是 | 续期：将在当前订阅周期结束后自动续期。 将到期：在当前订阅周期结束后不会自动续期。 |
| 已到期 | 否 | 最近一次的续期扣费没有成功、用户取消订阅、用户不同意涨价或者是扣款账户发生了异常等均可导致订阅进入该状态。此外，该订阅会进入保留期。 |
| 尝试扣费 | 否 | 订阅快要到期或到期一段时间内系统会自动按一定周期尝试扣费续期。 |
| 撤销 | 否 | 撤销订阅成功，订阅权益会立即取消（用户及开发者无权限操作）。 |
订阅状态
是否生效
说明
待生效
否
订阅还未开始生效，用户暂时还无法享受该自动续期订阅商品的服务（该状态订阅不支持查询）。
当用户在订阅组内进行切换订阅时，如果切换到一个下周期生效的订阅，则原订阅会变为将到期状态，而新切换的商品为待生效状态。用户可在原商品的订阅详情页内查看新切换商品的开始时间。
生效中
是
续期：将在当前订阅周期结束后自动续期。
将到期：在当前订阅周期结束后不会自动续期。
已到期
否
最近一次的续期扣费没有成功、用户取消订阅、用户不同意涨价或者是扣款账户发生了异常等均可导致订阅进入该状态。此外，该订阅会进入保留期。
尝试扣费
否
订阅快要到期或到期一段时间内系统会自动按一定周期尝试扣费续期。
撤销
否
撤销订阅成功，订阅权益会立即取消（用户及开发者无权限操作）。
订阅状态变更
用户在成功购买自动续期订阅商品后，订阅会变为续期状态。当发生如下操作时，订阅的状态会随之改变。
| 状态变更 | 说明 |
| --- | --- |
| 取消订阅 | 对已购自动续期订阅商品进行取消操作。取消成功，则订阅将不会进行下一周期的续费，但不影响当期订阅的使用。 |
| 恢复订阅 | 对于处于到期、已到期的订阅，用户可以恢复订阅，以再次享受订阅对应的服务。 |
| 切换订阅 | 对已购自动续期订阅商品，进行同一个订阅组不同自动续期订阅商品的切换操作，有如下两种切换效果：  立即生效的切换订阅（原订阅无保留期）：用户原订阅的剩余金额将折算成新订阅的天数，延长新订阅的有效期。目前这种切换效果的触发场景为：             订阅升级：新订阅的订阅等级高于原订阅 新订阅与原订阅的订阅等级相同，且原订阅的续费周期和新订阅的续费周期相同  下周期生效的切换订阅：原订阅设置为将到期状态，新订阅为待生效状态，新订阅会在原订阅的失效日期开始扣费并生效。目前这种切换效果的触发场景为：             订阅降级：新订阅的订阅等级低于原订阅 新订阅与原订阅的订阅等级相同，且原订阅的续费周期和新订阅的续费周期不同   |
状态变更
说明
取消订阅
对已购自动续期订阅商品进行取消操作。取消成功，则订阅将不会进行下一周期的续费，但不影响当期订阅的使用。
恢复订阅
对于处于到期、已到期的订阅，用户可以恢复订阅，以再次享受订阅对应的服务。
切换订阅
对已购自动续期订阅商品，进行同一个订阅组不同自动续期订阅商品的切换操作，有如下两种切换效果：
具体订阅状态的变化如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170043.01145161268039957925491840594317:50001231000000:2800:03AAFAA0563EF9589D4945BF24E1D91E3DED1FA9AC3132730502CB717D3125EB.png)
让用户管理订阅
应用可以通过iap.showManagedSubscriptions接口跳转到订阅页或订阅详情页，让用户管理订阅，包括查看订阅、取消订阅、切换订阅、恢复订阅等。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170043.98310190959846358482715905324221:50001231000000:2800:54477D6BCE2359033A612809B40C45E4C4C5AFDB6388757BD3109431CAA9DA56.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170044.63998711689056311610406621850338:50001231000000:2800:F0906FC4ACABAF832C03F2BC2A4728E2F185F6A53B3FE9C0514A2B41A175D579.png)
订阅续期处理
订阅的下一个续期价格（包括原价、涨价和降价）是在续期前10天确定的。对于订阅周期为1周的自动续期订阅商品，在当期续期成功后即开始确认下一次续期的价格，如果在确认价格后调整价格，那么下一次续期时仍然按照原价格进行，再下一期则按新的价格进行续期。
在订阅周期结束前24小时，IAP服务器会尝试向用户发起扣款以完成自动续期订阅商品的续期。若扣费失败，IAP服务器会在一定期限内重新尝试扣费，从而恢复订阅。
因扣费失败而失效的订阅，系统将自动重试扣费，并在一定的时间窗后结束重试。
提供优惠
为了提供更有吸引力的自动续期订阅商品购买，自动续期订阅商品提供了两种促销类型。
-  适用于自动续期订阅商品的促销价格。开发者可以指定优惠持续时间和类型（免费试用、按周期扣费），可用于吸引新用户。 推介促销规则：
-  可以针对用户群体、优惠地域进行自定义选择，支持开发者进行个性化的优惠活动配置。开发者可以在发起购买前，查询该商品的优惠活动信息，在最终发起购买时，将优惠活动信息传递到华为应用内支付，最终将优惠活动信息展示给用户。 优惠促销规则： 当前优惠促销涉及生成订阅优惠签名购买参数处理，推荐具备服务器的开发者接入使用。
设置促销时，除了要选择促销类型，还需为每项促销选择以下任一一种付费模式。
具体配置方法请参见配置商品信息。
修改自动续期订阅商品
调整自动续期订阅商品价格
开发者可以为每个自动续期订阅商品降低或提高价格，具体配置可参见修改订阅类商品。
处理自动续期订阅商品下架
在处理自动续期订阅商品的下架时，需要考虑对用户的影响。
接收订阅关键事件的通知
如果开发者提前配置了通知接收地址，用户购买自动续期订阅商品后，IAP服务器会在订阅场景的某些关键事件发生时调用此接口通知配置的服务器，具体请参见服务端关键事件通知。主要涉及的场景如下：
若开发者服务器返回结果为非成功响应（请求返回的HTTP状态码不为200），将对本次关键事件的通知进行周期性重发。建议在服务器收到通知后立即返回成功响应，避免通知消息堆积。
多角色应用接入订阅专项说明
用户购买订阅型商品时使用的账号是华为账号，一个华为账号在同一订阅商品上只能同时存在一笔订阅。如果应用存在多角色，可能会存在权益发放错乱的现象。针对这个场景建议的处理方案如下：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-integrate-subscription-V14
爬取时间: 2025-04-29 20:57:40
来源: Huawei Developer
业务流程
如下业务流程对于单机应用同样适用。在单机应用中，应用服务器和应用客户端的交互放在应用客户端完成，应用服务器和IAP服务器交互的部分可不处理。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170044.92685860894271246007831381603642:50001231000000:2800:1F06670053E433E720DEEA06BE86A4D7E1651EC66D9E2D43E8F2EA95F4A9B7C0.png)
1.  如请求失败，应用需隐藏相关IAP功能入口。
1.  此步骤也可放到应用服务器处理。应用服务器可通过请求服务端订阅确认发货接口来确认发货，完成购买流程。
具体请参见对生效中的订阅发放权益。
1.  方式一：通过客户端接收购买结果
如果购买失败，请参见确保权益发放处理，及时发放权益。
发放权益
1.  建议单机应用将用户权益和订阅状态关联。如果订阅处于生效状态，始终为用户发放权益。
2.  此步骤也可放到应用服务器处理。应用服务器可通过请求服务端订阅确认发货接口来确认发货，完成购买流程。
开发步骤
展示商品
1.  在使用应用内支付之前，应用客户端需要向IAP Kit发送queryEnvironmentStatus请求，以此判断用户当前登录的华为账号所在的服务地是否在IAP Kit支持结算的国家/地区中。如请求失败，则隐藏相关IAP功能入口。 当前IAP Kit支持结算的国家/地区仅有中国大陆。
```typescript
import { iap } from '@kit.IAPKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
queryEnvironmentStatus() {
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.queryEnvironmentStatus(context).then(() => {
// 请求成功
console.info('Succeeded in querying environment status.');
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query environment status. Code is ${err.code}, message is ${err.message}`);
});
}
```
1.  应用客户端通过queryProducts来获取在AppGallery Connect上配置的商品信息。发起请求时，需在请求参数QueryProductsParameter中携带相关的商品ID，并指定其productType为iap.ProductType.AUTORENEWABLE。 queryProducts每次只能查询一种商品类型的商品，每次最多查询200个商品，否则请求将报错。
```typescript
import { iap } from '@kit.IAPKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
queryProducts() {
const queryProductParam: iap.QueryProductsParameter = {
productType: iap.ProductType.AUTORENEWABLE,
// productIds中的商品需要替换成开发者在AppGallery Connect网站配置的商品
productIds: ['product1', 'product2', 'product3']
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.queryProducts(context, queryProductParam).then((result) => {
// 请求成功
console.info('Succeeded in querying products.');
// 展示商品信息
// ...
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query products. Code is ${err.code}, message is ${err.message}`);
});
}
```
展示订阅状态、发放权益
具体可参见对生效中的订阅发放权益。
发起购买
用户发起购买时，应用可通过向IAP Kit发送createPurchase请求来拉起IAP Kit收银台。发起请求时，应用需在请求参数PurchaseParameter中携带此前已在华为AppGallery Connect网站上配置并生效的自动续期订阅的商品ID，并指定其productType为iap.ProductType.AUTORENEWABLE。
开发过程中易出现频繁调用接口的现象，建议控制接口调用频度，具体可参见1001860004 接口访问过频。
```typescript
import { iap } from '@kit.IAPKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
subscribe() {
const createPurchaseParam: iap.PurchaseParameter = {
productType: iap.ProductType.AUTORENEWABLE,
// productId需要替换成开发者在AppGallery Connect网站配置商品信息时设置的“商品ID”
productId: 'test001'
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.createPurchase(context, createPurchaseParam).then(async (result) => {
console.info('Succeeded in creating purchase.');
// 购买成功，处理购买结果
// dealPurchaseResult实现请参见下一步
this.dealPurchaseResult(result);
}).catch((err: BusinessError) => {
// 购买失败
console.error(`Failed to create purchase. Code is ${err.code}, message is ${err.message}`);
// dealPurchaseError实现请参见下一步
this.dealPurchaseError(err);
})
}
```
购买结果处理
【结果1：购买成功】
以下内容为通过客户端接收购买结果及处理的步骤说明。
1.  建议先检查此笔订单权益的发放状态，未发放则发放权益，成功后记录SubGroupStatusPayload.lastSubscriptionStatus.lastPurchaseOrder等信息，用于后续检查权益发放状态。
2.  发放权益后，应用需发送finishPurchase请求确认发货，以此通知IAP服务器更新商品的发货状态，完成购买流程。发送finishPurchase请求时，需在请求参数FinishPurchaseParameter中携带PurchaseOrderPayload中的productType、purchaseToken、purchaseOrderId，其中PurchaseOrderPayload为SubGroupStatusPayload.lastSubscriptionStatus.lastPurchaseOrder。请求成功后，IAP服务器会将相应商品标记为已发货。
```typescript
import { iap } from '@kit.IAPKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
// JWSUtil为自定义类，可参见示例代码
import { JWSUtil } from '../common/JWSUtil';
dealPurchaseResult(result: iap.CreatePurchaseResult) {
const jwsSubscriptionStatus: string = JSON.parse(result.purchaseData).jwsSubscriptionStatus;
if (!jwsSubscriptionStatus) {
return;
}
const subscriptionStatus: string = JWSUtil.decodeJwsObj(jwsSubscriptionStatus);
if (!subscriptionStatus) {
return;
}
// 需自定义SubGroupStatusPayload类，包含的信息请参见SubGroupStatusPayload
const subGroupStatusPayload: SubGroupStatusPayload = JSON.parse(subscriptionStatus);
const lastSubscriptionStatus = subGroupStatusPayload.lastSubscriptionStatus;
if (!lastSubscriptionStatus || lastSubscriptionStatus.status !== '1') {
return;
}
const purchaseOrderPayload = lastSubscriptionStatus.lastPurchaseOrder;
if (purchaseOrderPayload === undefined) {
return;
}
// 处理发货
// ...
// 发货成功后向IAP Kit发送finishPurchase请求，确认发货，完成购买
this.finishPurchase(purchaseOrderPayload);
}
/**
* 确认发货，完成购买
*
* @param purchaseOrder 订单信息，来源于购买请求
*/
finishPurchase(purchaseOrder: PurchaseOrderPayload) {
const finishPurchaseParam: iap.FinishPurchaseParameter = {
productType: Number(purchaseOrder.productType),
purchaseToken: purchaseOrder.purchaseToken,
purchaseOrderId: purchaseOrder.purchaseOrderId
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.finishPurchase(context, finishPurchaseParam).then(() => {
// 请求成功
console.info('Succeeded in finishing purchase.');
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to finish purchase. Code is ${err.code}, message is ${err.message}`);
});
}
```
【结果2：购买失败】
当用户购买失败时，需要针对code为iap.IAPErrorCode.PRODUCT_OWNED和iap.IAPErrorCode.SYSTEM_ERROR的场景，检查是否需要补发货，确保权益发放，具体请参见确保权益发放。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-delivering-subscriptions-V14
爬取时间: 2025-04-29 20:57:54
来源: Huawei Developer
对生效中的订阅发放权益
场景介绍
用户购买自动续期订阅商品后，若订阅处于生效状态，开发者需要及时给用户发放对应权益。
在应用启动时，获取用户当前处于生效状态的订阅列表，处理此部分订阅的权益发放。建议先检查当前订阅对应权益的发放状态，未发放再补充发放权益。在权益发放成功后，向IAP确认发货，完成购买。
建议单机应用将用户权益和订阅状态关联。如果订阅处于生效状态，始终为用户发放权益。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170045.81831105882140596494255115598472:50001231000000:2800:4F54E0D44F86F3CF503C3D3EA837EE15A99EEF148D73D588542B0EC5EFA5B304.png)
1.  建议单机应用将用户权益和订阅状态关联。如果订阅处于生效状态，始终为用户发放权益。
2.  此步骤也可放到应用服务器处理。应用服务器可通过请求服务端订阅确认发货接口来确认发货，完成购买流程。
开发步骤
1.  在请求参数QueryPurchasesParameter中指定productType为iap.ProductType.AUTORENEWABLE，同时指定queryType为iap.PurchaseQueryType.CURRENT_ENTITLEMENT。当接口请求成功时，IAP Kit将返回一个QueryPurchaseResult对象，该对象包含承载了订阅信息的PurchaseData的列表。
2.  为了提高安全性，可从SubGroupStatusPayload.lastSubscriptionStatus.lastPurchaseOrder中解析出purchaseToken和purchaseOrderId信息，并通过服务端订阅状态查询接口向IAP服务器查询最新的订阅状态信息，进一步确认订阅信息的准确性。
3.  可先检查此笔订单权益的发放状态，未发放则补充发放权益，成功后记录PurchaseOrderPayload等信息，用于后续检查权益发放状态。 建议单机应用将用户权益和订阅状态关联。如果订阅处于生效状态，始终为用户发放权益。
4.  发起请求时，需在请求参数FinishPurchaseParameter中携带PurchaseOrderPayload中的productType、purchaseToken、purchaseOrderId。请求成功后，IAP服务器会将相应商品标记为已发货。 此步骤也可放到应用服务器处理。应用服务器可通过请求服务端订阅确认发货接口来确认发货，完成购买流程。
```typescript
import { iap } from '@kit.IAPKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
// JWSUtil为自定义类，可参见示例代码
import { JWSUtil } from '../common/JWSUtil';
queryPurchases() {
const param: iap.QueryPurchasesParameter = {
productType: iap.ProductType.AUTORENEWABLE,
queryType: iap.PurchaseQueryType.CURRENT_ENTITLEMENT
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.queryPurchases(context, param).then((res: iap.QueryPurchaseResult) => {
console.info('Succeeded in querying purchases.');
const purchaseDataList: string[] = res.purchaseDataList;
if (purchaseDataList === undefined || purchaseDataList.length <= 0) {
return;
}
for (let i = 0; i < purchaseDataList.length; i++) {
const jwsSubscriptionStatus: string = JSON.parse(purchaseDataList[i]).jwsSubscriptionStatus;
if (!jwsSubscriptionStatus) {
continue;
}
// 对jwsSubscriptionStatus进行解码验签
const subscriptionStatus: string = JWSUtil.decodeJwsObj(jwsSubscriptionStatus);
// 需自定义SubGroupStatusPayload类，包含的信息请参见SubGroupStatusPayload
const subGroupStatusPayload: SubGroupStatusPayload = JSON.parse(subscriptionStatus);
const lastSubscriptionStatus = subGroupStatusPayload.lastSubscriptionStatus;
if (!lastSubscriptionStatus) {
continue;
}
// 根据status和renewalInfo判断订阅的状态
const status = lastSubscriptionStatus.status;
const renewalInfo = lastSubscriptionStatus.renewalInfo;
// 更新商品的订阅状态
// ...
// 处理权益发放
const purchaseOrderPayload = lastSubscriptionStatus.lastPurchaseOrder;
if (purchaseOrderPayload === undefined) {
continue;
}
if (status === '1') {
// 订阅处于生效状态
// 处理权益发放。检查此笔订单权益的发放状态，未发放则补充发放权益
// ...
}
// 发放权益后向IAP Kit发送finishPurchase请求，确认发货，完成购买
if (purchaseOrderPayload && purchaseOrderPayload.finishStatus !== '1') {
this.finishPurchase(purchaseOrderPayload);
}
}
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query purchases. Code is ${err.code}, message is ${err.message}`);
})
}
finishPurchase(purchaseOrder: PurchaseOrderPayload) {
const finishPurchaseParam: iap.FinishPurchaseParameter = {
productType: Number(purchaseOrder.productType),
purchaseToken: purchaseOrder.purchaseToken,
purchaseOrderId: purchaseOrder.purchaseOrderId
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.finishPurchase(context, finishPurchaseParam).then(() => {
// 请求成功
console.info('Succeeded in finishing purchase.');
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to finish purchase. Code is ${err.code}, message is ${err.message}`);
});
}
```
确保权益发放
用户购买自动续期订阅成功或者自动续期成功后，开发者需要及时给用户发放相关权益。但实际应用场景中，若出现异常（网络错误等）将导致应用无法知道用户实际是否支付成功，从而无法及时发放权益，即出现掉单情况。
为了确保权益发放，需要在createPurchase请求返回iap.IAPErrorCode.PRODUCT_OWNED或iap.IAPErrorCode.SYSTEM_ERROR时检查用户是否存在已购但未确认发货的商品，如果存在则发放相关权益，然后向IAP Kit确认发货，完成购买。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170045.82974929214167734018774068751576:50001231000000:2800:54C8189F6BB15695B7357DCDAB4C032D7FD67CCE9AE677747470B1756317A887.png)
1.  建议单机应用将用户权益和订阅状态关联。如果订阅处于生效状态，始终为用户发放权益。
2.  此步骤也可放到应用服务器处理。应用服务器可通过请求服务端订阅确认发货接口来确认发货，完成购买流程。
开发步骤
1.  在请求参数QueryPurchasesParameter中指定productType为iap.ProductType.AUTORENEWABLE，同时指定queryType为iap.PurchaseQueryType.UNFINISHED。当接口请求成功时，IAP Kit将返回一个QueryPurchaseResult对象，该对象包含承载了订阅信息的PurchaseData的列表。
2.  为了提高安全性，可从SubGroupStatusPayload.lastSubscriptionStatus.lastPurchaseOrder中解析出purchaseToken和purchaseOrderId信息，并通过服务端订阅状态查询接口向IAP服务器查询最新的订阅状态信息，进一步确认订阅信息的准确性。
3.  如果SubGroupStatusPayload.lastSubscriptionStatus.status=1，表示订阅处于生效状态。需要对生效状态的订阅处理权益发放。建议先检查此笔订单权益的发放状态，未发放则补充发放权益，成功后记录PurchaseOrderPayload等信息，用于后续检查权益发放状态。 建议单机应用将用户权益和订阅状态关联。如果订阅处于生效状态，始终为用户发放权益。
4.  发起请求时，需在请求参数FinishPurchaseParameter中携带PurchaseOrderPayload中的productType、purchaseToken、purchaseOrderId。请求成功后，IAP服务器会将相应商品标记为已发货。 此步骤也可放到应用服务器处理。应用服务器可通过请求服务端订阅确认发货接口来确认发货，完成购买流程。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-nonrenewable-V14
爬取时间: 2025-04-29 20:58:08
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-integrate-nonrenewable-V14
爬取时间: 2025-04-29 20:58:22
来源: Huawei Developer
场景介绍
用户在购买非续期订阅商品后，可以在一段时间访问App的增值功能或内容，周期结束后禁止访问，除非再次购买自动续期订阅或非续期订阅商品。
在接入非续期订阅商品购买能力前，需要提前配置商品信息。用户在应用内购买时，应用拉起IAP Kit的收银台，收银台处会展示商品名称、商品价格等信息，用户根据需求完成商品购买。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170045.81026430373307125695935996870033:50001231000000:2800:422A2D3F73275E193C768E233596A9D912B0724E1E7778EB868837FE16397E7C.png)
业务流程
如下业务流程对于单机应用同样适用。在单机应用中，应用服务器和应用客户端的交互放在应用客户端完成，应用服务器和IAP服务器交互的部分可不处理。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170045.13652174454420271262779557494537:50001231000000:2800:73E3AD4937C49B6B89FC64E09707C9D8335AE9A8585C8EFABD659965E4CCA26B.png)
展示商品
1.  如请求失败，应用需隐藏相关IAP功能入口。
购买及结果确认
如果购买失败，请参见权益发放处理，及时发放权益。
发放权益
1.  应用成功执行此步骤后，IAP服务器会将相应商品标记为已发货状态。对于非续期订阅商品，IAP服务器会将相应商品重新设置为可购买状态，用户即可再次购买该商品（商品权益时长是否叠加由开发者自行管理）。
开发步骤
展示商品
1.  在使用应用内支付之前，应用客户端需要向IAP Kit发送queryEnvironmentStatus请求，以此判断用户当前登录的华为账号所在的服务地是否在IAP Kit支持结算的国家/地区中。如请求失败，则隐藏相关IAP功能入口。 当前IAP Kit支持结算的国家/地区仅有中国大陆。
```typescript
import { iap } from '@kit.IAPKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
queryEnvironmentStatus() {
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.queryEnvironmentStatus(context).then(() => {
// 请求成功
console.info('Succeeded in querying environment status.');
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query environment status. Code is ${err.code}, message is ${err.message}`);
});
}
```
1.  应用客户端通过queryProducts来获取在AppGallery Connect上配置的商品信息。发起请求时，需在请求参数QueryProductsParameter中携带相关的商品ID，并指定其商品类型productType为NONRENEWABLE。 queryProducts每次只能查询一种商品类型的商品，每次最多查询200个商品，否则请求将报错。
```typescript
import { iap } from '@kit.IAPKit';
import { BusinessError } from '@kit.BasicServicesKit';
queryProducts() {
const queryProductParam: iap.QueryProductsParameter = {
// iap.ProductType.NONRENEWABLE：非续期订阅商品
productType: iap.ProductType.NONRENEWABLE,
// productIds中的商品需要替换成开发者在AppGallery Connect网站配置的商品
productIds: ['ohos_nonrenewable_001']
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.queryProducts(context, queryProductParam).then((result) => {
// 请求成功
console.info('Succeeded in querying products.');
// 展示商品信息
// ...
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query products. Code is ${err.code}, message is ${err.message}`);
});
}
```
发起购买
用户发起购买时，应用客户端向IAP Kit发送createPurchase请求来拉起IAP Kit收银台。发起请求时，需在请求参数PurchaseParameter中携带此前已在华为AppGallery Connect网站上配置并生效的商品ID，并指定productType为NONRENEWABLE。
开发过程中易出现频繁调用接口的现象，建议控制接口调用频度，具体可参见1001860004 接口访问过频。
```typescript
import { iap } from '@kit.IAPKit';
import { BusinessError } from '@kit.BasicServicesKit';
createPurchase() {
const createPurchaseParam: iap.PurchaseParameter = {
// iap.ProductType.NONRENEWABLE：非续期订阅商品
productType: iap.ProductType.NONRENEWABLE,
// productId需要替换成开发者在AppGallery Connect网站配置商品信息时设置的“商品ID”
productId: 'ohos_nonrenewable_001'
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.createPurchase(context, createPurchaseParam).then(async (result) => {
console.info('Succeeded in creating purchase.');
// 购买成功，处理购买结果
// dealPurchaseResult实现请参见下一步
this.dealPurchaseResult(result);
}).catch((err: BusinessError) => {
// 购买失败
console.error(`Failed to create purchase. Code is ${err.code}, message is ${err.message}`);
// dealPurchaseError实现请参见下一步
this.dealPurchaseError(err);
})
}
```
购买结果处理
【结果1：购买成功】
1.  建议先检查此笔订单权益的发放状态，未发放则发放权益，成功后记录PurchaseOrderPayload等信息，用于后续检查权益发放状态。
2.  发放权益后，应用客户端需要发送finishPurchase请求确认发货，以此通知IAP服务器更新商品的发货状态，完成购买流程。发送finishPurchase请求时，需在请求参数FinishPurchaseParameter中携带PurchaseOrderPayload中的productType、purchaseToken、purchaseOrderId。 应用成功执行此步骤后，IAP服务器会将相应商品标记为已发货状态。对于非续期订阅商品，IAP服务器会将相应商品重新设置为可购买状态，用户即可再次购买该商品。
```typescript
import { iap } from '@kit.IAPKit';
import { BusinessError } from '@kit.BasicServicesKit';
// JWTUtil为自定义类，可参见示例代码
import { JWTUtil } from '../common/JWTUtil';
dealPurchaseResult(result: iap.CreatePurchaseResult) {
const jwsPurchaseOrder: string = JSON.parse(result.purchaseData).jwsPurchaseOrder;
if (!jwsPurchaseOrder) {
return;
}
// 对jwsPurchaseOrder进行解码验签
const purchaseStr = JWTUtil.decodeJwtObj(jwsPurchaseOrder);
// 需自定义PurchaseOrderPayload类，包含的信息请参见PurchaseOrderPayload
const purchaseOrderPayload = JSON.parse(purchaseStr) as PurchaseOrderPayload;
// 处理发货
// ...
// 发货成功后向IAP Kit发送finishPurchase请求，确认发货，完成购买
// finishPurchase请求的参数来源于purchaseOrderPayload
this.finishPurchase(purchaseOrderPayload);
}
/**
* 确认发货，完成购买
*
* @param purchaseOrder 订单信息，来源于购买请求
*/
finishPurchase(purchaseOrder: PurchaseOrderPayload) {
const finishPurchaseParam: iap.FinishPurchaseParameter = {
productType: Number(purchaseOrder.productType),
purchaseToken: purchaseOrder.purchaseToken,
purchaseOrderId: purchaseOrder.purchaseOrderId
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.finishPurchase(context, finishPurchaseParam).then(() => {
// 请求成功
console.info('Succeeded in finishing purchase.');
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to finish purchase. Code is ${err.code}, message is ${err.message}`);
});
}
```
【结果2：购买失败】
当用户购买失败时，需要针对code为iap.IAPErrorCode.PRODUCT_OWNED和iap.IAPErrorCode.SYSTEM_ERROR的场景，检查是否需要补发货，确保权益发放，具体请参见权益发放。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-delivering-nonrenewable-V14
爬取时间: 2025-04-29 20:58:35
来源: Huawei Developer
场景介绍
用户购买商品后，开发者需要及时发放相关权益。但实际应用场景中，若出现异常（网络错误、进程被中止等）将导致应用无法知道用户实际是否支付成功，从而无法及时发放权益，即出现掉单情况。为了确保权益发放，需要在以下场景检查用户是否存在已购未发货的商品：
如果存在已购未发货商品，则发放相关权益，然后向IAP Kit确认发货，完成购买。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170046.39013661594504118700933588845336:50001231000000:2800:03330B1597E215FB10C03F13A9A2889CEC37E96336F3F2BC7870E84173386119.png)
1.  确保在发货成功之后再执行此步骤，否则可能导致IAP服务器已经确认发货但是应用没有发货的问题。
开发步骤
1.  在请求参数QueryPurchasesParameter中指定对应的productType为NONRENEWABLE，同时指定queryType为iap.PurchaseQueryType.UNFINISHED。当接口请求成功时，IAP Kit将返回一个QueryPurchaseResult对象，该对象包含承载了订单信息的PurchaseData的列表。
2.  建议先检查此笔订单权益的发放状态，未发放则发放权益，成功后记录PurchaseOrderPayload等信息，用于后续检查权益发放状态。
3.  发起请求时，需在请求参数FinishPurchaseParameter中携带PurchaseOrderPayload中的productType、purchaseToken、purchaseOrderId。 请求成功后，IAP服务器会将相应商品标记为已发货状态。
```typescript
import { iap } from '@kit.IAPKit';
import { BusinessError } from '@kit.BasicServicesKit';
// JWTUtil为自定义类，可参见示例代码
import { JWTUtil } from '../common/JWTUtil';
queryPurchases() {
const param: iap.QueryPurchasesParameter = {
productType: iap.ProductType.NONRENEWABLE,
queryType: iap.PurchaseQueryType.UNFINISHED
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.queryPurchases(context, param).then((res: iap.QueryPurchaseResult) => {
console.info('Succeeded in querying purchases.');
const purchaseDataList: string[] = res.purchaseDataList;
if (purchaseDataList === undefined || purchaseDataList.length <= 0) {
return;
}
for (let i = 0; i < purchaseDataList.length; i++) {
const jwsPurchaseOrder: string = JSON.parse(purchaseDataList[i]).jwsPurchaseOrder;
if (!jwsPurchaseOrder) {
continue;
}
const purchaseStr = JWTUtil.decodeJwtObj(jwsPurchaseOrder);
// 需自定义PurchaseOrderPayload类，包含的信息请参见PurchaseOrderPayload
const purchaseOrderPayload = JSON.parse(purchaseStr) as PurchaseOrderPayload;
// 处理发货
// ...
// 发货成功后向IAP Kit发送finishPurchase请求，确认发货，完成购买
this.finishPurchase(purchaseOrderPayload);
}
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query purchases. Code is ${err.code}, message is ${err.message}`);
});
}
finishPurchase(purchaseOrder: PurchaseOrderPayload) {
const finishPurchaseParam: iap.FinishPurchaseParameter = {
productType: Number(purchaseOrder.productType),
purchaseToken: purchaseOrder.purchaseToken,
purchaseOrderId: purchaseOrder.purchaseOrderId
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.finishPurchase(context, finishPurchaseParam).then(() => {
// 请求成功
console.info('Succeeded in finishing purchase.');
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query purchases. Code is ${err.code}, message is ${err.message}`);
});
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-sandbox-V14
爬取时间: 2025-04-29 20:58:49
来源: Huawei Developer
沙盒测试允许开发者在接入华为应用内支付调测过程中无需真实支付即可完成支付测试。
配置沙盒测试
-  在进行测试前，需要在AppGallery Connect中的“用户与访问”中添加测试账号，这些测试账号都是真实的华为账号。开发者在接入IAP Kit沙盒测试时，需要在测试设备上登录已配置的测试账号。添加沙盒测试账号步骤如下： 此配置需要5~10min才能生效。
-
-
1.
2.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170046.13876394661872579773767063609678:50001231000000:2800:F6498FB04F0EA58CE82C16DDAA6B1F1ACD18657CE360738551E2E87AD0107370.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170046.63340213061318589582997219767660:50001231000000:2800:7AB03F97845F4D3762EF76F786EE4C7F1E572F8522EEF7E127A3ED7A6BF1541F.png)
-  接入的应用必须是debug签名的应用。构建debug签名应用步骤如下：
沙盒测试能力未生效自检
如果配置的沙盒账号未生效，可参见配置沙盒测试检查当前是否满足沙盒测试的两个条件：
此外也可在应用中使用isSandboxActivated接口来检查当前沙盒环境不可用的原因。
测试消耗型/非消耗型商品购买
在满足沙盒测试条件下，开发者调用createPurchase接口拉起收银台，用户按照正常流程完成购买，但实际不会产生真实扣费。
如果未显示截图的提示页面，表示本次交易未进入沙盒测试环境，继续测试会实际扣费，请检查当前是否满足沙盒测试的两个条件。开发者也可在应用中使用isSandboxActivated接口来检查当前沙盒环境不可用的原因。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170046.85870652512238196881577959932686:50001231000000:2800:C49A79FF049351E7F9643B1A126D0614BA3BE255EF62E5F8F92DC7C19F34FA94.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170046.60147568924698208814148865257954:50001231000000:2800:DBCF364AAFE8AF710F5396BD23695DA4471E09815863F0E87DAC68CF87FB2C68.png)
测试自动续期订阅商品
自动续期订阅商品的购买流程和消耗型/非消耗型商品的购买流程类似，但订阅还有其他细节场景，比如续订成功或失败，续订周期时长。为了帮助开发者快速测试应用的订阅场景，沙盒环境下的订阅续订时间会比正常情况更快，引入“时光机”概念，沙盒环境中的订阅换算时间为10秒/天。比如订阅周期为1周，商品将在首次购买成功70秒后发生续期。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170047.28864788148627953555578055039868:50001231000000:2800:D3E98D143279D79EDA1C0E547D7FC4E5F1934648A3EEDB4F301B8E1FDE11CC72.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170047.67146543510705611278897439082439:50001231000000:2800:0CD2AB2B0BCFB475946659507302CE0541459C7092B82F5D20AE3BECDE81FA43.png)
测试非续期订阅商品购买
在满足沙盒测试条件下，开发者调用createPurchase接口拉起收银台，用户按照正常流程完成购买，但实际不会产生真实扣费。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170047.62378200387767636235111417828174:50001231000000:2800:72C898F2CE74B82D4A1E8744ED5FB325F6D0AB8F507922CA32C687D57829630F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170047.74094470079779481802663930312722:50001231000000:2800:350FA6E0349E670FC8F341141D994F2C37EED834A021B9A6880928645C207941.png)
清除沙盒账号的购买历史记录
开发者可以清除沙盒账号的购买历史记录，以便继续使用同一个沙盒账号进行测试。清除购买历史记录后，该测试账号在沙盒环境中产生的所有商品购买记录（包括自动续期订阅和消耗型/非消耗型商品）都将被删除，删除后该账号即可在沙盒环境中重新购买自动续期订阅商品、消耗型/非消耗型商品。清除购买历史记录后无法撤销操作。此操作不会影响生产环境数据。
清除沙盒账号购买历史记录的操作步骤如下：
1.
2.
3.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170047.97316855309550952296073003802092:50001231000000:2800:65CB66654BFF6B98735CD19364BDAF1EF1D1BDCC36C0F47C3CB30D891BAE44C2.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170047.57062483809009167493481744392298:50001231000000:2800:A4B31A7C1FCE65456E0B1A612F4A90E0203E58B7777CA277085F0EBDECF4DD95.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170047.50755379204593823565069449274172:50001231000000:2800:DE8F22CE2987242C6CA732746625DCB8B1AB7FC196EED99399D8188170EBEEAD.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-data-analysis-V14
爬取时间: 2025-04-29 20:59:03
来源: Huawei Developer
自助结算
当销售商品后，可登录开发者联盟，进入“管理中心”，点击“我的账户”，选择“收益”，进入自助结算页面，查看商品产生的收益结算单并申请结算，详情见自助结算指南。
查看和下载支付报表
当销售商品后，可登录开发者联盟，进入“管理中心”，在“我的报表 > 支付报表”中，查看或导出指定时间段内支付明细和优惠券明细。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-refund-V14
爬取时间: 2025-04-29 20:59:16
来源: Huawei Developer
当用户申请退款时，对于非游戏类应用，开发者可以在AppGallery Connect上审核退款订单，实现用户的退款。
对于游戏类应用，用户申请退款后，由华为游戏运营人员审核退款，开发者可跳过此章节。
开发者审核退款订单
开发者使用退款管理功能，需要拥有至少一个具备退款权限的角色：账号持有者、管理员、App管理员、财务。具体可查看添加成员账号。
添加完账号后，开发者可按照以下步骤审核用户的退款订单：
1.
2.
3.  同意退款：如果开发者同意退款，可在 “退款金额“下输入可退款金额，点击“同意”。在弹窗中点击“确认”，即可完成退款。 驳回退款：开发者不同意退款，可点击“驳回”，输入驳回原因，点击“确认”。 退款详情页面审核退款：开发者也可以在退款详情页面审核退款，输入退款金额后选择“同意”或“驳回”，点击提交，完成审核。 查询退款订单：点击“已完成”页签，开发者可以查看所有已处理的退款订单。 退款订单状态如下： 序号 退款订单状态 说明 1 申请已拒绝 开发者驳回退款订单。 2 申请已通过 开发者同意退款订单。 3 退款成功 开发者同意退款，且华为操作退款成功。 4 退款失败 开发者同意退款，且华为操作退款失败。 5 超期未处理 开发者未按规定时间处理退款订单时，退款订单由华为运营进行审核。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170048.92210320673514218968553083475010:50001231000000:2800:2B930C669764E255F1D6679FDCC868C9B8F64B62FB22CEBC4B7965D3525CA0A2.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170048.04918681664704476111960602335915:50001231000000:2800:E73E7A97F14A6EA62F3DE93B56E9BBDD9D834F1DE5E24147EFFA7D9BC264B7C1.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170048.13232997921222813797224387033707:50001231000000:2800:F4C1B9874656A8557BC4E4FF8208DB7F8688C1BA85A7F336C53E01AA13D66D39.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170048.74572802459057851004672769979339:50001231000000:2800:956E8D595D23CA0F8B1613AA54983900C5EE87EA58D947C4954EECECC8F347FE.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170048.69851957349304882009882715677791:50001231000000:2800:AC372A8DF7DCDF15A1ADF0D59F69278BB0DCE5CC707D936A3D567D70AE146097.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170048.88839748773608187420869368519733:50001231000000:2800:EAB3B4B46720561A4E5520020F7267C036F176AFB4EEC60CEECD6EF812A5DD16.png)
| 序号  | 退款订单状态  | 说明  |
| --- | --- | --- |
| 1  | 申请已拒绝  | 开发者驳回退款订单。  |
| 2  | 申请已通过  | 开发者同意退款订单。  |
| 3  | 退款成功  | 开发者同意退款，且华为操作退款成功。  |
| 4  | 退款失败  | 开发者同意退款，且华为操作退款失败。  |
| 5  | 超期未处理  | 开发者未按规定时间处理退款订单时，退款订单由华为运营进行审核。  |
用户申请退款
生态应用订单退款最低系统版本要求为6.16.10（可在“系统设置-华为账号-付款与账单-设置-关于”检查版本）。
若用户购买应用内数字商品后需要申请退款，可选择某笔订单后根据页面指引，提交退款信息。开发者审核完成后，用户可收到退款金额。
用户可按照以下步骤申请订单退款：
1.
2.  用户提交退款后，可点击“查看退款记录”，在“退款记录”查看所有退款订单的退款状态。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170048.18813547851820815291661473776302:50001231000000:2800:79DA98B0DD485B83EC6ECEFCDD7917E0440F6A250FC9FE33DED2FAD2AB11E86D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170048.99628337760623589167634199110520:50001231000000:2800:00DBF5FFF752699A1C250EF0CCE71C2F09DD5F0362F06BD03907F27AE0F4D843.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170048.06257971547068582240582548548397:50001231000000:2800:F445EA60D2AF0CD08D0E95FC42DA67B50A147F67E79F32667D0EC0D9B756E802.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170048.98755355879154731567363933146206:50001231000000:2800:65E31D292C28BADD2798BEB7360A43223B48A3884507E1AEBF877CB56083DD2F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170049.93300058175999091978164491455599:50001231000000:2800:20EB18A45AA7F8DB73E7D9202D0920B5A26D059AF7CD0C6F2C45F27B871DC5B5.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170049.00702636924832778549103914223874:50001231000000:2800:A6C202D5BC227C74DBEAC325174146313A6B9EC87AC43F4D25932DCDB5F4AE2D.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-faq-V14
爬取时间: 2025-04-29 20:59:30
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-faq-2-V14
爬取时间: 2025-04-29 20:59:43
来源: Huawei Developer
不可以。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-faq-3-V14
爬取时间: 2025-04-29 20:59:57
来源: Huawei Developer
长度是随钥匙规格而定的，不是定长的。后续会升级到3072位或更长，建议在数据库中使用text类型存储。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-faq-4-V14
爬取时间: 2025-04-29 21:00:11
来源: Huawei Developer
该默认价格在AppGallery Connect页面其他地方涉及商品价格展示时使用。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-faq-5-V14
爬取时间: 2025-04-29 21:00:25
来源: Huawei Developer
不会，除非开发者自己修改。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-faq-6-V14
爬取时间: 2025-04-29 21:00:39
来源: Huawei Developer
做了调整，具体调整规则请参见换算规则。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-faq-7-V14
爬取时间: 2025-04-29 21:00:53
来源: Huawei Developer
是的，现在华为开发者联盟上要求配置的就是SHA256指纹。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-faq-8-V14
爬取时间: 2025-04-29 21:01:06
来源: Huawei Developer
若开发者有架设服务器，建议在服务器执行签名校验。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-faq-11-V14
爬取时间: 2025-04-29 21:01:20
来源: Huawei Developer
不支持。同一个productId只能使用一次。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-faq-12-V14
爬取时间: 2025-04-29 21:01:34
来源: Huawei Developer
请检查开发者证书链，确保证书链的完整性，同时确保证书链中的证书在IAP服务器内置的如下92个证书中。如果证书链存在问题，请参见如何解决证书链不完整。
| #  | Alias name  | Subject DN  | Issuer DN  | Certificate Serial Number  | Version  | Valid From [GMT]  | Valid To [GMT]  | Thumbprint(SHA1)  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 1  | verisignclass2g2ca [jdk]  | OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 2 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US  | OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 2 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US  | b92f60cc889fa17a4609b85b706c8aaf  | 1  | Mon May 18 03:00:00 IDT 1998  | Wed Aug 02 02:59:59 IDT 2028  | B3:EA:C4:47:76:C9:C8:1C:EA:F2:9D:95:B6:CC:A0:08:1B:67:EC:9D  |
| 2  | digicertassuredidg3 [jdk]  | CN=DigiCert Assured ID Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Assured ID Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US  | ba15afa1ddfa0b54944afcd24a06cec  | 3  | Thu Aug 01 15:00:00 IDT 2013  | Fri Jan 15 14:00:00 IST 2038  | F5:17:A2:4F:9A:48:C6:C9:F8:A2:00:26:9F:DC:0F:48:2C:AB:30:89  |
| 3  | verisignuniversalrootca [jdk]  | CN=VeriSign Universal Root Certification Authority, OU=”(c) 2008 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | CN=VeriSign Universal Root Certification Authority, OU=”(c) 2008 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | 401ac46421b31321030ebbe4121ac51d  | 3  | Wed Apr 02 03:00:00 IDT 2008  | Wed Dec 02 01:59:59 IST 2037  | 36:79:CA:35:66:87:72:30:4D:30:A5:FB:87:3B:0F:A7:7B:B7:0D:54  |
| 4  | digicerttrustedrootg4 [jdk]  | CN=DigiCert Trusted Root G4, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Trusted Root G4, OU=www.digicert.com, O=DigiCert Inc, C=US  | 59b1b579e8e2132e23907bda777755c  | 3  | Thu Aug 01 15:00:00 IDT 2013  | Fri Jan 15 14:00:00 IST 2038  | DD:FB:16:CD:49:31:C9:73:A2:03:7D:3F:C8:3A:4D:7D:77:5D:05:E4  |
| 5  | identrustpublicca [jdk]  | CN=IdenTrust Public Sector Root CA 1, O=IdenTrust, C=US  | CN=IdenTrust Public Sector Root CA 1, O=IdenTrust, C=US  | a0142800000014523cf467c00000002  | 3  | Thu Jan 16 19:53:32 IST 2014  | Mon Jan 16 19:53:32 IST 2034  | BA:29:41:60:77:98:3F:F4:F3:EF:F2:31:05:3B:2E:EA:6D:4D:45:FD  |
| 6  | utnuserfirstobjectca [jdk]  | CN=UTN-USERFirst-Object, OU=http://www.usertrust.com, O=The USERTRUST Network, L=Salt Lake City, ST=UT, C=US  | CN=UTN-USERFirst-Object, OU=http://www.usertrust.com, O=The USERTRUST Network, L=Salt Lake City, ST=UT, C=US  | 44be0c8b500024b411d3362de0b35f1b  | 3  | Fri Jul 09 21:31:20 IDT 1999  | Tue Jul 09 21:40:36 IDT 2019  | E1:2D:FB:4B:41:D7:D9:C3:2B:30:51:4B:AC:1D:81:D8:38:5E:2D:46  |
| 7  | geotrustuniversalca [jdk]  | CN=GeoTrust Universal CA, O=GeoTrust Inc., C=US  | CN=GeoTrust Universal CA, O=GeoTrust Inc., C=US  | 1  | 3  | Thu Mar 04 07:00:00 IST 2004  | Sun Mar 04 07:00:00 IST 2029  | E6:21:F3:35:43:79:05:9A:4B:68:30:9D:8A:2F:74:22:15:87:EC:79  |
| 8  | digicertglobalrootg3 [jdk]  | CN=DigiCert Global Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Global Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US  | 55556bcf25ea43535c3a40fd5ab4572  | 3  | Thu Aug 01 15:00:00 IDT 2013  | Fri Jan 15 14:00:00 IST 2038  | 7E:04:DE:89:6A:3E:66:6D:00:E6:87:D3:3F:FA:D9:3B:E8:3D:34:9E  |
| 9  | entrustrootcaec1 [jdk]  | CN=Entrust Root Certification Authority - EC1, OU=”(c) 2012 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US  | CN=Entrust Root Certification Authority - EC1, OU=”(c) 2012 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US  | a68b79290000000050d091f9  | 3  | Tue Dec 18 17:25:36 IST 2012  | Fri Dec 18 17:55:36 IST 2037  | 20:D8:06:40:DF:9B:25:F5:12:25:3A:11:EA:F7:59:8A:EB:14:B5:47  |
| 10  | secomscrootca1 [jdk]  | OU=Security Communication RootCA1, O=SECOM Trust.net, C=JP  | OU=Security Communication RootCA1, O=SECOM Trust.net, C=JP  | 0  | 3  | Tue Sep 30 07:20:49 IDT 2003  | Sat Sep 30 07:20:49 IDT 2023  | 36:B1:2B:49:F9:81:9E:D7:4C:9E:BC:38:0F:C6:56:8F:5D:AC:B2:F7  |
| 11  | globalsignr2ca [jdk]  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R2  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R2  | 400000000010f8626e60d  | 3  | Fri Dec 15 10:00:00 IST 2006  | Wed Dec 15 10:00:00 IST 2021  | 75:E0:AB:B6:13:85:12:27:1C:04:F8:5F:DD:DE:38:E4:B7:24:2E:FE  |
| 12  | identrustdstx3 [jdk]  | CN=DST Root CA X3, O=Digital Signature Trust Co.  | CN=DST Root CA X3, O=Digital Signature Trust Co.  | 44afb080d6a327ba893039862ef8406b  | 3  | Sun Oct 01 00:12:19 IDT 2000  | Thu Sep 30 17:01:15 IDT 2021  | DA:C9:02:4F:54:D8:F6:DF:94:93:5F:B1:73:26:38:CA:6A:D7:7C:13  |
| 13  | comodoeccca [jdk]  | CN=COMODO ECC Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB  | CN=COMODO ECC Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB  | 1f47afaa62007050544c019e9b63992a  | 3  | Thu Mar 06 02:00:00 IST 2008  | Tue Jan 19 01:59:59 IST 2038  | 9F:74:4E:9F:2B:4D:BA:EC:0F:31:2C:50:B6:56:3B:8E:2D:93:C3:11  |
| 14  | entrust2048ca [jdk]  | CN=Entrust.net Certification Authority (2048), OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.), O=Entrust.net  | CN=Entrust.net Certification Authority (2048), OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.), O=Entrust.net  | 3863def8  | 3  | Fri Dec 24 19:50:51 IST 1999  | Tue Jul 24 17:15:12 IDT 2029  | 50:30:06:09:1D:97:D4:F5:AE:39:F7:CB:E7:92:7D:7D:65:2D:34:31  |
| 15  | addtrustexternalca [jdk]  | CN=AddTrust External CA Root, OU=AddTrust External TTP Network, O=AddTrust AB, C=SE  | CN=AddTrust External CA Root, OU=AddTrust External TTP Network, O=AddTrust AB, C=SE  | 1  | 3  | Tue May 30 13:48:38 IDT 2000  | Sat May 30 13:48:38 IDT 2020  | 02:FA:F3:E2:91:43:54:68:60:78:57:69:4D:F5:E4:5B:68:85:18:68  |
| 16  | globalsigneccrootcar4 [jdk]  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R4  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R4  | 2a38a41c960a04de42b228a50be8349802  | 3  | Tue Nov 13 02:00:00 IST 2012  | Tue Jan 19 05:14:07 IST 2038  | 69:69:56:2E:40:80:F4:24:A1:E7:19:9F:14:BA:F3:EE:58:AB:6A:BB  |
| 17  | usertrustrsaca [jdk]  | CN=USERTrust RSA Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US  | CN=USERTrust RSA Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US  | 1fd6d30fca3ca51a81bbc640e35032d  | 3  | Mon Feb 01 02:00:00 IST 2010  | Tue Jan 19 01:59:59 IST 2038  | 2B:8F:1B:57:33:0D:BB:A2:D0:7A:6C:51:F7:0E:E9:0D:DA:B9:AD:8E  |
| 18  | digicertassuredidrootca [jdk]  | CN=DigiCert Assured ID Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Assured ID Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US  | ce7e0e517d846fe8fe560fc1bf03039  | 3  | Fri Nov 10 02:00:00 IST 2006  | Mon Nov 10 02:00:00 IST 2031  | 05:63:B8:63:0D:62:D7:5A:BB:C8:AB:1E:4B:DF:B5:A8:99:B2:4D:43  |
| 19  | digicertglobalrootg2 [jdk]  | CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US  | 33af1e6a711a9a0bb2864b11d09fae5  | 3  | Thu Aug 01 15:00:00 IDT 2013  | Fri Jan 15 14:00:00 IST 2038  | DF:3C:24:F9:BF:D6:66:76:1B:26:80:73:FE:06:D1:CC:8D:4F:82:A4  |
| 20  | actalisauthenticationrootca [jdk]  | CN=Actalis Authentication Root CA, O=Actalis S.p.A./03358520967, L=Milan, C=IT  | CN=Actalis Authentication Root CA, O=Actalis S.p.A./03358520967, L=Milan, C=IT  | 570a119742c4e3cc  | 3  | Thu Sep 22 14:22:02 IDT 2011  | Sun Sep 22 14:22:02 IDT 2030  | F3:73:B3:87:06:5A:28:84:8A:F2:F3:4A:CE:19:2B:DD:C7:8E:9C:AC  |
| 21  | digicertassuredidg2 [jdk]  | CN=DigiCert Assured ID Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Assured ID Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US  | b931c3ad63967ea6723bfc3af9af44b  | 3  | Thu Aug 01 15:00:00 IDT 2013  | Fri Jan 15 14:00:00 IST 2038  | A1:4B:48:D9:43:EE:0A:0E:40:90:4F:3C:E0:A4:C0:91:93:51:5D:3F  |
| 22  | swisssigngoldg2ca [jdk]  | CN=SwissSign Gold CA - G2, O=SwissSign AG, C=CH  | CN=SwissSign Gold CA - G2, O=SwissSign AG, C=CH  | bb401c43f55e4fb0  | 3  | Wed Oct 25 10:30:35 IST 2006  | Sat Oct 25 11:30:35 IDT 2036  | D8:C5:38:8A:B7:30:1B:1B:6E:D4:7A:E6:45:25:3A:6F:9F:1A:27:61  |
| 23  | entrustrootcag2 [jdk]  | CN=Entrust Root Certification Authority - G2, OU=”(c) 2009 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US  | CN=Entrust Root Certification Authority - G2, OU=”(c) 2009 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US  | 4a538c28  | 3  | Tue Jul 07 20:25:54 IDT 2009  | Sat Dec 07 19:55:54 IST 2030  | 8C:F4:27:FD:79:0C:3A:D1:66:06:8D:E8:1E:57:EF:BB:93:22:72:D4  |
| 24  | quovadisrootca2g3 [jdk]  | CN=QuoVadis Root CA 2 G3, O=QuoVadis Limited, C=BM  | CN=QuoVadis Root CA 2 G3, O=QuoVadis Limited, C=BM  | 445734245b81899b35f2ceb82b3b5ba726f07528  | 3  | Thu Jan 12 20:59:32 IST 2012  | Sun Jan 12 20:59:32 IST 2042  | 09:3C:61:F3:8B:8B:DC:7D:55:DF:75:38:02:05:00:E1:25:F5:C8:36  |
| 25  | securetrustca [jdk]  | CN=SecureTrust CA, O=SecureTrust Corporation, C=US  | CN=SecureTrust CA, O=SecureTrust Corporation, C=US  | cf08e5c0816a5ad427ff0eb271859d0  | 3  | Tue Nov 07 21:31:18 IST 2006  | Mon Dec 31 21:40:55 IST 2029  | 87:82:C6:C3:04:35:3B:CF:D2:96:92:D2:59:3E:7D:44:D9:34:FF:11  |
| 26  | camerfirmachambersca [jdk]  | CN=Chambers of Commerce Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU  | CN=Chambers of Commerce Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU  | a3da427ea4b1aeda  | 3  | Fri Aug 01 15:29:50 IDT 2008  | Sat Jul 31 15:29:50 IDT 2038  | 78:6A:74:AC:76:AB:14:7F:9C:6A:30:50:BA:9E:A8:7E:FE:9A:CE:3C  |
| 27  | geotrustprimaryca [jdk]  | CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US  | CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US  | 18acb56afd69b6153a636cafdafac4a1  | 3  | Mon Nov 27 02:00:00 IST 2006  | Thu Jul 17 02:59:59 IDT 2036  | 32:3C:11:8E:1B:F7:B8:B6:52:54:E2:E2:10:0D:D6:02:90:37:F0:96  |
| 28  | identrustcommercial [jdk]  | CN=IdenTrust Commercial Root CA 1, O=IdenTrust, C=US  | CN=IdenTrust Commercial Root CA 1, O=IdenTrust, C=US  | a0142800000014523c844b500000002  | 3  | Thu Jan 16 20:12:23 IST 2014  | Mon Jan 16 20:12:23 IST 2034  | DF:71:7E:AA:4A:D9:4E:C9:55:84:99:60:2D:48:DE:5F:BC:F0:3A:25  |
| 29  | thawteprimaryrootcag3 [jdk]  | CN=thawte Primary Root CA - G3, OU=”(c) 2008 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US  | CN=thawte Primary Root CA - G3, OU=”(c) 2008 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US  | 600197b746a7eab4b49ad64b2ff790fb  | 3  | Wed Apr 02 03:00:00 IDT 2008  | Wed Dec 02 01:59:59 IST 2037  | F1:8B:53:8D:1B:E9:03:B6:A6:F0:56:43:5B:17:15:89:CA:F3:6B:F2  |
| 30  | buypassclass3ca [jdk]  | CN=Buypass Class 3 Root CA, O=Buypass AS-983163327, C=NO  | CN=Buypass Class 3 Root CA, O=Buypass AS-983163327, C=NO  | 2  | 3  | Tue Oct 26 10:28:58 IST 2010  | Fri Oct 26 11:28:58 IDT 2040  | DA:FA:F7:FA:66:84:EC:06:8F:14:50:BD:C7:C2:81:A5:BC:A9:64:57  |
| 31  | verisigntsaca [jdk]  | CN=Thawte Timestamping CA, OU=Thawte Certification, O=Thawte, L=Durbanville, ST=Western Cape, C=ZA  | CN=Thawte Timestamping CA, OU=Thawte Certification, O=Thawte, L=Durbanville, ST=Western Cape, C=ZA  | 67c8e1e8e3be1cbdfc913b8ea6238749  | 3  | Wed Jan 01 02:00:00 IST 1997  | Sat Jan 02 01:59:59 IST 2021  | 20:CE:B1:F0:F5:1C:0E:19:A9:F3:8D:B1:AA:8E:03:8C:AA:7A:C7:01  |
| 32  | verisignclass3g4ca [jdk]  | CN=VeriSign Class 3 Public Primary Certification Authority - G4, OU=”(c) 2007 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | CN=VeriSign Class 3 Public Primary Certification Authority - G4, OU=”(c) 2007 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | 2f80fe238c0e220f486712289187acb3  | 3  | Mon Nov 05 02:00:00 IST 2007  | Tue Jan 19 01:59:59 IST 2038  | 22:D5:D8:DF:8F:02:31:D1:8D:F7:9D:B7:CF:8A:2D:64:C9:3F:6C:3A  |
| 33  | baltimorecybertrustca [jdk]  | CN=Baltimore CyberTrust Root, OU=CyberTrust, O=Baltimore, C=IE  | CN=Baltimore CyberTrust Root, OU=CyberTrust, O=Baltimore, C=IE  | 20000b9  | 3  | Fri May 12 21:46:00 IDT 2000  | Tue May 13 02:59:00 IDT 2025  | D4:DE:20:D0:5E:66:FC:53:FE:1A:50:88:2C:78:DB:28:52:CA:E4:74  |
| 34  | luxtrustglobalrootca [jdk]  | CN=LuxTrust Global Root, O=LuxTrust s.a., C=LU  | CN=LuxTrust Global Root, O=LuxTrust s.a., C=LU  | bb8  | 3  | Thu Mar 17 11:51:37 IST 2011  | Wed Mar 17 11:51:37 IST 2021  | C9:3C:34:EA:90:D9:13:0C:0F:03:00:4B:98:BD:8B:35:70:91:56:11  |
| 35  | verisignclass3g2ca [jdk]  | OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 3 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US  | OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 3 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US  | 7dd9fe07cfa81eb7107967fba78934c6  | 1  | Mon May 18 03:00:00 IDT 1998  | Wed Aug 02 02:59:59 IDT 2028  | 85:37:1C:A6:E5:50:14:3D:CE:28:03:47:1B:DE:3A:09:E8:F8:77:0F  |
| 36  | camerfirmachamberscommerceca [jdk]  | CN=Chambers of Commerce Root, OU=http://www.chambersign.org, O=AC Camerfirma SA CIF A82743287, C=EU  | CN=Chambers of Commerce Root, OU=http://www.chambersign.org, O=AC Camerfirma SA CIF A82743287, C=EU  | 0  | 3  | Tue Sep 30 19:13:43 IDT 2003  | Wed Sep 30 19:13:44 IDT 2037  | 6E:3A:55:A4:19:0C:19:5C:93:84:3C:C0:DB:72:2E:31:30:61:F0:B1  |
| 37  | soneraclass2ca [jdk]  | CN=Sonera Class2 CA, O=Sonera, C=FI  | CN=Sonera Class2 CA, O=Sonera, C=FI  | 1d  | 3  | Fri Apr 06 09:29:40 IST 2001  | Tue Apr 06 10:29:40 IDT 2021  | 37:F7:6D:E6:07:7C:90:C5:B1:3E:93:1A:B7:41:10:B4:F2:E4:9A:27  |
| 38  | affirmtrustnetworkingca [jdk]  | CN=AffirmTrust Networking, O=AffirmTrust, C=US  | CN=AffirmTrust Networking, O=AffirmTrust, C=US  | 7c4f04391cd4992d  | 3  | Fri Jan 29 16:08:24 IST 2010  | Tue Dec 31 16:08:24 IST 2030  | 29:36:21:02:8B:20:ED:02:F5:66:C5:32:D1:D6:ED:90:9F:45:00:2F  |
| 39  | ttelesecglobalrootclass3ca [jdk]  | CN=T-TeleSec GlobalRoot Class 3, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE  | CN=T-TeleSec GlobalRoot Class 3, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE  | 1  | 3  | Wed Oct 01 13:29:56 IDT 2008  | Sun Oct 02 02:59:59 IDT 2033  | 55:A6:72:3E:CB:F2:EC:CD:C3:23:74:70:19:9D:2A:BE:11:E3:81:D1  |
| 40  | xrampglobalca [jdk]  | CN=XRamp Global Certification Authority, O=XRamp Security Services Inc, OU=www.xrampsecurity.com, C=US  | CN=XRamp Global Certification Authority, O=XRamp Security Services Inc, OU=www.xrampsecurity.com, C=US  | 50946cec18ead59c4dd597ef758fa0ad  | 3  | Mon Nov 01 19:14:04 IST 2004  | Mon Jan 01 07:37:19 IST 2035  | B8:01:86:D1:EB:9C:86:A5:41:04:CF:30:54:F3:4C:52:B7:E5:58:C6  |
| 41  | geotrustprimarycag3 [jdk]  | CN=GeoTrust Primary Certification Authority - G3, OU=(c) 2008 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US  | CN=GeoTrust Primary Certification Authority - G3, OU=(c) 2008 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US  | 15ac6e9419b2794b41f627a9c3180f1f  | 3  | Wed Apr 02 03:00:00 IDT 2008  | Wed Dec 02 01:59:59 IST 2037  | 03:9E:ED:B8:0B:E7:A0:3C:69:53:89:3B:20:D2:D9:32:3A:4C:2A:FD  |
| 42  | camerfirmachambersignca [jdk]  | CN=Global Chambersign Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU  | CN=Global Chambersign Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU  | c9cdd3e9d57d23ce  | 3  | Fri Aug 01 15:31:40 IDT 2008  | Sat Jul 31 15:31:40 IDT 2038  | 4A:BD:EE:EC:95:0D:35:9C:89:AE:C7:52:A1:2C:5B:29:F6:D6:AA:0C  |
| 43  | thawteprimaryrootcag2 [jdk]  | CN=thawte Primary Root CA - G2, OU=”(c) 2007 thawte, Inc. - For authorized use only”, O=”thawte, Inc.”, C=US  | CN=thawte Primary Root CA - G2, OU=”(c) 2007 thawte, Inc. - For authorized use only”, O=”thawte, Inc.”, C=US  | 35fc265cd9844fc93d263d579baed756  | 3  | Mon Nov 05 02:00:00 IST 2007  | Tue Jan 19 01:59:59 IST 2038  | AA:DB:BC:22:23:8F:C4:01:A1:27:BB:38:DD:F4:1D:DB:08:9E:F0:12  |
| 44  | usertrusteccca [jdk]  | CN=USERTrust ECC Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US  | CN=USERTrust ECC Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US  | 5c8b99c55a94c5d27156decd8980cc26  | 3  | Mon Feb 01 02:00:00 IST 2010  | Tue Jan 19 01:59:59 IST 2038  | D1:CB:CA:5D:B2:D5:2A:7F:69:3B:67:4D:E5:F0:5A:1D:0C:95:7D:F0  |
| 45  | swisssignsilverg2ca [jdk]  | CN=SwissSign Silver CA - G2, O=SwissSign AG, C=CH  | CN=SwissSign Silver CA - G2, O=SwissSign AG, C=CH  | 4f1bd42f54bb2f4b  | 3  | Wed Oct 25 10:32:46 IST 2006  | Sat Oct 25 11:32:46 IDT 2036  | 9B:AA:E5:9F:56:EE:21:CB:43:5A:BE:25:93:DF:A7:F0:40:D1:1D:CB  |
| 46  | affirmtrustpremiumca [jdk]  | CN=AffirmTrust Premium, O=AffirmTrust, C=US  | CN=AffirmTrust Premium, O=AffirmTrust, C=US  | 6d8c1446b1a60aee  | 3  | Fri Jan 29 16:10:36 IST 2010  | Mon Dec 31 16:10:36 IST 2040  | D8:A6:33:2C:E0:03:6F:B1:85:F6:63:4F:7D:6A:06:65:26:32:28:27  |
| 47  | globalsignca [jdk]  | CN=GlobalSign Root CA, OU=Root CA, O=GlobalSign nv-sa, C=BE  | CN=GlobalSign Root CA, OU=Root CA, O=GlobalSign nv-sa, C=BE  | 40000000001154b5ac394  | 3  | Tue Sep 01 15:00:00 IDT 1998  | Fri Jan 28 14:00:00 IST 2028  | B1:BC:96:8B:D4:F4:9D:62:2A:A8:9A:81:F2:15:01:52:A4:1D:82:9C  |
| 48  | dtrustclass3ca2 [jdk]  | CN=D-TRUST Root Class 3 CA 2 2009, O=D-Trust GmbH, C=DE  | CN=D-TRUST Root Class 3 CA 2 2009, O=D-Trust GmbH, C=DE  | 983f3  | 3  | Thu Nov 05 10:35:58 IST 2009  | Mon Nov 05 10:35:58 IST 2029  | 58:E8:AB:B0:36:15:33:FB:80:F7:9B:1B:6D:29:D3:FF:8D:5F:00:F0  |
| 49  | affirmtrustcommercialca [jdk]  | CN=AffirmTrust Commercial, O=AffirmTrust, C=US  | CN=AffirmTrust Commercial, O=AffirmTrust, C=US  | 7777062726a9b17c  | 3  | Fri Jan 29 16:06:06 IST 2010  | Tue Dec 31 16:06:06 IST 2030  | F9:B5:B6:32:45:5F:9C:BE:EC:57:5F:80:DC:E9:6E:2C:C7:B2:78:B7  |
| 50  | thawtepremiumserverca [jdk]  | EMAILADDRESS=premium-server@thawte.com, CN=Thawte Premium Server CA, OU=Certification Services Division, O=Thawte Consulting cc, L=Cape Town, ST=Western Cape, C=ZA  | EMAILADDRESS=premium-server@thawte.com, CN=Thawte Premium Server CA, OU=Certification Services Division, O=Thawte Consulting cc, L=Cape Town, ST=Western Cape, C=ZA  | 36122296c5e338a520a1d25f4cd70954  | 3  | Thu Aug 01 03:00:00 IDT 1996  | Sat Jan 02 01:59:59 IST 2021  | E0:AB:05:94:20:72:54:93:05:60:62:02:36:70:F7:CD:2E:FC:66:66  |
| 51  | comodoaaaca [jdk]  | CN=AAA Certificate Services, O=Comodo CA Limited, L=Salford, ST=Greater Manchester, C=GB  | CN=AAA Certificate Services, O=Comodo CA Limited, L=Salford, ST=Greater Manchester, C=GB  | 1  | 3  | Thu Jan 01 02:00:00 IST 2004  | Mon Jan 01 01:59:59 IST 2029  | D1:EB:23:A4:6D:17:D6:8F:D9:25:64:C2:F1:F1:60:17:64:D8:E3:49  |
| 52  | geotrustprimarycag2 [jdk]  | CN=GeoTrust Primary Certification Authority - G2, OU=(c) 2007 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US  | CN=GeoTrust Primary Certification Authority - G2, OU=(c) 2007 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US  | 3cb2f4480a00e2feeb243b5e603ec36b  | 3  | Mon Nov 05 02:00:00 IST 2007  | Tue Jan 19 01:59:59 IST 2038  | 8D:17:84:D5:37:F3:03:7D:EC:70:FE:57:8B:51:9A:99:E6:10:D7:B0  |
| 53  | globalsignr3ca [jdk]  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R3  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R3  | 4000000000121585308a2  | 3  | Wed Mar 18 12:00:00 IST 2009  | Sun Mar 18 12:00:00 IST 2029  | D6:9B:56:11:48:F0:1C:77:C5:45:78:C1:09:26:DF:5B:85:69:76:AD  |
| 54  | quovadisrootca3 [jdk]  | CN=QuoVadis Root CA 3, O=QuoVadis Limited, C=BM  | CN=QuoVadis Root CA 3, O=QuoVadis Limited, C=BM  | 5c6  | 3  | Fri Nov 24 21:11:23 IST 2006  | Mon Nov 24 21:06:44 IST 2031  | 1F:49:14:F7:D8:74:95:1D:DD:AE:02:C0:BE:FD:3A:2D:82:75:51:85  |
| 55  | thawteprimaryrootca [jdk]  | CN=thawte Primary Root CA, OU=”(c) 2006 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US  | CN=thawte Primary Root CA, OU=”(c) 2006 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US  | 344ed55720d5edec49f42fce37db2b6d  | 3  | Fri Nov 17 02:00:00 IST 2006  | Thu Jul 17 02:59:59 IDT 2036  | 91:C6:D6:EE:3E:8A:C8:63:84:E5:48:C2:99:29:5C:75:6C:81:7B:81  |
| 56  | starfieldrootg2ca [jdk]  | CN=Starfield Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US  | CN=Starfield Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US  | 0  | 3  | Tue Sep 01 03:00:00 IDT 2009  | Fri Jan 01 01:59:59 IST 2038  | B5:1C:06:7C:EE:2B:0C:3D:F8:55:AB:2D:92:F4:FE:39:D4:E7:0F:0E  |
| 57  | starfieldclass2ca [jdk]  | OU=Starfield Class 2 Certification Authority, O=”Starfield Technologies, Inc.”, C=US  | OU=Starfield Class 2 Certification Authority, O=”Starfield Technologies, Inc.”, C=US  | 0  | 3  | Tue Jun 29 20:39:16 IDT 2004  | Thu Jun 29 20:39:16 IDT 2034  | AD:7E:1C:28:B0:64:EF:8F:60:03:40:20:14:C3:D0:E3:37:0E:B5:8A  |
| 58  | verisignclass3ca [jdk]  | OU=Class 3 Public Primary Certification Authority, O=”VeriSign, Inc.”, C=US  | OU=Class 3 Public Primary Certification Authority, O=”VeriSign, Inc.”, C=US  | 3c9131cb1ff6d01b0e9ab8d044bf12be  | 1  | Mon Jan 29 02:00:00 IST 1996  | Thu Aug 03 02:59:59 IDT 2028  | A1:DB:63:93:91:6F:17:E4:18:55:09:40:04:15:C7:02:40:B0:AE:6B  |
| 59  | affirmtrustpremiumeccca [jdk]  | CN=AffirmTrust Premium ECC, O=AffirmTrust, C=US  | CN=AffirmTrust Premium ECC, O=AffirmTrust, C=US  | 7497258ac73f7a54  | 3  | Fri Jan 29 16:20:24 IST 2010  | Mon Dec 31 16:20:24 IST 2040  | B8:23:6B:00:2F:1D:16:86:53:01:55:6C:11:A4:37:CA:EB:FF:C3:BB  |
| 60  | geotrustglobalca [jdk]  | CN=GeoTrust Global CA, O=GeoTrust Inc., C=US  | CN=GeoTrust Global CA, O=GeoTrust Inc., C=US  | 23456  | 3  | Tue May 21 07:00:00 IDT 2002  | Sat May 21 07:00:00 IDT 2022  | DE:28:F4:A4:FF:E5:B9:2F:A3:C5:03:D1:A3:49:A7:F9:96:2A:82:12  |
| 61  | godaddyclass2ca [jdk]  | OU=Go Daddy Class 2 Certification Authority, O=”The Go Daddy Group, Inc.”, C=US  | OU=Go Daddy Class 2 Certification Authority, O=”The Go Daddy Group, Inc.”, C=US  | 0  | 3  | Tue Jun 29 20:06:20 IDT 2004  | Thu Jun 29 20:06:20 IDT 2034  | 27:96:BA:E6:3F:18:01:E2:77:26:1B:A0:D7:77:70:02:8F:20:EE:E4  |
| 62  | godaddyrootg2ca [jdk]  | CN=Go Daddy Root Certificate Authority - G2, O=”GoDaddy.com, Inc.”, L=Scottsdale, ST=Arizona, C=US  | CN=Go Daddy Root Certificate Authority - G2, O=”GoDaddy.com, Inc.”, L=Scottsdale, ST=Arizona, C=US  | 0  | 3  | Tue Sep 01 03:00:00 IDT 2009  | Fri Jan 01 01:59:59 IST 2038  | 47:BE:AB:C9:22:EA:E8:0E:78:78:34:62:A7:9F:45:C2:54:FD:E6:8B  |
| 63  | verisignclass3g5ca [jdk]  | CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU=”(c) 2006 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU=”(c) 2006 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | 18dad19e267de8bb4a2158cdcc6b3b4a  | 3  | Wed Nov 08 02:00:00 IST 2006  | Thu Jul 17 02:59:59 IDT 2036  | 4E:B6:D5:78:49:9B:1C:CF:5F:58:1E:AD:56:BE:3D:9B:67:44:A5:E5  |
| 64  | quovadisrootca2 [jdk]  | CN=QuoVadis Root CA 2, O=QuoVadis Limited, C=BM  | CN=QuoVadis Root CA 2, O=QuoVadis Limited, C=BM  | 509  | 3  | Fri Nov 24 20:27:00 IST 2006  | Mon Nov 24 20:23:33 IST 2031  | CA:3A:FB:CF:12:40:36:4B:44:B2:16:20:88:80:48:39:19:93:7C:F7  |
| 65  | certumca [jdk]  | CN=Certum CA, O=Unizeto Sp. z o.o., C=PL  | CN=Certum CA, O=Unizeto Sp. z o.o., C=PL  | 10020  | 3  | Tue Jun 11 13:46:39 IDT 2002  | Fri Jun 11 13:46:39 IDT 2027  | 62:52:DC:40:F7:11:43:A2:2F:DE:9E:F7:34:8E:06:42:51:B1:81:18  |
| 66  | swisssignplatinumg2ca [jdk]  | CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH  | CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH  | 4eb200670c035d4f  | 3  | Wed Oct 25 10:36:00 IST 2006  | Sat Oct 25 11:36:00 IDT 2036  | 56:E0:FA:C0:3B:8F:18:23:55:18:E5:D3:11:CA:E8:C2:43:31:AB:66  |
| 67  | chunghwaepkirootca [jdk]  | OU=ePKI Root Certification Authority, O=”Chunghwa Telecom Co., Ltd.”, C=TW  | OU=ePKI Root Certification Authority, O=”Chunghwa Telecom Co., Ltd.”, C=TW  | 15c8bd65475cafb897005ee406d2bc9d  | 3  | Mon Dec 20 04:31:27 IST 2004  | Wed Dec 20 04:31:27 IST 2034  | 67:65:0D:F1:7E:8E:7E:5B:82:40:A4:F4:56:4B:CF:E2:3D:69:C6:F0  |
| 68  | quovadisrootca3g3 [jdk]  | CN=QuoVadis Root CA 3 G3, O=QuoVadis Limited, C=BM  | CN=QuoVadis Root CA 3 G3, O=QuoVadis Limited, C=BM  | 2ef59b0228a7db7affd5a3a9eebd03a0cf126a1d  | 3  | Thu Jan 12 22:26:32 IST 2012  | Sun Jan 12 22:26:32 IST 2042  | 48:12:BD:92:3C:A8:C4:39:06:E7:30:6D:27:96:E6:A4:CF:22:2E:7D  |
| 69  | quovadisrootca [jdk]  | CN=QuoVadis Root Certification Authority, OU=Root Certification Authority, O=QuoVadis Limited, C=BM  | CN=QuoVadis Root Certification Authority, OU=Root Certification Authority, O=QuoVadis Limited, C=BM  | 3ab6508b  | 3  | Mon Mar 19 20:33:33 IST 2001  | Wed Mar 17 20:33:33 IST 2021  | DE:3F:40:BD:50:93:D3:9B:6C:60:F6:DA:BC:07:62:01:00:89:76:C9  |
| 70  | digicerthighassuranceevrootca [jdk]  | CN=DigiCert High Assurance EV Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert High Assurance EV Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US  | 2ac5c266a0b409b8f0b79f2ae462577  | 3  | Fri Nov 10 02:00:00 IST 2006  | Mon Nov 10 02:00:00 IST 2031  | 5F:B7:EE:06:33:E2:59:DB:AD:0C:4C:9A:E6:D3:8F:1A:61:C7:DC:25  |
| 71  | quovadisrootca1g3 [jdk]  | CN=QuoVadis Root CA 1 G3, O=QuoVadis Limited, C=BM  | CN=QuoVadis Root CA 1 G3, O=QuoVadis Limited, C=BM  | 78585f2ead2c194be3370735341328b596d46593  | 3  | Thu Jan 12 19:27:44 IST 2012  | Sun Jan 12 19:27:44 IST 2042  | 1B:8E:EA:57:96:29:1A:C9:39:EA:B8:0A:81:1A:73:73:C0:93:79:67  |
| 72  | comodorsaca [jdk]  | CN=COMODO RSA Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB  | CN=COMODO RSA Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB  | 4caaf9cadb636fe01ff74ed85b03869d  | 3  | Tue Jan 19 02:00:00 IST 2010  | Tue Jan 19 01:59:59 IST 2038  | AF:E5:D2:44:A8:D1:19:42:30:FF:47:9F:E2:F8:97:BB:CD:7A:8C:B4  |
| 73  | buypassclass2ca [jdk]  | CN=Buypass Class 2 Root CA, O=Buypass AS-983163327, C=NO  | CN=Buypass Class 2 Root CA, O=Buypass AS-983163327, C=NO  | 2  | 3  | Tue Oct 26 10:38:03 IST 2010  | Fri Oct 26 11:38:03 IDT 2040  | 49:0A:75:74:DE:87:0A:47:FE:58:EE:F6:C7:6B:EB:C6:0B:12:40:99  |
| 74  | secomscrootca2 [jdk]  | OU=Security Communication RootCA2, O=”SECOM Trust Systems CO.,LTD.”, C=JP  | OU=Security Communication RootCA2, O=”SECOM Trust Systems CO.,LTD.”, C=JP  | 0  | 3  | Fri May 29 08:00:39 IDT 2009  | Tue May 29 08:00:39 IDT 2029  | 5F:3B:8C:F2:F8:10:B3:7D:78:B4:CE:EC:19:19:C3:73:34:B9:C7:74  |
| 75  | entrustevca [jdk]  | CN=Entrust Root Certification Authority, OU=”(c) 2006 Entrust, Inc.”, OU=www.entrust.net/CPS is incorporated by reference, O=”Entrust, Inc.”, C=US  | CN=Entrust Root Certification Authority, OU=”(c) 2006 Entrust, Inc.”, OU=www.entrust.net/CPS is incorporated by reference, O=”Entrust, Inc.”, C=US  | 456b5054  | 3  | Mon Nov 27 22:23:42 IST 2006  | Fri Nov 27 22:53:42 IST 2026  | B3:1E:B1:B7:40:E3:6C:84:02:DA:DC:37:D4:4D:F5:D4:67:49:52:F9  |
| 76  | verisignclass3g3ca [jdk]  | CN=VeriSign Class 3 Public Primary Certification Authority - G3, OU=”(c) 1999 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | CN=VeriSign Class 3 Public Primary Certification Authority - G3, OU=”(c) 1999 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | 9b7e0649a33e62b9d5ee90487129ef57  | 1  | Fri Oct 01 02:00:00 IST 1999  | Thu Jul 17 02:59:59 IDT 2036  | 13:2D:0D:45:53:4B:69:97:CD:B2:D5:C3:39:E2:55:76:60:9B:5C:C6  |
| 77  | certumtrustednetworkca [jdk]  | CN=Certum Trusted Network CA, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL  | CN=Certum Trusted Network CA, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL  | 444c0  | 3  | Wed Oct 22 14:07:37 IST 2008  | Mon Dec 31 14:07:37 IST 2029  | 07:E0:32:E0:20:B7:2C:3F:19:2F:06:28:A2:59:3A:19:A7:0F:06:9E  |
| 78  | dtrustclass3ca2ev [jdk]  | CN=D-TRUST Root Class 3 CA 2 EV 2009, O=D-Trust GmbH, C=DE  | CN=D-TRUST Root Class 3 CA 2 EV 2009, O=D-Trust GmbH, C=DE  | 983f4  | 3  | Thu Nov 05 10:50:46 IST 2009  | Mon Nov 05 10:50:46 IST 2029  | 96:C9:1B:0B:95:B4:10:98:42:FA:D0:D8:22:79:FE:60:FA:B9:16:83  |
| 79  | globalsigneccrootcar5 [jdk]  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R5  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R5  | 605949e0262ebb55f90a778a71f94ad86c  | 3  | Tue Nov 13 02:00:00 IST 2012  | Tue Jan 19 05:14:07 IST 2038  | 1F:24:C6:30:CD:A4:18:EF:20:69:FF:AD:4F:DD:5F:46:3A:1B:69:AA  |
| 80  | starfieldservicesrootg2ca [jdk]  | CN=Starfield Services Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US  | CN=Starfield Services Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US  | 0  | 3  | Tue Sep 01 03:00:00 IDT 2009  | Fri Jan 01 01:59:59 IST 2038  | 92:5A:8F:8D:2C:6D:04:E0:66:5F:59:6A:FF:22:D8:63:E8:25:6F:3F  |
| 81  | ttelesecglobalrootclass2ca [jdk]  | CN=T-TeleSec GlobalRoot Class 2, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE  | CN=T-TeleSec GlobalRoot Class 2, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE  | 1  | 3  | Wed Oct 01 13:40:14 IDT 2008  | Sun Oct 02 02:59:59 IDT 2033  | 59:0D:2D:7D:88:4F:40:2E:61:7E:A5:62:32:17:65:CF:17:D8:94:E9  |
| 82  | addtrustqualifiedca [jdk]  | CN=AddTrust Qualified CA Root, OU=AddTrust TTP Network, O=AddTrust AB, C=SE  | CN=AddTrust Qualified CA Root, OU=AddTrust TTP Network, O=AddTrust AB, C=SE  | 1  | 3  | Tue May 30 13:44:50 IDT 2000  | Sat May 30 13:44:50 IDT 2020  | 4D:23:78:EC:91:95:39:B5:00:7F:75:8F:03:3B:21:1E:C5:4D:8B:CF  |
| 83  | digicertglobalrootca [jdk]  | CN=DigiCert Global Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Global Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US  | 83be056904246b1a1756ac95991c74a  | 3  | Fri Nov 10 02:00:00 IST 2006  | Mon Nov 10 02:00:00 IST 2031  | A8:98:5D:3A:65:E5:E5:C4:B2:D7:D6:6D:40:C6:DD:2F:B1:9C:54:36  |
| 84  | amazonrootca1 [jdk]  | CN=Amazon Root CA 1, O=Amazon, C=US  | CN=Amazon Root CA 1, O=Amazon, C=US  | 66c9fcf99bf8c0a39e2f0788a43e696365bca  | 3  | Tue May 26 08:00:00 CST 2015  | Sun Jan 17 08:00:00 CST 2038  | 8D:A7:F9:65:EC:5E:FC:37:91:0F:1C:6E:59:FD:C1:CC:6A:6E:DE:16  |
| 85  | amazonrootca2 [jdk]  | CN=Amazon Root CA 2, O=Amazon, C=US  | CN=Amazon Root CA 2, O=Amazon, C=US  | 66c9fd29635869f0a0fe58678f85b26bb8a37  | 3  | Tue May 26 08:00:00 CST 2015  | Sat May 26 08:00:00 CST 2040  | 5A:8C:EF:45:D7:A6:98:59:76:7A:8C:8B:44:96:B5:78:CF:47:4B:1A  |
| 86  | amazonrootca3 [jdk]  | CN=Amazon Root CA 3, O=Amazon, C=US  | CN=Amazon Root CA 3, O=Amazon, C=US  | 66c9fd5749736663f3b0b9ad9e89e7603f24a  | 3  | Tue May 26 08:00:00 CST 2015  | Sat May 26 08:00:00 CST 2040  | 0D:44:DD:8C:3C:8C:1A:1A:58:75:64:81:E9:0F:2E:2A:FF:B3:D2:6E  |
| 87  | amazonrootca4 [jdk]  | CN=Amazon Root CA 4, O=Amazon, C=US  | CN=Amazon Root CA 4, O=Amazon, C=US  | 66c9fd7c1bb104c2943e5717b7b2cc81ac10e  | 3  | Tue May 26 08:00:00 CST 2015  | Sat May 26 08:00:00 CST 2040  | F6:10:84:07:D6:F8:BB:67:98:0C:C2:E2:44:C2:EB:AE:1C:EF:63:BE  |
| 88  | globalsignrootcar6 [jdk]  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R6  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R6  | 45e6bb038333c3856548e6ff4551  | 3  | Wed Dec 10 08:00:00 CST 2014  | Sun Dec 10 08:00:00 CST 2034  | 80:94:64:0E:B5:A7:A1:CA:11:9C:1F:DD:D5:9F:81:02:63:A7:FB:D1  |
| 89  | letsencryptisrgx1 [jdk]  | CN=ISRG Root X1, O=Internet Security Research Group, C=US  | CN=ISRG Root X1, O=Internet Security Research Group, C=US  | 8210cfb0d240e3594463e0bb63828b00  | 3  | Thu Jun 04 19:04:38 CST 2015  | Mon Jun 04 19:04:38 CST 2035  | CA:BD:2A:79:A1:07:6A:31:F2:1D:25:36:35:CB:03:9D:43:29:A5:E8  |
| 90  | luxtrustglobalroot2ca [jdk]  | CN=LuxTrust Global Root 2, O=LuxTrust S.A., C=LU  | CN=LuxTrust Global Root 2, O=LuxTrust S.A., C=LU  | a7ea6df4b449eda6a24859ee6b815d3167fbbb1  | 3  | Thu Mar 05 21:21:57 CST 2015  | Mon Mar 05 21:21:57 CST 2035  | 1E:0E:56:19:0A:D1:8B:25:98:B2:04:44:FF:66:8A:04:17:99:5F:3F  |
| 91  | teliasonerarootcav1 [jdk]  | CN=TeliaSonera Root CA v1, O=TeliaSonera  | CN=TeliaSonera Root CA v1, O=TeliaSonera  | 95be16a0f72e46f17b398272fa8bcd96  | 3  | Thu Oct 18 20:00:50 CST 2007  | Mon Oct 18 20:00:50 CST 2032  | 43:13:BB:96:F1:D5:86:9B:C1:4E:6A:92:F6:CF:F6:34:69:87:82:37  |
| 92  | TWCA Root Certification Authority  | CN=TWCA Root Certification Authority, OU=Root CA, O=TAIWAN-CA, C=TW  | CN=TWCA Root Certification Authority, OU=Root CA, O=TAIWAN-CA, C=TW  | 01  | 3  | Thu Aug 28 15:24:33 CST 2008  | Tue Dec 31 23:59:59 CST 2030  | CF:9E:87:6D:D3:EB:FC:42:26:97:A3:B5:A3:7A:A0:76:A9:06:23:48  |
#
Alias name
Subject DN
Issuer DN
Certificate Serial Number
Version
Valid From [GMT]
Valid To [GMT]
Thumbprint(SHA1)
1
verisignclass2g2ca [jdk]
OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 2 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US
OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 2 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US
b92f60cc889fa17a4609b85b706c8aaf
1
Mon May 18 03:00:00 IDT 1998
Wed Aug 02 02:59:59 IDT 2028
B3:EA:C4:47:76:C9:C8:1C:EA:F2:9D:95:B6:CC:A0:08:1B:67:EC:9D
2
digicertassuredidg3 [jdk]
CN=DigiCert Assured ID Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Assured ID Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US
ba15afa1ddfa0b54944afcd24a06cec
3
Thu Aug 01 15:00:00 IDT 2013
Fri Jan 15 14:00:00 IST 2038
F5:17:A2:4F:9A:48:C6:C9:F8:A2:00:26:9F:DC:0F:48:2C:AB:30:89
3
verisignuniversalrootca [jdk]
CN=VeriSign Universal Root Certification Authority, OU=”(c) 2008 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
CN=VeriSign Universal Root Certification Authority, OU=”(c) 2008 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
401ac46421b31321030ebbe4121ac51d
3
Wed Apr 02 03:00:00 IDT 2008
Wed Dec 02 01:59:59 IST 2037
36:79:CA:35:66:87:72:30:4D:30:A5:FB:87:3B:0F:A7:7B:B7:0D:54
4
digicerttrustedrootg4 [jdk]
CN=DigiCert Trusted Root G4, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Trusted Root G4, OU=www.digicert.com, O=DigiCert Inc, C=US
59b1b579e8e2132e23907bda777755c
3
Thu Aug 01 15:00:00 IDT 2013
Fri Jan 15 14:00:00 IST 2038
DD:FB:16:CD:49:31:C9:73:A2:03:7D:3F:C8:3A:4D:7D:77:5D:05:E4
5
identrustpublicca [jdk]
CN=IdenTrust Public Sector Root CA 1, O=IdenTrust, C=US
CN=IdenTrust Public Sector Root CA 1, O=IdenTrust, C=US
a0142800000014523cf467c00000002
3
Thu Jan 16 19:53:32 IST 2014
Mon Jan 16 19:53:32 IST 2034
BA:29:41:60:77:98:3F:F4:F3:EF:F2:31:05:3B:2E:EA:6D:4D:45:FD
6
utnuserfirstobjectca [jdk]
CN=UTN-USERFirst-Object, OU=http://www.usertrust.com, O=The USERTRUST Network, L=Salt Lake City, ST=UT, C=US
CN=UTN-USERFirst-Object, OU=http://www.usertrust.com, O=The USERTRUST Network, L=Salt Lake City, ST=UT, C=US
44be0c8b500024b411d3362de0b35f1b
3
Fri Jul 09 21:31:20 IDT 1999
Tue Jul 09 21:40:36 IDT 2019
E1:2D:FB:4B:41:D7:D9:C3:2B:30:51:4B:AC:1D:81:D8:38:5E:2D:46
7
geotrustuniversalca [jdk]
CN=GeoTrust Universal CA, O=GeoTrust Inc., C=US
CN=GeoTrust Universal CA, O=GeoTrust Inc., C=US
1
3
Thu Mar 04 07:00:00 IST 2004
Sun Mar 04 07:00:00 IST 2029
E6:21:F3:35:43:79:05:9A:4B:68:30:9D:8A:2F:74:22:15:87:EC:79
8
digicertglobalrootg3 [jdk]
CN=DigiCert Global Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Global Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US
55556bcf25ea43535c3a40fd5ab4572
3
Thu Aug 01 15:00:00 IDT 2013
Fri Jan 15 14:00:00 IST 2038
7E:04:DE:89:6A:3E:66:6D:00:E6:87:D3:3F:FA:D9:3B:E8:3D:34:9E
9
entrustrootcaec1 [jdk]
CN=Entrust Root Certification Authority - EC1, OU=”(c) 2012 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US
CN=Entrust Root Certification Authority - EC1, OU=”(c) 2012 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US
a68b79290000000050d091f9
3
Tue Dec 18 17:25:36 IST 2012
Fri Dec 18 17:55:36 IST 2037
20:D8:06:40:DF:9B:25:F5:12:25:3A:11:EA:F7:59:8A:EB:14:B5:47
10
secomscrootca1 [jdk]
OU=Security Communication RootCA1, O=SECOM Trust.net, C=JP
OU=Security Communication RootCA1, O=SECOM Trust.net, C=JP
0
3
Tue Sep 30 07:20:49 IDT 2003
Sat Sep 30 07:20:49 IDT 2023
36:B1:2B:49:F9:81:9E:D7:4C:9E:BC:38:0F:C6:56:8F:5D:AC:B2:F7
11
globalsignr2ca [jdk]
CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R2
CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R2
400000000010f8626e60d
3
Fri Dec 15 10:00:00 IST 2006
Wed Dec 15 10:00:00 IST 2021
75:E0:AB:B6:13:85:12:27:1C:04:F8:5F:DD:DE:38:E4:B7:24:2E:FE
12
identrustdstx3 [jdk]
CN=DST Root CA X3, O=Digital Signature Trust Co.
CN=DST Root CA X3, O=Digital Signature Trust Co.
44afb080d6a327ba893039862ef8406b
3
Sun Oct 01 00:12:19 IDT 2000
Thu Sep 30 17:01:15 IDT 2021
DA:C9:02:4F:54:D8:F6:DF:94:93:5F:B1:73:26:38:CA:6A:D7:7C:13
13
comodoeccca [jdk]
CN=COMODO ECC Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
CN=COMODO ECC Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
1f47afaa62007050544c019e9b63992a
3
Thu Mar 06 02:00:00 IST 2008
Tue Jan 19 01:59:59 IST 2038
9F:74:4E:9F:2B:4D:BA:EC:0F:31:2C:50:B6:56:3B:8E:2D:93:C3:11
14
entrust2048ca [jdk]
CN=Entrust.net Certification Authority (2048), OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.), O=Entrust.net
CN=Entrust.net Certification Authority (2048), OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.), O=Entrust.net
3863def8
3
Fri Dec 24 19:50:51 IST 1999
Tue Jul 24 17:15:12 IDT 2029
50:30:06:09:1D:97:D4:F5:AE:39:F7:CB:E7:92:7D:7D:65:2D:34:31
15
addtrustexternalca [jdk]
CN=AddTrust External CA Root, OU=AddTrust External TTP Network, O=AddTrust AB, C=SE
CN=AddTrust External CA Root, OU=AddTrust External TTP Network, O=AddTrust AB, C=SE
1
3
Tue May 30 13:48:38 IDT 2000
Sat May 30 13:48:38 IDT 2020
02:FA:F3:E2:91:43:54:68:60:78:57:69:4D:F5:E4:5B:68:85:18:68
16
globalsigneccrootcar4 [jdk]
CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R4
CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R4
2a38a41c960a04de42b228a50be8349802
3
Tue Nov 13 02:00:00 IST 2012
Tue Jan 19 05:14:07 IST 2038
69:69:56:2E:40:80:F4:24:A1:E7:19:9F:14:BA:F3:EE:58:AB:6A:BB
17
usertrustrsaca [jdk]
CN=USERTrust RSA Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US
CN=USERTrust RSA Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US
1fd6d30fca3ca51a81bbc640e35032d
3
Mon Feb 01 02:00:00 IST 2010
Tue Jan 19 01:59:59 IST 2038
2B:8F:1B:57:33:0D:BB:A2:D0:7A:6C:51:F7:0E:E9:0D:DA:B9:AD:8E
18
digicertassuredidrootca [jdk]
CN=DigiCert Assured ID Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Assured ID Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
ce7e0e517d846fe8fe560fc1bf03039
3
Fri Nov 10 02:00:00 IST 2006
Mon Nov 10 02:00:00 IST 2031
05:63:B8:63:0D:62:D7:5A:BB:C8:AB:1E:4B:DF:B5:A8:99:B2:4D:43
19
digicertglobalrootg2 [jdk]
CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US
33af1e6a711a9a0bb2864b11d09fae5
3
Thu Aug 01 15:00:00 IDT 2013
Fri Jan 15 14:00:00 IST 2038
DF:3C:24:F9:BF:D6:66:76:1B:26:80:73:FE:06:D1:CC:8D:4F:82:A4
20
actalisauthenticationrootca [jdk]
CN=Actalis Authentication Root CA, O=Actalis S.p.A./03358520967, L=Milan, C=IT
CN=Actalis Authentication Root CA, O=Actalis S.p.A./03358520967, L=Milan, C=IT
570a119742c4e3cc
3
Thu Sep 22 14:22:02 IDT 2011
Sun Sep 22 14:22:02 IDT 2030
F3:73:B3:87:06:5A:28:84:8A:F2:F3:4A:CE:19:2B:DD:C7:8E:9C:AC
21
digicertassuredidg2 [jdk]
CN=DigiCert Assured ID Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Assured ID Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US
b931c3ad63967ea6723bfc3af9af44b
3
Thu Aug 01 15:00:00 IDT 2013
Fri Jan 15 14:00:00 IST 2038
A1:4B:48:D9:43:EE:0A:0E:40:90:4F:3C:E0:A4:C0:91:93:51:5D:3F
22
swisssigngoldg2ca [jdk]
CN=SwissSign Gold CA - G2, O=SwissSign AG, C=CH
CN=SwissSign Gold CA - G2, O=SwissSign AG, C=CH
bb401c43f55e4fb0
3
Wed Oct 25 10:30:35 IST 2006
Sat Oct 25 11:30:35 IDT 2036
D8:C5:38:8A:B7:30:1B:1B:6E:D4:7A:E6:45:25:3A:6F:9F:1A:27:61
23
entrustrootcag2 [jdk]
CN=Entrust Root Certification Authority - G2, OU=”(c) 2009 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US
CN=Entrust Root Certification Authority - G2, OU=”(c) 2009 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US
4a538c28
3
Tue Jul 07 20:25:54 IDT 2009
Sat Dec 07 19:55:54 IST 2030
8C:F4:27:FD:79:0C:3A:D1:66:06:8D:E8:1E:57:EF:BB:93:22:72:D4
24
quovadisrootca2g3 [jdk]
CN=QuoVadis Root CA 2 G3, O=QuoVadis Limited, C=BM
CN=QuoVadis Root CA 2 G3, O=QuoVadis Limited, C=BM
445734245b81899b35f2ceb82b3b5ba726f07528
3
Thu Jan 12 20:59:32 IST 2012
Sun Jan 12 20:59:32 IST 2042
09:3C:61:F3:8B:8B:DC:7D:55:DF:75:38:02:05:00:E1:25:F5:C8:36
25
securetrustca [jdk]
CN=SecureTrust CA, O=SecureTrust Corporation, C=US
CN=SecureTrust CA, O=SecureTrust Corporation, C=US
cf08e5c0816a5ad427ff0eb271859d0
3
Tue Nov 07 21:31:18 IST 2006
Mon Dec 31 21:40:55 IST 2029
87:82:C6:C3:04:35:3B:CF:D2:96:92:D2:59:3E:7D:44:D9:34:FF:11
26
camerfirmachambersca [jdk]
CN=Chambers of Commerce Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU
CN=Chambers of Commerce Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU
a3da427ea4b1aeda
3
Fri Aug 01 15:29:50 IDT 2008
Sat Jul 31 15:29:50 IDT 2038
78:6A:74:AC:76:AB:14:7F:9C:6A:30:50:BA:9E:A8:7E:FE:9A:CE:3C
27
geotrustprimaryca [jdk]
CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US
CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US
18acb56afd69b6153a636cafdafac4a1
3
Mon Nov 27 02:00:00 IST 2006
Thu Jul 17 02:59:59 IDT 2036
32:3C:11:8E:1B:F7:B8:B6:52:54:E2:E2:10:0D:D6:02:90:37:F0:96
28
identrustcommercial [jdk]
CN=IdenTrust Commercial Root CA 1, O=IdenTrust, C=US
CN=IdenTrust Commercial Root CA 1, O=IdenTrust, C=US
a0142800000014523c844b500000002
3
Thu Jan 16 20:12:23 IST 2014
Mon Jan 16 20:12:23 IST 2034
DF:71:7E:AA:4A:D9:4E:C9:55:84:99:60:2D:48:DE:5F:BC:F0:3A:25
29
thawteprimaryrootcag3 [jdk]
CN=thawte Primary Root CA - G3, OU=”(c) 2008 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US
CN=thawte Primary Root CA - G3, OU=”(c) 2008 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US
600197b746a7eab4b49ad64b2ff790fb
3
Wed Apr 02 03:00:00 IDT 2008
Wed Dec 02 01:59:59 IST 2037
F1:8B:53:8D:1B:E9:03:B6:A6:F0:56:43:5B:17:15:89:CA:F3:6B:F2
30
buypassclass3ca [jdk]
CN=Buypass Class 3 Root CA, O=Buypass AS-983163327, C=NO
CN=Buypass Class 3 Root CA, O=Buypass AS-983163327, C=NO
2
3
Tue Oct 26 10:28:58 IST 2010
Fri Oct 26 11:28:58 IDT 2040
DA:FA:F7:FA:66:84:EC:06:8F:14:50:BD:C7:C2:81:A5:BC:A9:64:57
31
verisigntsaca [jdk]
CN=Thawte Timestamping CA, OU=Thawte Certification, O=Thawte, L=Durbanville, ST=Western Cape, C=ZA
CN=Thawte Timestamping CA, OU=Thawte Certification, O=Thawte, L=Durbanville, ST=Western Cape, C=ZA
67c8e1e8e3be1cbdfc913b8ea6238749
3
Wed Jan 01 02:00:00 IST 1997
Sat Jan 02 01:59:59 IST 2021
20:CE:B1:F0:F5:1C:0E:19:A9:F3:8D:B1:AA:8E:03:8C:AA:7A:C7:01
32
verisignclass3g4ca [jdk]
CN=VeriSign Class 3 Public Primary Certification Authority - G4, OU=”(c) 2007 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
CN=VeriSign Class 3 Public Primary Certification Authority - G4, OU=”(c) 2007 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
2f80fe238c0e220f486712289187acb3
3
Mon Nov 05 02:00:00 IST 2007
Tue Jan 19 01:59:59 IST 2038
22:D5:D8:DF:8F:02:31:D1:8D:F7:9D:B7:CF:8A:2D:64:C9:3F:6C:3A
33
baltimorecybertrustca [jdk]
CN=Baltimore CyberTrust Root, OU=CyberTrust, O=Baltimore, C=IE
CN=Baltimore CyberTrust Root, OU=CyberTrust, O=Baltimore, C=IE
20000b9
3
Fri May 12 21:46:00 IDT 2000
Tue May 13 02:59:00 IDT 2025
D4:DE:20:D0:5E:66:FC:53:FE:1A:50:88:2C:78:DB:28:52:CA:E4:74
34
luxtrustglobalrootca [jdk]
CN=LuxTrust Global Root, O=LuxTrust s.a., C=LU
CN=LuxTrust Global Root, O=LuxTrust s.a., C=LU
bb8
3
Thu Mar 17 11:51:37 IST 2011
Wed Mar 17 11:51:37 IST 2021
C9:3C:34:EA:90:D9:13:0C:0F:03:00:4B:98:BD:8B:35:70:91:56:11
35
verisignclass3g2ca [jdk]
OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 3 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US
OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 3 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US
7dd9fe07cfa81eb7107967fba78934c6
1
Mon May 18 03:00:00 IDT 1998
Wed Aug 02 02:59:59 IDT 2028
85:37:1C:A6:E5:50:14:3D:CE:28:03:47:1B:DE:3A:09:E8:F8:77:0F
36
camerfirmachamberscommerceca [jdk]
CN=Chambers of Commerce Root, OU=http://www.chambersign.org, O=AC Camerfirma SA CIF A82743287, C=EU
CN=Chambers of Commerce Root, OU=http://www.chambersign.org, O=AC Camerfirma SA CIF A82743287, C=EU
0
3
Tue Sep 30 19:13:43 IDT 2003
Wed Sep 30 19:13:44 IDT 2037
6E:3A:55:A4:19:0C:19:5C:93:84:3C:C0:DB:72:2E:31:30:61:F0:B1
37
soneraclass2ca [jdk]
CN=Sonera Class2 CA, O=Sonera, C=FI
CN=Sonera Class2 CA, O=Sonera, C=FI
1d
3
Fri Apr 06 09:29:40 IST 2001
Tue Apr 06 10:29:40 IDT 2021
37:F7:6D:E6:07:7C:90:C5:B1:3E:93:1A:B7:41:10:B4:F2:E4:9A:27
38
affirmtrustnetworkingca [jdk]
CN=AffirmTrust Networking, O=AffirmTrust, C=US
CN=AffirmTrust Networking, O=AffirmTrust, C=US
7c4f04391cd4992d
3
Fri Jan 29 16:08:24 IST 2010
Tue Dec 31 16:08:24 IST 2030
29:36:21:02:8B:20:ED:02:F5:66:C5:32:D1:D6:ED:90:9F:45:00:2F
39
ttelesecglobalrootclass3ca [jdk]
CN=T-TeleSec GlobalRoot Class 3, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE
CN=T-TeleSec GlobalRoot Class 3, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE
1
3
Wed Oct 01 13:29:56 IDT 2008
Sun Oct 02 02:59:59 IDT 2033
55:A6:72:3E:CB:F2:EC:CD:C3:23:74:70:19:9D:2A:BE:11:E3:81:D1
40
xrampglobalca [jdk]
CN=XRamp Global Certification Authority, O=XRamp Security Services Inc, OU=www.xrampsecurity.com, C=US
CN=XRamp Global Certification Authority, O=XRamp Security Services Inc, OU=www.xrampsecurity.com, C=US
50946cec18ead59c4dd597ef758fa0ad
3
Mon Nov 01 19:14:04 IST 2004
Mon Jan 01 07:37:19 IST 2035
B8:01:86:D1:EB:9C:86:A5:41:04:CF:30:54:F3:4C:52:B7:E5:58:C6
41
geotrustprimarycag3 [jdk]
CN=GeoTrust Primary Certification Authority - G3, OU=(c) 2008 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US
CN=GeoTrust Primary Certification Authority - G3, OU=(c) 2008 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US
15ac6e9419b2794b41f627a9c3180f1f
3
Wed Apr 02 03:00:00 IDT 2008
Wed Dec 02 01:59:59 IST 2037
03:9E:ED:B8:0B:E7:A0:3C:69:53:89:3B:20:D2:D9:32:3A:4C:2A:FD
42
camerfirmachambersignca [jdk]
CN=Global Chambersign Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU
CN=Global Chambersign Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU
c9cdd3e9d57d23ce
3
Fri Aug 01 15:31:40 IDT 2008
Sat Jul 31 15:31:40 IDT 2038
4A:BD:EE:EC:95:0D:35:9C:89:AE:C7:52:A1:2C:5B:29:F6:D6:AA:0C
43
thawteprimaryrootcag2 [jdk]
CN=thawte Primary Root CA - G2, OU=”(c) 2007 thawte, Inc. - For authorized use only”, O=”thawte, Inc.”, C=US
CN=thawte Primary Root CA - G2, OU=”(c) 2007 thawte, Inc. - For authorized use only”, O=”thawte, Inc.”, C=US
35fc265cd9844fc93d263d579baed756
3
Mon Nov 05 02:00:00 IST 2007
Tue Jan 19 01:59:59 IST 2038
AA:DB:BC:22:23:8F:C4:01:A1:27:BB:38:DD:F4:1D:DB:08:9E:F0:12
44
usertrusteccca [jdk]
CN=USERTrust ECC Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US
CN=USERTrust ECC Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US
5c8b99c55a94c5d27156decd8980cc26
3
Mon Feb 01 02:00:00 IST 2010
Tue Jan 19 01:59:59 IST 2038
D1:CB:CA:5D:B2:D5:2A:7F:69:3B:67:4D:E5:F0:5A:1D:0C:95:7D:F0
45
swisssignsilverg2ca [jdk]
CN=SwissSign Silver CA - G2, O=SwissSign AG, C=CH
CN=SwissSign Silver CA - G2, O=SwissSign AG, C=CH
4f1bd42f54bb2f4b
3
Wed Oct 25 10:32:46 IST 2006
Sat Oct 25 11:32:46 IDT 2036
9B:AA:E5:9F:56:EE:21:CB:43:5A:BE:25:93:DF:A7:F0:40:D1:1D:CB
46
affirmtrustpremiumca [jdk]
CN=AffirmTrust Premium, O=AffirmTrust, C=US
CN=AffirmTrust Premium, O=AffirmTrust, C=US
6d8c1446b1a60aee
3
Fri Jan 29 16:10:36 IST 2010
Mon Dec 31 16:10:36 IST 2040
D8:A6:33:2C:E0:03:6F:B1:85:F6:63:4F:7D:6A:06:65:26:32:28:27
47
globalsignca [jdk]
CN=GlobalSign Root CA, OU=Root CA, O=GlobalSign nv-sa, C=BE
CN=GlobalSign Root CA, OU=Root CA, O=GlobalSign nv-sa, C=BE
40000000001154b5ac394
3
Tue Sep 01 15:00:00 IDT 1998
Fri Jan 28 14:00:00 IST 2028
B1:BC:96:8B:D4:F4:9D:62:2A:A8:9A:81:F2:15:01:52:A4:1D:82:9C
48
dtrustclass3ca2 [jdk]
CN=D-TRUST Root Class 3 CA 2 2009, O=D-Trust GmbH, C=DE
CN=D-TRUST Root Class 3 CA 2 2009, O=D-Trust GmbH, C=DE
983f3
3
Thu Nov 05 10:35:58 IST 2009
Mon Nov 05 10:35:58 IST 2029
58:E8:AB:B0:36:15:33:FB:80:F7:9B:1B:6D:29:D3:FF:8D:5F:00:F0
49
affirmtrustcommercialca [jdk]
CN=AffirmTrust Commercial, O=AffirmTrust, C=US
CN=AffirmTrust Commercial, O=AffirmTrust, C=US
7777062726a9b17c
3
Fri Jan 29 16:06:06 IST 2010
Tue Dec 31 16:06:06 IST 2030
F9:B5:B6:32:45:5F:9C:BE:EC:57:5F:80:DC:E9:6E:2C:C7:B2:78:B7
50
thawtepremiumserverca [jdk]
EMAILADDRESS=premium-server@thawte.com, CN=Thawte Premium Server CA, OU=Certification Services Division, O=Thawte Consulting cc, L=Cape Town, ST=Western Cape, C=ZA
EMAILADDRESS=premium-server@thawte.com, CN=Thawte Premium Server CA, OU=Certification Services Division, O=Thawte Consulting cc, L=Cape Town, ST=Western Cape, C=ZA
36122296c5e338a520a1d25f4cd70954
3
Thu Aug 01 03:00:00 IDT 1996
Sat Jan 02 01:59:59 IST 2021
E0:AB:05:94:20:72:54:93:05:60:62:02:36:70:F7:CD:2E:FC:66:66
51
comodoaaaca [jdk]
CN=AAA Certificate Services, O=Comodo CA Limited, L=Salford, ST=Greater Manchester, C=GB
CN=AAA Certificate Services, O=Comodo CA Limited, L=Salford, ST=Greater Manchester, C=GB
1
3
Thu Jan 01 02:00:00 IST 2004
Mon Jan 01 01:59:59 IST 2029
D1:EB:23:A4:6D:17:D6:8F:D9:25:64:C2:F1:F1:60:17:64:D8:E3:49
52
geotrustprimarycag2 [jdk]
CN=GeoTrust Primary Certification Authority - G2, OU=(c) 2007 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US
CN=GeoTrust Primary Certification Authority - G2, OU=(c) 2007 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US
3cb2f4480a00e2feeb243b5e603ec36b
3
Mon Nov 05 02:00:00 IST 2007
Tue Jan 19 01:59:59 IST 2038
8D:17:84:D5:37:F3:03:7D:EC:70:FE:57:8B:51:9A:99:E6:10:D7:B0
53
globalsignr3ca [jdk]
CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R3
CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R3
4000000000121585308a2
3
Wed Mar 18 12:00:00 IST 2009
Sun Mar 18 12:00:00 IST 2029
D6:9B:56:11:48:F0:1C:77:C5:45:78:C1:09:26:DF:5B:85:69:76:AD
54
quovadisrootca3 [jdk]
CN=QuoVadis Root CA 3, O=QuoVadis Limited, C=BM
CN=QuoVadis Root CA 3, O=QuoVadis Limited, C=BM
5c6
3
Fri Nov 24 21:11:23 IST 2006
Mon Nov 24 21:06:44 IST 2031
1F:49:14:F7:D8:74:95:1D:DD:AE:02:C0:BE:FD:3A:2D:82:75:51:85
55
thawteprimaryrootca [jdk]
CN=thawte Primary Root CA, OU=”(c) 2006 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US
CN=thawte Primary Root CA, OU=”(c) 2006 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US
344ed55720d5edec49f42fce37db2b6d
3
Fri Nov 17 02:00:00 IST 2006
Thu Jul 17 02:59:59 IDT 2036
91:C6:D6:EE:3E:8A:C8:63:84:E5:48:C2:99:29:5C:75:6C:81:7B:81
56
starfieldrootg2ca [jdk]
CN=Starfield Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US
CN=Starfield Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US
0
3
Tue Sep 01 03:00:00 IDT 2009
Fri Jan 01 01:59:59 IST 2038
B5:1C:06:7C:EE:2B:0C:3D:F8:55:AB:2D:92:F4:FE:39:D4:E7:0F:0E
57
starfieldclass2ca [jdk]
OU=Starfield Class 2 Certification Authority, O=”Starfield Technologies, Inc.”, C=US
OU=Starfield Class 2 Certification Authority, O=”Starfield Technologies, Inc.”, C=US
0
3
Tue Jun 29 20:39:16 IDT 2004
Thu Jun 29 20:39:16 IDT 2034
AD:7E:1C:28:B0:64:EF:8F:60:03:40:20:14:C3:D0:E3:37:0E:B5:8A
58
verisignclass3ca [jdk]
OU=Class 3 Public Primary Certification Authority, O=”VeriSign, Inc.”, C=US
OU=Class 3 Public Primary Certification Authority, O=”VeriSign, Inc.”, C=US
3c9131cb1ff6d01b0e9ab8d044bf12be
1
Mon Jan 29 02:00:00 IST 1996
Thu Aug 03 02:59:59 IDT 2028
A1:DB:63:93:91:6F:17:E4:18:55:09:40:04:15:C7:02:40:B0:AE:6B
59
affirmtrustpremiumeccca [jdk]
CN=AffirmTrust Premium ECC, O=AffirmTrust, C=US
CN=AffirmTrust Premium ECC, O=AffirmTrust, C=US
7497258ac73f7a54
3
Fri Jan 29 16:20:24 IST 2010
Mon Dec 31 16:20:24 IST 2040
B8:23:6B:00:2F:1D:16:86:53:01:55:6C:11:A4:37:CA:EB:FF:C3:BB
60
geotrustglobalca [jdk]
CN=GeoTrust Global CA, O=GeoTrust Inc., C=US
CN=GeoTrust Global CA, O=GeoTrust Inc., C=US
23456
3
Tue May 21 07:00:00 IDT 2002
Sat May 21 07:00:00 IDT 2022
DE:28:F4:A4:FF:E5:B9:2F:A3:C5:03:D1:A3:49:A7:F9:96:2A:82:12
61
godaddyclass2ca [jdk]
OU=Go Daddy Class 2 Certification Authority, O=”The Go Daddy Group, Inc.”, C=US
OU=Go Daddy Class 2 Certification Authority, O=”The Go Daddy Group, Inc.”, C=US
0
3
Tue Jun 29 20:06:20 IDT 2004
Thu Jun 29 20:06:20 IDT 2034
27:96:BA:E6:3F:18:01:E2:77:26:1B:A0:D7:77:70:02:8F:20:EE:E4
62
godaddyrootg2ca [jdk]
CN=Go Daddy Root Certificate Authority - G2, O=”GoDaddy.com, Inc.”, L=Scottsdale, ST=Arizona, C=US
CN=Go Daddy Root Certificate Authority - G2, O=”GoDaddy.com, Inc.”, L=Scottsdale, ST=Arizona, C=US
0
3
Tue Sep 01 03:00:00 IDT 2009
Fri Jan 01 01:59:59 IST 2038
47:BE:AB:C9:22:EA:E8:0E:78:78:34:62:A7:9F:45:C2:54:FD:E6:8B
63
verisignclass3g5ca [jdk]
CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU=”(c) 2006 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU=”(c) 2006 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
18dad19e267de8bb4a2158cdcc6b3b4a
3
Wed Nov 08 02:00:00 IST 2006
Thu Jul 17 02:59:59 IDT 2036
4E:B6:D5:78:49:9B:1C:CF:5F:58:1E:AD:56:BE:3D:9B:67:44:A5:E5
64
quovadisrootca2 [jdk]
CN=QuoVadis Root CA 2, O=QuoVadis Limited, C=BM
CN=QuoVadis Root CA 2, O=QuoVadis Limited, C=BM
509
3
Fri Nov 24 20:27:00 IST 2006
Mon Nov 24 20:23:33 IST 2031
CA:3A:FB:CF:12:40:36:4B:44:B2:16:20:88:80:48:39:19:93:7C:F7
65
certumca [jdk]
CN=Certum CA, O=Unizeto Sp. z o.o., C=PL
CN=Certum CA, O=Unizeto Sp. z o.o., C=PL
10020
3
Tue Jun 11 13:46:39 IDT 2002
Fri Jun 11 13:46:39 IDT 2027
62:52:DC:40:F7:11:43:A2:2F:DE:9E:F7:34:8E:06:42:51:B1:81:18
66
swisssignplatinumg2ca [jdk]
CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH
CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH
4eb200670c035d4f
3
Wed Oct 25 10:36:00 IST 2006
Sat Oct 25 11:36:00 IDT 2036
56:E0:FA:C0:3B:8F:18:23:55:18:E5:D3:11:CA:E8:C2:43:31:AB:66
67
chunghwaepkirootca [jdk]
OU=ePKI Root Certification Authority, O=”Chunghwa Telecom Co., Ltd.”, C=TW
OU=ePKI Root Certification Authority, O=”Chunghwa Telecom Co., Ltd.”, C=TW
15c8bd65475cafb897005ee406d2bc9d
3
Mon Dec 20 04:31:27 IST 2004
Wed Dec 20 04:31:27 IST 2034
67:65:0D:F1:7E:8E:7E:5B:82:40:A4:F4:56:4B:CF:E2:3D:69:C6:F0
68
quovadisrootca3g3 [jdk]
CN=QuoVadis Root CA 3 G3, O=QuoVadis Limited, C=BM
CN=QuoVadis Root CA 3 G3, O=QuoVadis Limited, C=BM
2ef59b0228a7db7affd5a3a9eebd03a0cf126a1d
3
Thu Jan 12 22:26:32 IST 2012
Sun Jan 12 22:26:32 IST 2042
48:12:BD:92:3C:A8:C4:39:06:E7:30:6D:27:96:E6:A4:CF:22:2E:7D
69
quovadisrootca [jdk]
CN=QuoVadis Root Certification Authority, OU=Root Certification Authority, O=QuoVadis Limited, C=BM
CN=QuoVadis Root Certification Authority, OU=Root Certification Authority, O=QuoVadis Limited, C=BM
3ab6508b
3
Mon Mar 19 20:33:33 IST 2001
Wed Mar 17 20:33:33 IST 2021
DE:3F:40:BD:50:93:D3:9B:6C:60:F6:DA:BC:07:62:01:00:89:76:C9
70
digicerthighassuranceevrootca [jdk]
CN=DigiCert High Assurance EV Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert High Assurance EV Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
2ac5c266a0b409b8f0b79f2ae462577
3
Fri Nov 10 02:00:00 IST 2006
Mon Nov 10 02:00:00 IST 2031
5F:B7:EE:06:33:E2:59:DB:AD:0C:4C:9A:E6:D3:8F:1A:61:C7:DC:25
71
quovadisrootca1g3 [jdk]
CN=QuoVadis Root CA 1 G3, O=QuoVadis Limited, C=BM
CN=QuoVadis Root CA 1 G3, O=QuoVadis Limited, C=BM
78585f2ead2c194be3370735341328b596d46593
3
Thu Jan 12 19:27:44 IST 2012
Sun Jan 12 19:27:44 IST 2042
1B:8E:EA:57:96:29:1A:C9:39:EA:B8:0A:81:1A:73:73:C0:93:79:67
72
comodorsaca [jdk]
CN=COMODO RSA Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
CN=COMODO RSA Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
4caaf9cadb636fe01ff74ed85b03869d
3
Tue Jan 19 02:00:00 IST 2010
Tue Jan 19 01:59:59 IST 2038
AF:E5:D2:44:A8:D1:19:42:30:FF:47:9F:E2:F8:97:BB:CD:7A:8C:B4
73
buypassclass2ca [jdk]
CN=Buypass Class 2 Root CA, O=Buypass AS-983163327, C=NO
CN=Buypass Class 2 Root CA, O=Buypass AS-983163327, C=NO
2
3
Tue Oct 26 10:38:03 IST 2010
Fri Oct 26 11:38:03 IDT 2040
49:0A:75:74:DE:87:0A:47:FE:58:EE:F6:C7:6B:EB:C6:0B:12:40:99
74
secomscrootca2 [jdk]
OU=Security Communication RootCA2, O=”SECOM Trust Systems CO.,LTD.”, C=JP
OU=Security Communication RootCA2, O=”SECOM Trust Systems CO.,LTD.”, C=JP
0
3
Fri May 29 08:00:39 IDT 2009
Tue May 29 08:00:39 IDT 2029
5F:3B:8C:F2:F8:10:B3:7D:78:B4:CE:EC:19:19:C3:73:34:B9:C7:74
75
entrustevca [jdk]
CN=Entrust Root Certification Authority, OU=”(c) 2006 Entrust, Inc.”, OU=www.entrust.net/CPS is incorporated by reference, O=”Entrust, Inc.”, C=US
CN=Entrust Root Certification Authority, OU=”(c) 2006 Entrust, Inc.”, OU=www.entrust.net/CPS is incorporated by reference, O=”Entrust, Inc.”, C=US
456b5054
3
Mon Nov 27 22:23:42 IST 2006
Fri Nov 27 22:53:42 IST 2026
B3:1E:B1:B7:40:E3:6C:84:02:DA:DC:37:D4:4D:F5:D4:67:49:52:F9
76
verisignclass3g3ca [jdk]
CN=VeriSign Class 3 Public Primary Certification Authority - G3, OU=”(c) 1999 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
CN=VeriSign Class 3 Public Primary Certification Authority - G3, OU=”(c) 1999 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
9b7e0649a33e62b9d5ee90487129ef57
1
Fri Oct 01 02:00:00 IST 1999
Thu Jul 17 02:59:59 IDT 2036
13:2D:0D:45:53:4B:69:97:CD:B2:D5:C3:39:E2:55:76:60:9B:5C:C6
77
certumtrustednetworkca [jdk]
CN=Certum Trusted Network CA, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL
CN=Certum Trusted Network CA, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL
444c0
3
Wed Oct 22 14:07:37 IST 2008
Mon Dec 31 14:07:37 IST 2029
07:E0:32:E0:20:B7:2C:3F:19:2F:06:28:A2:59:3A:19:A7:0F:06:9E
78
dtrustclass3ca2ev [jdk]
CN=D-TRUST Root Class 3 CA 2 EV 2009, O=D-Trust GmbH, C=DE
CN=D-TRUST Root Class 3 CA 2 EV 2009, O=D-Trust GmbH, C=DE
983f4
3
Thu Nov 05 10:50:46 IST 2009
Mon Nov 05 10:50:46 IST 2029
96:C9:1B:0B:95:B4:10:98:42:FA:D0:D8:22:79:FE:60:FA:B9:16:83
79
globalsigneccrootcar5 [jdk]
CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R5
CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R5
605949e0262ebb55f90a778a71f94ad86c
3
Tue Nov 13 02:00:00 IST 2012
Tue Jan 19 05:14:07 IST 2038
1F:24:C6:30:CD:A4:18:EF:20:69:FF:AD:4F:DD:5F:46:3A:1B:69:AA
80
starfieldservicesrootg2ca [jdk]
CN=Starfield Services Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US
CN=Starfield Services Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US
0
3
Tue Sep 01 03:00:00 IDT 2009
Fri Jan 01 01:59:59 IST 2038
92:5A:8F:8D:2C:6D:04:E0:66:5F:59:6A:FF:22:D8:63:E8:25:6F:3F
81
ttelesecglobalrootclass2ca [jdk]
CN=T-TeleSec GlobalRoot Class 2, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE
CN=T-TeleSec GlobalRoot Class 2, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE
1
3
Wed Oct 01 13:40:14 IDT 2008
Sun Oct 02 02:59:59 IDT 2033
59:0D:2D:7D:88:4F:40:2E:61:7E:A5:62:32:17:65:CF:17:D8:94:E9
82
addtrustqualifiedca [jdk]
CN=AddTrust Qualified CA Root, OU=AddTrust TTP Network, O=AddTrust AB, C=SE
CN=AddTrust Qualified CA Root, OU=AddTrust TTP Network, O=AddTrust AB, C=SE
1
3
Tue May 30 13:44:50 IDT 2000
Sat May 30 13:44:50 IDT 2020
4D:23:78:EC:91:95:39:B5:00:7F:75:8F:03:3B:21:1E:C5:4D:8B:CF
83
digicertglobalrootca [jdk]
CN=DigiCert Global Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Global Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
83be056904246b1a1756ac95991c74a
3
Fri Nov 10 02:00:00 IST 2006
Mon Nov 10 02:00:00 IST 2031
A8:98:5D:3A:65:E5:E5:C4:B2:D7:D6:6D:40:C6:DD:2F:B1:9C:54:36
84
amazonrootca1 [jdk]
CN=Amazon Root CA 1, O=Amazon, C=US
CN=Amazon Root CA 1, O=Amazon, C=US
66c9fcf99bf8c0a39e2f0788a43e696365bca
3
Tue May 26 08:00:00 CST 2015
Sun Jan 17 08:00:00 CST 2038
8D:A7:F9:65:EC:5E:FC:37:91:0F:1C:6E:59:FD:C1:CC:6A:6E:DE:16
85
amazonrootca2 [jdk]
CN=Amazon Root CA 2, O=Amazon, C=US
CN=Amazon Root CA 2, O=Amazon, C=US
66c9fd29635869f0a0fe58678f85b26bb8a37
3
Tue May 26 08:00:00 CST 2015
Sat May 26 08:00:00 CST 2040
5A:8C:EF:45:D7:A6:98:59:76:7A:8C:8B:44:96:B5:78:CF:47:4B:1A
86
amazonrootca3 [jdk]
CN=Amazon Root CA 3, O=Amazon, C=US
CN=Amazon Root CA 3, O=Amazon, C=US
66c9fd5749736663f3b0b9ad9e89e7603f24a
3
Tue May 26 08:00:00 CST 2015
Sat May 26 08:00:00 CST 2040
0D:44:DD:8C:3C:8C:1A:1A:58:75:64:81:E9:0F:2E:2A:FF:B3:D2:6E
87
amazonrootca4 [jdk]
CN=Amazon Root CA 4, O=Amazon, C=US
CN=Amazon Root CA 4, O=Amazon, C=US
66c9fd7c1bb104c2943e5717b7b2cc81ac10e
3
Tue May 26 08:00:00 CST 2015
Sat May 26 08:00:00 CST 2040
F6:10:84:07:D6:F8:BB:67:98:0C:C2:E2:44:C2:EB:AE:1C:EF:63:BE
88
globalsignrootcar6 [jdk]
CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R6
CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R6
45e6bb038333c3856548e6ff4551
3
Wed Dec 10 08:00:00 CST 2014
Sun Dec 10 08:00:00 CST 2034
80:94:64:0E:B5:A7:A1:CA:11:9C:1F:DD:D5:9F:81:02:63:A7:FB:D1
89
letsencryptisrgx1 [jdk]
CN=ISRG Root X1, O=Internet Security Research Group, C=US
CN=ISRG Root X1, O=Internet Security Research Group, C=US
8210cfb0d240e3594463e0bb63828b00
3
Thu Jun 04 19:04:38 CST 2015
Mon Jun 04 19:04:38 CST 2035
CA:BD:2A:79:A1:07:6A:31:F2:1D:25:36:35:CB:03:9D:43:29:A5:E8
90
luxtrustglobalroot2ca [jdk]
CN=LuxTrust Global Root 2, O=LuxTrust S.A., C=LU
CN=LuxTrust Global Root 2, O=LuxTrust S.A., C=LU
a7ea6df4b449eda6a24859ee6b815d3167fbbb1
3
Thu Mar 05 21:21:57 CST 2015
Mon Mar 05 21:21:57 CST 2035
1E:0E:56:19:0A:D1:8B:25:98:B2:04:44:FF:66:8A:04:17:99:5F:3F
91
teliasonerarootcav1 [jdk]
CN=TeliaSonera Root CA v1, O=TeliaSonera
CN=TeliaSonera Root CA v1, O=TeliaSonera
95be16a0f72e46f17b398272fa8bcd96
3
Thu Oct 18 20:00:50 CST 2007
Mon Oct 18 20:00:50 CST 2032
43:13:BB:96:F1:D5:86:9B:C1:4E:6A:92:F6:CF:F6:34:69:87:82:37
92
TWCA Root Certification Authority
CN=TWCA Root Certification Authority, OU=Root CA, O=TAIWAN-CA, C=TW
CN=TWCA Root Certification Authority, OU=Root CA, O=TAIWAN-CA, C=TW
01
3
Thu Aug 28 15:24:33 CST 2008
Tue Dec 31 23:59:59 CST 2030
CF:9E:87:6D:D3:EB:FC:42:26:97:A3:B5:A3:7A:A0:76:A9:06:23:48

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-faq-13-V14
爬取时间: 2025-04-29 21:01:48
来源: Huawei Developer
具体见加密套件。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-faq-14-V14
爬取时间: 2025-04-29 21:02:02
来源: Huawei Developer
如果开发者提供的证书在IAP服务内置信任库中查询不到，则该证书不被IAP信任，需要构造完整的信任链以被IAP信任。
此处以Chrome浏览器最新版本（一般是支持自动验证证书链）为工具，以华为的证书为例，手工构造完整的证书链步骤如下：
开发者也可以选择其他证书链工具构造完成的证书链。
1.  访问华为开发者网站, 依次点击“查看网站信息 > 显示连接详情 > 显示证书 > 详细信息”，可查看证书状况，如下图所示：
2.  依次点击“服务器证书 > 导出 > Base64 编码 ASCII，证书链（*.pem;*.crt） > 保存”，如下图所示：
3.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170049.40079753925997162086746061266656:50001231000000:2800:59AA360FE146250EF5CD44F8B223B6249300E0F0C1EBC38AA7A79C64D1845A7F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170049.10379181470547860757011527737779:50001231000000:2800:FC03DB4616061B7B29E2C7C164EA9636DD9513D72681EC68EA74A6EE988E3102.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170049.88184873907061585758318465584630:50001231000000:2800:58134420FF4F135EEF671C68D918C9640B02791BE8EB67B389762088D4367AD8.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/iap-faq-15-V14
爬取时间: 2025-04-29 21:02:15
来源: Huawei Developer
是正常的。出于安全考虑，系统控件在拉起IAP Kit收银台时，会将子窗口等悬浮形态的组件隐藏。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/live-view-kit-guide-V14
爬取时间: 2025-04-29 21:02:32
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-introduction-V14
爬取时间: 2025-04-29 21:02:48
来源: Huawei Developer
Live View Kit（实况窗服务）支持应用将订单或者服务的实时状态信息变化在设备的关键界面展示，并对展示信息的生命周期、用户界面UI效果等进行管理。
场景介绍
实况窗是一种帮助用户聚焦正在进行的任务，方便快速查看和即时处理的通知形态，具有时段性、时效性、变化性的特点。
在展示形态上，实况窗支持在锁屏、通知中心、状态栏等位置展示，主要有两种展示形式：胶囊态和卡片态。
| 通知中心  | 状态栏  | 锁屏  |
| --- | --- | --- |
|   |    |   |
通知中心
状态栏
锁屏
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170050.15451322103547237326473061140920:50001231000000:2800:0DAA998AA58F715D61B11D9CC69224B57A9210CB790EAC2A4E93F6C11392ABE1.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170050.87747643838962955796445099101112:50001231000000:2800:949A13A4B268E0F48C07586C30632BB3857C394D4D3656A4BE204B9FFAB197A1.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170050.57328898040082749153858858892607:50001231000000:2800:E5CC8D88ABAE702D332421F8CFA47E13040EC553ADB53B318AFFA46D47F626D0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170051.81444285624232170639337179975981:50001231000000:2800:0C4AB9A3ABEAC96A10BF0BE1A9B751B96DB4DF40048979327CD399FAB932C980.png)
时段性
该事件或服务需要持续一段时间，有明确的开始和结束，而非单点的提醒或信息。
例：打车、外卖等从事件开始到结束需要经历一段时间，属于实况窗；天气提示、电影票等单点提醒，则不属于实况窗。
时效性
内容为正在进行或即时发生的事件或服务的提醒，在特定时间段内，信息对用户有价值。
例：打车行程中、外卖配送中等正在进行的用户活动；2天后的机票，在刚买时不提醒，而在出发前提示，具体提醒时间根据业务实际情况确定，属于实况窗。权限调用、功能待机等系统状态，不属于实况窗。
变化性
实况窗所展示的内容需要动态更新，以确保用户看到最新的状态。
产品优势
-  实况窗特性与设备硬件完全解耦，开发者接入后，可以覆盖到所有HarmonyOS NEXT及以上的全量手机、平板设备。
-  开发者一次接入，可以实现包括锁屏、通知中心、状态栏在内多个触达点展示实况窗。
-  状态栏的实况胶囊支持点击交互，用户可以在任何界面查看实况胶囊或者点击实况胶囊展开卡片，查看详细进展。 实况窗点击后也可直接进入落地页，方便用户快速进入应用查看。
-  用户可以在多个触达点及时关注到服务的最新进展，帮助业务实现服务的快速、高效闭环，提升业务履约效率。
支持的范围与场景
实况窗场景准入原则
实况窗支持对接的场景
| 场景类型  | EVENT取值  | 场景描述  | 适用范围  |
| --- | --- | --- | --- |
| 出行打车  | TAXI  | 用户线上约车后，向用户展示司机接驾等待时间、行程中的剩余距离和时间等信息。  | 适用于网约车、出租车、拼车、顺风车等场景。  |
| 即时配送  | DELIVERY  | 指配送员将餐品、商品送达到用户指定地点的业务场景，通常在较短时间内完成配送环节。  | 适用于外卖、生鲜配送、同城配送等场景。  |
| 航班  | FLIGHT  | 用户主动关注某个航班时，向用户展示航班的关键变动，如航班开始登机、航班起飞、航班延误、航班取消、航班到达等关键场景。  | 适用于用户通过航班出行或者主动关注某个航班进展的场景。  |
| 高铁/火车  | TRAIN  | 用户通过高铁、火车出行，向用户展示检票口、座位号、车次信息及列车运行状态等信息。  | 适用于高铁出行、火车出行的场景。  |
| 排队  | QUEUE  | 需要通过排队叫号的方式，按顺序为用户提供服务的业务场景。  | 适用于办事大厅、医院、银行、餐饮等排队叫号能力场景。  |
| 取餐  | PICK_UP  | 指的是用户完成餐品/商品下单后，自行取餐或者取件的场景。  | 适用于餐饮线下取餐提醒，包括餐品排队情况、制作进度、取餐提醒等。  |
| 赛事比分  | SCORE  | 展示比赛双方成绩变化情况。  | 适用于游戏赛事、体育赛事等展示比分变化情况的场景。  |
| 共享租赁  | RENT  | 用户使用临时租赁服务时，向用户展示实时租赁时长和费用等租赁状态信息的场景。  | 适用于共享单车、共享充电宝、停车场临时停车等场景。  |
| 计时  | TIMER  | 用户在某个短时间段持续的正计时或任务前的倒计时场景。  | 适用于专注时刻、番茄时钟、抢票倒计时提醒场景，仅限于工具类应用申请（计时场景仅支持通过端侧创建与更新）。  |
| 运动锻炼  | WORKOUT  | 运动过程中，向用户实时展示运动的时长和进度等信息。  | 适用于户外或室内的运动记录，如跑步、骑行等。  |
| 导航  | NAVIGATION  | 用户使用导航服务时，展示将要发生的路线变化。  | 适用于步行导航、骑行导航、车辆导航。  |
场景类型
EVENT取值
场景描述
适用范围
出行打车
TAXI
用户线上约车后，向用户展示司机接驾等待时间、行程中的剩余距离和时间等信息。
适用于网约车、出租车、拼车、顺风车等场景。
即时配送
DELIVERY
指配送员将餐品、商品送达到用户指定地点的业务场景，通常在较短时间内完成配送环节。
适用于外卖、生鲜配送、同城配送等场景。
航班
FLIGHT
用户主动关注某个航班时，向用户展示航班的关键变动，如航班开始登机、航班起飞、航班延误、航班取消、航班到达等关键场景。
适用于用户通过航班出行或者主动关注某个航班进展的场景。
高铁/火车
TRAIN
用户通过高铁、火车出行，向用户展示检票口、座位号、车次信息及列车运行状态等信息。
适用于高铁出行、火车出行的场景。
排队
QUEUE
需要通过排队叫号的方式，按顺序为用户提供服务的业务场景。
适用于办事大厅、医院、银行、餐饮等排队叫号能力场景。
取餐
PICK_UP
指的是用户完成餐品/商品下单后，自行取餐或者取件的场景。
适用于餐饮线下取餐提醒，包括餐品排队情况、制作进度、取餐提醒等。
赛事比分
SCORE
展示比赛双方成绩变化情况。
适用于游戏赛事、体育赛事等展示比分变化情况的场景。
共享租赁
RENT
用户使用临时租赁服务时，向用户展示实时租赁时长和费用等租赁状态信息的场景。
适用于共享单车、共享充电宝、停车场临时停车等场景。
计时
TIMER
用户在某个短时间段持续的正计时或任务前的倒计时场景。
适用于专注时刻、番茄时钟、抢票倒计时提醒场景，仅限于工具类应用申请（计时场景仅支持通过端侧创建与更新）。
运动锻炼
WORKOUT
运动过程中，向用户实时展示运动的时长和进度等信息。
适用于户外或室内的运动记录，如跑步、骑行等。
导航
NAVIGATION
用户使用导航服务时，展示将要发生的路线变化。
适用于步行导航、骑行导航、车辆导航。
受限说明
使用入门
开发者需要按照如下流程完成实况窗的开发工作。
| 开发步骤  | 说明  |
| --- | --- |
| 依据实况窗设计规范设计实况窗通知样式  | 依据样式模板设计开发者的实况窗通知范本。  |
| 开发准备  | 在AppGallery Connect中申请实况窗权限。  |
| 构建本地实况窗  | 根据实况窗设计规范完成本地实况窗的开发。  |
| 通过Push Kit创建实况窗  | 通过Push Kit完成实况窗的创建。  |
| 通过Push Kit更新实况窗  | 通过Push Kit完成实况窗的更新。  |
开发步骤
说明
依据实况窗设计规范设计实况窗通知样式
依据样式模板设计开发者的实况窗通知范本。
开发准备
在AppGallery Connect中申请实况窗权限。
构建本地实况窗
根据实况窗设计规范完成本地实况窗的开发。
通过Push Kit创建实况窗
通过Push Kit完成实况窗的创建。
通过Push Kit更新实况窗
通过Push Kit完成实况窗的更新。
违规处罚
应用发送的实况窗通知需同时遵守实况窗设计规范和Push Kit的通知内容原则，如出现违反实况窗设计规范、推送内容原则等行为，将被视为违规。
违规行为及相应的处理措施请参见违规分类、违规行为及违规处罚标准。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-design-formula-V14
爬取时间: 2025-04-29 21:03:03
来源: Huawei Developer
实况窗设计规范
应用发送的实况窗需遵循实况窗设计规范，不符合设计规范的方案将不被予以开通正式权限。同时若应用实况窗上线后出现违反实况窗设计规范的行为，将被视为违规。
设计原则
实况窗旨在为用户提供最精简、最便捷、最清晰的通知内容、交互以及视觉效果，其设计需遵循实况窗设计原则。
模板规范
实况窗支持卡片态和胶囊态通知形式，显示更可视化、更精简的内容，方便用户聚焦重要信息。应用在设计实况窗卡片态和胶囊态时，需满足以下规范（推荐使用规范中场景指定的模板，若推荐方式不满足开发者的业务需要，可结合具体业务，采用更加合适的模板）。
场景节点设计要求
应用在设计实况窗场景节点时，需满足以下要求，如有其他未列举的节点，应用可根据自身实际情况增加，优先参照场景节点设计模板示例进行设计。
即时配送场景
即时配送场景，建议接入8小时内的用户订单。场景及节点请按如下要求设计：
| 场景节点  | 节点设计模板  | 节点约束  | 主要特殊场景考虑  |
| --- | --- | --- | --- |
| 待支付  |    | 待支付状态展示不超过5分钟  | 用户成功取消订单，需立即结束实况窗商家取消订单场景下，需让用户及时注意到订单信息变化  |
| 商家待接单  |   | /  |
| 商家已接单  |   | 提醒方式：设置铃声/振动、抢占胶囊位置动态  |
| 骑手取货中  |   | /  |
| 骑手已到店  |   | /  |
| 骑手送货中  |   | /  |
| 已送达/待取餐  |   | 提醒方式：设置铃声/振动、胶囊自动展开为悬浮卡片动态消失机制：已送达、待取餐状态展示5分钟；商品若当面送达，立即消失  |
场景节点
节点设计模板
节点约束
主要特殊场景考虑
待支付
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170051.51626238794104308467728231564401:50001231000000:2800:A5E01EB9C50F1AEA5A3DDBBE8ACE51B2F19C4ED31B77E8DC1936E15430895CED.png)
待支付状态展示不超过5分钟
商家待接单
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170051.10810576950035403132511404628860:50001231000000:2800:362F559085FD0C4CD290BDB14C46A3578FE9D22112F5CEC92E2FEE738948C585.png)
/
商家已接单
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170052.85200884709577705160503325668867:50001231000000:2800:4FE994E5015AB96B22D87F717CFEF2246EE8B9A5025979C70716D67A9CF64A40.png)
提醒方式：设置铃声/振动、抢占胶囊位置动态
骑手取货中
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170052.83628104267354800670383802576839:50001231000000:2800:A240EA66C2A25C35DDBBF5F54DC871D6FE3EF5045FF22C34BC4128FC0A235E0F.png)
/
骑手已到店
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170052.38682187161496900994337778334695:50001231000000:2800:28B4ABFB1D2E48CF70EE8EA0EFC0F48424B695F25D765F67B6FB2E90DC550724.png)
/
骑手送货中
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170052.68726835245069039720039603218019:50001231000000:2800:E1D99F4268B7FD688F3193634024B0B803EF9CE615C0FED9572D6F277C063E0F.png)
/
已送达/待取餐
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170052.25663948976828615116415175936392:50001231000000:2800:7E6D48FC4F97CAFCFAFABE3CBA5C8F088B6FFCA3544C577567ED3E3DCF46A645.png)
打车出行场景
打车出行按照用户是否立即出发，分为即时出行场景和预约出行场景。
出行打车场景中，单个实况窗消息5分钟最多更新30次，每小时最多更新180次。场景及节点请按如下要求设计：
| 场景节点  | 节点设计模板  | 节点约束  | 主要特殊场景考虑  |
| --- | --- | --- | --- |
| 叫车  |   | /  | 用户成功取消订单，需立即结束实况窗司机取消或车辆改派，需更新实况窗，并设置铃声/振动、胶囊自动展开为悬浮卡片动态，确保用户及时关注预约出行场景，需计划出发前20分钟通过云创建实况窗提醒用户  |
| 排队  |   | /  |
| 司机正在完成上一单  |   | /  |
| 司机本单接驾中  |   | 提醒方式：设置铃声/振动、抢占胶囊位置动态  |
| 即将到达上车点  |   | /  |
| 司机已到达  |   | 提醒方式：设置铃声/振动、胶囊自动展开为悬浮卡片动态  |
| 开始前往目的地  |   | /  |
| 行程结束  |   | 提醒方式：设置铃声/振动、抢占胶囊位置动态消失机制：待支付状态展示5分钟；支付成功后，立即消失  |
场景节点
节点设计模板
节点约束
主要特殊场景考虑
叫车
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170052.98962464008805851773162256322614:50001231000000:2800:404BE90C3BCC352379697C3DFECEDFBCC1D7581FE241E84D3A414C118ACDAC6B.png)
/
排队
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170052.18452406155469289824981542276681:50001231000000:2800:D09105CB0BDD67F4DF7D852F166606D97889B756D283AF7925184FA6AF8F6B6B.png)
/
司机正在完成上一单
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170052.21830071968076577081769355711896:50001231000000:2800:8832E2ED5D017E3D002BEF9DA1E8B7E5DE92DBB285D079C44FF24C799C9F0DC6.png)
/
司机本单接驾中
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170052.22722018793259004361092393500798:50001231000000:2800:A5587752C5199FE6A11BBE8BA54B0D7D0CF4C90BC07EB48520AE4EF02E5B30A0.png)
提醒方式：设置铃声/振动、抢占胶囊位置动态
即将到达上车点
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170052.32198138165935762416912242892320:50001231000000:2800:222D23F7B6D3021B13BA8E914051DE23F6CD4F95693C9640D190320BB60B6A80.png)
/
司机已到达
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170052.98552528479025629818430930845736:50001231000000:2800:2734F6389921C859D22CEFE2B645D67DD225EDFB5CE24DDC31CA2706AEB1588A.png)
提醒方式：设置铃声/振动、胶囊自动展开为悬浮卡片动态
开始前往目的地
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170052.12444472910793341110333958050367:50001231000000:2800:4D2082C3BB08B9424C13E6E8DB00B8186198D84B5F45E14623FC4B904C921295.png)
/
行程结束
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170053.99038767301365725608806744964365:50001231000000:2800:C53FA76C6EA5D6FC5987D27EF544EC5FE411645B4EBF7F50FCF83C6633C70964.png)
取餐场景
到店取餐场景及节点请按如下要求设计：
| 场景节点  | 节点设计模板  | 节点约束  | 主要特殊场景考虑  |
| --- | --- | --- | --- |
| 下单成功  |   | /  | 用户成功取消订单，需立即结束实况窗    |
| 餐品制作中  |   | /  |
| 餐品制作完成  |   | 提醒方式：设置铃声/振动、胶囊自动展开为悬浮卡片动态消失机制：待取餐状态展示15分钟；用户取餐完成，立即消失  |
场景节点
节点设计模板
节点约束
主要特殊场景考虑
下单成功
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170053.80759629822307465042993301267609:50001231000000:2800:F1FAF112E2168B832698F1701C366922758DC43EAB9DC711B3C682CE6E83773E.png)
/
用户成功取消订单，需立即结束实况窗
餐品制作中
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170053.41667576622901091440000219761617:50001231000000:2800:CC30C3A180F39BA7175722FB4D63711FA3E8F9CAA6F598E5A0B03DF866065D7E.png)
/
餐品制作完成
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170053.05351455735504308113233469149788:50001231000000:2800:3D398D750562CF8CB23DEC8E0517B324C3983F50D6BB920C493A3FC9B440E411.png)
排队场景
就餐排队：
就餐排队场景及节点请按如下要求设计：
| 场景节点  | 节点设计模板  | 节点约束  | 主要特殊场景考虑  |
| --- | --- | --- | --- |
| 排队中  |   | /  | 用户成功取消排队，需立即结束实况窗     |
| 即将到号  |   | 提醒方式：设置铃声/振动、胶囊自动展开为悬浮卡片动态  |
| 已到号  |   | 提醒方式：设置铃声/振动、抢占胶囊位置动态  |
| 已过号  |   | 消失机制：已过号状态展示5分钟  |
场景节点
节点设计模板
节点约束
主要特殊场景考虑
排队中
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170053.20418969949129992879788753690544:50001231000000:2800:CD0218C4F1579FC5B3F60699CA55B721FF910372B4601710F59CF4CC98AAFE56.png)
/
用户成功取消排队，需立即结束实况窗
即将到号
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170053.06151191899973129780377527016026:50001231000000:2800:61126D1CE6B1BFC0D3D1F0CFE338FDF2CFC2EA72A3395D34B682F1A3C913973C.png)
提醒方式：设置铃声/振动、胶囊自动展开为悬浮卡片动态
已到号
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170053.13012170309361986848977261375444:50001231000000:2800:5F13A6093DD51A24D57E1A3508475F9CAD1BD3F81EAA5F30F8F306128B4BD798.png)
提醒方式：设置铃声/振动、抢占胶囊位置动态
已过号
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170053.90393422115426193379658952360138:50001231000000:2800:1321A01E8B65BBA4936A59D28BAF06AD97CAB063F17F6FFCAD33FA0F47347B46.png)
消失机制：已过号状态展示5分钟
银行排队：
银行排队场景及节点请按如下要求设计：
| 场景节点  | 节点设计模板  | 节点约束  | 主要特殊场景考虑  |
| --- | --- | --- | --- |
| 排队中  |   | /  | 用户成功取消排队，需立即结束实况窗预约排队的场景，办理前30分钟开始展示实况窗提醒用户    |
| 已到号  |   | 提醒方式：设置铃声/振动、胶囊自动展开为悬浮卡片动态  |
| 已过号  |   | 消失机制：已过号状态展示5分钟  |
场景节点
节点设计模板
节点约束
主要特殊场景考虑
排队中
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170053.15645878497885494023536620136025:50001231000000:2800:6199A8E9B8D742CF53C26C79ACEFB40841ABBD2035C5C93AEACB1DAED8378363.png)
/
已到号
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170053.03347043413592547762659524126454:50001231000000:2800:A8A6D40332F4F223D81C92941BB8521BBCEC4E284CBB0DE9A814FA0EF2F0BF40.png)
提醒方式：设置铃声/振动、胶囊自动展开为悬浮卡片动态
已过号
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170053.44623694353453986883477411056974:50001231000000:2800:05BB3D122196F1FE8BF1A6121B48EEE46C752548D5027348D586BA13B54EFDF6.png)
消失机制：已过号状态展示5分钟
计时场景
计时场景，建议接入8小时内的计时场景（仅支持通过端侧创建与更新）。场景及节点请按如下要求设计：
| 场景节点  | 节点设计模板  | 主要特殊场景考虑  |
| --- | --- | --- |
| 计时中  |   | 用户主动或者被动终止计时，需立即结束实况窗  |
| 暂停  |   |    |
场景节点
节点设计模板
主要特殊场景考虑
计时中
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170054.76451179232126569598612090007504:50001231000000:2800:9848CCF2A627C574861CD15F10E8F2428ACAEBDEDC4F2EBDC31094A522252176.png)
用户主动或者被动终止计时，需立即结束实况窗
暂停
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170054.63608540653746707519769009061593:50001231000000:2800:EEBFB6E1EE0CCA3D2F34AF068EDD2F29F8E77F698A40BB73D4C18B97E8E93F7F.png)
航班高铁场景
航班：
航班场景在计划起飞前3个小时，开始展示实况窗。场景及节点请按如下要求设计：
| 场景节点  | 节点设计模板  | 节点约束  | 主要特殊场景考虑  |
| --- | --- | --- | --- |
| 未值机  |   | 如不支持在线值机选座，需提示用户现场值机  | 座位号变更，需及时更新实况窗，展示变更后的座位号信息登机口变更，需及时更新实况窗，并设置消息提醒，展示变更后的登机口信息延误场景，需更新自定义区标签，展示延误提示及预估晚点时间用户退改签场景，需结束当前实况窗，按照用户后续新的航班行程重新创建实况窗航班取消、航班中转、航班返航、航班备降、航班失联、航班失事等场景，建议应用在规划实况窗时，同步考虑并提交上述特殊场景方案非实际出行用户，通过应用关注某个航班的场景，可以在应用界面上关注航班信息后展示实况窗，向用户展示航班的关键变动，如开始登机、已起飞、已达到、航班延误、航班取消等           |
| 已值机  |   | /  |
| 开始登机  |   | 提醒方式：设置铃声/振动、胶囊自动展开为悬浮卡片动态  |
| 催促登机  |   | 如用户已登机，则无需出现该节点  |
| 已登机  |   | /  |
| 已起飞  |   | /  |
| 已抵达  |   | 消失机制：无行李场景，立即消失；有行李场景，展示30-60分钟  |
| 延误  |   | 提醒方式：设置铃声/振动、胶囊自动展开为悬浮卡片动态  |
| 取消  |   | 提醒方式：设置铃声/振动、胶囊自动展开为悬浮卡片动态消失机制：展示不超过30分钟  |
| 登机口变更  |   | 提醒方式：设置铃声、振动，胶囊自动展开为悬浮卡片动态  |
场景节点
节点设计模板
节点约束
主要特殊场景考虑
未值机
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170054.15538885580269187329170065192409:50001231000000:2800:CE644F411A9FAD282B489E42863D2BC48BF1B652397ED840DCE801991E357940.png)
如不支持在线值机选座，需提示用户现场值机
已值机
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170054.05144851913402942740206263767426:50001231000000:2800:0302A4807E0176F7C76B6617B709D1C227A69016348D8CB9052F94C783D5D33E.png)
/
开始登机
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170054.83019345890561510328901008770986:50001231000000:2800:A1641713AF94FC0DD5C596507AE0399E7F5229F6C22E31FDF133D83C72AAD5DD.png)
提醒方式：设置铃声/振动、胶囊自动展开为悬浮卡片动态
催促登机
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170054.34652500584196057104313553709947:50001231000000:2800:08E9B711655BF8264E0E97EEF91577D8275D91B0BBE514BCC5A58EA88ABEAA27.png)
如用户已登机，则无需出现该节点
已登机
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170054.30794800962463598223698507574331:50001231000000:2800:9BEF059B1BD73C7510BAE4B089205503DD68C17E8F93ADAC1F1E691CAC0885A8.png)
/
已起飞
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170054.02923555525955999859449975584282:50001231000000:2800:7C9AD118E2F1C040DF11331AED6EB00B4999CB1F29AB3F9D4D5F0BCFC8DF7E46.png)
/
已抵达
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170054.50936571066143502084571281132650:50001231000000:2800:EED105FDE69B7358C13B82C872FA687908C2967E55EEE6F62A23FC7BB69CDDB2.png)
消失机制：无行李场景，立即消失；有行李场景，展示30-60分钟
延误
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170054.68419682974324627564724337983190:50001231000000:2800:F3A54008FC1FDA48255D1BF42AB60CCAE2AEC5042CA7B0F859E42380B3A8C1C5.png)
提醒方式：设置铃声/振动、胶囊自动展开为悬浮卡片动态
取消
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170054.41784402460242716421912251465381:50001231000000:2800:5652EFC11C446EEBB93EFE29EC2B045065C73A56089F1E345C614A29EFC7ED9B.png)
登机口变更
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170055.08238887748042011147691559761349:50001231000000:2800:BC26890D0D29B041AFE0C38435F2DBF0A556E1B26E17209E5CD20D9589C6539E.png)
提醒方式：设置铃声、振动，胶囊自动展开为悬浮卡片动态
高铁：
在计划出发前1个小时，开始展示实况窗通知。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170055.62628584744935675464176843402966:50001231000000:2800:5FF355CEAAF9253A354D45A28264B3E75990B129AFEFAE059261EDEC62E37126.png)
| 建议展示的关键信息  | 主要特殊场景考虑  | 建议设置提醒的关键节点  |
| --- | --- | --- |
| 车次座位号检票口出发站出发时间到达站到达时间  | 高铁晚点，需更新消息，展示延误提示，展示预估出发时间临时停车，需更新消息，展示停车提示，及时告知用户关键信息（如停车原因、预估出发时间）高铁取消，需更新消息，展示取消提示，及时告知用户高铁关键信息用户改签：用户改签后，以最新的行程展示在实况窗中，并取消已经过期的行程用户退票：用户取消行程后，结束正在展示中的实况窗  | 计划出发已到达  |
建议展示的关键信息
主要特殊场景考虑
建议设置提醒的关键节点
取餐场景
到店取餐场景及关键节点可以按照如下流程梳理：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170055.53197223336839909031410066790700:50001231000000:2800:FF4D09ACE7441EE5BB7931F29286F6BD4EF03A89DCFAF205896CB5A1D605DFEA.png)
| 建议展示的关键信息  | 主要特殊场景考虑  | 建议设置提醒的关键节点  |
| --- | --- | --- |
| 取餐码商品图预计可取餐时间  | 用户成功取消订单场景下，需立即结束实况窗用户取餐完成后，需立即结束实况窗，或者在辅助区设置点击后清除实况窗，让用户在取餐完成后，快速删除实况窗  | 待取餐提醒  |
建议展示的关键信息
主要特殊场景考虑
建议设置提醒的关键节点
排队场景
排队叫号场景及关键节点可以按照如下流程梳理：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170055.96693346614293169440169085489478:50001231000000:2800:E0C2CBEBFEB668F643A65E3C3D7EA71C8857F13A12D28AAF8CE3256AFE6A4674.png)
| 建议展示的关键信息  | 主要特殊场景考虑  | 建议设置提醒的关键节点  |
| --- | --- | --- |
| 排队号等待位数预计等待时长店铺或取号地点标识  | 用户成功取消订单场景下，需立即结束该排队的实况窗通知用户过号场景，需设置消息提醒，消息存档时长设置为1小时  | 即将到号叫号中已过号  |
建议展示的关键信息
主要特殊场景考虑
建议设置提醒的关键节点
共享租赁场景
共享租赁，建议接入8小时内的租赁场景。
共享租赁场景及关键节点可以按照如下流程梳理：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170055.37984182659795794277428218892409:50001231000000:2800:F427F89DECA6DDF2846C520B3C9B437D01A0843A18392F5E8D7CFE866630AD98.png)
| 建议展示的关键信息  | 主要特殊场景考虑  | 建议设置提醒的关键节点  |
| --- | --- | --- |
| 租赁时长租赁计费  | 用户临时暂停租赁场景，需让用户及时感知租赁状态变化用户租赁物品故障或因其他原因导致无法正常租赁，需及时告知用户  | 结束租赁待支付  |
建议展示的关键信息
主要特殊场景考虑
建议设置提醒的关键节点
运动锻炼场景
| 建议展示的关键信息  | 主要特殊场景考虑  | 建议设置提醒的关键节点  |
| --- | --- | --- |
| 运动时长剩余距离  | 运动中断或暂停时，需及时告知用户运动出现异常状态时，需及时告知用户  | 运动中运动完成  |
建议展示的关键信息
主要特殊场景考虑
建议设置提醒的关键节点
导航场景
| 建议展示的关键信息  | 主要特殊场景考虑  | 建议设置提醒的关键节点  |
| --- | --- | --- |
| 导航路线变化剩余距离及所需时间  | 变更路线后，需及时告知用户最新的导航路线  | 导航中导航结束  |
建议展示的关键信息
主要特殊场景考虑
建议设置提醒的关键节点

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-preparations-V14
爬取时间: 2025-04-29 21:03:17
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-base-V14
爬取时间: 2025-04-29 21:03:34
来源: Huawei Developer
请先参考“应用开发准备”完成基本准备工作，请开发者完成配置后再继续进行以下开发活动。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-push-service-V14
爬取时间: 2025-04-29 21:03:48
来源: Huawei Developer
在开通实况窗权益前，开发者需要首先为项目开通“推送服务”权益，详情请参见开通推送服务。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-data-process-V14
爬取时间: 2025-04-29 21:04:01
来源: Huawei Developer
若开发者要通过Push Kit更新实况窗，需要设置默认数据处理位置为“中国”。
在“项目设置 > 数据处理位置”页面设置数据处理位置，设置步骤如下：
1.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094258.62463536194995544775968858478994:50001231000000:2800:ACAF223C0837176930B44C54A9B6A677B025C8A29FE3505AB44AF9ADC858627B.png)
如果设置的数据处理位置与开发者的服务器位置不一致，或者设置的数据处理位置与应用所服务的用户所在地不一致，都会导致推送消息无法下发。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-rights-V14
爬取时间: 2025-04-29 21:04:15
来源: Huawei Developer
实况窗目前为Beta阶段，优先对满足场景要求的应用开放申请，若开发者的应用有符合实况窗申请要求的场景，但在AppGallery Connect未找到申请入口，开发者可参考下方模板提供应用相关信息，发送邮件至hwpush@huawei.com反馈，我们会在5个工作日内回复申请结果，请留意邮箱消息。
申请邮件示例
邮件主题：【开通实况窗权益】- 应用名称
邮件正文：
申请权限名称：开通实况窗权益
企业名称：***
应用名称：***
应用包名：com.***.***（请在包名后标注是测试用或是商用，可同时提供测试包名与正式商用包名，避免多次申请）
Client ID：*** （与包名对应，可在AppGallery Connect网站中，找到开发者的项目，通过“增长 > 推送服务 > 配置”选择本次申请的应用，提供对应的Client ID）
是否为HarmonyOS鸿蒙应用：（是/否）
场景类型：即时配送
场景描述：***是外卖点单平台，提供外卖下单功能，希望通过实况窗，实现帮助用户快速查看和即时处理订单消息的功能。
接入方案：（将初步的接入实况窗方案图示随邮件一并提供以供充分评估。方案图示截图可置于正文提供，避免使用超大附件或共享链接方式）

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-joint-commission-test-V14
爬取时间: 2025-04-29 21:04:29
来源: Huawei Developer
1.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094259.47452962611525851362435264875908:50001231000000:2800:EF3DFDC99A32D2F1447EF410DA2712E37A01501D8895F85EDA943DF7CB05F0AE.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094259.12344494402105392455123967219702:50001231000000:2800:0F1B2A2E0724F0625D25FFC6FFE8E2DAB14782AEA46BD92A3225C95C98558DA1.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-formal-authority-V14
爬取时间: 2025-04-29 21:04:44
来源: Huawei Developer
当开发者已对白名单中的设备进行了充分的调试，确认设计方案和功能体验均符合《实况窗设计规范》，可提交申请正式权限。提交后实况窗将对开发者的方案设计、功能体验进行评审与验收，我们将会在7个工作日内回复评审结果。
1.
2.
3.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094259.98378328917057336733740903101414:50001231000000:2800:4FD8B8218636E1FC3A0C19EA33D9DA45769E7FD95102021C54659222125F7275.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094259.05659903669988357815429766903899:50001231000000:2800:10576B9EB89D8C9538B3E092000EE3C6FFCDDF49BD64B9C7083355BBBCBDAF80.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094259.86494530449367046703497213152648:50001231000000:2800:C6A239BA5FE9E2EDE65F88901BCB7059575B2A932730E0CEF84BD18FA818794A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094259.87653940529393586995250683692509:50001231000000:2800:8A1406469D4E6D3234E3629BF29D73C84E0DE296D13C6ED006D4920B1AA7367F.png)
实况窗权益申请填写要求
场景描述
需包含：接入场景的描述、消息的展示时机基本说明、展示的主要节点。开发者填写的内容将用于客服答疑等场景，请尽可能详细地描述。
示例：
若开发者的应用内支持使用其他应用的小程序，需明确说明本次申请的场景使用范围是否涉及到其他应用的小程序。若涉及，开发者需确保不会出现同一个任务多端推送实况窗的体验，在提交申请时需在附件中一并附上如下内容：
沟通证明和预案需按场景和小程序一对一制定。后续在该场景下若涉及新增其他小程序，需线下提交针对新增小程序的沟通对齐证明和对应预案。
接入方案
请将应用已验收通过的接入方案现网效果截图（含每个状态节点的卡片、胶囊、锁屏效果、展示时机说明）、主要特殊场景方案效果放在同一张图片中，图片大小需控制在3M内。
示例：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094259.50497414633602155790456997195161:50001231000000:2800:28613BAB1ED7211B5A5CC0B8841E97D4FD6D7799E769B78158A0A91F1858C6EC.png)
实况窗接入方案请需满足《实况窗设计规范》中的要求，开发者可按照模板进行设计。
申请前自验
开通正式权益涉及方案评审与测试验收，方案评审阶段通过后，须开发者配合测试验收（如提供验收方式和验收版本）。整个流程周期约15个工作日，请留意AppGallery Connect平台申请结果或邮箱。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-scenes-V14
爬取时间: 2025-04-29 21:04:58
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-scenes-intro-V14
爬取时间: 2025-04-29 21:05:12
来源: Huawei Developer
当前实况窗场景请参见实况窗支持对接的场景。针对所有开放的场景，我们为开发者提供了实况窗场景节点设计参考，开发者可以根据参考设计场景内节点的数量与内容。
应用发送的实况窗需遵循《实况窗设计规范》，不符合设计规范的方案将不被予以开通正式权限。同时若应用实况窗上线后出现违反实况窗设计规范的行为，将被视为违规。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-create-locally-V14
爬取时间: 2025-04-29 21:05:26
来源: Huawei Developer
简介
开发者可以通过liveViewManager模块构建本地实况窗，完成实况窗的整个生命周期流程（包括创建、更新与结束）。请注意，只有应用在前台运行，即用户实际使用应用并且产生了服务合约的情况下，开发者才可以创建实况窗；与此同时，本地更新或结束实况窗依赖于开发者的应用进程，所以我们更推荐开发者在本地创建实况窗后使用Push Kit更新或结束实况窗。
Live View Kit提供了“即时配送/打车出行/航班出行/高铁出行/排队叫号/赛事比分/导航/计时/共享租赁/取餐/运动锻炼”共11个场景的包含实况窗整个生命周期流程的示例代码，如开发者想在正式开发实况窗前先行体验效果，请参考实况窗SampleCode。
导入liveViewManager
在项目中导入liveViewManager，并新建实况窗控制类（例如LiveViewController），构造isLiveViewEnabled()方法，用于校验实况窗开关（设置>应用和元服务>应用名>实况窗）是否打开。打开实况窗开关是创建实况窗的前提条件。示例代码如下：
```typescript
import { liveViewManager } from '@kit.LiveViewKit';
export class LiveViewController {
private static async isLiveViewEnabled(): Promise<boolean> {
return await liveViewManager.isLiveViewEnabled();
}
}
```
创建实况窗
实况窗根据扩展区不同共有5种样式模板：进度可视化模板、强调文本模板、左右文本模板、赛事比分模板和导航模板。
调用liveViewManager.startLiveView创建实况窗，该API接口传入参数为实况窗实例（liveViewManager.LiveView）。
进度可视化模板
进度可视化模板适用于打车、外卖等场景。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170056.19524981496526027399970134456126:50001231000000:2800:DBDE9C09F24891AAC893091243C73AE1F900FC84BB8581D3C9A89DFBE4905969.png)
示例代码如下：
```typescript
import { liveViewManager } from '@kit.LiveViewKit';
import { Want, wantAgent } from '@kit.AbilityKit';
export class LiveViewController {
public async startLiveView(): Promise<liveViewManager.LiveViewResult> {
// 校验实况窗开关是否打开
if (!await LiveViewController.isLiveViewEnabled()) {
throw new Error("Live view is disabled.");
}
// 创建实况窗
const defaultView = await LiveViewController.buildDefaultView();
return await liveViewManager.startLiveView(defaultView);
}
private static async buildDefaultView(): Promise<liveViewManager.LiveView> {
return {
// 构造实况窗请求体
id: 0, // 实况窗ID，开发者生成。
event: "DELIVERY", // 实况窗的应用场景。DELIVERY：即时配送（外卖、生鲜）
liveViewData: {
primary: {
title: "骑手已接单",
content: [
{ text: "距商家 " },
{ text: "300 ", textColor: "#FF0A59F7" },
{ text: "米 | " },
{ text: "3 ", textColor: "#FF0A59F7" },
{ text: "分钟到店" }
], // 所有文本仅能设置为一种颜色，不设置textColor时，默认展示#FF000000
keepTime: 15,
clickAction: await LiveViewController.buildWantAgent(),
layoutData: {
layoutType: liveViewManager.LayoutType.LAYOUT_TYPE_PROGRESS,
progress: 40,
color: "#FF317AF7",
backgroundColor: "#f7819ae0",
indicatorType: liveViewManager.IndicatorType.INDICATOR_TYPE_UP,
indicatorIcon: "indicator.png", // 进度条指示器图标，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
lineType: liveViewManager.LineType.LINE_TYPE_DOTTED_LINE,
nodeIcons: ["icon_1.png", "icon_2.png", "icon_3.png"] // 进度条每个节点图标，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
}
}
}
};
}
private static async isLiveViewEnabled(): Promise<boolean> {
return await liveViewManager.isLiveViewEnabled();
}
private static async buildWantAgent(): Promise<Want> {
const wantAgentInfo: wantAgent.WantAgentInfo = {
wants: [
{
bundleName: 'xxx.xxx.xxx', // 应用实际bundleName
abilityName: 'EntryAbility'
} as Want
],
actionType: wantAgent.OperationType.START_ABILITIES,
requestCode: 0,
actionFlags: [wantAgent.WantAgentFlags.UPDATE_PRESENT_FLAG]
};
const agent = await wantAgent.getWantAgent(wantAgentInfo);
return agent;
}
}
```
强调文本模板
强调文本模板适用于取餐、排队等场景。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170057.77593643230318819238781342129900:50001231000000:2800:2C70D9DCE377AFD4686899089540ED4653A98133A828D3E346E7D8B0DDA522DA.png)
示例代码如下：
构建LiveViewController后，请在代码中初始化LiveViewController并调用LiveViewController.startLiveView()方法。
```typescript
import { liveViewManager } from '@kit.LiveViewKit';
import { Want, wantAgent } from '@kit.AbilityKit';
export class LiveViewController {
public async startLiveView(): Promise<liveViewManager.LiveViewResult> {
// 校验实况窗开关是否打开
if (!await LiveViewController.isLiveViewEnabled()) {
throw new Error("Live view is disabled.");
}
// 创建实况窗
const defaultView = await LiveViewController.buildDefaultView();
return await liveViewManager.startLiveView(defaultView);
}
private static async buildDefaultView(): Promise<liveViewManager.LiveView> {
return {
// 构造实况窗请求体
id: 0, // 实况窗ID，开发者生成。
event: "PICK_UP", // 实况窗的应用场景。PICK_UP：取餐。
liveViewData: {
primary: {
title: "餐品已备好",
content: [
{ text: "请前往" },
{ text: " XXX店 ", textColor: "#FF0A59F7" },
{ text: "取餐" },
],
keepTime: 15,
clickAction: await LiveViewController.buildWantAgent(),
layoutData: {
layoutType: liveViewManager.LayoutType.LAYOUT_TYPE_PICKUP,
title: "取餐码",
content: "72988",
underlineColor: "#FF0A59F7",
descPic: "coffee.png" // 扩展区右侧产品描述图，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
}
}
}
};
}
private static async isLiveViewEnabled(): Promise<boolean> {
return await liveViewManager.isLiveViewEnabled();
}
private static async buildWantAgent(): Promise<Want> {
const wantAgentInfo: wantAgent.WantAgentInfo = {
wants: [
{
bundleName: 'xxx.xxx.xxx', // 应用实际bundleName
abilityName: 'EntryAbility'
} as Want
],
actionType: wantAgent.OperationType.START_ABILITIES,
requestCode: 0,
actionFlags: [wantAgent.WantAgentFlags.UPDATE_PRESENT_FLAG]
};
const agent = await wantAgent.getWantAgent(wantAgentInfo);
return agent;
}
}
```
左右文本模板
左右文本模板适用于高铁、航班等场景。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170057.76689025639530350055405499964371:50001231000000:2800:CB7AD6800E39FA0DE2FB952DA34BED50975203BA589329724CA0BB4CE5CCBE5C.png)
示例代码如下：
```typescript
import { liveViewManager } from '@kit.LiveViewKit';
import { Want, wantAgent } from '@kit.AbilityKit';
export class LiveViewController {
public async startLiveView(): Promise<liveViewManager.LiveViewResult> {
// 校验实况窗开关是否打开
if (!await LiveViewController.isLiveViewEnabled()) {
throw new Error("Live view is disabled.");
}
// 创建实况窗
const defaultView = await LiveViewController.buildDefaultView();
return await liveViewManager.startLiveView(defaultView);
}
private static async buildDefaultView(): Promise<liveViewManager.LiveView> {
return {
// 构造实况窗请求体
id: 0, // 实况窗ID，开发者生成。
event: "TRAIN", // 实况窗的应用场景。TRAIN：高铁/火车。
liveViewData: {
primary: {
title: "列车检票提醒",
content: [
{ text: "检票口 " },
{ text: "6B ", textColor: "#FF0A59F7" },
{ text: "| 座位 " },
{ text: "03车 12F", textColor: "#FF0A59F7" }
], // 所有文本仅能设置为一种颜色，不设置textColor时，默认展示#FF000000
keepTime: 15,
clickAction: await LiveViewController.buildWantAgent(), // 点击实况窗默认动作。
layoutData: {
layoutType: liveViewManager.LayoutType.LAYOUT_TYPE_FLIGHT,
firstTitle: "09:00",
firstContent: "上海虹桥",
lastTitle: "14:20",
lastContent: "汉口",
spaceIcon: "icon.png", // 扩展区中间间隔图标，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
isHorizontalLineDisplayed: true,
additionalText: "以上信息仅供参考" // 扩展区底部内容，仅可用于左右文本模板。
}
}
}
};
}
private static async isLiveViewEnabled(): Promise<boolean> {
return await liveViewManager.isLiveViewEnabled();
}
private static async buildWantAgent(): Promise<Want> {
const wantAgentInfo: wantAgent.WantAgentInfo = {
wants: [
{
bundleName: 'xxx.xxx.xxx', // 应用实际bundleName
abilityName: 'EntryAbility'
} as Want
],
actionType: wantAgent.OperationType.START_ABILITIES,
requestCode: 0,
actionFlags: [wantAgent.WantAgentFlags.UPDATE_PRESENT_FLAG]
};
const agent = await wantAgent.getWantAgent(wantAgentInfo);
return agent;
}
}
```
赛事比分模板
赛事比分模板适用于赛事场景。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170057.64409453996108300457350792162655:50001231000000:2800:46BDD2E779082E1021E16511FE58FF57BFEDBA758D2BBB906E16E93F9F7539A4.png)
示例代码如下：
构建LiveViewController后，请在代码中初始化LiveViewController并调用LiveViewController.startLiveView()方法。
```typescript
import { liveViewManager } from '@kit.LiveViewKit';
import { Want, wantAgent } from '@kit.AbilityKit';
export class LiveViewController {
public async startLiveView(): Promise<liveViewManager.LiveViewResult> {
// 校验实况窗开关是否打开
if (!await LiveViewController.isLiveViewEnabled()) {
throw new Error("Live view is disabled.");
}
// 创建实况窗
const defaultView = await LiveViewController.buildDefaultView();
return await liveViewManager.startLiveView(defaultView);
}
private static async buildDefaultView(): Promise<liveViewManager.LiveView> {
return {
// 构造实况窗请求体
id: 0, // 实况窗ID，开发者生成。
event: "SCORE", // 实况窗的应用场景。SCORE：赛事比分。
liveViewData: {
primary: {
title: "第四节比赛中",
content: [
{ text: "XX", textColor:"#FF0A59F7" },
{ text: " VS " },
{ text: "XX", textColor:"#FF0A59F7" },
{ text: " | " },
{ text: "小组赛 第五场", textColor:"#FF0A59F7" }
],
keepTime: 1,
clickAction: await LiveViewController.buildWantAgent(),
layoutData: {
layoutType: liveViewManager.LayoutType.LAYOUT_TYPE_SCORE,
hostName: "队名A",
hostIcon: "host.png", // 扩展区左侧图标，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
hostScore: "110",
guestName: "队名B",
guestIcon: "guest.png", // 扩展区右侧图标，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
guestScore: "102",
competitionDesc: [
{ text: "●", textColor: "#FFFF0000" },
{ text: "Q4" }
],
competitionTime: "02:16",
isHorizontalLineDisplayed: true
}
}
}
};
}
private static async isLiveViewEnabled(): Promise<boolean> {
return await liveViewManager.isLiveViewEnabled();
}
private static async buildWantAgent(): Promise<Want> {
const wantAgentInfo: wantAgent.WantAgentInfo = {
wants: [
{
bundleName: 'xxx.xxx.xxx', // 应用实际bundleName
abilityName: 'EntryAbility'
} as Want
],
actionType: wantAgent.OperationType.START_ABILITIES,
requestCode: 0,
actionFlags: [wantAgent.WantAgentFlags.UPDATE_PRESENT_FLAG]
};
const agent = await wantAgent.getWantAgent(wantAgentInfo);
return agent;
}
}
```
导航模板
导航模板适用于出行导航场景。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170057.05147185425597943379751851109044:50001231000000:2800:2E05F89940A7846F55723399EDD46AB557CE46B66867C5F4A47564D0F32B5EE3.png)
示例代码如下：
构建LiveViewController后，请在代码中初始化LiveViewController并调用LiveViewController.startLiveView()方法。
```typescript
import { liveViewManager } from '@kit.LiveViewKit';
import { Want, wantAgent } from '@kit.AbilityKit';
export class LiveViewController {
public async startLiveView(): Promise<liveViewManager.LiveViewResult> {
// 校验实况窗开关是否打开
if (!await LiveViewController.isLiveViewEnabled()) {
throw new Error("Live view is disabled.");
}
// 创建实况窗
const defaultView = await LiveViewController.buildDefaultView();
return await liveViewManager.startLiveView(defaultView);
}
private static async buildDefaultView(): Promise<liveViewManager.LiveView> {
return {
// 构造实况窗请求体
id: 0, // 实况窗ID，开发者生成。
event: "NAVIGATION", // 实况窗的应用场景。NAVIGATION：导航。
liveViewData: {
primary: {
title: "178米后左转",
content: [
{ text: "去往"},
{ text: " 南京东路", textColor: "#FF0A59F7" }
],
keepTime: 15,
clickAction: await LiveViewController.buildWantAgent(),
layoutData: {
layoutType: liveViewManager.LayoutType.LAYOUT_TYPE_NAVIGATION,
currentNavigationIcon: "navigation.png", // 当前导航方向，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
navigationIcons: ["left.png","straight.png","straight.png","right.png"] // 导航方向的箭头集合图片，每个元素取值为“/resources/rawfile”路径下的文件名或image.PixelMap
}
}
}
};
}
private static async isLiveViewEnabled(): Promise<boolean> {
return await liveViewManager.isLiveViewEnabled();
}
private static async buildWantAgent(): Promise<Want> {
const wantAgentInfo: wantAgent.WantAgentInfo = {
wants: [
{
bundleName: 'xxx.xxx.xxx', // 应用实际bundleName
abilityName: 'EntryAbility'
} as Want
],
actionType: wantAgent.OperationType.START_ABILITIES,
requestCode: 0,
actionFlags: [wantAgent.WantAgentFlags.UPDATE_PRESENT_FLAG]
};
const agent = await wantAgent.getWantAgent(wantAgentInfo);
return agent;
}
}
```
实况胶囊
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170057.88272625868961855468768906599385:50001231000000:2800:F1701A9954A39277FBDAF7AE0171BEC5C0E4CF85ABB041ED9CA7F92899571DCB.png)
胶囊形态各模板参数固定，与创建实况窗时的模板类型无关。可创建的胶囊类型有：文本胶囊、计时器胶囊、进度胶囊，详情请参见CapsuleData。
```typescript
import { liveViewManager } from '@kit.LiveViewKit';
import { Want, wantAgent } from '@kit.AbilityKit';
export class LiveViewController {
public async startLiveView(): Promise<liveViewManager.LiveViewResult> {
// 校验实况窗开关是否打开
if (!await LiveViewController.isLiveViewEnabled()) {
throw new Error("Live view is disabled.");
}
// 创建实况窗
const defaultView = await LiveViewController.buildDefaultView();
return await liveViewManager.startLiveView(defaultView);
}
private static async buildDefaultView(): Promise<liveViewManager.LiveView> {
return {
// 构造实况窗请求体
id: 0, // 实况窗ID，开发者生成。
event: "TAXI", // 实况窗的应用场景。TAXI：出行打车。
liveViewData: {
primary: {
title: "司机预计5分钟后到达",
content: [
{ text: "白", textColor: "#FF0A59F7" },
{ text: "●" },
{ text: "沪AXXXXXX", textColor: "#FF0A59F7" }
],
keepTime: 15,
clickAction: await LiveViewController.buildWantAgent(),
layoutData: {
layoutType: liveViewManager.LayoutType.LAYOUT_TYPE_PROGRESS,
progress: 30,
color: "#ff0959F8",
backgroundColor: "#ffc9d7e4",
indicatorType: liveViewManager.IndicatorType.INDICATOR_TYPE_UP,
indicatorIcon: "indicator.png", // 进度条指示器图标，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
lineType: liveViewManager.LineType.LINE_TYPE_NORMAL_SOLID_LINE,
nodeIcons: ["icon_1.png", "icon_2.png", "icon_3.png"] // 进度条节点图标集合，每个元素取值为“/resources/rawfile”路径下的文件名或image.PixelMap
}
},
// 实况胶囊相关参数
capsule: {
type: liveViewManager.CapsuleType.CAPSULE_TYPE_TEXT,
status: 1,
icon: "capsule_store.png", // 胶囊图标，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
backgroundColor: "#ff0959F8",
title: "5分钟"
}
}
};
}
private static async isLiveViewEnabled(): Promise<boolean> {
return await liveViewManager.isLiveViewEnabled();
}
private static async buildWantAgent(): Promise<Want> {
const wantAgentInfo: wantAgent.WantAgentInfo = {
wants: [
{
bundleName: 'xxx.xxx.xxx', // 应用实际bundleName
abilityName: 'EntryAbility'
} as Want
],
actionType: wantAgent.OperationType.START_ABILITIES,
requestCode: 0,
actionFlags: [wantAgent.WantAgentFlags.UPDATE_PRESENT_FLAG]
};
const agent = await wantAgent.getWantAgent(wantAgentInfo);
return agent;
}
}
```
实况窗计时器
实况窗计时器适用于排队、抢票等场景。
开发者若需要使用实况窗计时器，则需在liveViewManager.LiveView（结构体）中的配置timer字段，并在当前支持的字段中使用占位符：${placeholder.timer}。
例如：固定区的文本内容中使用占位符，系统将替代占位符为实况窗计时器。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170057.04303651791547422714248765667896:50001231000000:2800:5C36FBA88FAC64264B44651F92271B79D4EF62D52250C035534DA9B46F0D3304.png)
示例代码如下：
```typescript
import { liveViewManager } from '@kit.LiveViewKit';
import { Want, wantAgent } from '@kit.AbilityKit';
export class LiveViewController {
public async startLiveView(): Promise<liveViewManager.LiveViewResult> {
// 校验实况窗开关是否打开
if (!await LiveViewController.isLiveViewEnabled()) {
throw new Error("Live view is disabled.");
}
// 创建实况窗
const defaultView = await LiveViewController.buildDefaultView();
return await liveViewManager.startLiveView(defaultView);
}
private static async buildDefaultView(): Promise<liveViewManager.LiveView> {
return {
// 构造实况窗请求体
id: 0, // 实况窗ID，开发者生成。
event: "QUEUE", // 实况窗的应用场景。QUEUE：排队
timer: {
time: 620000,
isCountdown: false,
isPaused: false
},
liveViewData: {
primary: {
title: "大桌4人等位  32桌",
content: [
{ text: "已等待 " },
{ text: "${placeholder.timer}", textColor:"#ff10c1f7" },
{ text: " | 预计还需>30分钟" }
], // 所有文本仅能设置为一种颜色，不设置textColor时，默认展示#FF000000
keepTime: 15,
clickAction: await LiveViewController.buildWantAgent(),
layoutData: {
layoutType: liveViewManager.LayoutType.LAYOUT_TYPE_PROGRESS,
progress: 0,
color: "#FFFF0000",
backgroundColor: "#FF000000",
indicatorType: liveViewManager.IndicatorType.INDICATOR_TYPE_OVERLAY,
indicatorIcon: "indicator.png", // 进度条指示器图标，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
lineType: liveViewManager.LineType.LINE_TYPE_DOTTED_LINE,
nodeIcons: ["icon_1.png","icon_2.png"] // 进度条节点图标集合，每个元素取值为“/resources/rawfile”路径下的文件名或image.PixelMap
}
}
}
};
}
private static async isLiveViewEnabled(): Promise<boolean> {
return await liveViewManager.isLiveViewEnabled();
}
private static async buildWantAgent(): Promise<Want> {
const wantAgentInfo: wantAgent.WantAgentInfo = {
wants: [
{
bundleName: 'xxx.xxx.xxx', // 应用实际bundleName
abilityName: 'EntryAbility'
} as Want
],
actionType: wantAgent.OperationType.START_ABILITIES,
requestCode: 0,
actionFlags: [wantAgent.WantAgentFlags.UPDATE_PRESENT_FLAG]
};
const agent = await wantAgent.getWantAgent(wantAgentInfo);
return agent;
}
}
```
点击实况窗动作
请调用wantAgent.getWantAgent()构造点击动作字段所需的参数值，当前实况窗支持的点击动作如下：
本地更新和结束实况窗
调用liveViewManager.isLiveViewEnabled()确认实况窗开关打开后，调用liveViewManager的updateLiveView更新实况窗，调用stopLiveView结束实况窗。更新时需要修改请求体中对应的参数。示例代码如下：
```typescript
import { liveViewManager } from '@kit.LiveViewKit';
import { Want, wantAgent } from '@kit.AbilityKit';
export class LiveViewController {
private static contentColor: string = '#FF000000';
private static capsuleColor: string = '#FF308977';
public async startLiveView(): Promise<liveViewManager.LiveViewResult> {
// 校验实况窗开关是否打开
if (!await LiveViewController.isLiveViewEnabled()) {
throw new Error("Live view is disabled.");
}
// 创建实况窗
const defaultView = await LiveViewController.buildDefaultView();
return await liveViewManager.startLiveView(defaultView);
}
public async updateLiveView(): Promise<liveViewManager.LiveViewResult> {
// 校验实况窗开关是否打开
if (!await LiveViewController.isLiveViewEnabled()) {
throw new Error("Live view is disabled.");
}
// 修改实况窗内容
const defaultView = await LiveViewController.buildDefaultView();
defaultView.liveViewData.primary.title = "预计23:49送达";
defaultView.liveViewData.primary.content = [
{ text: "等待商家接单， " },
{ text: "03:20", textColor: "#FFFF9C4F" },
{ text: " 未接单自动取消" },
];
defaultView.liveViewData.primary.layoutData = {
layoutType: liveViewManager.LayoutType.LAYOUT_TYPE_PROGRESS,
progress: 0,
lineType: 0,
nodeIcons: [
'icon_store_white.png',
'icon_finish.png'
] // 进度条节点图标集合，每个元素取值为“/resources/rawfile”路径下的文件名或image.PixelMap
};
defaultView.liveViewData.capsule = {
type: liveViewManager.CapsuleType.CAPSULE_TYPE_TEXT,
status: 1,
icon: 'capsule_store.png', // 实况胶囊的图标，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
backgroundColor: LiveViewController.capsuleColor,
title: "待接单"
};
// 更新实况窗
return await liveViewManager.updateLiveView(defaultView);
}
public async stopLiveView(): Promise<liveViewManager.LiveViewResult> {
// 校验实况窗开关是否打开
if (!await LiveViewController.isLiveViewEnabled()) {
throw new Error("Live view is disabled.");
}
// 修改实况窗内容
const defaultView = await LiveViewController.buildDefaultView();
defaultView.liveViewData.primary.title = '商品已送达';
defaultView.liveViewData.primary.content = [
{ text: '感谢您的认可,' },
{ text: '期待下一次光临' }
];
defaultView.liveViewData.primary.layoutData = {
layoutType: liveViewManager.LayoutType.LAYOUT_TYPE_PROGRESS,
progress: 100,
lineType: 0,
nodeIcons: [
'icon_order.png',
'icon_finish.png'
] // 进度条节点图标集合，每个元素取值为“/resources/rawfile”路径下的文件名或image.PixelMap
};
defaultView.liveViewData.capsule = {
type: liveViewManager.CapsuleType.CAPSULE_TYPE_TEXT,
status: 1,
icon: 'capsule_gps.png', // 实况胶囊的图标，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
backgroundColor: LiveViewController.capsuleColor,
title: '已送达'
};
// 结束实况窗
return await liveViewManager.stopLiveView(defaultView);
}
private static async buildDefaultView(): Promise<liveViewManager.LiveView> {
return {
// 构造实况窗请求体
id: 0, // 实况窗ID，开发者生成。
event: "DELIVERY", // 实况窗的应用场景。DELIVERY：即时配送（外卖、生鲜）
liveViewData: {
primary: {
title: "餐品待支付",
content: [
{ text: "咖啡 ", textColor: "#FF0A59F7" },
{ text: "等2件商品" }
],
keepTime: 15,
clickAction: await LiveViewController.buildWantAgent(),
layoutData: {
layoutType: liveViewManager.LayoutType.LAYOUT_TYPE_PICKUP,
title: "待支付金额",
content: "25.5元",
underlineColor: "#FF0A59F7",
descPic: "coffee.png" // 扩展区右侧产品描述图，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
}
},
// 实况胶囊相关参数
capsule: {
type: liveViewManager.CapsuleType.CAPSULE_TYPE_TEXT,
status: 1,
icon: "capsule_store.png", // 实况胶囊的图标，取值为“/resources/rawfile”路径下的文件名或image.PixelMap
backgroundColor: "#FF308977",
title: "待支付"
}
}
};
}
private static async isLiveViewEnabled(): Promise<boolean> {
return await liveViewManager.isLiveViewEnabled();
}
private static async buildWantAgent(): Promise<Want> {
const wantAgentInfo: wantAgent.WantAgentInfo = {
wants: [
{
bundleName: 'xxx.xxx.xxx', // 应用实际bundleName
abilityName: 'EntryAbility'
} as Want
],
actionType: wantAgent.OperationType.START_ABILITIES,
requestCode: 0,
actionFlags: [wantAgent.WantAgentFlags.UPDATE_PRESENT_FLAG]
};
const agent = await wantAgent.getWantAgent(wantAgentInfo);
return agent;
}
}
```
更详细的参数请参考Live View Kit ArkTS API参考。
以上是应用在本地创建、更新和结束实况窗通知的全部流程。此外，应用也可以通过Push Kit实现远程更新实况窗消息。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-update-by-push-V14
爬取时间: 2025-04-29 21:05:40
来源: Huawei Developer
场景介绍
本地实况窗的更新依赖于应用进程的存活，为了让实况窗在生命周期内正常完成更新和结束，我们更推荐开发者使用Push Kit实时更新实况窗状态。
通过Push Kit更新实况窗的流程如下图：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170057.52416400324802679350500617371327:50001231000000:2800:A430A642EA37D2997FD023952150B2C2A3DAF2D93C5B471DD1506DDA06312A18.png)
详细开发流程请参见Push Kit更新实况窗消息。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-faq-V14
爬取时间: 2025-04-29 21:05:55
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-faq-1-V14
爬取时间: 2025-04-29 21:06:08
来源: Huawei Developer
通过Push Kit更新实况窗时，单个实况窗消息每个设备每5分钟最多更新10次，每小时最多更新60次。出行打车与赛事比分场景，5分钟最多更新30次，每小时最多更新180次。详情见Push Kit消息频控。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-faq-2-V14
爬取时间: 2025-04-29 21:06:22
来源: Huawei Developer
HarmonyOS为常见的三方开发框架提供了接入指南：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-faq-3-V14
爬取时间: 2025-04-29 21:06:36
来源: Huawei Developer
如何实现“App关闭时，自动关闭构建的实况窗”
当App关闭时，可以调用liveViewManager.stopLiveView方法，设置参数PrimaryData实例的keepTime值为0，即可实现立即关闭实况窗。
本地更新如何获取实况窗实例以及实况窗被清除后的限制
1. 本地更新实况窗时，可以通过liveViewManager.getActiveLiveView函数 ，获取活动的LiveView实例。
2. 如果想要结束实况窗，建议使用liveViewManager.stopLiveView方法。如果实况窗被notificationManager.cancel或notificationManager.cancelAll清除后，无论是Live View Kit还是Push Kit，无法再次通过该id更新或结束实况窗。
3. 再次创建该id的实况窗时，Live View Kit可以通过该id再次创建实况窗，Push Kit在12小时内无法通过该id再次创建实况窗。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-faq-4-V14
爬取时间: 2025-04-29 21:06:50
来源: Huawei Developer
采用进度可视化模板并且indicatorType为INDICATOR_TYPE_OVERLAY时，图片较宽，无法完全覆盖进度条
当indicatorType=INDICATOR_TYPE_OVERLAY时，图标区域为64*56vp，图片较宽时会按比例进行缩放。应用需要自己修改图片大小和样式来达到想要的效果。
理想效果图
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170058.59243005455591023572182544869839:50001231000000:2800:B6B6B19E57465911074A63A29400F8A567F188C68BDF1D8004A41D29B8E3C7F8.png)
如何修改 "实况窗左上角图标"
除导航模板通过currentNavigationIcon设置左上角图标外，其他模板不支持修改实况窗左上角图标，默认展示为系统图标。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/liveview-faq-5-V14
爬取时间: 2025-04-29 21:07:03
来源: Huawei Developer
1. 创建实况时的id约束：可以一次性创建多个实况窗，需要保证其id唯一，同一id在同一时刻只能创建一个实况窗。（当该id的实况窗结束后，Live View Kit可以通过该id再次创建，Push Kit在12小时内该id无法再次创建。）
2. 展示实况窗时的交互约束：在通知中心通过滑动最多展示24条实况窗。通过点击胶囊弹出的实况窗列表，无法滑动，只能展示5条实况窗。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/location-kit-V14
爬取时间: 2025-04-29 21:07:17
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/location-kit-intro-V14
爬取时间: 2025-04-29 21:07:33
来源: Huawei Developer
Location Kit开发概述
移动终端设备已经深入人们日常生活的方方面面，如查看所在城市的天气、新闻轶事、出行打车、旅行导航、运动记录。这些习以为常的活动，都离不开定位用户终端设备的位置。
当用户处于这些丰富的使用场景中时，系统的位置能力可以提供实时准确的位置数据。对于开发者，设计基于位置体验的服务，也可以使应用的使用体验更贴近每个用户。
当应用在实现基于设备位置的功能时，如：驾车导航，记录运动轨迹等，可以调用该模块的API接口，完成位置信息的获取。
Location Kit简介
位置子系统使用多种定位技术提供服务，如GNSS定位、基站定位、WLAN/蓝牙定位（基站定位、WLAN/蓝牙定位后续统称“网络定位技术”）；通过这些定位技术，无论用户设备在室内或是户外，都可以准确地确定设备位置。
Location Kit除了提供基础的定位服务之外，还提供了地理围栏、地理编码、逆地理编码、国家码等功能和接口。
-  坐标 系统以1984年世界大地坐标系统为参考，使用经度、纬度数据描述地球上的一个位置。
-  GNSS定位 基于全球导航卫星系统，包含：GPS、GLONASS、北斗、Galileo等，通过导航卫星、设备芯片提供的定位算法，来确定设备准确位置。定位过程具体使用哪些定位系统，取决于用户设备的硬件能力。
-  基站定位 根据设备当前驻网基站和相邻基站的位置，估算设备当前位置。此定位方式的定位结果精度相对较低，并且需要设备可以访问蜂窝网络。
-  WLAN、蓝牙定位 根据设备可搜索到的周围WLAN、蓝牙设备位置，估算设备当前位置。此定位方式的定位结果精度依赖设备周围可见的固定WLAN、蓝牙设备的分布，密度较高时，精度也相较于基站定位方式更高，同时也需要设备可以访问网络。
约束与限制
位置能力作为系统为应用提供的一种基础服务，需要应用在所使用的业务场景，向系统主动发起请求，并在业务场景结束时，主动结束此请求，在此过程中系统会将实时的定位结果上报给应用。
使用设备的位置能力，需要用户进行确认并主动开启位置开关。如果位置开关没有开启，系统不会向任何应用提供定位服务。
设备位置信息属于用户敏感数据，所以即使用户已经开启位置开关，应用在获取设备位置前仍需向用户申请位置访问权限。在用户确认允许后，系统才会向应用提供定位服务。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/location-permission-guidelines-V14
爬取时间: 2025-04-29 21:07:47
来源: Huawei Developer
场景概述
应用在使用Location Kit系统能力前，需要检查是否已经获取用户授权访问设备位置信息。如未获得授权，可以向用户申请需要的位置权限。
系统提供的定位权限有：
-  ohos.permission.LOCATION：用于获取精准位置，精准度在米级别。
-  ohos.permission.APPROXIMATELY_LOCATION：用于获取模糊位置，精确度为5公里。
-  ohos.permission.LOCATION_IN_BACKGROUND：用于应用切换到后台仍然需要获取定位信息的场景。
Location Kit接口对权限的要求参见：Location Kit。
开发步骤
1.  开发者可以在应用配置文件中声明所需要的权限并向用户申请授权，具体可参考向用户申请授权。
2.  当APP运行在前台，且访问设备位置信息时，申请位置权限的方式如下：
| 申请位置权限的方式 | 是否允许申请 | 申请成功后获取的位置的精确度 |
| --- | --- | --- |
| 申请ohos.permission.APPROXIMATELY_LOCATION | 是 | 获取到模糊位置，精确度为5公里。 |
| 同时申请ohos.permission.APPROXIMATELY_LOCATION和ohos.permission.LOCATION | 是 | 获取到精准位置，精准度在米级别。 |
如果应用在后台运行时也需要访问设备位置，除了按照步骤2申请权限外，还需要申请LOCATION类型的长时任务。
长时任务申请可参考：长时任务介绍。
示例代码

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/location-guidelines-V14
爬取时间: 2025-04-29 21:08:01
来源: Huawei Developer
场景概述
开发者可以调用HarmonyOS位置相关接口，获取设备实时位置，或者最近的历史位置，以及监听设备的位置变化。
对于位置敏感的应用业务，建议获取设备实时位置信息。如果不需要设备实时位置信息，并且希望尽可能的节省耗电，开发者可以考虑获取最近的历史位置。
接口说明
获取设备的位置信息所使用的接口如下，详细说明参见：Location Kit。
本模块能力仅支持WGS-84坐标系。
| 接口名 | 功能描述 |
| --- | --- |
| on(type: 'locationChange', request: LocationRequest | ContinuousLocationRequest, callback: Callback<Location>): void | 开启位置变化订阅，并发起定位请求。 |
| off(type: 'locationChange', callback?: Callback<Location>): void | 关闭位置变化订阅，并删除对应的定位请求。 |
| getCurrentLocation(request: CurrentLocationRequest | SingleLocationRequest, callback: AsyncCallback<Location>): void | 获取当前位置，使用callback回调异步返回结果。 |
| getCurrentLocation(request?: CurrentLocationRequest | SingleLocationRequest): Promise<Location> | 获取当前位置，使用Promise方式异步返回结果。 |
| getLastLocation(): Location | 获取最近一次定位结果。 |
| isLocationEnabled(): boolean | 判断位置服务是否已经开启。 |
开发步骤
1.  获取设备的位置信息，需要有位置权限，位置权限申请的方法和步骤见申请位置权限开发指导。
2.  导入geoLocationManager模块，所有与基础定位能力相关的功能API，都是通过该模块提供的。
```typescript
import { geoLocationManager } from '@kit.LocationKit';
```
3.  调用获取位置接口之前需要先判断位置开关是否打开。 查询当前位置开关状态，返回结果为布尔值，true代表位置开关开启，false代表位置开关关闭，示例代码如下： 如果位置开关未开启，可以拉起全局开关设置弹框，引导用户打开位置开关，具体可参考拉起全局开关设置弹框
```typescript
import { geoLocationManager } from '@kit.LocationKit';
try {
let locationEnabled = geoLocationManager.isLocationEnabled();
} catch (err) {
console.error("errCode:" + err.code + ", message:"  + err.message);
}
```
4.  单次获取当前设备位置。多用于查看当前位置、签到打卡、服务推荐等场景。 方式一：获取系统缓存的最新位置。 如果系统当前没有缓存位置会返回错误码。 推荐优先使用该接口获取位置，可以减少系统功耗。 如果对位置的新鲜度比较敏感，可以先获取缓存位置，将位置中的时间戳与当前时间对比，若新鲜度不满足预期可以使用方式二获取位置。 方式二：获取当前位置。 首先要实例化SingleLocationRequest对象，用于告知系统该向应用提供何种类型的位置服务，以及单次定位超时时间。 设置LocatingPriority： 如果对位置的返回精度要求较高，建议LocatingPriority参数优先选择PRIORITY_ACCURACY，会将一段时间内精度较好的结果返回给应用。 如果对定位速度要求较高，建议LocatingPriority参数选择PRIORITY_LOCATING_SPEED，会将最先拿到的定位结果返回给应用。 两种定位策略均会同时使用GNSS定位和网络定位技术，以便在室内和户外场景下均可以获取到位置结果，对设备的硬件资源消耗较大，功耗也较大。 设置locatingTimeoutMs： 因为设备环境、设备所处状态、系统功耗管控策略等的影响，定位返回的时延会有较大波动，建议把单次定位超时时间设置为10秒。 以快速定位策略(PRIORITY_LOCATING_SPEED)为例，调用方式如下： 通过本模块获取到的坐标均为WGS-84坐标系坐标点，如需使用其它坐标系类型的坐标点，请进行坐标系转换后再使用。 可参考Map Kit提供的地图计算工具进行坐标转换。
```typescript
import { geoLocationManager } from '@kit.LocationKit';
import { BusinessError } from '@kit.BasicServicesKit'
try {
let location = geoLocationManager.getLastLocation();
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```
5.  方式一：获取系统缓存的最新位置。 如果系统当前没有缓存位置会返回错误码。 推荐优先使用该接口获取位置，可以减少系统功耗。 如果对位置的新鲜度比较敏感，可以先获取缓存位置，将位置中的时间戳与当前时间对比，若新鲜度不满足预期可以使用方式二获取位置。
```typescript
import { geoLocationManager } from '@kit.LocationKit';
import { BusinessError } from '@kit.BasicServicesKit'
try {
let location = geoLocationManager.getLastLocation();
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```
6.  方式二：获取当前位置。 首先要实例化SingleLocationRequest对象，用于告知系统该向应用提供何种类型的位置服务，以及单次定位超时时间。 设置LocatingPriority： 如果对位置的返回精度要求较高，建议LocatingPriority参数优先选择PRIORITY_ACCURACY，会将一段时间内精度较好的结果返回给应用。 如果对定位速度要求较高，建议LocatingPriority参数选择PRIORITY_LOCATING_SPEED，会将最先拿到的定位结果返回给应用。 两种定位策略均会同时使用GNSS定位和网络定位技术，以便在室内和户外场景下均可以获取到位置结果，对设备的硬件资源消耗较大，功耗也较大。 设置locatingTimeoutMs： 因为设备环境、设备所处状态、系统功耗管控策略等的影响，定位返回的时延会有较大波动，建议把单次定位超时时间设置为10秒。 以快速定位策略(PRIORITY_LOCATING_SPEED)为例，调用方式如下：
```typescript
import { geoLocationManager } from '@kit.LocationKit';
import { BusinessError } from '@kit.BasicServicesKit'
let request: geoLocationManager.SingleLocationRequest = {
'locatingPriority': geoLocationManager.LocatingPriority.PRIORITY_LOCATING_SPEED,
'locatingTimeoutMs': 10000
}
try {
geoLocationManager.getCurrentLocation(request).then((result) => { // 调用getCurrentLocation获取当前设备位置，通过promise接收上报的位置
console.log('current location: ' + JSON.stringify(result));
})
.catch((error:BusinessError) => { // 接收上报的错误码
console.error('promise, getCurrentLocation: error=' + JSON.stringify(error));
});
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```
7.  设置LocatingPriority： 如果对位置的返回精度要求较高，建议LocatingPriority参数优先选择PRIORITY_ACCURACY，会将一段时间内精度较好的结果返回给应用。 如果对定位速度要求较高，建议LocatingPriority参数选择PRIORITY_LOCATING_SPEED，会将最先拿到的定位结果返回给应用。 两种定位策略均会同时使用GNSS定位和网络定位技术，以便在室内和户外场景下均可以获取到位置结果，对设备的硬件资源消耗较大，功耗也较大。
8.  设置locatingTimeoutMs： 因为设备环境、设备所处状态、系统功耗管控策略等的影响，定位返回的时延会有较大波动，建议把单次定位超时时间设置为10秒。
9.  持续定位。多用于导航、运动轨迹、出行等场景。 首先要实例化ContinuousLocationRequest对象，用于告知系统该向应用提供何种类型的位置服务，以及位置结果上报的频率。 设置locationScenario： 建议locationScenario参数优先根据应用的使用场景进行设置，该参数枚举值定义参见UserActivityScenario，例如地图在导航时使用NAVIGATION参数，可以持续在室内和室外场景获取位置用于导航。 设置interval： 表示上报位置信息的时间间隔，单位是秒，默认值为1秒。如果对位置上报时间间隔无特殊要求，可以不填写该字段。 以地图导航场景为例，调用方式如下： 如果不主动结束定位可能导致设备功耗高，耗电快；建议在不需要获取定位信息时及时结束定位。
```typescript
import { geoLocationManager } from '@kit.LocationKit';
let request: geoLocationManager.ContinuousLocationRequest= {
'interval': 1,
'locationScenario': geoLocationManager.UserActivityScenario.NAVIGATION
}
let locationCallback = (location:geoLocationManager.Location):void => {
console.log('locationCallback: data: ' + JSON.stringify(location));
};
try {
geoLocationManager.on('locationChange', request, locationCallback);
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```
10.  设置locationScenario： 建议locationScenario参数优先根据应用的使用场景进行设置，该参数枚举值定义参见UserActivityScenario，例如地图在导航时使用NAVIGATION参数，可以持续在室内和室外场景获取位置用于导航。
11.  设置interval： 表示上报位置信息的时间间隔，单位是秒，默认值为1秒。如果对位置上报时间间隔无特殊要求，可以不填写该字段。
-  方式一：获取系统缓存的最新位置。 如果系统当前没有缓存位置会返回错误码。 推荐优先使用该接口获取位置，可以减少系统功耗。 如果对位置的新鲜度比较敏感，可以先获取缓存位置，将位置中的时间戳与当前时间对比，若新鲜度不满足预期可以使用方式二获取位置。
```typescript
import { geoLocationManager } from '@kit.LocationKit';
import { BusinessError } from '@kit.BasicServicesKit'
try {
let location = geoLocationManager.getLastLocation();
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```
-  方式二：获取当前位置。 首先要实例化SingleLocationRequest对象，用于告知系统该向应用提供何种类型的位置服务，以及单次定位超时时间。 设置LocatingPriority： 如果对位置的返回精度要求较高，建议LocatingPriority参数优先选择PRIORITY_ACCURACY，会将一段时间内精度较好的结果返回给应用。 如果对定位速度要求较高，建议LocatingPriority参数选择PRIORITY_LOCATING_SPEED，会将最先拿到的定位结果返回给应用。 两种定位策略均会同时使用GNSS定位和网络定位技术，以便在室内和户外场景下均可以获取到位置结果，对设备的硬件资源消耗较大，功耗也较大。 设置locatingTimeoutMs： 因为设备环境、设备所处状态、系统功耗管控策略等的影响，定位返回的时延会有较大波动，建议把单次定位超时时间设置为10秒。 以快速定位策略(PRIORITY_LOCATING_SPEED)为例，调用方式如下：
```typescript
import { geoLocationManager } from '@kit.LocationKit';
import { BusinessError } from '@kit.BasicServicesKit'
let request: geoLocationManager.SingleLocationRequest = {
'locatingPriority': geoLocationManager.LocatingPriority.PRIORITY_LOCATING_SPEED,
'locatingTimeoutMs': 10000
}
try {
geoLocationManager.getCurrentLocation(request).then((result) => { // 调用getCurrentLocation获取当前设备位置，通过promise接收上报的位置
console.log('current location: ' + JSON.stringify(result));
})
.catch((error:BusinessError) => { // 接收上报的错误码
console.error('promise, getCurrentLocation: error=' + JSON.stringify(error));
});
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```
-  设置LocatingPriority： 如果对位置的返回精度要求较高，建议LocatingPriority参数优先选择PRIORITY_ACCURACY，会将一段时间内精度较好的结果返回给应用。 如果对定位速度要求较高，建议LocatingPriority参数选择PRIORITY_LOCATING_SPEED，会将最先拿到的定位结果返回给应用。 两种定位策略均会同时使用GNSS定位和网络定位技术，以便在室内和户外场景下均可以获取到位置结果，对设备的硬件资源消耗较大，功耗也较大。
-  设置locatingTimeoutMs： 因为设备环境、设备所处状态、系统功耗管控策略等的影响，定位返回的时延会有较大波动，建议把单次定位超时时间设置为10秒。
-  设置LocatingPriority： 如果对位置的返回精度要求较高，建议LocatingPriority参数优先选择PRIORITY_ACCURACY，会将一段时间内精度较好的结果返回给应用。 如果对定位速度要求较高，建议LocatingPriority参数选择PRIORITY_LOCATING_SPEED，会将最先拿到的定位结果返回给应用。 两种定位策略均会同时使用GNSS定位和网络定位技术，以便在室内和户外场景下均可以获取到位置结果，对设备的硬件资源消耗较大，功耗也较大。
-  设置locatingTimeoutMs： 因为设备环境、设备所处状态、系统功耗管控策略等的影响，定位返回的时延会有较大波动，建议把单次定位超时时间设置为10秒。
-  设置locationScenario： 建议locationScenario参数优先根据应用的使用场景进行设置，该参数枚举值定义参见UserActivityScenario，例如地图在导航时使用NAVIGATION参数，可以持续在室内和室外场景获取位置用于导航。
-  设置interval： 表示上报位置信息的时间间隔，单位是秒，默认值为1秒。如果对位置上报时间间隔无特殊要求，可以不填写该字段。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/geocode-guidelines-V14
爬取时间: 2025-04-29 21:08:15
来源: Huawei Developer
场景概述
使用坐标描述一个位置，非常准确，但是并不直观，面向用户表达并不友好。系统向开发者提供了以下两种转化能力。
-  地理编码转化：将地理描述转化为具体坐标。
-  逆地理编码转化能力：将坐标转化为地理描述。
其中地理编码包含多个属性来描述位置，包括国家、行政区划、街道、门牌号、地址描述等等，这样的信息更便于用户理解。
接口说明
进行坐标和地理编码信息的相互转化，所使用的接口说明如下，详细信息参见：Location Kit。
| 接口名 | 功能描述 |
| --- | --- |
| isGeocoderAvailable(): boolean; | 判断地理编码与逆地理编码服务是否可用。 |
| getAddressesFromLocation(request: ReverseGeoCodeRequest, callback: AsyncCallback<Array<GeoAddress>>): void | 调用逆地理编码服务，将坐标转换为地理描述，使用callback回调异步返回结果。 |
| getAddressesFromLocationName(request: GeoCodeRequest, callback: AsyncCallback<Array<GeoAddress>>): void | 调用地理编码服务，将地理描述转换为具体坐标，使用callback回调异步返回结果。 |
开发步骤
地理编码与逆地理编码功能需要访问后端服务，请确保设备联网，以进行信息获取。
1.  导入geoLocationManager模块，所有与地理编码转化&逆地理编码转化能力相关的功能API，都是通过该模块提供的。
```typescript
import { geoLocationManager } from '@kit.LocationKit';
```
2.  查询地理编码与逆地理编码服务是否可用。 调用isGeoServiceAvailable查询地理编码与逆地理编码服务是否可用，如果服务可用再继续进行步骤3。如果服务不可用，说明该设备不具备地理编码与逆地理编码能力，请勿使用相关接口。
```typescript
import { geoLocationManager } from '@kit.LocationKit';
try {
let isAvailable = geoLocationManager.isGeocoderAvailable();
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```
3.  调用isGeoServiceAvailable查询地理编码与逆地理编码服务是否可用，如果服务可用再继续进行步骤3。如果服务不可用，说明该设备不具备地理编码与逆地理编码能力，请勿使用相关接口。
```typescript
import { geoLocationManager } from '@kit.LocationKit';
try {
let isAvailable = geoLocationManager.isGeocoderAvailable();
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```
4.  获取转化结果。 调用getAddressesFromLocation，把坐标转化为地理位置信息。应用可以获得与此坐标匹配的GeoAddress（地理编码地址信息）列表，应用可以根据实际使用需求，读取相应的参数数据。 调用getAddressesFromLocationName把位置描述转化为坐标。 应用可以获得与位置描述相匹配的GeoAddress（地理编码地址信息）列表，其中包含对应的坐标数据。 如果需要查询的位置描述可能出现多地重名的请求，可以设置GeoCodeRequest，通过设置一个经纬度范围，以高效地获取期望的准确结果。
```typescript
let reverseGeocodeRequest:geoLocationManager.ReverseGeoCodeRequest = {"latitude": 31.12, "longitude": 121.11, "maxItems": 1};
try {
geoLocationManager.getAddressesFromLocation(reverseGeocodeRequest, (err, data) => {
if (err) {
console.log('getAddressesFromLocation err: ' + JSON.stringify(err));
} else {
console.log('getAddressesFromLocation data: ' + JSON.stringify(data));
}
});
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```
5.  调用getAddressesFromLocation，把坐标转化为地理位置信息。应用可以获得与此坐标匹配的GeoAddress（地理编码地址信息）列表，应用可以根据实际使用需求，读取相应的参数数据。
```typescript
let reverseGeocodeRequest:geoLocationManager.ReverseGeoCodeRequest = {"latitude": 31.12, "longitude": 121.11, "maxItems": 1};
try {
geoLocationManager.getAddressesFromLocation(reverseGeocodeRequest, (err, data) => {
if (err) {
console.log('getAddressesFromLocation err: ' + JSON.stringify(err));
} else {
console.log('getAddressesFromLocation data: ' + JSON.stringify(data));
}
});
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```
6.  调用getAddressesFromLocationName把位置描述转化为坐标。 应用可以获得与位置描述相匹配的GeoAddress（地理编码地址信息）列表，其中包含对应的坐标数据。 如果需要查询的位置描述可能出现多地重名的请求，可以设置GeoCodeRequest，通过设置一个经纬度范围，以高效地获取期望的准确结果。
```typescript
let geocodeRequest:geoLocationManager.GeoCodeRequest = {"description": "上海市浦东新区xx路xx号", "maxItems": 1};
try {
geoLocationManager.getAddressesFromLocationName(geocodeRequest, (err, data) => {
if (err) {
console.log('getAddressesFromLocationName err: ' + JSON.stringify(err));
} else {
console.log('getAddressesFromLocationName data: ' + JSON.stringify(data));
}
});
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```
-  调用isGeoServiceAvailable查询地理编码与逆地理编码服务是否可用，如果服务可用再继续进行步骤3。如果服务不可用，说明该设备不具备地理编码与逆地理编码能力，请勿使用相关接口。
```typescript
import { geoLocationManager } from '@kit.LocationKit';
try {
let isAvailable = geoLocationManager.isGeocoderAvailable();
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```
-  调用getAddressesFromLocation，把坐标转化为地理位置信息。应用可以获得与此坐标匹配的GeoAddress（地理编码地址信息）列表，应用可以根据实际使用需求，读取相应的参数数据。
```typescript
let reverseGeocodeRequest:geoLocationManager.ReverseGeoCodeRequest = {"latitude": 31.12, "longitude": 121.11, "maxItems": 1};
try {
geoLocationManager.getAddressesFromLocation(reverseGeocodeRequest, (err, data) => {
if (err) {
console.log('getAddressesFromLocation err: ' + JSON.stringify(err));
} else {
console.log('getAddressesFromLocation data: ' + JSON.stringify(data));
}
});
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```
-  调用getAddressesFromLocationName把位置描述转化为坐标。 应用可以获得与位置描述相匹配的GeoAddress（地理编码地址信息）列表，其中包含对应的坐标数据。 如果需要查询的位置描述可能出现多地重名的请求，可以设置GeoCodeRequest，通过设置一个经纬度范围，以高效地获取期望的准确结果。
```typescript
let geocodeRequest:geoLocationManager.GeoCodeRequest = {"description": "上海市浦东新区xx路xx号", "maxItems": 1};
try {
geoLocationManager.getAddressesFromLocationName(geocodeRequest, (err, data) => {
if (err) {
console.log('getAddressesFromLocationName err: ' + JSON.stringify(err));
} else {
console.log('getAddressesFromLocationName data: ' + JSON.stringify(data));
}
});
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/geofence-guidelines-V14
爬取时间: 2025-04-29 21:08:28
来源: Huawei Developer
场景概述
地理围栏就是虚拟地理边界，当设备进入、离开某个特定地理区域时，可以接收自动通知和警告。
目前仅支持圆形围栏，并且依赖GNSS芯片的地理围栏功能，仅在室外开阔区域才能准确识别用户进出围栏事件。
应用场景举例：开发者可以使用地理围栏，在企业周围创建一个区域进行广告定位，在不同的地点，在移动设备上进行有针对性的促销优惠。
接口说明
地理围栏所使用的接口如下，详细说明参见：Location Kit。
| 接口名 | 功能描述 |
| --- | --- |
| on(type: 'gnssFenceStatusChange', request: GeofenceRequest, want: WantAgent): void; | 添加一个围栏，并订阅地理围栏事件。 |
| off(type: 'gnssFenceStatusChange', request: GeofenceRequest, want: WantAgent): void; | 删除一个围栏，并取消订阅该围栏事件。 |
开发步骤
1.  使用地理围栏功能，需要有权限ohos.permission.APPROXIMATELY_LOCATION，位置权限申请的方法和步骤见申请位置权限开发指导。
2.  导入geoLocationManager模块、wantAgent模块和BusinessError模块。
```typescript
import { geoLocationManager } from '@kit.LocationKit';
import { wantAgent } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit'
```
3.  创建WantAgentInfo信息。 场景一：创建拉起Ability的WantAgentInfo信息。 场景二：创建发布公共事件的WantAgentInfo信息。
```typescript
// 通过WantAgentInfo的operationType设置动作类型
let wantAgentInfo:wantAgent.WantAgentInfo = {
wants: [
{
deviceId: '',
bundleName: 'com.example.myapplication',
abilityName: 'EntryAbility',
action: '',
entities: [],
uri: '',
parameters: {}
}
],
operationType: wantAgent.OperationType.START_ABILITY,
requestCode: 0,
wantAgentFlags:[wantAgent.WantAgentFlags.CONSTANT_FLAG]
};
```
4.  调用getWantAgent()方法进行创建WantAgent。 并且在获取到WantAgent对象之后调用地理围栏接口添加围栏，当设备进入或者退出该围栏时，系统会自动触发WantAgent的动作。
```typescript
let wantAgentObj : object | undefined = undefined;
// 创建WantAgent
wantAgent.getWantAgent(wantAgentInfo, (err, data) => {
if (err) {
console.error('getWantAgent err=' + JSON.stringify(err));
return;
}
console.info('getWantAgent success');
wantAgentObj = data;
let requestInfo:geoLocationManager.GeofenceRequest = {'scenario': 0x301, "geofence": {"latitude": 31.12, "longitude": 121.11, "radius": 100, "expiration": 10000}};
try {
geoLocationManager.on('gnssFenceStatusChange', requestInfo, wantAgentObj);
} catch (err) {
console.error("errCode:" + JSON.stringify(err));
}
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/fenceextensionability-V14
爬取时间: 2025-04-29 21:08:42
来源: Huawei Developer
概述
FenceExtensionAbility是一个地理围栏类型的ExtensionAbility，开发者可以使用该Ability来快速便捷的实现地理围栏拓展能力，协助用户完成快捷交互，提升用户体验。
使用场景
接口介绍
接口详情参见FenceExtensionAbility。
| 接口 | 描述 |
| --- | --- |
| onFenceStatusChange(transition: geoLocationManager.GeofenceTransition, additions: Record<string, string>): void | 接收系统通知的地理围栏事件，根据围栏事件类型和数据进行相应处理。 |
| onDestroy(): void | 接收FenceExtensionAbility的销毁事件并处理，会在FenceExtensionAbility销毁前回调。 |
开发步骤
实现一个地理围栏扩展服务
首先需要实现FenceExtensionAbility提供方的能力。
需要在DevEco Studio工程中手动新建一个FenceExtensionAbility，具体步骤如下。
示例代码如下：
```typescript
import { FenceExtensionAbility, geoLocationManager } from '@kit.LocationKit';
import { notificationManager } from '@kit.NotificationKit';
import { Want, wantAgent } from '@kit.AbilityKit';
export class MyFenceExtensionAbility extends FenceExtensionAbility {
onFenceStatusChange(transition: geoLocationManager.GeofenceTransition, additions: Record<string, string>): void {
// 接受围栏状态变化事件，处理业务逻辑
console.info(`on geofence transition,id:${transition.geofenceId},event:${transition.transitionEvent},additions:${JSON.stringify(additions)}`);
// 可以发送围栏业务通知
let wantAgentInfo: wantAgent.WantAgentInfo = {
wants: [
{
bundleName: 'com.example.myapplication',
abilityName: 'EntryAbility',
parameters:
{
"geofenceId": transition?.geofenceId,
"transitionEvent": transition?.transitionEvent,
}
} as Want
],
actionType: wantAgent.OperationType.START_ABILITY,
requestCode: 100
};
wantAgent.getWantAgent(wantAgentInfo).then((wantAgentMy) => {
let notificationRequest: notificationManager.NotificationRequest = {
id: 1,
content: {
notificationContentType: notificationManager.ContentType.NOTIFICATION_CONTENT_BASIC_TEXT,
normal: {
title: `围栏通知`,
text: `on geofence transition,id:${transition.geofenceId},event:${transition.transitionEvent},additions:${JSON.stringify(additions)}`,
}
},
notificationSlotType: notificationManager.SlotType.SOCIAL_COMMUNICATION,
wantAgent: wantAgentMy
};
notificationManager.publish(notificationRequest);
});
}
}
```
```json
{
"module": {
"extensionAbilities": [
{
"name": "MyFenceExtensionAbility",
"srcEntry": "./ets/fenceExtensionability/MyFenceExtensionAbility.ets",
"description": "MyFenceExtensionAbility",
"type": "fence",
"exported": true
},
]
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/location-personal-data-V14
爬取时间: 2025-04-29 21:08:57
来源: Huawei Developer
此文档针对华为作为最终用户数据处理者，您作为最终用户数据控制者的数据处理进行说明，包括：
华为处理的个人数据清单
| 个人数据清单  | 处理目的  | 存留期  |
| --- | --- | --- |
| 活动状态  | 识别用户的活动状态。  | 不保存。 定位服务在处理个人数据后立即删除。  |
个人数据清单
处理目的
存留期
活动状态
识别用户的活动状态。
不保存。
定位服务在处理个人数据后立即删除。
指导开发者如何帮助最终用户实现对数据的控制
使用地理围栏功能前开发者应当获得用户同意（具体可参考向用户申请授权），允许开发者的应用始终访问用户的位置信息。
定位服务在处理个人数据后立即删除，不会保存用户的个人数据。因此，华为无需实现对数据的控制。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/app-samples-V14
爬取时间: 2025-04-29 21:09:11
来源: Huawei Developer
针对位置开发，有以下相关实例可供参考：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-kit-guide-V14
爬取时间: 2025-04-29 21:09:25
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-introduction-V14
爬取时间: 2025-04-29 21:09:38
来源: Huawei Developer
Map Kit（地图服务）为开发者提供强大而便捷的地图能力，助力全球开发者实现个性化显示地图、位置搜索和路径规划等功能，轻松完成地图构建工作。您可以轻松地在HarmonyOS应用/元服务中集成地图相关的功能，全方位提升用户体验。
Map Kit提供了全球3.2亿的 Poi（Point of Interest，兴趣点）。在地图表达中，一个 Poi 可代表一家商铺、一栋办公楼、一处景点等等。
Map Kit不断优化丰富地图的细节呈现能力，例如在Poi和路网信息展示方面，根据Poi属性信息及区域路网差异，在不同层级比例尺条件下，为用户展示更合适的Poi和路网信息。手势交互方面，提供了包括缩放、旋转、移动、倾斜等流畅的交互体验。
场景介绍
中国大陆使用GCJ02坐标系，中国台湾和海外使用WGS84坐标系。详见坐标转换。
Map Kit提供以下功能，满足绝大多数地图开发的需求：
支持的国家/地区
请参见支持的国家/地区。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-config-agc-V14
爬取时间: 2025-04-29 21:09:52
来源: Huawei Developer
请优先开通地图服务后，再参考“应用开发准备”完成基本准备工作，然后再继续进行以下开发活动。
从HarmonyOS 5.0.1 Beta3版本开始，开发者无需配置公钥指纹和Client ID（除自定义地图样式功能）。
开通地图服务
1.
2.
3.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170058.73353686940207103469707704490265:50001231000000:2800:BF5C54777F4989FD119DF150638BF523F7483E6684FFA4076F8C4652C3E83C9F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170058.73253477015834938393162558113675:50001231000000:2800:208AB5488C9E2ECD66186EEFEAEF581BD86AC45850790FDE6ADE51F37538E3BD.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170058.25037855145847830510089985424129:50001231000000:2800:E1A52DF8E4EFA776A44FACF7DDD7A22F47186B970A4B06E4AAFD2CA7368752C4.png)
若使用原有的Profile文件，请确保在申请Profile文件之前已开启“地图服务”，否则开启后需要重新申请Profile文件，并重新配置签名信息。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-creation-V14
爬取时间: 2025-04-29 21:10:06
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-presenting-V14
爬取时间: 2025-04-29 21:10:20
来源: Huawei Developer
场景介绍
本章节将向您介绍如何使用地图组件MapComponent和MapComponentController呈现地图，效果如下图所示。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170059.28924480995228217101759323301866:50001231000000:2800:3FA6E97A0A8F5B38D8E6D3BB77B91419F20F958BB4C08538A20D4B8B8665ECC9.png)
接口说明
显示地图功能主要由MapComponent提供，更多接口及使用方法请参见接口文档。
| 接口 | 接口描述 |
| --- | --- |
| mapCommon.MapOptions | 提供Map组件初始化的属性。 |
| MapComponent(mapOptions: mapCommon.MapOptions, mapCallback: AsyncCallback<map.MapComponentController>) | 地图组件。 |
| map.MapComponentController | 地图组件的主要功能入口类，用来操作地图，与地图有关的所有方法从此处接入。它所承载的工作包括：地图类型切换（如标准地图、空地图）、改变地图状态（中心点坐标和缩放级别）、添加点标记（Marker）、绘制几何图形(如MapPolyline、MapPolygon、MapCircle)、监听各类事件等。 |
接口
接口描述
mapCommon.MapOptions
提供Map组件初始化的属性。
MapComponent(mapOptions:mapCommon.MapOptions, mapCallback: AsyncCallback<map.MapComponentController>)
地图组件。
map.MapComponentController
地图组件的主要功能入口类，用来操作地图，与地图有关的所有方法从此处接入。它所承载的工作包括：地图类型切换（如标准地图、空地图）、改变地图状态（中心点坐标和缩放级别）、添加点标记（Marker）、绘制几何图形(如MapPolyline、MapPolygon、MapCircle)、监听各类事件等。
开发步骤
地图显示
```typescript
import { MapComponent, mapCommon, map } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
1.  通过callback回调的方式获取MapComponentController对象，用来操作地图。 调用MapComponent组件，传入mapOptions和callback参数，初始化地图。
```typescript
@Entry
@Component
struct HuaweiMapDemo {
private TAG = "HuaweiMapDemo";
private mapOptions?: mapCommon.MapOptions;
private callback?: AsyncCallback<map.MapComponentController>;
private mapController?: map.MapComponentController;
private mapEventManager?: map.MapEventManager;
aboutToAppear(): void {
// 地图初始化参数，设置地图中心点坐标及层级
this.mapOptions = {
position: {
target: {
latitude: 39.9,
longitude: 116.4
},
zoom: 10
}
};
// 地图初始化的回调
this.callback = async (err, mapController) => {
if (!err) {
// 获取地图的控制器类，用来操作地图
this.mapController = mapController;
this.mapEventManager = this.mapController.getEventManager();
let callback = () => {
console.info(this.TAG, `on-mapLoad`);
}
this.mapEventManager.on("mapLoad", callback);
}
};
}
// 页面每次显示时触发一次，包括路由过程、应用进入前台等场景，仅@Entry装饰的自定义组件生效
onPageShow(): void {
// 将地图切换到前台
if (this.mapController) {
this.mapController.show();
}
}
// 页面每次隐藏时触发一次，包括路由过程、应用进入后台等场景，仅@Entry装饰的自定义组件生效
onPageHide(): void {
// 将地图切换到后台
if (this.mapController) {
this.mapController.hide();
}
}
build() {
Stack() {
// 调用MapComponent组件初始化地图
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback }).width('100%').height('100%');
}.height('100%')
}
}
```
2.  如果没有成功加载地图，请参见地图不显示。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170059.26346885629858049160067610759891:50001231000000:2800:70C43FF1F8B3B3935552BC811FE74997787A4819E03E49F922E8DBC485FD831B.png)
设置地图属性
MapOptions包含以下属性。
| 属性 | 描述 |
| --- | --- |
| mapType | 地图类型，默认值：MapType.STANDARD。 |
| position | 地图相机位置。 |
| bounds | 地图展示框。 |
| minZoom | 地图最小图层，有效范围[2, 20]，默认值：2。 |
| maxZoom | 地图最大图层，有效范围[2, 20]，默认值：20。 |
| rotateGesturesEnabled | 是否支持旋转手势，默认值：true。 |
| scrollGesturesEnabled | 是否支持滑动手势，默认值：true。 |
| zoomGesturesEnabled | 是否支持缩放手势，默认值：true。 |
| tiltGesturesEnabled | 是否支持倾斜手势，默认值：true。 |
| zoomControlsEnabled | 是否展示缩放控件，默认值：true。 |
| myLocationControlsEnabled | 是否展示我的位置按钮，默认值：false。 |
| compassControlsEnabled | 是否展示指南针控件，默认值：true。 |
| scaleControlsEnabled | 是否展示比例尺，默认值：false。 |
| alwaysShowScaleEnabled | 是否始终显示比例尺，默认值：false。 |
| padding | 设置地图和边界的距离。 |
| styleId | 自定义样式ID。 |
| dayNightMode | 日间夜间模式，默认值：DayNightMode.DAY（日间模式）。 |
属性
描述
mapType
地图类型，默认值：MapType.STANDARD。
position
地图相机位置。
bounds
地图展示框。
minZoom
地图最小图层，有效范围[2, 20]，默认值：2。
maxZoom
地图最大图层，有效范围[2, 20]，默认值：20。
rotateGesturesEnabled
是否支持旋转手势，默认值：true。
scrollGesturesEnabled
是否支持滑动手势，默认值：true。
zoomGesturesEnabled
是否支持缩放手势，默认值：true。
tiltGesturesEnabled
是否支持倾斜手势，默认值：true。
zoomControlsEnabled
是否展示缩放控件，默认值：true。
myLocationControlsEnabled
是否展示我的位置按钮，默认值：false。
compassControlsEnabled
是否展示指南针控件，默认值：true。
scaleControlsEnabled
是否展示比例尺，默认值：false。
alwaysShowScaleEnabled
是否始终显示比例尺，默认值：false。
padding
设置地图和边界的距离。
styleId
自定义样式ID。
dayNightMode
日间夜间模式，默认值：DayNightMode.DAY（日间模式）。
1.  在mapOptions中设置myLocationControlsEnabled属性为true，可展示我的位置按钮，显示效果如下图所示。
```typescript
this.mapOptions = {
position: {
target: {
latitude: 39.9,
longitude: 116.4
},
zoom: 10
},
myLocationControlsEnabled: true
};
```
2.  在mapOptions中设置scaleControlsEnabled属性为true，可展示比例尺，显示效果如下图所示。
```typescript
this.mapOptions = {
position: {
target: {
latitude: 39.9,
longitude: 116.4
},
zoom: 10
},
scaleControlsEnabled: true
};
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170059.96109021406302778200147444864798:50001231000000:2800:AB2D1BE10C6A71E76FE8D1F46D5A1CE317A5EAE160AA82111F8A4A31586B2D91.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170059.33904707839496425439012020484555:50001231000000:2800:E8F74C5894CE7B173C119E1A588B62F72EBF5CD5CAA8EDD08900C1B08B81DA41.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170059.28705939707320890301482976203467:50001231000000:2800:0D322D9585D6FE76B275B491152584133315F027A9CFC9096F0AD5628EC793F2.png)
开启3D建筑图层
```typescript
this.mapController.setBuildingEnabled(true);
```
显示效果如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170059.34767173980306483274862285326030:50001231000000:2800:8075EFBD379A84331D16A6FC05F5C822B61F1FEB5486EDC0BB204BEDE66EDEAA.png)
地图前后台切换
您可以通过MapComponentController对象来控制地图页面前后台切换的生命周期。应用触发前后台切换时，可以在Page生命周期里调用show/hide，以便申请/释放资源。
地图切换至前台：
```typescript
// 页面每次显示时触发一次，包括路由过程、应用进入前台等场景，仅@Entry装饰的自定义组件生效
onPageShow(): void {
// 建议页面切换到前台，调用地图组件的show方法
if (this.mapController) {
this.mapController.show();
}
}
```
地图切换至后台：
深色模式
Map Kit提供2种方式设置地图的夜间模式：初始化地图时和创建地图后。
方式一：初始化地图时
```typescript
this.mapOptions = {
position: {
target: {
latitude: 39.9,
longitude: 116.4
},
zoom: 10
},
myLocationControlsEnabled: true,
// 设置地图为夜间模式
dayNightMode: mapCommon.DayNightMode.NIGHT
};
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170059.14229827615578776539146026610795:50001231000000:2800:F347ED84D3AAE90088DA179E31D5C11A33D8E7DBA7EC63AF79CCB8C446F7053D.png)
方式二：创建地图后
创建地图后，可调用MapComponentController对象的setDayNightMode方法设置夜间模式。下面的例子中将参数值设置为AUTO，在设置完之后，打开系统的深色开关，地图会自动变为夜间模式。
```typescript
// 设置地图为自动模式
this.mapController.setDayNightMode(mapCommon.DayNightMode.AUTO);
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-type-V14
爬取时间: 2025-04-29 21:10:34
来源: Huawei Developer
场景介绍
Map Kit支持以下地图类型：
|   图1 标准地图  |   图2 空地图  |
| --- | --- |
|   图3 地形图  |    |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170059.69328545722504671727004716352077:50001231000000:2800:4ABDF602402B5FDCF6178D58D55BE61C414656B9E88101ABA1BF8C787F97F126.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170059.40780641634525793822012731010744:50001231000000:2800:ECA31D1C3076DF772450D3FFF098269F38C2414468C752D4E705B682C7467C3D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170059.06407451607179449458359623593858:50001231000000:2800:32749F98A3E5A6CF8058741EC3AFD6732231E36E88427A0097061B7F3269DD97.png)
接口说明
Map Kit提供2种方式设置地图类型：
方式一：在初始化的时候，通过设置MapOptions中的MapType来控制展示不同地图类型。
| 属性名 | 描述 |
| --- | --- |
| mapCommon.MapOptions.MapType | 地图初始化参数中的MapType地图类型。 |
属性名
描述
mapCommon.MapOptions.MapType
地图初始化参数中的MapType地图类型。
方式二：地图创建后，可通过setMapType方法动态设置地图类型。
| 方法名 | 描述 |
| --- | --- |
| setMapType(mapType: mapCommon.MapType): void | 设置地图类型。 |
方法名
描述
setMapType(mapType:mapCommon.MapType): void
设置地图类型。
开发步骤
```typescript
import { mapCommon } from '@kit.MapKit';
```
1.  方式一： 显示效果如下： 显示效果如下：
```typescript
this.mapOptions = {
position: {
target: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
},
zoom: 13
},
mapType: mapCommon.MapType.STANDARD
};
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170059.59468096853719601337116686321145:50001231000000:2800:5A3A9AC16C258009DAEDB71CC88C681D554C6DEEA4615901357E6C70C95C3058.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170100.12418393649848639220222614615262:50001231000000:2800:0C1E3A08E9E13F5DE04DC6681342A0F92DB9F7854B507170DCF1BAFA4295DAA9.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-location-V14
爬取时间: 2025-04-29 21:10:48
来源: Huawei Developer
场景介绍
本章节将向您介绍如何开启和展示“我的位置”功能，“我的位置”指的是进入地图后点击“我的位置”显示当前位置点的功能。效果如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170100.99027718395049057913113319437240:50001231000000:2800:6DBAD2C002EF3D9B8BDC4575888A5172E54B8EBE1AA147373E0174A3710225DE.png)
接口说明
“我的位置”功能主要由MapComponentController的方法实现，更多接口及使用方法请参见接口文档。
| 方法名 | 描述 |
| --- | --- |
| setMyLocationEnabled(myLocationEnabled: boolean): void | “我的位置”图层功能开关，默认使用系统的连续定位能力显示用户位置。开关打开后，“我的位置”按钮默认显示在地图的右下角。点击“我的位置”按钮，将会在屏幕中心显示当前定位，以蓝色圆点的形式呈现。 |
| setMyLocationControlsEnabled(enabled: boolean): void | 设置是否启用“我的位置”按钮。只显示按钮，在不开启“我的位置”图层功能的情况下，点击按钮没反应。 |
| setMyLocation(location: geoLocationManager.Location): void | 设置“我的位置”坐标。 如果不使用Map Kit提供的默认定位行为，可以通过Location Kit获取用户位置后，传给Map Kit。 |
| setMyLocationStyle(style: mapCommon.MyLocationStyle): Promise<void> | 设置“我的位置”样式。 |
| on(type: 'myLocationButtonClick', callback: Callback<void>): void | 监听“我的位置”按钮点击事件。 |
| off(type: 'myLocationButtonClick', callback?: Callback<void>): void | 取消监听“我的位置”按钮点击事件。 |
方法名
描述
setMyLocationEnabled(myLocationEnabled: boolean): void
“我的位置”图层功能开关，默认使用系统的连续定位能力显示用户位置。开关打开后，“我的位置”按钮默认显示在地图的右下角。点击“我的位置”按钮，将会在屏幕中心显示当前定位，以蓝色圆点的形式呈现。
setMyLocationControlsEnabled(enabled: boolean): void
设置是否启用“我的位置”按钮。只显示按钮，在不开启“我的位置”图层功能的情况下，点击按钮没反应。
setMyLocation(location:geoLocationManager.Location): void
设置“我的位置”坐标。
如果不使用Map Kit提供的默认定位行为，可以通过Location Kit获取用户位置后，传给Map Kit。
setMyLocationStyle(style:mapCommon.MyLocationStyle): Promise<void>
设置“我的位置”样式。
on(type: 'myLocationButtonClick', callback: Callback<void>): void
监听“我的位置”按钮点击事件。
off(type: 'myLocationButtonClick', callback?: Callback<void>): void
取消监听“我的位置”按钮点击事件。
开发步骤
开启“我的位置”按钮
1.  方式一（推荐）：使用安全控件LocationButton。 方式二：申请ohos.permission.LOCATION和ohos.permission.APPROXIMATELY_LOCATION权限，您需要在module.json5配置文件中声明所需要的权限，具体可参考声明权限。
```typescript
{
"module" : {
// ...
"requestPermissions":[
{
// 允许应用在前台运行时获取位置信息
"name" : "ohos.permission.LOCATION",
// reason需要在/resources/base/element/string.json中新建
"reason": "$string:location_permission",
"usedScene": {
"abilities": [
"EntryAbility"
],
"when":"inuse"
}
},
{
// 允许应用获取设备模糊位置信息
"name" : "ohos.permission.APPROXIMATELY_LOCATION",
// reason需要在/resources/base/element/string.json中新建
"reason": "$string:approximately_location_permission",
"usedScene": {
"abilities": [
"EntryAbility"
],
"when":"inuse"
}
}
]
}
}
```
2.  1）如果是通过方式一申请用户定位权限，可以在点击安全控件后打开地图，并开启“我的位置”功能。
```typescript
// 启用我的位置图层
this.mapController.setMyLocationEnabled(true);
// 启用我的位置按钮
this.mapController.setMyLocationControlsEnabled(true);
```
3.  “我的位置”按钮默认显示在地图的右下角。点击“我的位置”按钮，将会在屏幕中心显示当前定位，以蓝色圆点的形式呈现，效果如下图所示，效果根据获取到的用户位置会有变化。
4.  Map Kit默认使用系统的连续定位能力，如果您希望定制显示频率或者精准度，可以调用geoLocationManager相关接口获取用户位置坐标（WGS84坐标系）。注意访问设备的位置信息必须申请权限，并且获得用户授权，详情见geoLocationManager。
```typescript
// 需要引入@kit.LocationKit模块
import { geoLocationManager } from '@kit.LocationKit';
// ...
// 获取用户位置坐标
let location = await geoLocationManager.getCurrentLocation();
// 设置用户的位置
this.mapController.setMyLocation(location);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170100.05914207090666815578617886202899:50001231000000:2800:F203AFE7942E2D5EF623C851B53B35CA2242562252A23F0518104210FD8FB935.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170100.91426209356735185161118809720180:50001231000000:2800:D795A9D8B33EDC273209A55BFF14BA70FFF32218CA3ED1EAD16A80D9D57F2049.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170100.67718234656516578584139811431663:50001231000000:2800:DF07D1219602F2CBFC2CB762CD83DB577DB4347E066FF47566CB110C1F8333D8.png)
监听“我的位置”按钮点击事件
通过调用on(type: 'myLocationButtonClick')方法，设置'myLocationButtonClick'事件监听。设置监听后“我的位置按钮”点击事件自定义，反之不设置则由Map Kit执行点击后默认事件，即地图移动到当前用户位置。
```typescript
let callback = () => {
console.info("myLocationButtonClick", `myLocationButtonClick`);
};
this.mapEventManager.on("myLocationButtonClick", callback);
```
隐藏“我的位置”按钮
```typescript
this.mapController.setMyLocationControlsEnabled(false);
```
自定义位置图标样式
```typescript
let style: mapCommon.MyLocationStyle = {
anchorU: 0.5,
anchorV: 0.5,
radiusFillColor: 0xffff0000,
// icon为自定义图标资源，使用时需要替换
// 图标存放在resources/rawfile，icon参数传入rawfile文件夹下的相对路径
icon: 'test.png'
};
await this.mapController.setMyLocationStyle(style);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170100.59134685775977002216626422911691:50001231000000:2800:181B20965044A56D82FFE12307DD80044E38BAEAB460BEA3066A1E8D3F784EDD.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-style-V14
爬取时间: 2025-04-29 21:11:02
来源: Huawei Developer
场景介绍
本章节将向您介绍如何在应用中添加自定义样式的地图。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170100.08346584598184007521447693007309:50001231000000:2800:CC6A5F820B114AFA726EFDBE7850A793F2A597A4BB5FBB391404106BF83D4672.png)
接口说明
自定义样式功能主要由CustomMapStyleOptions、setCustomMapStyle提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| CustomMapStyleOptions | 自定义样式参数。 |
| setCustomMapStyle(customMapStyleOptions: mapCommon.CustomMapStyleOptions): Promise<void> | 将地图样式修改为自定义样式。 |
接口名
描述
CustomMapStyleOptions
自定义样式参数。
setCustomMapStyle(customMapStyleOptions:mapCommon.CustomMapStyleOptions): Promise<void>
将地图样式修改为自定义样式。
开发步骤
Map Kit提供两种方法设置自定义地图样式：
设置样式ID
```typescript
import { MapComponent, mapCommon, map } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
1.
2.
3.  设置样式ID之后效果如下：
```typescript
@Entry
@Component
struct CustomMapStyleDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
aboutToAppear(): void {
// 地图初始化参数
this.mapOptions = {
position: {
target: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
},
zoom: 15
}
};
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
// 自定义样式参数，styleId需要替换为您自己的样式ID或者预览ID，样式ID或者预览ID可在Petal Maps Studio平台上创建
let param: mapCommon.CustomMapStyleOptions = {
styleId: "1346407266336828736"
};
// 设置自定义样式
await this.mapController.setCustomMapStyle(param);
}
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback });
}.width('100%')
}.height('100%')
}
}
```
```typescript
@Entry
@Component
struct CustomMapStyleDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
aboutToAppear(): void {
// 地图初始化参数
this.mapOptions = {
position: {
target: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
},
zoom: 15
}
};
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
// 自定义样式参数，styleId需要替换为您自己的样式ID或者预览ID，样式ID或者预览ID可在Petal Maps Studio平台上创建
let param: mapCommon.CustomMapStyleOptions = {
styleId: "1346407266336828736"
};
// 设置自定义样式
await this.mapController.setCustomMapStyle(param);
}
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback });
}.width('100%')
}.height('100%')
}
}
```
```typescript
@Entry
@Component
struct CustomMapStyleDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
aboutToAppear(): void {
// 地图初始化参数
this.mapOptions = {
position: {
target: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
},
zoom: 15
},
// 自定义样式参数，styleId需要替换为您自己的样式ID或者预览ID，样式ID或者预览ID可在Petal Maps Studio平台上创建
styleId: "1346407266336828736"
};
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
}
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback });
}.width('100%')
}.height('100%')
}
}
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170100.52636590786374409717347052444348:50001231000000:2800:E48BA6756675FA247B8C1320D60F7FDEE89BB6E41E26707617205D758EA679D4.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170100.02816051575386513547814618643062:50001231000000:2800:C5C9FFE2444FCCB88C35D0300E4E45BE7E1810F97D30120B055E1198BA8D4CF4.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170100.65507789724746436245664383156848:50001231000000:2800:99F62086D19830A43BD95C9B3CE8C387B634AB0B8AF4760C3B420C01A8E830D8.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170101.21888048755654983493455912905022:50001231000000:2800:0E98B6BF427E5257BD33DAF8F4ADF6211B4FA74C90ABF8E0FEF058DE1164DB93.png)
1.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170101.51452887062411714112685702690751:50001231000000:2800:302B74D5ADC57ECC30359988D921A1D374287325E5A8CC0680587D664FB05E32.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170101.19019846499437368486207945685570:50001231000000:2800:294830B3B7A7B398D8ACC7C14FED7A6CE4B42C9B8271A1AF1C69C947C52569EE.png)
```typescript
@Entry
@Component
struct CustomMapStyleDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
aboutToAppear(): void {
// 地图初始化参数
this.mapOptions = {
position: {
target: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
},
zoom: 15
}
};
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
// 自定义样式参数，styleId需要替换为您自己的样式ID或者预览ID，样式ID或者预览ID可在Petal Maps Studio平台上创建
let param: mapCommon.CustomMapStyleOptions = {
styleId: "1346407266336828736"
};
// 设置自定义样式
await this.mapController.setCustomMapStyle(param);
}
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback });
}.width('100%')
}.height('100%')
}
}
```
```typescript
@Entry
@Component
struct CustomMapStyleDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
aboutToAppear(): void {
// 地图初始化参数
this.mapOptions = {
position: {
target: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
},
zoom: 15
},
// 自定义样式参数，styleId需要替换为您自己的样式ID或者预览ID，样式ID或者预览ID可在Petal Maps Studio平台上创建
styleId: "1346407266336828736"
};
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
}
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback });
}.width('100%')
}.height('100%')
}
}
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170101.05289271396617539863183420641269:50001231000000:2800:9E9FA76C15E31DD9FF01FAE1577A546F37C4435486DEE6634E1B113618A6AF69.png)
设置样式内容
```typescript
import { MapComponent, mapCommon, map } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
1.
```typescript
@Entry
@Component
struct CustomMapStyleDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
aboutToAppear(): void {
// 地图初始化参数
this.mapOptions = {
position: {
target: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
},
zoom: 15
}
};
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
// 自定义样式参数
let param: mapCommon.CustomMapStyleOptions = {
styleContent: `[{
"mapFeature": "landcover.natural",
"options": "geometry.fill",
"paint": {
"color": "#8FBC8F"
}},
{
"mapFeature": "water",
"options": "geometry.fill",
"paint": {
"color": "#4682B4"
}}]`
};
// 设置自定义样式
await this.mapController.setCustomMapStyle(param);
}
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback });
}.width('100%')
}.height('100%')
}
}
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170101.86368733324559251467641326656787:50001231000000:2800:439E4530B255CCEC42B403ED95AE4EA9FB74D044222D87CB9C8B8BB8E6D54D1A.png)
样式参考
自定义地图样式JSON内容通过下列4个元素来定义地图样式：
下列各表将向您展示支持修改的地图元素。
1.  All代表全部，即所有类别的集合，支持能力范围同其他所有列表。
2.  元素类型 Feature type Geometry Labels Icon 填充颜色 fill. color 填充宽度 fill. weight 描边颜色 stroke. color 描边宽度 stroke. weight 填充颜色 fill. color 文本大小 fill. weight 描边颜色 stroke. color 描边大小 stroke. weight 图标类型 icon- type capital 首都 - - - - Country 国家 - District 区/县 - - - - Locality 乡村、城镇 - - - - Major-city 1-4级城市 - - - - Province 省 -
3.  元素类型 Feature type Geometry Labels 填充颜色 fill.color 描边颜色 stroke.color 填充颜色 fill.color 文本大小 fill.weight 描边颜色 stroke.color 描边大小 stroke.weight Attraction 游乐场、动植物园等 - Business 购物中心、商业区等 - College 学校 - Hospital 医院 - Human-made 聚集区、小区、工业区、监狱地面等 Human-made 建筑物 - - - - Natural 陆地、岛屿、海滩、冰川等 - Parkland 森林、公园、荒地、高尔夫球场等 -
4.  元素类型 Feature type Labels Icon 填充颜色 fill.color 文本大小 fill.weight 描边颜色 stroke.color 描边大小 stroke.weight 图标类型 icon-type Airport 飞机场 Automotive 汽修、充电桩、洗车等 Beauty 美容中心 Business 公司、商业楼等 Eating&drinking 饮食快餐 Health-care 医院、诊所、药店等 Leisure 休闲娱乐 Lodging 酒店、住宿点 Miscellaneous 自然地物 Natural 山峰、森林等 Public-service 医院、诊所、药店等 Railway 铁路 Shopping 购物中心、市场等 Sports outdoor户外运动、爬山、骑车等 Tourism 旅游景点、历史遗迹、教堂等
5.  元素类型 Feature type Geometry Labels Icon 填充颜色 fill. color 填充宽度 fill. weight 描边颜色 stroke. color 描边宽度 stroke. weight 填充颜色 fill. color 文本大小 fill. weight 描边颜色 stroke. color 描边大小 stroke. weight 图标类型 icon- type City-arterial 城市主干道 Highway 城市高速 Minor-road 市区内支线等 - National 国道 Province 省道 Sidewalk 人行道 -
6.  元素类型 Feature type Geometry Labels 填充颜色 fill.color 填充颜色 fill.color 文本大小 fill.weight Closed 封路
7.  元素类型 Feature type Geometry Labels Icon 填充颜色 fill. color 填充宽度 fill. weight 描边颜色 stroke. color 描边宽度 stroke.weight 填充颜色 fill. color 文本大小 fill. weight 描边颜色 stroke. color 描边大小 stroke.weight 图标类型 icon- type Airport 机场 - - - Airport Runway 机场跑道 Airport Runway Taxiway 机场跑道滑行道 Bus 公交 - - - - Ferry-line 航线 - - - - Ferry-terminal 港口 - - - Other 出租车、 出入口等 - - - - Rail-station 火车站、 高铁站 - - - Railway 铁路线、 高铁线 - - - - - Subway 地铁 Traffic_light 交通灯
8.  元素类型 Feature type Geometry Labels 填充颜色 fill.color 填充颜色 fill.color 文本大小 fill.weight Ocean 水系、海洋、湖泊、河流
| 元素类型 Feature type | Geometry | Labels | Icon |
| --- | --- | --- | --- |
| 填充颜色 fill. color | 填充宽度 fill. weight | 描边颜色 stroke. color | 描边宽度 stroke. weight | 填充颜色 fill. color | 文本大小 fill. weight | 描边颜色 stroke. color | 描边大小 stroke. weight | 图标类型 icon- type |
| capital 首都 | - | - | - | - |  |  |  |  |  |
| Country 国家 |  |  |  |  |  |  |  |  | - |
| District 区/县 | - | - | - | - |  |  |  |  |  |
| Locality 乡村、城镇 | - | - | - | - |  |  |  |  |  |
| Major-city 1-4级城市 | - | - | - | - |  |  |  |  |  |
| Province 省 |  |  |  |  |  |  |  |  | - |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170101.82204575376448321130271875023441:50001231000000:2800:EA04170E1AED7638120B0B8FB90A202477DF96D41CFA12343265073398266938.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170101.18689818807229589976548829229866:50001231000000:2800:81BC190FC190D4F0FBE6981DB3770D4A17BA32AF4890DA86D8FEC99E24A470C9.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170101.03024651902740867089920677581513:50001231000000:2800:5DC9E85C08136F6D6175F1DF93ACD73EE1E243F36C78E7B3902041A463965CD3.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.83562823508716168158762756585376:50001231000000:2800:0098EBBF5EE24769385904ACE1CA54F402B1692FB0583169DCACD7108B74CFBF.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.07008269872018202532481981975578:50001231000000:2800:F1951AC6224BC88C9777A6598A66C029AA8BB3A5450A64C2A8B8DA1D48D6E8BA.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.91787675529437608532401897458742:50001231000000:2800:C739CE88A3CF35F73AD721ED81C23DF28E39E217AE52089F3FAA6F9A4D91F138.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.68102925947993925676053664385172:50001231000000:2800:7F42C58CDC832A2583B108CA8175A3A74A86ED442D3F3C62499DDC380B17FA5E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.50435835625706757476997304532610:50001231000000:2800:F1E3DE962E31B907E120D64DE37EF7C1C7A9F7E30BF441F4D102B51A47148668.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.25566358033620489218314424628249:50001231000000:2800:65AC3E1F1A705CF99F73420F2D339D3152F85D61C13221CC1A903B887B9D7DFC.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.51839213044626149764217972675254:50001231000000:2800:2E4097E126623B5DE9C343FAA530EB074E215C30EB05E66E40079BC82351C553.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.59887140676002666268626392973235:50001231000000:2800:539C592259593FDDCA071CD206698F01498258F5370E619ABE90FEBE0DB205CB.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.09295404062159221234811958616235:50001231000000:2800:A0F6FE4C89544ABE9CB8511AC24A4CB5E420F654F9D6030D70BE4FC6FE94BE05.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.18997574795470421487661120937000:50001231000000:2800:8D0C4205E119CEE86DE6AC6626B50E4CF5AFD8353186BB601819D3954BBBABFD.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.06731836923546087855785301975841:50001231000000:2800:AEA41817B3B99525F75D3462736FC3D228756741A2FA6F8140CEF33A2B4C1C9A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.12964665836931479627945004389411:50001231000000:2800:908F5A674922E637C9B9B2F6A66EED16C0320E9CC3EDA1F22DAC06E848830A56.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.35073169320434043493908700460730:50001231000000:2800:8966AD32512838141CCFFD8FC66B696CCF9C3BCF8578497FF5D94AE90514C9D7.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170102.96594969572960694581417816755061:50001231000000:2800:61CDC9BA909E02DAFADB6CE1DBA47495676658196D2F1E862AFB53887490302B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.62371799297604204208840549087740:50001231000000:2800:4070014DFF8F552294D8C3FF9A2DE28E8C8898052A28347ECCEE04D14C7AB917.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.18009416734340580065449653677760:50001231000000:2800:1FD26989C3934717A2BD323C79891EA48735C466A37D628315904CE56657E134.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.31464119542176357415885480601423:50001231000000:2800:61B7CC2C669C43DD12B316EC0F090DAA971A3B4A153167C2405FD7E9A6FF2BBA.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.70357916275297594017840268993734:50001231000000:2800:C9C1D94E9A1A8922D683CA6D0725479233BB092380C871BA8119D769031A5CDC.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.55047772386354091431785839075766:50001231000000:2800:30BD481948B06BCED4EE38C7E084620AA01CBA024187B70F51BDC872E1E91C59.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.06750147609617551529750350506088:50001231000000:2800:E3F7ABE10925DAB7B02410CC1ABAB689CAB238951E63956AC88300386EA4E9B0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.80473919973250103356561921190938:50001231000000:2800:5AEC8F103DFF4860E96FB37FE935785C3DCD95C6BEB6D3BE857668D2FA9CD3E0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.83729830669909797779769318785108:50001231000000:2800:1087B8E837E56D553907DA46E6BBBC170345465555BD3F7FD14BD48EC1EED060.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.49839253029126744865425964080291:50001231000000:2800:7F5BCCDF3241A6B42BF33DE45ABAAF694357CA2C24354A9FC527D8E86107DD5F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.76930077285030443799607308253357:50001231000000:2800:1F1EF6B7B6EC0ABA1EE91CD16D387497EF044841C1E4F8E4E661D07B55770340.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.99695205442557008104473591436005:50001231000000:2800:F1E4554F4393709F64938535E9E2F09486951DD912DF75802863981406431A8D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.97465505385498391024129829375439:50001231000000:2800:4E26CA41E5E31515F400F7CDA4FC303F162A6DBA01F3C1A29900F037A17DBB15.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.95988700362060982344691262686976:50001231000000:2800:CD265D8EDA907C7F9105F7ECF22FF3158A701D45FE5569C06EC4D2FBB3DC1FC6.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.77645920625677071199971737774226:50001231000000:2800:3D914C84895CCFAC70B668F6C7757784F678627CF1E5442984C914AC1061C59E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.29945854431399405000504634829340:50001231000000:2800:0D0C7BDB8ACEDC0C84F67FEEA61EB323E10FBBED014309EA5B3E6ED56D4EFDE0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.98566245100801683196199413853855:50001231000000:2800:8490802105155AEE534107DFB7E698DB420624116F16EE77B1B5C9AD2C0C859D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170103.45217093978024923866857593860451:50001231000000:2800:5466D804227E3AE7712D372636CF787B036A0BE4393D6ABE41DD7BD69ED38F76.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.79801448495133240889778351937559:50001231000000:2800:72C0D58B206BB9DB2F3DB421AC922AA6297D1E7F2863AAF6EF870BF424AB13FB.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.42083076457555328892546700744413:50001231000000:2800:3B363CEB97CC6E82BCA49AE4A8AD310B26F72C4951069274D86C1D2BAAD57214.png)
| 元素类型 Feature type | Geometry | Labels |
| --- | --- | --- |
| 填充颜色 fill.color | 描边颜色 stroke.color | 填充颜色 fill.color | 文本大小 fill.weight | 描边颜色 stroke.color | 描边大小 stroke.weight |
| Attraction 游乐场、动植物园等 |  | - |  |  |  |  |
| Business 购物中心、商业区等 |  | - |  |  |  |  |
| College 学校 |  | - |  |  |  |  |
| Hospital 医院 |  | - |  |  |  |  |
| Human-made 聚集区、小区、工业区、监狱地面等 |  |  |  |  |  |  |
| Human-made 建筑物 |  |  | - | - | - | - |
| Natural 陆地、岛屿、海滩、冰川等 |  | - |  |  |  |  |
| Parkland 森林、公园、荒地、高尔夫球场等 |  | - |  |  |  |  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.25212119532710721912852330611612:50001231000000:2800:37A29F2920B61EB00EA2658A8543E113ED779DC3A31D0C2D0C9739D674F6497F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.48206588806385223163022051491061:50001231000000:2800:0AC4FE8F0AC09CCF7EAFE6D6C129A91B30317F541C943A558DE3BEAE711FCF3F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.49892343336146933605973256461499:50001231000000:2800:7AA4771C9546D910BAA32D4266ACF31ECABEF185A4C9EE965BE6E0038D714166.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.28561111782295159964481884966588:50001231000000:2800:5CD5F1C6EB196B8394FB77CD14AF442781257E8384F29541B35C99921FB40911.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.20021950015924814860004826074647:50001231000000:2800:7D98444DB7F1EB3336B418D70D20F9F2C66C581CE034A972DF7775F2857F29CA.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.52059050798995126367762831848217:50001231000000:2800:661F437313C74028F29BCC2D02AA9A125B75D5D1E369AD48E852FACB9884DF94.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.21184593259914264508531765164940:50001231000000:2800:4216CC92E06A0399021848D4E711782B6D22058A1688E311325973D1D8F1616E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.10362176842701995629216638380686:50001231000000:2800:9006F6646F80BBE3273160C887F493D96B274E0F1BDFD6C793B82CFC67F480FA.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.54053028326415164400196567915365:50001231000000:2800:2ACB0B86FE21ADA1737AAE82828DAEAB629D9C69D88FDCD6B6EABA5B49E634CF.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.99028931556571740444983559349226:50001231000000:2800:014D9153C8DFEE8105E1EF01744288B08D2597A15512B752082686D22B1B61C1.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.16935256388909951666051190113639:50001231000000:2800:FFE00A8FC215738F03C88EA6C339A56E21F8ED25EAF028B592A2F97932855E99.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.28941028447016647212025825430690:50001231000000:2800:09AF70BFA24C43C0FB3531068CDE47FD2E5BAD5E2F5D6E0450354AE0C8FCBF25.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.94341730381590880900677584044267:50001231000000:2800:0D77EC30E60504697E9A160BDEC1E7C7FA319E6AD2A69CB42FD4A0FCCD695589.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.15761236912053728987788013372322:50001231000000:2800:4CC3141469FC8860740BD192116E00F9D378733BAAD43A1403EA20D4B2D43B6E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.97160923816728348600554166909655:50001231000000:2800:ACF20C0BB86BCCEE472229614DAFEE2D1E63AE8A86401F48F79DFD7FAE97B507.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170104.32601347043948212051140498516226:50001231000000:2800:316D16EE7ED42990EFA137CC15241061AE1E5FC4652CA643066122B4602B76B5.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.90469420772214411240114799525615:50001231000000:2800:675A3E9E0DDC3CC0E842B1B88CDEED0B8F07AA7E9072FC3C0F5AFE8385F12E7C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.55309738933086359580708517160252:50001231000000:2800:DB676932272E26AFEF3934A45BE4982F9D216BF438E2C6FD86132D5D3AC937D5.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.53759054103122574978327721128206:50001231000000:2800:18C03EB2EAF2AE6F4AF3EEBE9445EA9121CB8F370BBE53589041D6756291C039.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.59659030469943378692909806165224:50001231000000:2800:06D2948A882DB0DF6A522C4F2B3F0646901C8B4ADE398753BA77DDAE6927F6DB.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.30601411762743770699768463026849:50001231000000:2800:221781460E889D13E88C04993B54F08F8DA6FC866179C14DA9D6747523B0D6D5.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.13074244049399838027023201445205:50001231000000:2800:200C76B45B3A047898CC774058A36692B9F9DF2CF07DBB784021BE03493FFE7E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.79903928307880369834077354720785:50001231000000:2800:9149F63E0012C6EA1FDA11E8FCE96AF875F65552C7CAC2C078B83448CA549448.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.84403600883811970933555746302187:50001231000000:2800:1C205EF7A2FD969E2023811685AB74B06A42A4933D0FAB0013F415C02E5DAB89.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.04057573320524928978717117899833:50001231000000:2800:09412F1C58019A8BD746F7130A773733958585843FAAC9E81DAFFD91D6D30EFA.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.36924816206411837814710164328951:50001231000000:2800:8F53FDA3E2019A5C6F9585627353627C61AC64DB3AB19A0EA60CD572936AAC12.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.11712068468188264070042949110270:50001231000000:2800:058CACF10550F2F30DA5D3B4B358332F07568142B5575F36A2BA461028DE9993.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.37933506040697672700378215833892:50001231000000:2800:5E55E0262C9BFFA80913E2D30E4CD41BEE74BE003E8508FE7A9ADA7B62C7A521.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.11079230220306350537273500897618:50001231000000:2800:E39373840AAD7BABCFD44B8EEF475DEE43FA0802D4B12F1DE0B75CBB153FB534.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.51024084306234390305588196725788:50001231000000:2800:7CEAF650F63E0B5DA5FB32A47C2D826D63090F3520063987DDE6EB7880FF5FE5.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.64187964089620113553284084967080:50001231000000:2800:30D2FFA454AC5C3C81AB138AA3CD5DE2D7D5EDA055A813D5B6C6922AD1FA80E1.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.15525739144913509137172025053704:50001231000000:2800:8C8E62DD5FE6C2D9683A7FB89AF9AA8DB52EC491D544997B3995B01D296AEA52.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.93174807636872770005189071490154:50001231000000:2800:CB078DC5668F920C45BCA0C4B51BF36396772BBAFE967A25898C047FEBE3B8D5.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.12643813138983782835588592445807:50001231000000:2800:05401FE3DB5491DD1D9DEB025F24457BDEF9819472B1315215B502541C49CBBB.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170105.25188939358501821711697610740915:50001231000000:2800:529FCB6C61E910185696549A24EFD59AF909CEDDCBB953CF74C42D300F4F1A32.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.54289357794817582476661050056992:50001231000000:2800:B14F02B2DB7CF3DA7F52FDD961894B7578C97B806ACD48E6E67D2BD46EEB1971.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.66047546618360264687646049463725:50001231000000:2800:75A5FC9E6864C83C4376F54C741C074786A516391C4A62336FD1358050FAA39A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.12480069189003441089891052816566:50001231000000:2800:88E52F8C858FAA5892C70021EFD054AB17A958C2A5A576D51518A9BCB127F165.png)
| 元素类型 Feature type | Labels | Icon |
| --- | --- | --- |
| 填充颜色 fill.color | 文本大小 fill.weight | 描边颜色 stroke.color | 描边大小 stroke.weight | 图标类型 icon-type |
| Airport 飞机场 |  |  |  |  |  |
| Automotive 汽修、充电桩、洗车等 |  |  |  |  |  |
| Beauty 美容中心 |  |  |  |  |  |
| Business 公司、商业楼等 |  |  |  |  |  |
| Eating&drinking 饮食快餐 |  |  |  |  |  |
| Health-care 医院、诊所、药店等 |  |  |  |  |  |
| Leisure 休闲娱乐 |  |  |  |  |  |
| Lodging 酒店、住宿点 |  |  |  |  |  |
| Miscellaneous 自然地物 |  |  |  |  |  |
| Natural 山峰、森林等 |  |  |  |  |  |
| Public-service 医院、诊所、药店等 |  |  |  |  |  |
| Railway 铁路 |  |  |  |  |  |
| Shopping 购物中心、市场等 |  |  |  |  |  |
| Sports outdoor户外运动、爬山、骑车等 |  |  |  |  |  |
| Tourism 旅游景点、历史遗迹、教堂等 |  |  |  |  |  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.34946800316020699577892868371919:50001231000000:2800:74D64662FF833D6BD105719E01CA8A13F236FC0808CB1D0F022E428053949A72.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.56907844554177532625866928941701:50001231000000:2800:2D6A08F46FD11FFEE71D36A590D55CBC2651B86B128D35FADA8FC43FFCE761C4.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.16723441827136829262120099433729:50001231000000:2800:52B4D1AC56CB4163E8F7D0D0D2E3DB8847E014A3A9212E4AE7988976D79CB05A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.45407174479787772928205724460642:50001231000000:2800:CFCDBF379185E8FCC650E8D2C4B946C169391030C5E6FC3A90472187D0D0F7A1.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.00476953567308530335805555182421:50001231000000:2800:D376A02D645D4E6D421DC33E59EBD7BF7A9DEE806D362BDFC26DABAC7245A10B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.89330582810048469345171355209685:50001231000000:2800:9B312EB3842D698D3DB3B14B78003EFE06FFFF342FA03D065FE737471F9763EF.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.64927245819918572148956373943212:50001231000000:2800:F5EB7D4DEF12CAA3BFAC5BE1CC1EE7DF88CF77A6005C80DC3C368B0FC82E9DD9.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.49514301907580545738525743725819:50001231000000:2800:2E431FD8CBC66C15D1975EC2569BECF44DCDB371E75B907F9E7C5D6EA65775FC.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.52811827163619389698247277079130:50001231000000:2800:7CA9E17B998CB1DA0D25FAE0BCB920FCC3B095AF939D75EA07355D97EA536E9B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.96957108509505660295523217358786:50001231000000:2800:75B517A2E49B6519D02F8D794D3E31EFA9DBA0AF367617A8E06195799FF50171.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.45169387093215647860051918079193:50001231000000:2800:F8F13DE8B506E97CDA12CF31341BC6960D3903A5ABAB14DB84C59AAD8B85A0EA.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.48947969934271342859605026907162:50001231000000:2800:A185C6AA9BF6C7C3E7B837BC7F8E47F6748AD53D5E2D329045198717C50AA8F6.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.13764475576267768477423571891923:50001231000000:2800:6E9D037396488796594DDB77EAB585077D3F3A42851E038D26089CBBF04EC3F0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170106.39365042011180875549392199396809:50001231000000:2800:D8A2DEB03F25C77723B7AB4D1F6AFB95FA8C173595A3A24A207DEB96087189B0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.26938092257523846826347814064335:50001231000000:2800:F30636103CDBC42BFA343E55F03D705E8969588B0C165451BB0539FF3A0E0C4E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.58152201335806595602230685992560:50001231000000:2800:3512446DA83C13C2291C4AAE4F80A48B8B3E1D5D04EF8230443D6B0F128FCBB4.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.25083920038993311777598647415592:50001231000000:2800:6A6376012D428D3249E9BB9DEA26A9F7BC2EAABACF24B2DB88E49B32110EECDE.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.23500854723016097201859108311440:50001231000000:2800:B9000FE4DDA2E537A0508AD98EF009B6892EB8CEBD0997A1FCB3F2786269072B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.08383799150673026587653946974839:50001231000000:2800:F3A63E5B909ADA38882379BF87AF016D080A06E7E05D55C218C31337D83157E1.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.08370739301866700231493593346297:50001231000000:2800:02735B089FE5CAEFE9073AE6396A9FE28B42B460F56D79F218F57689FC2372DE.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.83728811285721992018578889882357:50001231000000:2800:0C209337E22AECC4EF2383B8CEA1548C0D3A797470E5C90BC37429760EABEBAE.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.88231296966513311736240529759735:50001231000000:2800:98B22687BAF102217CF31F8715B57EF409709DB8884003239AA78B0432556A8E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.20146664873270520385064626365748:50001231000000:2800:673179443E590E084B955CCA01739A6B36A2006E617FA678E8F3FF20FEB4CE56.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.86050848611156216747860631861755:50001231000000:2800:A02F28A372F85ED7E5054ACDC6CB478B04D66271E66B0BF155844DE99A856577.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.08089001662875443192667016082063:50001231000000:2800:5FDB89AFA23D3049A72D74D7FA5816DF02E3072AD7E25D04958790FDAF06976C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.26657258830995175919030932983894:50001231000000:2800:44D583E8983FD36A42A0E1CC6014CA476589B138D10CA32D499E488FB254E65D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.21451576293115294890219648390247:50001231000000:2800:9481EEBFDCB9CAFD16400C2BDC1838D393E4F285BA1B57F966F7FD6206688FE7.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.39857871714114065123023973526098:50001231000000:2800:252DD875A21F04279A837AE2FB11EDF0106CCA8FAEF2360B08CD0C38470CEB82.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.44186419375565729396063708135048:50001231000000:2800:F1E7AC9963AC55ADBE7E796F8397D6599E32A077B519D6165D650E7F16B478A0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170107.47887982694615359205191653510574:50001231000000:2800:9CA54C6E23191B9E00C337CA41EAF23BC789603E8D1580D38942A7CEABDFFA3E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.02810315821846663796294947870807:50001231000000:2800:6FD3BA011130AD3E1E796ED937D36968D36829F942A3EAE38A7160B78109335C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.18941760453461573496455603153011:50001231000000:2800:BE21935DFFEBF9A068CDD010FDEC792F993ACABDFAE593BB989EF575B1B8E689.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.55142587000577293995772493251544:50001231000000:2800:6FB790DD6A6FF836B18C5885DD52A789BABC3B06A23EC09BA5F10FD0D758AC26.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.95676581464081446319800360596201:50001231000000:2800:CA6711BA8FCC49DFB6BC403FAD30372C5CECAE54FC10DC003803879908991365.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.18015014594287759892991882994523:50001231000000:2800:5BA9A5CB36ABFC7D80283CCCA4E2D620A85993F5DD8D2B929BA4CB912BC8BCE4.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.58411718024922020213137132991491:50001231000000:2800:FE12D72709C73EDFB63C6B832B5ACFBBF82C1B4E1FE2CEC70A934E1758F43A22.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.58724997471057368593158956721679:50001231000000:2800:CC158BF36ADBF91D6314BD5FE6B47FC1E0169AB7583F02526AF8CB9972FACF28.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.53199027274039696042153087138492:50001231000000:2800:5D4D60ABD43748B6F8C836786F5FD2FF199DDFFB5CD1E0ACCB48348D9438E6D2.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.62166415975503317517329467169028:50001231000000:2800:B4B2CB8C6E7D63954F8D37DF96DDADB3A9B7279C47DCBF5EA11A9C3B20FCF4F0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.35769335007473380175309182885743:50001231000000:2800:14096F87678D0F4631669B5B8C15F37396E170E6BFBF3357060A73211BE58656.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.35288138508621001408839365366627:50001231000000:2800:0995DF414563B770C9D80792F59E7C21114866F826CFC411E98F015C493FF7DA.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.36563583203934237493174391342993:50001231000000:2800:4C044B29F9FE2DD355FE7B3F63949E5A5F559D355B909017E5A2A6D09109EFB2.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.33573050586062096621090854264475:50001231000000:2800:C6D51A2D68FA62620A9CF40B2B88249C6784388778DAF0366A6A51CEA5BE88B7.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.79885777417516963668560183314554:50001231000000:2800:9A2E6957D9D6FF742754EAEBFCF295F01C333B9F5E062A3A8B955BCDA9B37C86.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.51851303162833322370322914686953:50001231000000:2800:903DF92E02DA5EBE206256F72865D1186DFF6746A5F3F00AE584BFDC65CFEA14.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.37741304320037769552988140565130:50001231000000:2800:C30E2ABDBA763E57D43E9DCC20D5F9E0A1A2A240D01998B6174395914F1A75B1.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.28834882893481402324085221314168:50001231000000:2800:5372C383D65B7D707F12E6EB2D516607CF557561F4249F4028F240055C3A4391.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170108.81191111263269661859695830747438:50001231000000:2800:0477C7AE7E706B758B4B8C0C841A7969D81E2FC96239A97C19247B4274689680.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.25105076165318948871774200652612:50001231000000:2800:0CEE7E1966566D7C5D49031AAA1CC8A0B98E16B895A5847CBAAA565D74B7B562.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.21305090172803225184381668577025:50001231000000:2800:97D8DED43A58E6F4E38C1FD3F298341A9F644D12AF6EAD03A03154B9CC7216B0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.46599715399798586412967828354259:50001231000000:2800:4C294BB7FCE6CC068B44F723B4E6141937404D86C2D809309B84B336920A4697.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.48277440809722561422865886974833:50001231000000:2800:F45C3AE0E0D09C3D742CBF6B7C1952B5641F3B61AEBD379DF76D4B206C378190.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.66189482656745622192060409314151:50001231000000:2800:75CA8E14D33EC543F58A7B0E429BF2B0FF51C6142A2AC22BF5612E8C52661B1D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.04616433249839872479138281333952:50001231000000:2800:B9C1877FD86A889E0D2C8EB3D5DB5A3595FC55C9E4EF7353A39D111410859449.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.66023116424734677029659095336081:50001231000000:2800:CA45D5417D92D844892B61438C00DB4D6A434C8FDC1A2894B5A57CEAAE21A340.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.73035994153420272700140582552365:50001231000000:2800:B9E1A54740F89D5D9F87B8FA3CFC4A93C2CECDD98D4B1CD8C366719A705DB565.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.66136551086815551937558003152643:50001231000000:2800:D9FF57CD8304941D6D98EE53FA12938DEACE5E450F417349361187956390566A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.48092961737966532508000737681008:50001231000000:2800:C344464627A9F8A7268E979047876FC1708BBDB47689423717D7FAD3C28D115D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.73901176562373843097268572632656:50001231000000:2800:0454705A10FFD4CF5CD6656DCED0CFD9678590FC90683666CA25057E37828DFD.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.92126719477608127677177845849435:50001231000000:2800:8F9E681A6FE7CCF22C52893C396727B27E5A2CB1718E44DEE9EF25BA37580E6C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.57151900561331603159381231527989:50001231000000:2800:CA8AD6B4850290FC934ED0915B0701F8409AB170068482211876D871E36FB97F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.87070180711059445958653859637347:50001231000000:2800:7B2CD09BA7A7A8F56236B8DDD2A51FA6A155435238CD96E3DDEE03E59DE3BB84.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.80892210026169031133761768658493:50001231000000:2800:D78B2D80C7466ACA77F20A2DA66D72FB16CB941C5248455BB994728F794BF945.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.85725957120299127096544162915396:50001231000000:2800:B230A3BD4ACA94ADD7A5EE8FF379D2E5E13F7D35F3CDAD6C507CEC4F84722EB4.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.07954719404197942290928340857718:50001231000000:2800:70092D0D4342AB569ED7EFAF0A4ACEDA9C10F0F9E7FA3A7DA4A12C0CC4758789.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170109.64001938032897446957786619564615:50001231000000:2800:100D5B977BDA198EA4B57B880C06A98C6242B56190F8CA502F4E540110BC8716.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.91557548990410562338434396409677:50001231000000:2800:E2614E145847740A1F9B6DD305CC8A756F50AF98966DED13AE1975DBB5A912DE.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.37051819651819743272915470465117:50001231000000:2800:1F46473558CF9068E2BB83D2587335A026F8D0E71D6565A7D344AB4D7C774376.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.10888832965558265838002212406809:50001231000000:2800:97F4C87451B899C4C2568079538B5ABF1ACC19073FE001D9056FD6E951AD8B9D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.73350135951204856111052168677246:50001231000000:2800:322319740EC7AE9F538897E1B16BB57389E290A1B3BCEAE3D6BF4A42BF8CADF0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.01844813779364800865479141214846:50001231000000:2800:23730141CF1E847C05CB80423DE3A2C557BEAFD6AE2924B6A0B973EC6CB0E005.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.97525091295314732036486280959099:50001231000000:2800:1DF9C41CAB5745EE0A7ADD92065ACB661C4F60DBCEDDA6AAAEACC5F6FAE6C008.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.64248492607946666915871530887115:50001231000000:2800:8346D0740C22A3D00C5D32A3019AF6B1CB133283DF732A582C9449407FD671FE.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.72940433281339294046093247091298:50001231000000:2800:BAF763BD849636316F36B866D9D3F2C5687C9E6137C87C411EA251D01CC1C218.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.43809642886519781011051922290543:50001231000000:2800:04B050F1105A8377AE6CF664F3802E6C2591DD08D02323F861C653E1B6AF978E.png)
| 元素类型 Feature type | Geometry | Labels | Icon |
| --- | --- | --- | --- |
| 填充颜色 fill. color | 填充宽度 fill. weight | 描边颜色 stroke. color | 描边宽度 stroke. weight | 填充颜色 fill. color | 文本大小 fill. weight | 描边颜色 stroke. color | 描边大小 stroke. weight | 图标类型 icon- type |
| City-arterial 城市主干道 |  |  |  |  |  |  |  |  |  |
| Highway 城市高速 |  |  |  |  |  |  |  |  |  |
| Minor-road 市区内支线等 |  |  |  |  |  |  |  |  | - |
| National 国道 |  |  |  |  |  |  |  |  |  |
| Province 省道 |  |  |  |  |  |  |  |  |  |
| Sidewalk 人行道 |  |  |  |  |  |  |  |  | - |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.44249489773449361606302172500571:50001231000000:2800:1DA034387951A06CC1A904BD5EFE9EAB74E6EE434CF94D442F0BB8911EF7AEC2.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.11022210388615575388842214793481:50001231000000:2800:FB4B27F1F0CA091BC37A56A0DD4FFB7D9FD5C9ABE339C3A1DA116A6E4BE7EB8E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.87372482649030197915320077215112:50001231000000:2800:C80DAD43E1B16E8377E6EFE398BF37ED6790EF807585B713AD8C828E76A8C6A0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.18288852793499725877943268357213:50001231000000:2800:E60E0DD85FCB817572AC40B03064E799B3AAEB827CE310EF7DDB0BA36D304692.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.37544667672472650620210008490599:50001231000000:2800:3A92CE4CE8896F828A7818A198FAB8D0C6FBB7F85B693A9C722A57503A34FC70.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.46320655484500484116919253480970:50001231000000:2800:AED1A613FF79E1F27C55F65B0FA1F50037DC3DAC98A4291B89A0D9CEC5951EC9.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.34525033443747358033806003332084:50001231000000:2800:D99EEC36D510C4F2E224BBBFB7F406D8D9EA44C5BDE6EBA9D8AF6D19B3FD7401.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170110.36665645421220779785761466770028:50001231000000:2800:F58771B840449773CABFCFB231BFB73727F3903B575DD52765A60F4BAD6E1148.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.81012397696479021821229958027468:50001231000000:2800:185778B13AD8CD4620D56FEE8AFE048EE9E652A3F1F62BA6ABFD6D89A89F2B4C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.36539483007703506699233595591590:50001231000000:2800:27A28467D25C1ACA93B89FB059309BBB8821E9FB36F0A43B9B3535CDDFA964B6.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.99153887368914983678525731507344:50001231000000:2800:6E1760C7F8A8857F6F992A36EC9205809F44AAA39A93178F1036C31B546B9DD0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.74945524514360301233681402120247:50001231000000:2800:BDDC9364636B81737D8E8B75F01380197B5D01FA7DD85F3063B933F2034A53A9.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.97179072295599442142652147990708:50001231000000:2800:8D7176A16DAAEB9BDE207377CCCB305DB893CC9A6068DD8BFFBC42DB24FE7AA5.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.72772023542728436443968652448456:50001231000000:2800:F2D58D37A9F538A3A193005C0301BE3893D1AA6CDB2DC6A4C04952F4AB3D5930.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.50824911927752263239369228568965:50001231000000:2800:47CF91187FD1A7F24A894F0AF60C39B3CFF529919062827F253E50914AD4FEBE.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.39357846700070787658254278257527:50001231000000:2800:8159BAB96B57ECE35D25DEB4FAA9E12C54AFAE1555DFE3D086EDDCDEE2BEE11D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.21279934199055619402488465706666:50001231000000:2800:5BF34C960159856BBCB961CEAB1170F89433343CEBB985AB552D397915E8B0A7.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.08362835944959175940158752380345:50001231000000:2800:98C135979B5ACA8EDE5871273C2666F99212AEF7218100592C9635E70B0BBC37.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.03183862922298310909436563677355:50001231000000:2800:CDC7619BE0A07DE4AFC2A713C56734EEDF149C8431D2134534CA2D9A58D0FE63.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.22517164988749617223194210409386:50001231000000:2800:28B85375E0B99029DA42FAA19799A3FF71AB83D3B95F6A79E298C57102F5F6C0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.78191778792678112674352408692585:50001231000000:2800:616689FCEBB150E9D510238E5E068C0F9198772451FD2BBDE289A1D42EB35FA7.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.80632984340235191806649983247758:50001231000000:2800:8CE865EEB53C1A9B6F788C4DA81EF78C3396D651B2D53E09599CD7BBCA2D862B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.39684946619455782824529339603749:50001231000000:2800:BEAA282D767E33FCA9123CE8385ECCA95A6B583B5BF427CED30A2524BA06E391.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.50077979871488030223186721583113:50001231000000:2800:0E8CF7E9C80C22B47E2E092771D2DCDC5CEF71F3F2C2E2155C3AABCEA167C71B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.18321263229557249864818856283183:50001231000000:2800:D4AE50390A421C989BA79423376355699C2564ED07749C4CEE3475EFCA17DAC3.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170111.79108706719626763496154489834658:50001231000000:2800:0F7151E72C5DD3B8853D18707DBEB0060BEF8583E005C50DA692A61B5EDC2F1F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.25177203877821314671610556458253:50001231000000:2800:7670931AB9A8269B6EB56D2D0BC94DB05C5DB6C6D407151BF565E4412C1D546F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.29162746966071133637360970538929:50001231000000:2800:7AFF44BB4B0E34B28761BBAE30DA1393917E9567F9F9FAD530DA8C1533903EC9.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.79546862913654837278746212605896:50001231000000:2800:ED90F7E4BABCF2CBDEC698F2F6C4A48992BCD21A190E170A337887A7AB526797.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.18908291745668166391980022536413:50001231000000:2800:02215F3D321B7BD389B4E89C23334B4C7A982625D6086DC2E8098D13DC852905.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.84978404700554530012799745589373:50001231000000:2800:45E63799D82BF30B1CB0EF57734BEFB9C61925BB45BEB79BEF39FADD80F1AF8C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.20165826097324434996015487363020:50001231000000:2800:1F80BE4AA9A2EB66769A43E89183A0E9E88BF28B6336B6BE168F1541458E752C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.25998910660271215360406740061728:50001231000000:2800:8E5C34D99B69E84E8AFBAFBB43854AB69F120B5092EE18A30FCEDD5B67F52B7F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.08494187692265881732117204166047:50001231000000:2800:D0A3D67D69B616CF00C174494940B02B2E07F0508C51CA12B8DC4C4599353A58.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.30551868657890487841723139587369:50001231000000:2800:79DAAE43D86931E9249AA4D17266E5ED440C3BBAFFEB303C3CAEDC57F883B62E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.80897593434655667640230248749241:50001231000000:2800:F506BAFE61F94351C63748B99C13DDB9398C0266B640CA3836FD790757823A96.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.17471134564490673804961033160815:50001231000000:2800:22145EF9A593558C487D48800F74E3553A656EFC60FCF14318DDC39CD75CBE2D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.16240615498842987233252922810661:50001231000000:2800:A84F071C042E4FBEC94A1FC0201629D0E14B1C4CCCC124D5C5B7FACDC5FEF56D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.64583261454950562779299258015873:50001231000000:2800:E6F85184EC521EDBE5C2CEBA846DF03E8AD2192AB3751CEE189C6F9C8D77279C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.39090607946904722132247205833441:50001231000000:2800:1193BE664C3857A66333CF64087BF380121D0B2DF177C984D1E347DDCB4A1F7D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.49244742044063590389608634082076:50001231000000:2800:681F9CAD33AE758BEA83605F90194439382772E177481C1288E02A7CE35730D4.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170112.96117337000138843788190847974785:50001231000000:2800:32C5A0066067BFB9EFA36D18EF8E9CDBFE84440A7EDC09181A37541C6C51082E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.64626233368117594247414842124561:50001231000000:2800:CE8AB0444DD4932C1F29DB58886F8EDE6EBD34AA6A97E5149E4F48EE493CE57E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.92770567467972292457853792027144:50001231000000:2800:3EE04899A736FDFCA30019BDC0E7D7986F1B3D719B6F851B3C8DBC36F514EEA5.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.40474755056766668956535716443132:50001231000000:2800:7F7921F02BB1582840D2D827D95C87F7D66E9642DA39EFA56FA91E125035C567.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.12916954189762980080944400778889:50001231000000:2800:0DAFA1F17C13F8B3363AA9EE6730D7B7AACD287638B99B14E7FBEA617A05EF27.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.52056289655027782649542899450746:50001231000000:2800:3E68CF44796B343E2BEC1A6DDBA4E1395BA49C6FC394B9B5A4E99EEA1F485183.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.28051934175751778535579409160997:50001231000000:2800:CECDE788B4B3B26F9413597BFAE25532E4EB08739368BC14402815C136563B46.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.80366619538898039494943089783833:50001231000000:2800:E3F884771021092884494EC3F12665D78D69BE2CD8EE390B48CD30DEB5C21FBF.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.09231820292113572355982202477417:50001231000000:2800:916209D69E891B03F457B8D748BE80A3621D4CCCDAA365DBF7C7BCE9743DB293.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.38906931536802171106912401998466:50001231000000:2800:037ABF84B95B94C8643333475637B4C52F52B2C36288F09C49E85288404AAF96.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.55314136415772057503631079135590:50001231000000:2800:EDF307A1E1365976FB2D0533D2FD0CF2E063B6F401470E6837A9B61069FBA84F.png)
| 元素类型 Feature type | Geometry | Labels |
| --- | --- | --- |
| 填充颜色 fill.color | 填充颜色 fill.color | 文本大小 fill.weight |
| Closed 封路 |  |  |  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.64977293073788729771284534618230:50001231000000:2800:387315D0D465486FF41EC53E2714F5C24421005F6E25F5894C07F070B277AB23.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.91038263387269152499246435341706:50001231000000:2800:ECE0A396FED1A6F5B64C96CB7E796F391A86F106AF96AF8ED74BFB3D67548D81.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.12332405798118914099813463089236:50001231000000:2800:BE41FDF8961B819F333FC5210D88CDF97B3F6A7CB817FAC699C7C4BF274A95F1.png)
| 元素类型 Feature type | Geometry | Labels | Icon |
| --- | --- | --- | --- |
| 填充颜色 fill. color | 填充宽度 fill. weight | 描边颜色 stroke. color | 描边宽度 stroke.weight | 填充颜色 fill. color | 文本大小 fill. weight | 描边颜色 stroke. color | 描边大小 stroke.weight | 图标类型 icon- type |
| Airport 机场 |  | - | - | - |  |  |  |  |  |
| Airport Runway 机场跑道 |  |  |  |  |    |    |    |    |    |
| Airport Runway Taxiway 机场跑道滑行道 |  |  |  |  |    |    |    |    |    |
| Bus 公交 | - | - | - | - |  |  |  |  |  |
| Ferry-line 航线 |  | - | - | - |  |  |  |  | - |
| Ferry-terminal 港口 |  | - | - | - |  |  |  |  |  |
| Other 出租车、 出入口等 | - | - | - | - |  |  |  |  |  |
| Rail-station 火车站、 高铁站 |  | - | - | - |  |  |  |  |  |
| Railway 铁路线、 高铁线 |  |  |  |  | - | - | - | - | - |
| Subway 地铁 |  |  |  |  |  |  |  |  |  |
| Traffic_light 交通灯 |    |    |    |    |    |    |    |    |  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.57163928813130490780475640288683:50001231000000:2800:24784F76CA24B768B80E006C10DF786B3D500AA3B0B9EFC284E352861BA5BF2E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.49127879047307755232944920258174:50001231000000:2800:6812D61040E3C98AEC0E18EE8322C177038DCA46DAFD5BD09BF8B33358BCFB3D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.54258958228418124231763848475669:50001231000000:2800:5C8DDF9409F251D53442AD8FA949F90973AE88F77B3E2C3D4A64421E04093086.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170113.24749637860259908919021389223093:50001231000000:2800:6E8515E5ADA0DF3D483677BEECEA672DD18DF7A10A2318C0C1FBB6331EE51630.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.91957126187668778799101696546889:50001231000000:2800:62343EF806855118C7449411B37232CFE7C8FBC2736E5AF2B075419579D6F61D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.27977022913929054184900227375764:50001231000000:2800:7B60AE546DC3079B34AB6BE13EED509EBAE18A8CBDE2B9506ACF80B1D49D23EA.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.06249433168336021858728196166781:50001231000000:2800:3F38C0C10443028A94A4171691B4284FA738C6AA55723C97DD39DF15741CE2D8.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.60439440754700301978353269449763:50001231000000:2800:0717D52DE4314FF233E80358F9978D9C43904A7D5132514C23E1C3DA23FB782E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.51508873504404101114627179052095:50001231000000:2800:790D9C62A27FA2022E101B35A246DD02E70EF60FA85619943C026346BE6B77DC.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.47734220756319016193729522722940:50001231000000:2800:DF0CDB6B40CE55E57D45743D2D24E05112FF2FF7C0519333D97FD6E1B2D4D333.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.92555741045176644603296519582385:50001231000000:2800:76C817F04E85D2F7118E9E7DFDE71DF5E079654FC20C39F11491E42B43ECEFDD.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.64936536977778335594872955539547:50001231000000:2800:39CF8B84A60AC2F053168B9243BE41213400ACF76AC97760952BC8065CF213EF.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.17445072682790976512491627216081:50001231000000:2800:720A2303A4021595C2BD6A0DCFEB68F76EFB65F8C5327F085D163D5EEBB91361.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.93097825693632477307093746390386:50001231000000:2800:EAEE5E089CA7144C11823BA781949EFDCC3509E097708AFE97EC21F3475C9A97.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.85123388877382011523532426170529:50001231000000:2800:9C5509F6AB129E4D8B353627F7473956323F16744BAECB75E1A6F34493259F58.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.46502200402737353564386889131707:50001231000000:2800:F596D220A09E5B17EE455182D2AAEE875AAA6C43E630D3F5EC8126554B1F48BD.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.27510219253793598799219566703132:50001231000000:2800:0E035DC89DC2CCA06AF59891D43FDEBD6C70D044448EC9A5E1A1791F58AEAB18.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.36738613370567088341595333546580:50001231000000:2800:3DABD8F47445107F63FB660458B191522FE631BC3F89B35E92D22705D90BF366.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170114.56853512440822281363818402294834:50001231000000:2800:560B223EB8E5B10EC5B9EC105AABC6E2833EC4A5F3F4B268562908CA59AB1AD9.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.12701265022279870621612554658294:50001231000000:2800:34FE77706DE18C3FF6495BA6A2C396628D7634F002D5BB4BACA981DFD62750C8.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.07157428266518169410168668612121:50001231000000:2800:6A0F877036DA62EC57780BC83733E3429D6657026C2BEDB1FE9B63EC7384A3EB.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.43200112671029626493992614600018:50001231000000:2800:777FC2A4F72AF99923BAB0534CBF25426A7ABB4F95325EAD92C361CC324BFF9E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.79196021726609333447200849129069:50001231000000:2800:BFA6633F6F13B5512BE048FFA2B0DD48E412264AFC8C098233ACDBFDB8210BAE.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.31294849844714712476717190737600:50001231000000:2800:C1353B388E3A4C4E45E7C19E54A17FF72D151CF7A59D15C3A084FE5EC6F8B1CD.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.62168187262869977751563467960198:50001231000000:2800:BAAB3FE5DACC060226FDA9E4C7247F116F57CB678F31E8EB70D6BFB197BC88B0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.84804262581438761594096478490972:50001231000000:2800:85F6C3E55CAB36404BC1559BEAF7DF3F1D2346EA08ADCEAE23F7EB202C3993D8.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.17695661456685996398274416084882:50001231000000:2800:97DBE6898B9E846716A7B45B718FF1D0948DCF60229BBF2A9A71C108CF992C57.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.67502933286434371926600295551289:50001231000000:2800:B404C29BAF5C06D1193064AB2305B35CACE68567A846575E4883684B1CD88E3C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.78022614388229643698097435070708:50001231000000:2800:DC72D60FEFDB0DE6FB773BDFC5401574F3182FFC5B4CEA73B1BC9062F0DEF022.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.15656765205021542150834481652760:50001231000000:2800:CDE5EA338D5A71B52BE3C43C86C01FDD26EB886638D72996A0A2FF709EAEE167.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.44480764814760947721857337992144:50001231000000:2800:0097EE856DB6E6523DD85C9CAF623F44587513F96D17832D245324E89231C44B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.22548248167144857662830868900903:50001231000000:2800:86A69E69E01430712E156B42C01C821D3C2FB79F4482891D769A715EBD799DB0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.93555880033375147096683966715230:50001231000000:2800:3A853FD9E5461CD8B4E99B46FC92C8D1AE43881BB0F86DD163D6C0FB2059D2BE.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.93818590662116348463530245293367:50001231000000:2800:C4FC1943D166F0E07EE865B361CF75FDFE1838F9B1D9CD72B4254F277B6FBCC2.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.39950572534354627787916594131745:50001231000000:2800:987C6F8A45CF11C66853B6069E80EFA016C6A27D58574AD9F64F5BE3CF6FB31C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170115.47886531583790488473023966332758:50001231000000:2800:C53EF8A925E8DF84CAA850833A2118E649518CA319B5504F65241DC957C45A2D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.50572131662912629498968617824285:50001231000000:2800:9F07B06AAD77322E4F37E1A519E8450DE7DB14171AF410CA6C7C3F8187700B97.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.02269997736105105521246968042553:50001231000000:2800:455454FA58119545E3E247FA4EE83EF6F2FA2A1181C391A9AD32481D1472C507.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.83791389408067835081112355322976:50001231000000:2800:895FC1476A9921AE2AA29EA98D676ACE4E52B37B6B8EF5EBC48BFCDAEC24B6BE.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.94861667772056488843126418362890:50001231000000:2800:9F0FB19645AD4381CA1FC265F4A2AE445EF1C10268C2E3FA462CCFABFACDBA62.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.08681657107022048218208830877741:50001231000000:2800:569E7BC0FA93CA45E835832360253894A606378FFB2F3EF100D4198364A0DCC8.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.65474109487715707965122116762357:50001231000000:2800:BF9AE23261F360DA6CB9CA178148838F8A92049EA3B93F072EF0FE02DF866CC9.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.78651247251575589357883510114589:50001231000000:2800:A1F0FCAA5E771BB643887B32C6F0E9EF632D39F5C3AD9EC586F46A3E15D58168.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.83771808532087226787781685324656:50001231000000:2800:5EB8C4FA41C1FF9AE7987327F7264E4A93ADDDAA5F05273991744394637B698B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.71075849004771427979954829134373:50001231000000:2800:D6DBBA24028A5F42A2CD9EA1E93B8C0559E2F5B50DF5CFAA20DFD021937DD38E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.52257490165443568669493501720585:50001231000000:2800:02DC61852716F58661070BF0CEEABC16FF44AB7CDD4ED4CB1DB8F837CBFE9270.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.32458112578391573396277257823120:50001231000000:2800:3A5711CE614010C0B441319E2D0D95E0C08F43962189020CDD86774287F31679.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.18919599547179872508709380524830:50001231000000:2800:B61FE259CA86DB821D8C1D687BF9EB3AD9AF8F1FB61BC310BB04AB41F38D9AA3.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.76901755808537600295368986102951:50001231000000:2800:7356ECD7AE89280807D968A6616F11F2888EA41ADAC39E0313E345C39E660852.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.50543575234186286924287823465447:50001231000000:2800:DE83902F2A290BB9EE24CD8912CF26A4936F2BADE5A2CD828246CF06F4A82040.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.14518213752491151758660096540983:50001231000000:2800:36587F942545EE4A684C11D791BBB78D841B729120D196670A3E0E0B2AEF41A0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170116.19528267030031688994967081673689:50001231000000:2800:CC5790CDDA0F4ED8C560AAF27A30CE13DBB24F22ED6F32167E69FE0F95642163.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170117.02955389397917630541809303289350:50001231000000:2800:57F70EA538E7C28625BFF6C504A0B0CF6AE7C595A04E3C5A767DCED3B8033151.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170117.00853301867602276447968940400269:50001231000000:2800:F5B86752F7761DB54397928567C407613DFE73AB548BA663BA86307EC8379F5A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170117.35762720339682247036379439448040:50001231000000:2800:9E443BE17CE15CF780CFB32BE7F423CE6EB5200661C55583718F6C8FC60F4101.png)
| 元素类型 Feature type | Geometry | Labels |
| --- | --- | --- |
| 填充颜色 fill.color | 填充颜色 fill.color | 文本大小 fill.weight |
| Ocean 水系、海洋、湖泊、河流 |  |  |  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170117.79163870508158146475769706061690:50001231000000:2800:C08D82095229A33B4B43F63575EC22E6CA928211A976FCDE73A61FF27DAB7CF8.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170117.38454565315925387682931262820453:50001231000000:2800:76F61E01294389CB87F8293E348F4370BAE3C5139F08E984027CCDD106BFEA70.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170117.08552406882001959791187111207507:50001231000000:2800:85681D7A5614A972BA98BB3E31DBCDD2FEF2CE4642B2798C7543D809496EB6AB.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-interaction-V14
爬取时间: 2025-04-29 21:11:16
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-controls-and-interaction-V14
爬取时间: 2025-04-29 21:11:29
来源: Huawei Developer
场景介绍
本章节将向您介绍如何使用地图的控件。
控件是指浮在地图组件上的一系列用于操作地图的组件，例如缩放按钮、定位按钮、比例尺等。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170117.66286342752155663398640600510960:50001231000000:2800:FB438AE981AE7D65792D3F15F4CF49F0170944B2A48BC1AD26AC5F4A062DF26B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170117.66521574881171038717471363281651:50001231000000:2800:1EC46CE09681CEB30A9A8BA09E49F2CFAE58410BD4D4754E078288B2A859C10A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170117.93283414440190109557675242395894:50001231000000:2800:70860A7EB537BD2681033151F0FCC96355BBFC9FD3E88C6920F11F2F3E8B2D80.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170117.33903462300815344872302513022329:50001231000000:2800:7C541B60B41585494FCF26D4931C1D8A95E57137CC4D6F2E7F7E86B8FDDD8F5B.png)
接口说明
以下是地图的控件相关接口，该功能有2种实现方式：
| 接口名 | 描述 |
| --- | --- |
| setZoomControlsEnabled(enabled: boolean): void | 设置是否启用缩放控制器。 |
| setMyLocationEnabled(myLocationEnabled: boolean): void | 设置是否启用我的位置图层。 |
| setMyLocationControlsEnabled(enabled: boolean): void | 设置是否启用我的位置按钮。 |
| setScaleControlsEnabled(enabled: boolean): void | 设置是否启用比例尺。 |
| setScalePosition(point: mapCommon.MapPoint): void | 设置比例尺控件的位置。 |
| setAlwaysShowScaleEnabled(enabled: boolean): void | 设置是否始终显示比例尺。 |
| setCompassControlsEnabled(enabled: boolean): void | 设置是否启用指南针。 |
接口名
描述
setZoomControlsEnabled(enabled: boolean): void
设置是否启用缩放控制器。
setMyLocationEnabled(myLocationEnabled: boolean): void
设置是否启用我的位置图层。
setMyLocationControlsEnabled(enabled: boolean): void
设置是否启用我的位置按钮。
setScaleControlsEnabled(enabled: boolean): void
设置是否启用比例尺。
setScalePosition(point:mapCommon.MapPoint): void
设置比例尺控件的位置。
setAlwaysShowScaleEnabled(enabled: boolean): void
设置是否始终显示比例尺。
setCompassControlsEnabled(enabled: boolean): void
设置是否启用指南针。
开发步骤
mapController对象在初始化地图时获取，初始化地图功能在显示地图章节中有详细讲解。
缩放控件
Map Kit提供了内置的缩放控件，默认情况下是开启的。
```typescript
this.mapController.setZoomControlsEnabled(true);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170117.43913549319331551196114880650296:50001231000000:2800:5B6719A467CDBF59972F02E2C8ABEA46E47BD3F8B03C9DB59B49059202D76005.png)
比例尺
Map Kit提供了内置的比例尺控件，默认情况下是关闭的。
```typescript
// 开启比例尺控件
this.mapController.setScaleControlsEnabled(true);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170118.76089311478156777965414950223769:50001231000000:2800:BC35EA25E1C6583518953320B38404C77091D0BBC446A838E3C866AC217D0B28.png)
调整比例尺位置：
```typescript
let point: mapCommon.MapPoint = {
// 以当前地图组件左上角为原点，向右移动1000px
positionX: 1000,
// 以当前地图组件左上角为原点，向下移动1000px
positionY: 1000
};
this.mapController.setScalePosition(point);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170118.72131947460170712791388169533583:50001231000000:2800:D80D4D5634669801AD65494F620226B82405C9C46E7FB275E694C091FC154ADE.png)
获取当前层级的比例尺大小：
```typescript
let level = this.mapController.getScaleLevel();
```
获取比例尺控件宽高：
```typescript
// 获取比例尺控件的高度
let height = this.mapController.getScaleControlsHeight();
// 获取比例尺控件的宽度
let width = this.mapController.getScaleControlsWidth();
```
设置比例尺控件常显：
```typescript
// 设置比例尺控件常显
this.mapController.setAlwaysShowScaleEnabled(true);
// 查询比例尺控件是否常显
let scaleEnabled: boolean = this.mapController.isAlwaysShowScaleEnabled();
```
指南针
Map Kit提供了内置的指南针控件，默认情况下是开启的，控件位置默认显示在地图的右上角。如果是启用状态，当地图不是指向正北方向或者发生倾斜时，地图右上角会显示一个指南针图标，点击指南针可使地图旋转为正北方向并且取消倾斜；当地图为正北方向且未发生倾斜时，指南针图标隐藏。如果是禁用状态，将不会显示指南针图标。
```typescript
// 开启指南针控件
this.mapController.setCompassControlsEnabled(true);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170118.32836262249250022639021783413562:50001231000000:2800:BD55EA83937BE32A2D3552FBB5DD6658DEB4C6915F7BAA36E02953A8BC11D3BA.png)
调整指南针位置：
```typescript
let point: mapCommon.MapPoint = {
// 以当前地图组件左上角为原点，向右移动1000px
positionX: 1000,
// 以当前地图组件左上角为原点，向下移动1000px
positionY: 1000
};
this.mapController.setCompassPosition(point);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170118.18403114184682761028424190377297:50001231000000:2800:E8E5CA529FF8171CFA7ADF6B9F6C4D8356E7F88615A4F91C7E9EBD1C85AE86F9.png)
地图Logo
Map Kit提供了调整地图Logo对齐方式的方法setLogoAlignment和调整地图边界与Logo之间的间距的方法setLogoPadding。需注意，地图Logo不允许被遮挡，可通过setLogoPadding方法设置地图边界区域，来避免logo被遮挡。
```typescript
// 将Logo放置在右下角位置
this.mapController.setLogoAlignment(mapCommon.LogoAlignment.BOTTOM_END);
// 设置地图边界与Logo之间的间距，单位：px
let padding: mapCommon.Padding = {
right: 50,
bottom: 50
};
this.mapController.setLogoPadding(padding);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170118.74752262812969581900922168761366:50001231000000:2800:92A8EE7BA83A9D540EB9274123B399C21AEEA476F946DFD6A02B4DAE36B47323.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-controls-and-gestures-V14
爬取时间: 2025-04-29 21:11:43
来源: Huawei Developer
场景介绍
本章节将向您介绍如何使用地图的手势。
Map Kit提供了多种手势供用户与地图之间进行交互，如缩放、滚动、旋转和倾斜。这些手势默认开启，如果想要关闭某些手势，可以通过MapComponentController类提供的接口来控制手势的开关。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170118.26367600098250694588896122516393:50001231000000:2800:B5717337A369B5E5694D9A7448A76A11730415D59FFCC3B148DD68842A68F441.png)
接口说明
以下是地图手势相关接口，该功能有2种实现方式：
| 接口名 | 描述 |
| --- | --- |
| setZoomGesturesEnabled(enabled: boolean): void | 设置是否启用缩放手势。 默认值为true。 |
| setScrollGesturesEnabled(enabled: boolean): void | 设置是否启用滚动手势。 默认值为true。 |
| setRotateGesturesEnabled(enabled: boolean): void | 设置是否启用旋转手势。 默认值为true。 |
| setTiltGesturesEnabled(enabled: boolean): void | 设置是否启用倾斜手势。 默认值为true。 |
| setAllGesturesEnabled(enabled: boolean): void | 设置手势是否可用。 默认值为true。 |
接口名
描述
setZoomGesturesEnabled(enabled: boolean): void
设置是否启用缩放手势。
默认值为true。
setScrollGesturesEnabled(enabled: boolean): void
设置是否启用滚动手势。
默认值为true。
setRotateGesturesEnabled(enabled: boolean): void
设置是否启用旋转手势。
默认值为true。
setTiltGesturesEnabled(enabled: boolean): void
设置是否启用倾斜手势。
默认值为true。
setAllGesturesEnabled(enabled: boolean): void
设置手势是否可用。
默认值为true。
开发步骤
mapController对象在初始化地图时获取，初始化地图功能在显示地图章节中有详细讲解。
地图手势控制
您可以通过mapController对象来启用或禁止相关的地图手势。
缩放手势：
用户可以通过用双指张合，实现放大缩小地图。
```typescript
this.mapController.setZoomGesturesEnabled(true);
```
滚动平移手势：
用户可以通过用手指拖动地图来进行移动。
旋转手势：
用户可以通过将两个手指放在地图上旋转来旋转地图。
```typescript
this.mapController.setRotateGesturesEnabled(true);
```
倾斜手势：
用户可以通过将两个手指放在地图上下滑动来倾斜地图。
```typescript
this.mapController.setTiltGesturesEnabled(true);
```
启用或禁止所有手势：
通过调用setAllGesturesEnabled方法，可启用或禁止所有手势。
```typescript
// 禁止所有手势
this.mapController.setAllGesturesEnabled(false);
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-listening-V14
爬取时间: 2025-04-29 21:11:56
来源: Huawei Developer
本章节包含地图的点击和长按、相机移动（华为地图的移动是通过模拟相机移动的方式实现的）、以及“我的位置”按钮点击等事件监听。
接口说明
以下是地图监听事件相关接口，以下功能主要由MapEventManager提供，可通过getEventManager方法获得MapEventManager，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| on(type: 'mapClick', callback: Callback<mapCommon.LatLng>): void | 设置地图点击事件监听器。 |
| on(type: 'mapLongClick', callback: Callback<mapCommon.LatLng>): void | 设置地图长按事件监听器。 |
| on(type: 'cameraMoveStart', callback: Callback<number>): void | 设置相机开始移动事件监听器。 |
| on(type: 'cameraMove', callback: Callback<void>): void | 设置相机移动事件监听器。 |
| on(type: 'cameraIdle', callback: Callback<void>): void | 设置相机移动结束事件监听器。 |
| on(type: 'markerClick' , callback: Callback<Marker>): void | 设置标记点击事件监听器。 |
| on(type: 'myLocationButtonClick', callback: Callback<void>): void | 设置我的位置按钮点击事件监听器。 |
| on(type: 'pointAnnotationClick', callback: Callback<PointAnnotation>): void | 设置点注释点击事件监听器。 |
接口名
描述
on(type: 'mapClick', callback: Callback<mapCommon.LatLng>): void
设置地图点击事件监听器。
on(type: 'mapLongClick', callback: Callback<mapCommon.LatLng>): void
设置地图长按事件监听器。
on(type: 'cameraMoveStart', callback: Callback<number>): void
设置相机开始移动事件监听器。
on(type: 'cameraMove', callback: Callback<void>): void
设置相机移动事件监听器。
on(type: 'cameraIdle', callback: Callback<void>): void
设置相机移动结束事件监听器。
on(type: 'markerClick' , callback: Callback<Marker>): void
设置标记点击事件监听器。
on(type: 'myLocationButtonClick', callback: Callback<void>): void
设置我的位置按钮点击事件监听器。
on(type: 'pointAnnotationClick', callback: Callback<PointAnnotation>): void
设置点注释点击事件监听器。
开发步骤
初始化地图组件的事件管理接口
```typescript
this.mapEventManager = this.mapController.getEventManager();
```
地图点击事件监听
```typescript
let callback = (position: mapCommon.LatLng) => {
console.info("mapClick", `on-mapClick position = ${position.longitude}`);
};
this.mapEventManager.on("mapClick", callback);
```
地图长按事件监听
```typescript
let callback = (position: mapCommon.LatLng) => {
console.info("mapLongClick", `on-mapLongClick position = ${position.longitude}`);
};
this.mapEventManager.on("mapLongClick", callback);
```
相机移动监听
相机移动时（华为地图的移动是通过模拟相机移动的方式实现的），通过设置监听器，能够对相机移动状态进行监听。
```typescript
let callback = (reason: number) => {
console.info("cameraMoveStart", `on-cameraMoveStart reason = ${reason}`);
};
this.mapEventManager.on("cameraMoveStart", callback);
```
```typescript
let callback = () => {
console.info("cameraMove", `on-cameraMove`);
};
this.mapEventManager.on("cameraMove", callback);
```
```typescript
let callback = () => {
console.info("cameraIdle", `on-cameraIdle`);
};
this.mapEventManager.on("cameraIdle", callback);
```
标记点击事件监听
标记是指在地图的指定位置添加标记以标识位置、商家、建筑等。详情请参见标记。
```typescript
let callback = (marker: map.Marker) => {
console.info("markerClick", `markerClick: ${marker.getId()}`);
};
this.mapEventManager.on("markerClick", callback);
```
我的位置监听
详情请参见显示我的位置。
```typescript
let callback = () => {
console.info("myLocationButtonClick", `myLocationButtonClick`);
};
this.mapEventManager.on("myLocationButtonClick", callback);
```
点注释事件监听
点注释是指在地图的指定位置添加点注释以标识位置、商家、建筑等，并可以通过信息窗口展示详细信息。详情请参见点注释。
```typescript
let callback = (pointAnnotation: map.PointAnnotation) => {
console.info("pointAnnotationClick", `pointAnnotationClick: ${pointAnnotation.getId()}`);
};
this.mapEventManager.on("pointAnnotationClick", callback);
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-camera-V14
爬取时间: 2025-04-29 21:12:11
来源: Huawei Developer
场景介绍
华为地图的移动是通过模拟相机移动的方式实现的，该相机可称为地图相机，您可以通过改变地图相机位置，来控制地图的可见区域，效果如图所示。
本章节将向您介绍地图相机的各个属性与含义，并移动相机。
|   图1 相机移动前  |   图2 相机移动后  |
| --- | --- |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170118.07593386043200636683499582117482:50001231000000:2800:8F42DF18E64F55B9147F643A4AD02676E7B1EC8D9F1A7641E6DC6DD6E1B29398.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170119.41828417241689403215275099078709:50001231000000:2800:D5C1B7E98CBA04C239F3FA289DC2A5482C5FB0D911398D9FA6A6B620414A8CE5.png)
接口说明
您可以通过map命名空间下的moveCamera(update:CameraUpdate)方法、animateCamera(update:CameraUpdate, duration?: number)方法和animateCameraStatus(update:CameraUpdate, duration?: number)实现移动地图相机。方法入参CameraUpdate可通过以下方法创建。
| 接口名 | 描述 |
| --- | --- |
| zoomTo(zoom: number): CameraUpdate | 设置地图缩放级别。 |
| zoomOut(): CameraUpdate | 缩小地图缩放级别，在当前地图显示的级别基础上减1。 |
| zoomIn(): CameraUpdate | 放大地图缩放级别，在当前地图显示的级别基础上加1。 |
| zoomBy(amount: number, focus?: mapCommon.MapPoint): CameraUpdate | 根据给定增量并以给定的屏幕像素点为中心点缩放地图级别。 |
| scrollBy(x: number, y: number): CameraUpdate | 按像素移动地图中心点。 |
| newLatLngBounds(bounds: mapCommon.LatLngBounds, padding?: number): CameraUpdate | 设置地图经纬度范围、设置地图区域和边界之间的距离。 |
| newLatLngBounds(bounds: mapCommon.LatLngBounds, width: number, height: number, padding: number): CameraUpdate | 设置地图经纬度范围、设置经纬度矩形范围的高和宽、设置地图区域和边界之间的距离。 |
| newLatLngBounds(bounds: mapCommon.LatLngBounds, padding: mapCommon.Padding): CameraUpdate | 支持设置地图经纬度范围和4个方向与边界之间的距离。 |
| newLatLng(latLng: mapCommon.LatLng, zoom?: number): CameraUpdate | 设置地图的中心点和缩放层级。 |
| newCameraPosition(cameraPosition: mapCommon.CameraPosition): CameraUpdate | 更新地图状态。 |
接口名
描述
zoomTo(zoom: number):CameraUpdate
设置地图缩放级别。
zoomOut():CameraUpdate
缩小地图缩放级别，在当前地图显示的级别基础上减1。
zoomIn():CameraUpdate
放大地图缩放级别，在当前地图显示的级别基础上加1。
zoomBy(amount: number, focus?:mapCommon.MapPoint):CameraUpdate
根据给定增量并以给定的屏幕像素点为中心点缩放地图级别。
scrollBy(x: number, y: number):CameraUpdate
按像素移动地图中心点。
newLatLngBounds(bounds:mapCommon.LatLngBounds, padding?: number):CameraUpdate
设置地图经纬度范围、设置地图区域和边界之间的距离。
newLatLngBounds(bounds:mapCommon.LatLngBounds, width: number, height: number, padding: number):CameraUpdate
设置地图经纬度范围、设置经纬度矩形范围的高和宽、设置地图区域和边界之间的距离。
newLatLngBounds(bounds:mapCommon.LatLngBounds, padding:mapCommon.Padding):CameraUpdate
支持设置地图经纬度范围和4个方向与边界之间的距离。
newLatLng(latLng:mapCommon.LatLng, zoom?: number):CameraUpdate
设置地图的中心点和缩放层级。
newCameraPosition(cameraPosition:mapCommon.CameraPosition):CameraUpdate
更新地图状态。
开发步骤
相机移动
```typescript
import { MapComponent, mapCommon, map } from '@kit.MapKit';
```
1.  您可以选择以动画方式或非动画方式移动相机。
```typescript
// 创建CameraUpdate对象
let cameraPosition: mapCommon.CameraPosition = {
target: {
latitude: 32.0,
longitude: 118.0
},
zoom: 10,
tilt: 0,
bearing: 0
};
let cameraUpdate = map.newCameraPosition(cameraPosition);
// 以非动画方式移动地图相机
this.mapController.moveCamera(cameraUpdate);
// 以动画方式移动地图相机
this.mapController.animateCamera(cameraUpdate, 1000);
// 以动画方式移动地图相机，并返回动画结果
let animateResult = await this.mapController.animateCameraStatus(cameraUpdate, 1000);
```
```typescript
// 方式1：相机放大级数加1，保持其他属性不变
let cameraUpdate = map.zoomIn();
// 方式2：相机放大级数减1，保持其他属性不变
let cameraUpdate1 = map.zoomOut();
// 方式3：指定相机缩放级数zoom值，其他属性不变
let zoom1 = 8.0;
let cameraUpdate2 = map.zoomTo(zoom1);
// 方式4：
// a、指定相机缩放级别增量amount，您调用此方法可以在原来相机的缩放级别之上，进行适当的缩放
// b、指定缩放级别增量和一个中心点，您调用此API可以移动相机至中心点位置，并进行缩放
// 以屏幕左顶点为（0, 0）点，positionX正值代表可视区域向右移动，负值代表可视区域向左移动
// positionY正值代表可视区域向下移动，负值代表可视区域向上移动
let point: mapCommon.MapPoint = {
positionX: 31,
positionY: 118
};
let amount = 2.0;
let cameraUpdate3 = map.zoomBy(amount, point);
// 方式5：设置相机的经纬度和地图层级
// a、仅指定相机的经纬度，实现中心点的移动
// b、指定相机的经纬度和地图层级，您调用此API可以移动相机至中心点位置，并进行缩放
let latLng: mapCommon.LatLng = {
latitude: 31.5,
longitude: 118.9
};
let zoom2 = 10;
let cameraUpdate4 = map.newLatLng(latLng, zoom2);
// 方式6：设置相机的可见区域
let latLngBounds: mapCommon.LatLngBounds = {
northeast: {
latitude: 32.5,
longitude: 119.9
},
southwest: {
latitude: 31.5,
longitude: 118.9
}
};
// 设置地图显示经纬度范围，设置地图区域和边界之间的距离为5像素
let cameraUpdate5 = map.newLatLngBounds(latLngBounds, 5);
// 方式7：设置相机的可见区域
// 设置地图显示经纬度范围，设置经纬度矩形范围的宽为9像素，设置经纬度矩形范围的高为16像素，设置地图区域和边界之间的距离为5像素
let cameraUpdate6 = map.newLatLngBounds(latLngBounds, 9, 16, 5);
// 方式8：设置地图显示经纬度范围，设置地图区域和4个方向的边界之间的距离分别为5、6、7、8像素
let paddings: mapCommon.Padding = {
left:5,
top: 6,
right: 7,
bottom: 8
};
let cameraUpdate7 = map.newLatLngBounds(latLngBounds, paddings);
// 方式9：滚动相机，将相机按照指定的像素点移动
let x = 100.0;
let y = 100.0;
let cameraUpdate8 = map.scrollBy(x, y);
```
|   图3 相机移动前  |   图4 相机移动后  |
| --- | --- |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170119.85102918477844738180982191040320:50001231000000:2800:BDCB1224B9ED9EC4528595315EF73B72EE97074CFD5F7D7AE357F17110D22EE3.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170119.33955070153327602332331723359902:50001231000000:2800:6F09E09E133B302560F1A679ADDEDFA5EE32EDB7356CE5EA0773050D669B37FF.png)
设置相机最大/最小偏好缩放级别
```typescript
// 设置最小偏好缩放级别，范围为[2, 20]
this.mapController.setMinZoom(6);
// 设置最大偏好缩放级别，范围为[2, 20]
this.mapController.setMaxZoom(14);
```
设置地图相机的边界
Map Kit支持设置地图相机的边界。通过setLatLngBounds(bounds:mapCommon.LatLngBounds)接口指定一个LatLngBounds来约束相机目标，使用户移动地图时，相机目标不会移出此边界。当设置参数为空时，地图相机的边界清除。
```typescript
let bounds: mapCommon.LatLngBounds = {
northeast: {
latitude: 31,
longitude: 118
},
southwest: {
latitude: 30,
longitude: 113
}
};
this.mapController.setLatLngBounds(bounds);
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-screenshots-V14
爬取时间: 2025-04-29 21:12:24
来源: Huawei Developer
本章节将向您介绍如何实现地图截图功能。
地图截图指对当前屏幕显示区域进行截屏，支持对地图、覆盖物、Logo进行屏幕截图。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170119.37589573095760070399903890100827:50001231000000:2800:9620A1678F0DA58F90609A476B0404D2D93AA03C31D6B63CDB35D16033137D4E.png)
接口说明
以下是地图截图相关接口，以下功能主要由snapshot提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| snapshot(): Promise<image.PixelMap> | 地图截图。 |
接口名
描述
snapshot(): Promise<image.PixelMap>
地图截图。
开发步骤
```typescript
import { MapComponent, mapCommon, map } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
import { image } from '@kit.ImageKit';
```
```typescript
@Entry
@Component
struct HuaweiMapDemo {
private mapOptions?: mapCommon.MapOptions;
private callback?: AsyncCallback<map.MapComponentController>;
private mapController?: map.MapComponentController;
@State image?: image.PixelMap = undefined;
aboutToAppear(): void {
// 地图初始化参数，设置地图中心点坐标及层级
this.mapOptions = {
position: {
target: {
latitude: 39.9,
longitude: 116.4
},
zoom: 10
}
};
// 地图初始化的回调
this.callback = async (err, mapController) => {
if (!err) {
// 获取地图的控制器类，用来操作地图
this.mapController = mapController;
}
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback })
.width('100%')
.height('50%');
Scroll(new Scroller()) {
Column() {
Image(this.image)
.objectFit(ImageFit.Auto)
.border({ width: 1, color: Color.Red }).width("100%")
Button("获取截图")
.margin({ left: 10 })
.fontSize(12)
.onClick(async () => {
if (this.mapController) {
let pixelMap = await this.mapController.snapshot();
this.image = pixelMap;
}
});
}
}.width('70%').height("50%")
}.width('100%')
}.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-drawing-V14
爬取时间: 2025-04-29 21:12:38
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-marker-V14
爬取时间: 2025-04-29 21:12:52
来源: Huawei Developer
场景介绍
本章节将向您介绍如何在地图的指定位置添加标记以标识位置、商家、建筑等。
点标记用来在地图上标记任何位置，例如用户位置、车辆位置、店铺位置等一切带有位置属性的事物。Map Kit提供的点标记功能（又称 Marker）封装了大量的触发事件，例如点击事件、长按事件、拖拽事件。
Marker有默认风格，同时也支持自定义。由于内容丰富，以下只能展示一些基础功能的使用，详细内容可参见接口文档。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170119.97928782140059677106556429403907:50001231000000:2800:B24ACDE94D929BDC37D029AFDE0AE2AF8197CF3017073FE0E2328032C1139766.png)
接口说明
添加标记功能主要由MarkerOptions、addMarker和Marker提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| MarkerOptions | 标记参数。 |
| addMarker(options: mapCommon.MarkerOptions): Promise<Marker> | 在地图上添加标记。 |
| Marker | 标记，支持更新和查询相关属性。 |
接口名
描述
MarkerOptions
标记参数。
addMarker(options:mapCommon.MarkerOptions): Promise<Marker>
在地图上添加标记。
Marker
标记，支持更新和查询相关属性。
开发步骤
添加标记
```typescript
import { MapComponent, mapCommon, map } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
1.
```typescript
@Entry
@Component
struct MarkerDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
private mapEventManager?: map.MapEventManager;
private marker?: map.Marker;
aboutToAppear(): void {
// 地图初始化参数
this.mapOptions = {
position: {
target: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
},
zoom: 15
}
};
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
this.mapEventManager = this.mapController.getEventManager();
// Marker初始化参数
let markerOptions: mapCommon.MarkerOptions = {
position: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
},
rotation: 0,
visible: true,
zIndex: 0,
alpha: 1,
anchorU: 0.5,
anchorV: 1,
clickable: true,
draggable: true,
flat: false
};
// 创建Marker
this.marker = await this.mapController.addMarker(markerOptions);
}
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback });
}.width('100%')
}.height('100%')
}
}
```
```typescript
// 设置标记可拖拽
this.marker.setDraggable(true);
// 设置标记锚点
this.marker.setMarkerAnchor(1.0, 1.0);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170119.25011231806100428451163904029198:50001231000000:2800:C8F95AA56A8506B0C45718633C411AA830CFD9DA5C97F440D6893BA926C964D0.png)
自定义标记
```typescript
let markerOptions: mapCommon.MarkerOptions = {
position: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
},
rotation: 0,
visible: true,
zIndex: 0,
alpha: 1,
anchorU: 0.5,
anchorV: 1,
clickable: true,
draggable: true,
flat: false,
// 图标存放在resources/rawfile，icon参数传入rawfile文件夹下的相对路径
icon: 'test.png'
};
this.marker = await this.mapController.addMarker(markerOptions);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170119.90307996583928283275618764140528:50001231000000:2800:456D93FA6720064E6998B1E1C086D66C4B8060EAF9A330258C96FD928B6FAA73.png)
设置监听标记点击事件
```typescript
let callback = (marker: map.Marker) => {
console.info(`on-markerClick marker = ${marker.getId()}`);
};
this.mapEventManager.on("markerClick", callback);
```
设置监听标记拖动事件
将Marker的拖拽属性设置为true，然后调用on(type: 'markerDragStart' , callback: Callback<Marker>)方法监听标记是否开始拖拽。
调用on(type: 'markerDrag' , callback: Callback<Marker>)，监听标记拖动过程。
调用on(type: 'markerDragEnd' , callback: Callback<Marker>)，监听标记拖动结束事件。
```typescript
// 设置标记可拖拽
this.marker.setDraggable(true);
// 监听标记开始拖拽
let markerCallback = (marker: map.Marker) => {
console.info(`on-markerDragStart marker = ${marker.getId()}`);
};
this.mapEventManager.on("markerDragStart", markerCallback);
// 监听标记拖拽事件
let markerDragCallback = (marker: map.Marker) => {
console.info(`on-markerDrag marker = ${marker.getId()}`);
};
this.mapEventManager.on("markerDrag", markerDragCallback);
// 监听标记拖拽结束
let markerDragEndCallback = (marker: map.Marker) => {
console.info(`on-markerDragEnd marker = ${marker.getId()}`);
};
this.mapEventManager.on("markerDragEnd", markerDragEndCallback);
```
信息窗
```typescript
// 添加信息窗
let markerOptions: mapCommon.MarkerOptions = {
position: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
}
};
this.marker = await this.mapController?.addMarker(markerOptions);
// 设置信息窗的标题
this.marker.setTitle('南京');
// 设置信息窗的子标题
this.marker.setSnippet('华东地区');
// 设置标记可点击
this.marker.setClickable(true);
// 设置信息窗的锚点位置
this.marker.setInfoWindowAnchor(1, 1);
// 设置信息窗可见
this.marker.setInfoWindowVisible(true);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170119.07998970812174814806568442008777:50001231000000:2800:FD853775AAC580B4EDD553F68132219D316CE9E6505AD01097017D8AE6341967.png)
自定义信息窗
```typescript
import { map, mapCommon, MapComponent } from '@kit.MapKit'
import { AsyncCallback } from '@kit.BasicServicesKit'
@Entry
@Component
struct MarkerDemo {
private TAG = "OHMapSDK_MarkerDemo";
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
aboutToAppear(): void {
this.mapOptions = {
position: {
target: {
latitude: 32.120750,
longitude: 118.788765
},
zoom: 15
}
}
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
let markerOptions: mapCommon.MarkerOptions = {
position: {
latitude: 32.120750,
longitude: 118.788765
},
clickable: true,
// 设置信息窗标题
title: "自定义信息窗",
};
await this.mapController?.addMarker(markerOptions);
}
}
}
build() {
Stack() {
Column() {
MapComponent({
mapOptions: this.mapOptions,
mapCallback: this.callback,
// 自定义信息窗
customInfoWindow: this.customInfoWindow
})
.width('100%')
.height('100%');
}.width('100%')
}.height('100%')
}
// 自定义信息窗BuilderParam
@BuilderParam customInfoWindow: ($$: map.MarkerDelegate) => void = this.customInfoWindowBuilder;
// 自定义信息窗Builder
@Builder
customInfoWindowBuilder($$: map.MarkerDelegate) {
if ($$.marker) {
Text($$.marker.getTitle())
.width("50%")
.height(50)
.backgroundColor(Color.Green)
.textAlign(TextAlign.Center)
.fontColor(Color.Black)
.font({ size: 25, weight: 10, style: FontStyle.Italic })
.border({ width: 3, color: Color.Black, radius: 25, style: BorderStyle.Dashed })
}
}
}
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170119.20559671585587353808739893810274:50001231000000:2800:563CFD44AB015617BD9803BCDF813541566E3F6F641DA9507472334D01F3E74F.png)
标记动画
Marker支持设置旋转、缩放、平移、透明、图片动画播放和组合动画效果。
| 接口名 | 描述 |
| --- | --- |
| AlphaAnimation | 控制透明度的动画类。 |
| RotateAnimation | 控制旋转的动画类。 |
| ScaleAnimation | 控制缩放的动画类。 |
| TranslateAnimation | 控制平移的动画类。 |
| PlayImageAnimation | 控制多张图片的动画类。 |
| AnimationSet | 动画集合。 |
接口名
描述
AlphaAnimation
控制透明度的动画类。
RotateAnimation
控制旋转的动画类。
ScaleAnimation
控制缩放的动画类。
TranslateAnimation
控制平移的动画类。
PlayImageAnimation
控制多张图片的动画类。
AnimationSet
动画集合。
旋转动画效果的示例代码如下：
```typescript
import { map, mapCommon, MapComponent } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
@Entry
@Component
struct MarkerDemo {
private mapOptions?: mapCommon.MapOptions;
private callback?: AsyncCallback<map.MapComponentController>;
aboutToAppear(): void {
this.mapOptions = {
position: {
target: {
latitude: 32.020750,
longitude: 118.788765
},
zoom: 11
}
}
this.callback = async (err, mapController) => {
if (!err) {
// 构造MarkerOptions对象
let markerOptions: mapCommon.MarkerOptions = {
position: {
latitude: 32.020750,
longitude: 118.788765
},
};
// 新建marker
let marker: map.Marker = await mapController.addMarker(markerOptions);
// 构造RotateAnimation对象
let animation = new map.RotateAnimation(0, 270);
// 动画执行时间
animation.setDuration(2000);
// 动画结束状态
animation.setFillMode(map.AnimationFillMode.BACKWARDS);
// 动画重复模式
animation.setRepeatMode(map.AnimationRepeatMode.REVERSE);
// 动画重复次数
animation.setRepeatCount(100);
// 设置动画开始监听
let callbackStart = () => {
console.info("animationStart", `callback`);
};
animation.on("animationStart", callbackStart);
// 设置动画结束监听
let callbackEnd = () => {
console.info("animationEnd", `callback`);
};
animation.on("animationEnd", callbackEnd);
// 设置动画
marker.setAnimation(animation);
// 开启动画
marker.startAnimation();
}
}
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback })
}.width('100%')
}.height('100%')
}
}
```
展示效果如图：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170119.04753066433633938482542074660381:50001231000000:2800:D213494F07D431304AEC6DA384486D3DBD5E62C2DEE485EBF6E77525CBBFA5E9.gif)
图片动画播放
```typescript
import { map, mapCommon, MapComponent } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
import { image } from '@kit.ImageKit';
@Entry
@Component
struct MarkerDemo {
private mapOptions?: mapCommon.MapOptions;
private callback?: AsyncCallback<map.MapComponentController>;
aboutToAppear(): void {
this.mapOptions = {
position: {
target: {
latitude: 32.020750,
longitude: 118.788765
},
zoom: 11
}
}
this.callback = async (err, mapController) => {
if (!err) {
// 构造MarkerOptions对象
let markerOptions: mapCommon.MarkerOptions = {
position: {
latitude: 32.020750,
longitude: 118.788765
},
};
let mContext = getContext();
const fileData: Uint8Array = await mContext?.resourceManager?.getRawFileContent('icon/icon.png');
let imageSource: image.ImageSource =
image.createImageSource(fileData.buffer.slice(0, fileData.buffer.byteLength));
let pixelMap: PixelMap = await imageSource.createPixelMap();
let images: Array<ResourceStr | image.PixelMap> = [
// 图标需存放在resources/rawfile
'icon/avocado.png',
'icon/20231027.png',
pixelMap,
$r('app.media.maps_blue_dot')
]
// 新建marker
let marker: map.Marker = await mapController.addMarker(markerOptions);
// 构造PlayImageAnimation对象
let animation: map.PlayImageAnimation = new map.PlayImageAnimation();
// 添加图片
await animation.addImages(images)
// 动画执行时间
animation.setDuration(3000);
// 动画结束状态
animation.setFillMode(map.AnimationFillMode.BACKWARDS);
// 动画重复模式
animation.setRepeatMode(map.AnimationRepeatMode.REVERSE);
// 动画重复次数
animation.setRepeatCount(100);
// 设置动画开始监听
let callbackStart = () => {
console.info("animationStart", `callback`);
};
animation.on("animationStart", callbackStart);
// 设置动画结束监听
let callbackEnd = () => {
console.info("animationEnd", `callback`);
};
animation.on("animationEnd", callbackEnd);
// 设置动画
marker.setAnimation(animation);
// 开启动画
marker.startAnimation();
}
}
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback })
}.width('100%')
}.height('100%')
}
}
```
展示效果如图：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170119.40045814558678819731208656151417:50001231000000:2800:E2724DA4DFD2D6DB26C6325F1824C91F7909A201FB46C444499BFB6B438ED613.gif)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-polyline-V14
爬取时间: 2025-04-29 21:13:06
来源: Huawei Developer
场景介绍
本章节将向您介绍如何在地图上绘制折线、设置折线分段颜色、设置折线可渐变、绘制纹理。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170120.25626589134061480438871625528156:50001231000000:2800:C2E3FC33B563C62F4DF3F65F143D74789BB330517FFAAA4A6927DE87CDDF6559.png)
接口说明
添加折线功能主要由MapPolylineOptions、addPolyline和MapPolyline提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| MapPolylineOptions | 折线参数。 |
| addPolyline(options: mapCommon.MapPolylineOptions): Promise<MapPolyline> | 在地图上添加一条折线。 |
| MapPolyline | 折线，支持更新和查询相关属性。 |
接口名
描述
MapPolylineOptions
折线参数。
addPolyline(options:mapCommon.MapPolylineOptions): Promise<MapPolyline>
在地图上添加一条折线。
MapPolyline
折线，支持更新和查询相关属性。
开发步骤
添加折线
```typescript
import { MapComponent, mapCommon, map } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
1.
```typescript
@Entry
@Component
struct MapPolylineDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
private mapPolyline?: map.MapPolyline;
aboutToAppear(): void {
// 地图初始化参数
this.mapOptions = {
position: {
target: {
latitude: 31.98,
longitude: 118.78
},
zoom: 14
}
};
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
// polyline初始化参数
let polylineOption: mapCommon.MapPolylineOptions = {
points: [{longitude:118.78,latitude:31.975}, {longitude:118.78,latitude:31.982}, {longitude:118.79,latitude:31.985}],
clickable: true,
startCap: mapCommon.CapStyle.BUTT,
endCap: mapCommon.CapStyle.BUTT,
geodesic: false,
jointType: mapCommon.JointType.BEVEL,
visible: true,
width: 10,
zIndex: 10,
gradient: false
}
// 创建polyline
this.mapPolyline = await this.mapController.addPolyline(polylineOption);
}
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback });
}.width('100%')
}.height('100%')
}
}
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170120.61799295971158114301948442034173:50001231000000:2800:6581A81D1132C452450E12651B692AC1D3007D15BA5CABF1519D2196D15E8C63.png)
设置折线分段颜色
方法一：新建折线时在MapPolylineOptions的colors属性中设置折线分段颜色值。
```typescript
let polylineOption: mapCommon.MapPolylineOptions = {
points: [{longitude:118.78,latitude:31.975}, {longitude:118.78,latitude:31.982}, {longitude:118.79,latitude:31.985}],
clickable: true,
startCap: mapCommon.CapStyle.BUTT,
endCap: mapCommon.CapStyle.BUTT,
geodesic: false,
jointType: mapCommon.JointType.BEVEL,
visible: true,
width: 10,
zIndex: 10,
// 设置颜色
colors: [0xffffff00, 0xff000000],
gradient: false
};
```
方法二：调用MapPolyline的setColors()方法。
```typescript
let colors = [0xffffff00, 0xff000000];
this.mapPolyline.setColors(colors);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170120.17420437911826059794822734935940:50001231000000:2800:4BEE7DF4C3DDD7C1AC56F5385D4A61C4985B33B188F4CACF45DA26AB5519068A.png)
设置折线可渐变
方法一：MapPolylineOptions的gradient属性设置为true。
```typescript
let polylineOption: mapCommon.MapPolylineOptions = {
points: [{longitude:118.78,latitude:31.975}, {longitude:118.78,latitude:31.982}, {longitude:118.79,latitude:31.985}],
clickable: true,
startCap: mapCommon.CapStyle.BUTT,
endCap: mapCommon.CapStyle.BUTT,
geodesic: false,
jointType: mapCommon.JointType.BEVEL,
visible: true,
width: 10,
zIndex: 10,
colors: [0xffffff00, 0xff000000],
// 设置颜色折线可渐变
gradient: true
};
```
方法二：调用MapPolyline的setGradient()方法。
```typescript
this.mapPolyline.setGradient(true);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170120.66785007109961598004872592180593:50001231000000:2800:8947F807B5F750B42CF92BF547EDCDB581D1A12B3C5B7E02C0DE13C9ECFE9056.png)
绘制纹理
方法一：新建折线时在MapPolylineOptions的customTexture属性设置折线纹理。
```typescript
let polylineOption: mapCommon.MapPolylineOptions = {
points: [
{ latitude: 32.220750, longitude: 118.788765 },
{ latitude: 32.120750, longitude: 118.788765 },
{ latitude: 32.020750, longitude: 118.788765 },
{ latitude: 31.920750, longitude: 118.788765 },
{ latitude: 31.820750, longitude: 118.788765 }
],
clickable: true,
jointType: mapCommon.JointType.DEFAULT,
width: 20,
customTexture: "icon/naviline_arrow.png"
}
```
方法二：调用MapPolyline的setCustomTexture方法。
```typescript
await this.mapPolyline.setCustomTexture("icon/naviline_arrow.png");
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170120.67907599590697498404172726564667:50001231000000:2800:0AA97FF1CB96406BF2EE857903596FC7FA4F223FB4D72C2733D92F31E4D0A39D.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-arc-V14
爬取时间: 2025-04-29 21:13:19
来源: Huawei Developer
场景介绍
本章节将向您介绍如何在地图上绘制弧线，通过MapArcParams类设置弧线的位置、宽度、颜色等参数。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170120.51416492351654811396567648190958:50001231000000:2800:22FC355D96CAB42856750445C94C45D828626FFB681F847F034AE4808D3D6029.png)
接口说明
添加弧线功能主要由MapArcParams、addArc和MapArc提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| MapArcParams | 弧线参数。 |
| addArc(params: mapCommon.MapArcParams): MapArc | 添加一条弧线。 |
| MapArc | 弧线，支持更新和查询相关属性。 |
接口名
描述
MapArcParams
弧线参数。
addArc(params:mapCommon.MapArcParams):MapArc
添加一条弧线。
MapArc
弧线，支持更新和查询相关属性。
开发步骤
添加弧线
```typescript
import { map, mapCommon, MapComponent } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
```typescript
@Entry
@Component
struct MapArcDemo {
private TAG = "OHMapSDK_MapArcDemo";
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
aboutToAppear(): void {
this.mapOptions = {
position: {
target: {
latitude: 34.757975,
longitude: 113.665412
},
zoom: 6
},
}
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
if (!this.mapController) {
console.info(this.TAG, "mapController is null1");
return;
}
// 设置弧线参数
let mapArcParams: mapCommon.MapArcParams = {
// 弧线起点坐标
startPoint: {
latitude: 39.913138,
longitude: 116.415112
},
// 弧线终点坐标
endPoint: {
latitude: 28.239473,
longitude: 112.954094
},
// 弧线中心点坐标
centerPoint: {
latitude: 33.86970399048567,
longitude: 112.08633528544145
},
width: 10,
color: 0xffff0000,
visible: true,
zIndex: 100
};
// 添加弧线
this.mapController.addArc(mapArcParams);
}
}
}
build() {
Stack() {
Column() {
MapComponent({
mapOptions: this.mapOptions,
mapCallback: this.callback,
})
.width('100%')
.height('100%');
}.width('100%')
}.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-polygon-V14
爬取时间: 2025-04-29 21:13:33
来源: Huawei Developer
场景介绍
本章节将向您介绍如何在地图上绘制多边形。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170120.91607308448085171899117242654549:50001231000000:2800:D8363898868CBF5A7215DDF7F452AB7C4CE1216C69E26C43F78AF464C379512D.png)
接口说明
添加多边形功能主要由MapPolygonOptions、addPolygon和MapPolygon提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| MapPolygonOptions | 多边形参数。 |
| addPolygon(options: mapCommon.MapPolygonOptions): Promise<MapPolygon> | 在地图上添加一个多边形。 |
| MapPolygon | 多边形，支持更新和查询相关属性。 |
接口名
描述
MapPolygonOptions
多边形参数。
addPolygon(options:mapCommon.MapPolygonOptions): Promise<MapPolygon>
在地图上添加一个多边形。
MapPolygon
多边形，支持更新和查询相关属性。
开发步骤
```typescript
import { MapComponent, mapCommon, map } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
1.
```typescript
@Entry
@Component
struct MapPolygonDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
private mapPolygon?: map.MapPolygon;
aboutToAppear(): void {
// 地图初始化参数
this.mapOptions = {
position: {
target: {
latitude: 31.98,
longitude: 118.78
},
zoom: 14
}
};
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
// 多边形初始化参数
let polygonOptions: mapCommon.MapPolygonOptions = {
points: [{longitude:118.78,latitude:31.975}, {longitude:118.78,latitude:31.985},
{longitude:118.79,latitude:31.985},{longitude:118.79,latitude:31.975}],
clickable: true,
fillColor: 0xff00DE00,
geodesic: false,
strokeColor: 0xff000000,
jointType: mapCommon.JointType.DEFAULT,
strokeWidth: 10,
visible: true,
zIndex: 10
}
// 创建多边形
this.mapPolygon = await this.mapController.addPolygon(polygonOptions);
}
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback });
}.width('100%')
}.height('100%')
}
}
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170120.28602910607613159247067305928624:50001231000000:2800:00FF658D71B84299DA92E13FA5E0478290F0D3DA05B6CB87E333486556D4E83F.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-circel-V14
爬取时间: 2025-04-29 21:13:47
来源: Huawei Developer
场景介绍
本章节将向您介绍如何在地图上绘制圆形。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170120.42406094909755532066080991227174:50001231000000:2800:947DD727BF7FE82EF4791E7FA2621B39A0A9F42B3FA3F1D7987ED5E1C5099460.png)
接口说明
添加圆形功能主要由MapCircleOptions、addCircle和MapCircle提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| MapCircleOptions | 圆形参数。 |
| addCircle(options: mapCommon.MapCircleOptions): Promise<MapCircle> | 在地图上添加一个圆，指定圆心经纬度和圆的半径，用于表示某个位置的周边范围。 |
| MapCircle | 圆形，支持更新和查询相关属性。 |
接口名
描述
MapCircleOptions
圆形参数。
addCircle(options:mapCommon.MapCircleOptions): Promise<MapCircle>
在地图上添加一个圆，指定圆心经纬度和圆的半径，用于表示某个位置的周边范围。
MapCircle
圆形，支持更新和查询相关属性。
开发步骤
```typescript
import { MapComponent, mapCommon, map } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
1.
```typescript
@Entry
@Component
struct MapCircleDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
private mapCircle?: map.MapCircle;
aboutToAppear(): void {
// 地图初始化参数
this.mapOptions = {
position: {
target: {
latitude: 39.918,
longitude: 116.397
},
zoom: 14
}
};
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
// Circle初始化参数
let mapCircleOptions: mapCommon.MapCircleOptions = {
center: {
latitude: 39.918,
longitude: 116.397
},
radius: 500,
clickable: true,
fillColor: 0XFFFFC100,
strokeColor: 0xFFFF0000,
strokeWidth: 10,
visible: true,
zIndex: 15
}
// 创建Circle
this.mapCircle = await this.mapController.addCircle(mapCircleOptions);
}
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback });
}.width('100%')
}.height('100%')
}
}
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170120.68371400116215245692506063423685:50001231000000:2800:43904533D7ACEA74203A01397BF3BFA37B26A492346A6C2FB5F1A4DCBC6EC7E9.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-annotation-V14
爬取时间: 2025-04-29 21:14:01
来源: Huawei Developer
场景介绍
本章节将向您介绍如何在地图的指定位置添加点注释以标识位置、商家、建筑等，并可以通过信息窗口展示详细信息。
点注释支持功能：
PointAnnotation有默认风格，同时也支持自定义。由于内容丰富，以下只展示一些基础功能的使用，详细内容可分参见接口文档。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170120.03959685666124926788636375789984:50001231000000:2800:E4F49630975B64AAD5A7839005F7B194CBB50990631577DE5168850901172A2C.jpg)
接口说明
添加点注释功能主要由PointAnnotationParams、addPointAnnotation、PointAnnotation、on、off提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| PointAnnotationParams | 点注释参数。 |
| addPointAnnotation(params: mapCommon.PointAnnotationParams): Promise<PointAnnotation> | 在地图上添加点注释。 |
| PointAnnotation | 点注释，支持更新和查询相关属性。 |
| on(type: 'pointAnnotationClick', callback: Callback<PointAnnotation>): void | 设置点注释点击事件监听器。 |
| off(type: 'pointAnnotationClick', callback?: Callback<PointAnnotation>): void | 取消监听点注释点击事件。 |
接口名
描述
PointAnnotationParams
点注释参数。
addPointAnnotation(params:mapCommon.PointAnnotationParams): Promise<PointAnnotation>
在地图上添加点注释。
PointAnnotation
点注释，支持更新和查询相关属性。
on(type: 'pointAnnotationClick', callback: Callback<PointAnnotation>): void
设置点注释点击事件监听器。
off(type: 'pointAnnotationClick', callback?: Callback<PointAnnotation>): void
取消监听点注释点击事件。
开发步骤
添加点注释
```typescript
import { MapComponent, mapCommon, map } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
1.
```typescript
@Entry
@Component
struct PointAnnotationDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
private mapEventManager?: map.MapEventManager;
private pointAnnotation?: map.PointAnnotation;
aboutToAppear(): void {
this.mapOptions = {
position: {
target: {
latitude: 32.020750,
longitude: 118.788765
},
zoom: 14
}
};
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
this.mapEventManager = this.mapController.getEventManager();
let pointAnnotationOptions: mapCommon.PointAnnotationParams = {
// 定义点注释图标锚点
position: {
latitude: 32.020750,
longitude: 118.788765
},
// 定义点注释名称与地图poi名称相同时，是否支持去重
repeatable: true,
// 定义点注释的碰撞规则
collisionRule: mapCommon.CollisionRule.NAME,
// 定义点注释的标题，数组长度最小为1，最大为3
titles: [{
// 定义标题内容
content: "南京夫子庙",
// 定义标题字体颜色
color: 0xFF000000,
// 定义标题字体大小
fontSize: 15,
// 定义标题描边颜色
strokeColor: 0xFFFFFFFF,
// 定义标题描边宽度
strokeWidth: 2,
// 定义标题字体样式
fontStyle: mapCommon.FontStyle.ITALIC
}
],
// 定义点注释的图标，图标存放在resources/rawfile
icon: "",
// 定义点注释是否展示图标
showIcon: true,
// 定义点注释的锚点在水平方向上的位置
anchorU: 0.5,
// 定义点注释的锚点在垂直方向上的位置
anchorV: 1,
// 定义点注释的显示属性，为true时，在被碰撞后仍能显示
forceVisible: false,
// 定义碰撞优先级，数值越大，优先级越低
priority: 3,
// 定义点注释展示的最小层级
minZoom: 2,
// 定义点注释展示的最大层级
maxZoom: 20,
// 定义点注释是否可见
visible: true,
// 定义点注释叠加层级属性
zIndex: 10
}
this.pointAnnotation = await this.mapController.addPointAnnotation(pointAnnotationOptions);
};
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback });
}.width('100%')
}.height('100%')
}
}
```
```typescript
// 设置点注释的显示层级为3~14级
this.pointAnnotation.setZoom(3,14);
// 设置点注释的碰撞优先级为10
this.pointAnnotation.setPriority(10);
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170121.84814271311246680260010898892769:50001231000000:2800:519E458FE3FF38F893CA33ED864D91942805922C75E06A6688FCF3762BAD729C.png)
设置监听点注释点击事件
```typescript
let callback = (pointAnnotation: map.PointAnnotation) => {
console.info("pointAnnotationClick", `pointAnnotationClick: ${pointAnnotation.getId()}`);
};
this.mapEventManager.on("pointAnnotationClick", callback);
```
点注释动画
PointAnnotation调用setAnimation(animation:Animation)设置动画。
PointAnnotation调用startAnimation启动动画。
```typescript
let animation: map.ScaleAnimation = new map.ScaleAnimation(1, 3, 1, 3);
// 设置动画单次的时长
animation.setDuration(3000);
// 设置动画开始监听
let callbackStart = () => {
console.info("animationStart", `callback`);
};
animation.on("animationStart", callbackStart);
// 设置动画结束监听
let callbackEnd = () => {
console.info("animationEnd", `callback`);
};
animation.on("animationEnd", callbackEnd);
// 设置动画执行完成的状态
animation.setFillMode(map.AnimationFillMode.BACKWARDS);
// 设置动画重复的方式
animation.setRepeatMode(map.AnimationRepeatMode.REVERSE);
// 设置动画插值器
animation.setInterpolator(Curve.Linear);
// 设置动画的重复次数
animation.setRepeatCount(100);
this.pointAnnotation.setAnimation(animation);
this.pointAnnotation.startAnimation();
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170121.73167460869083021764840751508026:50001231000000:2800:7A4F5B9F507DFB25965AC87AB31D7C02BFD8E22BCA17439F6119C15386EAD72D.gif)
点注释标题动画
PointAnnotation调用setTitleAnimation(animation:FontSizeAnimation)设置标题动画。
PointAnnotation调用startTitleAnimation启动标题动画。
```typescript
let animation: map.FontSizeAnimation = new map.FontSizeAnimation(15, 45);
// 设置动画单次的时长
animation.setDuration(3000);
// 设置动画开始监听
let callbackStart = () => {
console.info("animationStart", `callback`);
};
animation.on("animationStart", callbackStart);
// 设置动画结束监听
let callbackEnd = () => {
console.info("animationEnd", `callback`);
};
animation.on("animationEnd", callbackEnd);
// 设置动画执行完成的状态
animation.setFillMode(map.AnimationFillMode.FORWARDS);
// 设置动画重复的方式
animation.setRepeatMode(map.AnimationRepeatMode.REVERSE);
// 设置动画插值器
animation.setInterpolator(Curve.Linear);
// 设置动画的重复次数
animation.setRepeatCount(100);
this.pointAnnotation.setTitleAnimation(animation);
this.pointAnnotation.startTitleAnimation();
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170121.23772441826425602418105730152911:50001231000000:2800:B13AD1202B3EC300F78E2154F2AF67D7BBAB6701085C38833307AF3CA1A4763A.gif)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-bubble-V14
爬取时间: 2025-04-29 21:14:15
来源: Huawei Developer
场景介绍
本章节将向您介绍如何在地图的指定位置添加气泡。
您可以通过气泡在道路上指定位置显示测速、拥堵情况。气泡支持功能：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170121.50389781823267252515596896894063:50001231000000:2800:3758F7BE958412908DA183E08D95E2B42CEA3282EC68DB26DC3FE386E2EA91EB.png)
接口说明
添加气泡功能主要由BubbleParams、addBubble和Bubble提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| BubbleParams | 气泡参数。 |
| addBubble(params: mapCommon.BubbleParams): Promise<Bubble> | 在地图上添加气泡。 |
| Bubble | 气泡，支持更新和查询相关属性。 |
接口名
描述
BubbleParams
气泡参数。
addBubble(params:mapCommon.BubbleParams): Promise<Bubble>
在地图上添加气泡。
Bubble
气泡，支持更新和查询相关属性。
开发步骤
添加气泡
```typescript
import { MapComponent, mapCommon, map } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
1.
```typescript
@Entry
@Component
struct BubbleDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
private bubble?: map.Bubble;
aboutToAppear(): void {
this.mapOptions = {
position: {
target: {
latitude: 39.918,
longitude: 116.397
},
zoom: 14
}
};
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
let bubbleOptions: mapCommon.BubbleParams = {
// 气泡位置
positions: [[{ latitude: 39.918, longitude: 116.397 }]],
// 设置图标，必须提供4个方向的图标，图标存放在resources/rawfile
icons: [
'speed_limit_10.png',
'speed_limit_20.png',
'speed_limit_30.png',
'speed_limit_40.png'
],
// 定义气泡的显示属性，为true时，在被碰撞后仍能显示
forceVisible: true,
// 定义气泡碰撞优先级，数值越大，优先级越低
priority: 3,
// 定义气泡展示的最小层级
minZoom: 2,
// 定义气泡展示的最大层级
maxZoom: 20,
// 定义气泡是否可见
visible: true,
// 定义气泡叠加层级属性
zIndex: 1
}
// 添加气泡
this.bubble = await this.mapController.addBubble(bubbleOptions);
}
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback });
}.width('100%')
}.height('100%')
}
}
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170121.88835103630209936359678571707095:50001231000000:2800:C0E1315B619037DF0B4410CAEDD44CD6542D9162D7B7669FD27B91D6DF0A6F71.png)
设置监听气泡点击事件
```typescript
this.mapController?.on("bubbleClick", (bubble) => {
console.info(`on-BubbleClick bubble = ${bubble.getId()}`);
});
```
气泡动画
Bubble调用setAnimation(animation:Animation)设置动画。
Bubble调用startAnimation启动动画。
```typescript
let animation: map.ScaleAnimation = new map.ScaleAnimation(1, 3, 1, 3);
// 设置动画单次的时长
animation.setDuration(3000);
// 设置动画开始监听
let callbackStart = () => {
console.info("animationStart", `callback`);
};
animation.on("animationStart", callbackStart);
// 设置动画结束监听
let callbackEnd = () => {
console.info("animationEnd", `callback`);
};
animation.on("animationEnd", callbackEnd);
// 设置动画执行完成的状态
animation.setFillMode(map.AnimationFillMode.BACKWARDS);
// 设置动画重复的方式
animation.setRepeatMode(map.AnimationRepeatMode.REVERSE);
// 设置动画插值器
animation.setInterpolator(Curve.Linear);
// 设置动画的重复次数
animation.setRepeatCount(100);
this.bubble.setAnimation(animation);
this.bubble.startAnimation();
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-aggregate-V14
爬取时间: 2025-04-29 21:14:29
来源: Huawei Developer
场景介绍
本章节将向您介绍如何根据地图数据实现聚合效果。
您可以通过比例尺缩放自适应聚合效果，聚合图标可点击。聚合支持功能：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170121.10804505467552149611549143044692:50001231000000:2800:C81B2BECFFD7A4C17810928C1C0BCA18008BBA846F9361FCA5A5203AE15FA583.png)
接口说明
聚合功能主要由ClusterOverlayParams、addClusterOverlay、ClusterOverlay提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| ClusterOverlayParams | 点聚合参数。 |
| addClusterOverlay(params: mapCommon.ClusterOverlayParams): Promise<ClusterOverlay> | 聚合接口，支持节点聚合能力。 |
| ClusterOverlay | 点聚合，支持更新和查询相关属性。 |
接口名
描述
ClusterOverlayParams
点聚合参数。
addClusterOverlay(params:mapCommon.ClusterOverlayParams): Promise<ClusterOverlay>
聚合接口，支持节点聚合能力。
ClusterOverlay
点聚合，支持更新和查询相关属性。
开发步骤
```typescript
import { map, mapCommon, MapComponent } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
```typescript
@Entry
@Component
struct ClusterOverlayDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
aboutToAppear(): void {
this.mapOptions = {
position: {
target: {
latitude: 31.98,
longitude: 118.7
},
zoom: 7
}
}
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
// 生成待聚合点
let clusterItem1: mapCommon.ClusterItem = {
position: {
latitude: 31.98,
longitude: 118.7
}
};
let clusterItem2: mapCommon.ClusterItem = {
position: {
latitude: 32.99,
longitude: 118.9
}
};
let clusterItem3: mapCommon.ClusterItem = {
position: {
latitude: 31.5,
longitude: 118.7
}
};
let clusterItem4: mapCommon.ClusterItem = {
position: {
latitude: 30,
longitude: 118.7
}
};
let clusterItem5: mapCommon.ClusterItem = {
position: {
latitude: 29.98,
longitude: 117.7
}
};
let clusterItem6: mapCommon.ClusterItem = {
position: {
latitude: 31.98,
longitude: 120.7
}
};
let clusterItem7: mapCommon.ClusterItem = {
position: {
latitude: 25.98,
longitude: 119.7
}
};
let clusterItem8: mapCommon.ClusterItem = {
position: {
latitude: 30.98,
longitude: 110.7
}
};
let clusterItem9: mapCommon.ClusterItem = {
position: {
latitude: 30.98,
longitude: 115.7
}
};
let clusterItem10: mapCommon.ClusterItem = {
position: {
latitude: 28.98,
longitude: 122.7
}
};
let array: Array<mapCommon.ClusterItem> = [
clusterItem1,
clusterItem2,
clusterItem3,
clusterItem4,
clusterItem5,
clusterItem6,
clusterItem7,
clusterItem8,
clusterItem9,
clusterItem10
]
for(let index = 0; index < 100; index++){
array.push(clusterItem1)
}
for(let index = 0; index < 10; index++){
array.push(clusterItem2)
}
// 生成聚合图层的入参 聚合distance设置为100vp
let clusterOverlayParams: mapCommon.ClusterOverlayParams = { distance: 100, clusterItems: array };
// 调用addClusterOverlay生成聚合图层
let clusterOverlay: map.ClusterOverlay = await this.mapController.addClusterOverlay(clusterOverlayParams);
}
}
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback })
.width('100%')
.height('100%');
}.width('100%')
}.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-coverings-V14
爬取时间: 2025-04-29 21:14:42
来源: Huawei Developer
场景介绍
地图覆盖物是固定在地图上的图片，本章节将向您介绍如何为地图增加覆盖物。
覆盖物，是一种位于底图和底图标注层之间的特殊Overlay，该图层不会遮挡地图标注信息。通过ImageOverlayParams类来设置，开发者可以通过ImageOverlayParams类设置一张图片，该图片可随地图的平移、缩放、旋转等操作做相应的变换。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170121.65474262543274746565347865452146:50001231000000:2800:21D3AFB7A564D45F8B497994481C53F49174332FAD5848D73C86D3A633CFC2FD.png)
接口说明
增加覆盖物功能主要由ImageOverlayParams、addImageOverlay、ImageOverlay提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| ImageOverlayParams | 覆盖物参数。 |
| addImageOverlay(params: mapCommon.ImageOverlayParams): Promise<ImageOverlay> | 为地图增加覆盖物。 |
| ImageOverlay | 覆盖物，支持更新和查询相关属性。 |
接口名
描述
ImageOverlayParams
覆盖物参数。
addImageOverlay(params:mapCommon.ImageOverlayParams): Promise<ImageOverlay>
为地图增加覆盖物。
ImageOverlay
覆盖物，支持更新和查询相关属性。
开发步骤
```typescript
import { map, mapCommon, MapComponent } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
```typescript
@Entry
@Component
struct ImageOverlayDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
private mapEventManager?: map.MapEventManager;
aboutToAppear(): void {
this.mapOptions = {
position: {
target: {
latitude: 32.2,
longitude: 118.2
},
zoom: 10
}
}
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
this.mapEventManager = this.mapController.getEventManager();
let imageOverlayParams: mapCommon.ImageOverlayParams = {
// 覆盖物范围
bounds: {
southwest: { latitude: 32, longitude: 118 },
northeast: { latitude: 32.4, longitude: 118.4 }
},
// 覆盖物图片
image: 'icon/icon.png',
transparency: 0.3,
zIndex: 101,
anchorU: 0.5,
anchorV: 0.5,
clickable: true,
visible: true,
bearing: 0
};
// 添加覆盖物
let imageOverlay = await this.mapController?.addImageOverlay(imageOverlayParams);
}
}
}
build() {
Stack() {
Column() {
MapComponent({
mapOptions: this.mapOptions,
mapCallback: this.callback,
})
.width('100%')
.height('100%');
}.width('100%')
}.height('100%')
}
}
```
```typescript
let imageOverlayCallback: Callback<map.ImageOverlay> = (imageOverlay: map.ImageOverlay) => {
console.info("imageOverlay callback");
}
// 打开覆盖物的点击监听
this.mapEventManager.on("imageOverlayClick", imageOverlayCallback)
// 关闭覆盖物的点击监听
this.mapEventManager.off("imageOverlayClick", imageOverlayCallback);
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-3dbuilding-V14
爬取时间: 2025-04-29 21:15:01
来源: Huawei Developer
场景介绍
本章节将向您介绍如何在地图上绘制3D建筑。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170121.01158321930515176101264780281057:50001231000000:2800:4920495B7986F2720BBF15E924280AE9B56BD71A2210A97ADB38B37153B61646.gif)
接口说明
添加3D建筑功能主要由BuildingOverlayParams、addBuildingOverlay和BuildingOverlay提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| BuildingOverlayParams | 3D建筑参数。 |
| addBuildingOverlay(params: mapCommon.BuildingOverlayParams): Promise<BuildingOverlay> | 在地图上添加3D建筑。 |
| BuildingOverlay | 3D建筑，支持更新和查询相关属性。 |
接口名
描述
BuildingOverlayParams
3D建筑参数。
addBuildingOverlay(params:mapCommon.BuildingOverlayParams): Promise<BuildingOverlay>
在地图上添加3D建筑。
BuildingOverlay
3D建筑，支持更新和查询相关属性。
开发步骤
添加3D建筑
```typescript
import { mapCommon, map, MapComponent } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
```typescript
@Entry
@Component
struct BuildingOverlayDemo {
private TAG = "OHMapSDK_BuildingOverlayDemo";
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
private buildingOverlay?: map.BuildingOverlay;
aboutToAppear(): void {
// 初始化地图参数
this.mapOptions = {
position: {
target: {
latitude: 31.984794,
longitude: 118.765865
},
zoom: 18
},
scaleControlsEnabled: true
}
this.callback = async (err, mapController) => {
console.info(this.TAG, "addBuildingOverlay");
if (!err) {
this.mapController = mapController;
let points: Array<mapCommon.LatLng> = [
{
latitude: 31.984794,
longitude: 118.765865
},
{
latitude: 31.98468,
longitude: 118.766076
},
{
latitude: 31.98472,
longitude: 118.766116
},
{
latitude: 31.98463,
longitude: 118.766292
},
{
latitude: 31.984586,
longitude: 118.766251
},
{
latitude: 31.984536,
longitude: 118.766344
},
{
latitude: 31.984633,
longitude: 118.766446
},
{
latitude: 31.9848,
longitude: 118.766285
},
{
latitude: 31.984925,
longitude: 118.766312
},
{
latitude: 31.985282,
longitude: 118.766661
},
{
latitude: 31.985438,
longitude: 118.766419
},
{
latitude: 31.985801,
longitude: 118.766755
},
{
latitude: 31.985856,
longitude: 118.766504
},
{
latitude: 31.985785,
longitude: 118.766434
},
{
latitude: 31.985821,
longitude: 118.766278
},
{
latitude: 31.985897,
longitude: 118.766311
},
{
latitude: 31.985944,
longitude: 118.766095
},
{
latitude: 31.985909,
longitude: 118.766069
},
{
latitude: 31.985794,
longitude: 118.765989
},
{
latitude: 31.9857,
longitude: 118.766029
},
{
latitude: 31.985658,
longitude: 118.766164
},
{
latitude: 31.985647,
longitude: 118.766271
},
{
latitude: 31.985574,
longitude: 118.766297
},
{
latitude: 31.985458,
longitude: 118.766285
},
{
latitude: 31.985271,
longitude: 118.766002
},
{
latitude: 31.985219,
longitude: 118.766002
},
{
latitude: 31.985135,
longitude: 118.766029
},
{
latitude: 31.985093,
longitude: 118.766083
},
{
latitude: 31.985019,
longitude: 118.766109
},
{
latitude: 31.984978,
longitude: 118.766083
},
{
latitude: 31.984794,
longitude: 118.765865
}
];
points.reverse();
// 3D建筑参数
let buildingOverlayOptions: mapCommon.BuildingOverlayParams =
{
// 3D建筑的范围参数（点为顺时针绘制）
points: points,
// 3D建筑的高度
totalHeight: 51,
// 3D建筑的选中楼层高度
floorBottomHeight: 33,
// 3D建筑的顶部颜色
topFaceColor: 0xffa4b8f7,
// 3D建筑的侧面颜色
sideFaceColor: 0x44a4b8f7,
// 3D建筑的选中楼层颜色
floorColor: 0xff000000,
// 3D建筑的展示层级
showLevel: 14,
// 3D建筑选中楼层从底部升起的动画时长
animationDuration: 5000,
// 3D建筑侧面的纹理，需要替换您自己的资源图片，存放在resources/base/media目录下
sideTexture: { image: $r("app.media.side_tex"), height: 3, width: 3 },
// 3D建筑选中楼层的纹理，需要替换您自己的资源图片，存放在resources/base/media目录下
floorTexture: { image: $r("app.media.floor_tex"), height: 3, width: 3 }
};
let cameraUpdate = map.newCameraPosition({
target: {
latitude: 31.984794,
longitude: 118.765865
},
zoom: 18, tilt: 70
});
// 将地图镜头移动到3D建筑区域
this.mapController?.moveCamera(cameraUpdate);
// 新建3D建筑
this.buildingOverlay = await this.mapController?.addBuildingOverlay(buildingOverlayOptions);
}
}
}
build() {
Stack() {
Column() {
MapComponent({
mapOptions: this.mapOptions,
mapCallback: this.callback,
}).width('100%').height('100%');
}.width('100%')
}.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-dyntrajectories-V14
爬取时间: 2025-04-29 21:15:17
来源: Huawei Developer
场景介绍
本章节将向您介绍如何在地图上绘制动态轨迹。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170122.26260963009869337260809740735672:50001231000000:2800:C19817A868327CF5D1E3AE6FE62D60650304C47BB8F03F2F0446E492794C1809.gif)
接口说明
绘制动态轨迹功能主要由TraceOverlayParams、addTraceOverlay、Marker和TraceOverlay提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| TraceOverlayParams | 动态轨迹参数。 |
| addTraceOverlay(params: mapCommon.TraceOverlayParams, markers?: Array<Marker>): Promise<TraceOverlay> | 绘制动态轨迹。 |
| Marker | 动态轨迹的一组标记。 |
| TraceOverlay | 动态轨迹，支持暂停和删除等功能。 |
接口名
描述
TraceOverlayParams
动态轨迹参数。
addTraceOverlay(params:mapCommon.TraceOverlayParams, markers?: Array<Marker>): Promise<TraceOverlay>
绘制动态轨迹。
Marker
动态轨迹的一组标记。
TraceOverlay
动态轨迹，支持暂停和删除等功能。
开发步骤
```typescript
import { mapCommon, map, MapComponent } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
```typescript
@Entry
@Component
struct TranceOverLayDemo {
private TAG = "OHMapSDK_TranceOverLayDemo";
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
aboutToAppear(): void {
// 初始化地图参数
this.mapOptions = {
position: {
target: {
latitude: 31.99227173519985,
longitude: 118.7622219990476
},
zoom: 16
},
scaleControlsEnabled: true
}
this.callback = async (err, mapController) => {
console.info(this.TAG, "mapCallback err=" + JSON.stringify(err) +
"; mapController=" + JSON.stringify(mapController));
if (!err) {
this.mapController = mapController;
// marker1的参数
let markerOptions1: mapCommon.MarkerOptions = {
position: {
latitude: 31.99227173519985,
longitude: 118.7622219990476
},
icon: $r("app.media.track_setting_sport_map_marker_22"),
anchorU: 0.5,
anchorV: 1,
visible: true
};
// 新增marker1
let markerBoy1 = await this.mapController.addMarker(markerOptions1);
let boyImages1: map.PlayImageAnimation = new map.PlayImageAnimation();
boyImages1.setDuration(1000);
let resourceArray: Array<Resource> = new Array();
// 需要替换您自己的资源图片，存放在resources/base/media目录下
resourceArray.push($r("app.media.side_0"));
resourceArray.push($r("app.media.side_1"));
resourceArray.push($r("app.media.side_2"));
resourceArray.push($r("app.media.side_3"));
resourceArray.push($r("app.media.side_4"));
resourceArray.push($r("app.media.side_5"));
resourceArray.push($r("app.media.side_6"));
resourceArray.push($r("app.media.side_7"));
resourceArray.push($r("app.media.side_8"));
resourceArray.push($r("app.media.side_9"));
resourceArray.push($r("app.media.side_10"));
resourceArray.push($r("app.media.side_11"));
resourceArray.push($r("app.media.side_12"));
resourceArray.push($r("app.media.side_13"));
resourceArray.push($r("app.media.side_14"));
resourceArray.push($r("app.media.side_15"));
resourceArray.push($r("app.media.side_16"));
resourceArray.push($r("app.media.side_17"));
resourceArray.push($r("app.media.side_18"));
resourceArray.push($r("app.media.side_19"));
resourceArray.push($r("app.media.side_20"));
await boyImages1.addImages(resourceArray);
boyImages1.setRepeatCount(-1);
// marker1添加动画
markerBoy1.setAnimation(boyImages1);
markerBoy1.startAnimation();
// marker2的参数
let markerOptions2: mapCommon.MarkerOptions = {
position: {
latitude: 31.99227173519985,
longitude: 118.7622219990476
},
icon: $r("app.media.track_setting_sport_map_marker_22"),
anchorU: 0.5,
anchorV: 1,
visible: false
};
// 新增marker2
let markerBoy2 = await this.mapController.addMarker(markerOptions2);
let boyImages2: map.PlayImageAnimation = new map.PlayImageAnimation();
boyImages2.setDuration(1000);
let resourceArray2: Array<Resource> = new Array();
// 需要替换您自己的资源图片，存放在resources/base/media目录下
resourceArray2.push($r("app.media.behavior_front_cycling_boy_000"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_001"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_002"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_003"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_004"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_005"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_006"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_007"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_008"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_009"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_010"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_011"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_012"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_013"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_014"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_015"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_016"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_017"));
resourceArray2.push($r("app.media.behavior_front_cycling_boy_018"));
await boyImages2.addImages(resourceArray2);
boyImages2.setRepeatCount(-1);
// marker2添加动画
markerBoy2.setAnimation(boyImages2);
markerBoy2.startAnimation();
let points: Array<mapCommon.LatLng> = new Array();
points.push({ latitude: 31.99685233070878, longitude: 118.75846023442728 });
points.push({ latitude: 31.99671325810786, longitude: 118.75846738985165 });
points.push({ latitude: 31.99659191076709, longitude: 118.7585347621686 });
points.push({ latitude: 31.99648202537233, longitude: 118.7586266510386 });
points.push({ latitude: 31.99637707201552, longitude: 118.75872004590596 });
points.push({ latitude: 31.996278207010903, longitude: 118.75880449946251 });
points.push({ latitude: 31.996187481969695, longitude: 118.7588781960278 });
points.push({ latitude: 31.996092248919354, longitude: 118.75895330554488 });
points.push({ latitude: 31.995962740450565, longitude: 118.75904721407304 });
points.push({ latitude: 31.995792921394, longitude: 118.75916904998051 });
points.push({ latitude: 31.995601885713416, longitude: 118.7593235241019 });
points.push({ latitude: 31.995398221178277, longitude: 118.75949998588176 });
points.push({ latitude: 31.995185902197715, longitude: 118.7596871082939 });
points.push({ latitude: 31.994983473052656, longitude: 118.75987334062296 });
points.push({ latitude: 31.99482433699269, longitude: 118.76002095184032 });
points.push({ latitude: 31.994709073721708, longitude: 118.76012902920532 });
points.push({ latitude: 31.99460732100702, longitude: 118.76023892576234 });
points.push({ latitude: 31.99449284962087, longitude: 118.7603694232856 });
points.push({ latitude: 31.99435358179254, longitude: 118.76053622438056 });
points.push({ latitude: 31.99420771148339, longitude: 118.76072790126692 });
points.push({ latitude: 31.994075194901523, longitude: 118.7609100960977 });
points.push({ latitude: 31.993952686158877, longitude: 118.7610741329013 });
points.push({ latitude: 31.993840180644217, longitude: 118.7612193418965 });
points.push({ latitude: 31.993733787150244, longitude: 118.76135383115654 });
points.push({ latitude: 31.993617206525155, longitude: 118.76150529647698 });
// 动态轨迹的入参
let tranceOptions: mapCommon.TraceOverlayParams = {
// 轨迹点
points: points,
// 轨迹的动画时长
animationDuration: 5000,
// 相机是否跟随动画移动
isMapMoving: true,
// 轨迹的颜色
color: 0xAAFFAA00,
// 轨迹的宽度
width: 20,
// 轨迹的动画回调（回调轨迹点的index）
animationCallback: (pointIndex) => {
// 换成骑行
if (pointIndex === 10) {
markerBoy1.setVisible(false);
markerBoy2.setVisible(true);
}
}
}
let markers: Array<map.Marker> = new Array();
markers.push(markerBoy1, markerBoy2);
// 新增轨迹点动画
let traceOverlay = await this.mapController.addTraceOverlay(tranceOptions, markers);
}
}
}
build() {
Stack() {
Column() {
MapComponent({
mapOptions: this.mapOptions,
mapCallback: this.callback,
}).width('100%').height('100%');
}.width('100%')
}.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-display-order-V14
爬取时间: 2025-04-29 21:15:30
来源: Huawei Developer
场景介绍
本章节将向您介绍如何设置地图元素的层级压盖关系。
设置地图元素的显示顺序，按照从低到高排列，即后面的地图元素会压盖前面的地图元素。
| 枚举 | 枚举值 | 枚举含义 |
| --- | --- | --- |
| OVERLAY | 1 | 覆盖物，包括MapCircle、MapPolygon、MapPolyline、MapArc、ImageOverlay、TraceOverlay。 |
| POI | 2 | 底图Poi。 |
| CUSTOM_POI | 3 | 支持碰撞的覆盖物，包括PointAnnotation、Bubble。 |
| MARKER | 4 | 包括Marker、ClusterOverlay。 |
枚举
枚举值
枚举含义
OVERLAY
1
覆盖物，包括MapCircle、MapPolygon、MapPolyline、MapArc、ImageOverlay、TraceOverlay。
POI
2
底图Poi。
CUSTOM_POI
3
支持碰撞的覆盖物，包括PointAnnotation、Bubble。
MARKER
4
包括Marker、ClusterOverlay。
接口说明
设置层级压盖关系功能主要由MapElementType、setDisplayOrder提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| mapCommon.MapElementType | 地图元素类型。 |
| setDisplayOrder(types: Array<mapCommon.MapElementType>): void | 设置地图元素的显示顺序。 |
接口名
描述
mapCommon.MapElementType
地图元素类型。
setDisplayOrder(types: Array<mapCommon.MapElementType>): void
设置地图元素的显示顺序。
开发步骤
```typescript
import { mapCommon, map, MapComponent } from '@kit.MapKit';
import { AsyncCallback } from '@kit.BasicServicesKit';
```
```typescript
@Entry
@Component
struct MarkerDemo {
private mapOptions?: mapCommon.MapOptions;
private mapController?: map.MapComponentController;
private callback?: AsyncCallback<map.MapComponentController>;
private mapEventManager?: map.MapEventManager;
private marker?: map.Marker;
private bubble?: map.Bubble;
aboutToAppear(): void {
// 地图初始化参数
this.mapOptions = {
position: {
target: {
latitude: 31.984410259206815,
longitude: 118.26625379397866
},
zoom: 10
}
};
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
this.mapEventManager = this.mapController.getEventManager();
// Marker初始化参数
let markerOptions: mapCommon.MarkerOptions = {
position: {
latitude: 31.984410259206815,
longitude: 118.26625379397866
},
rotation: 0,
visible: true,
zIndex: 0,
alpha: 1,
anchorU: 0.5,
anchorV: 1,
clickable: true,
draggable: true,
flat: false
};
// 创建Marker
this.marker = await this.mapController.addMarker(markerOptions);
let bubbleOptions: mapCommon.BubbleParams = {
// 气泡位置
positions: [[{ latitude: 32.384410259206815, longitude: 118.26625379397866 }]],
// 设置图标，必须提供4个方向的图标，图标存放在resources/rawfile
icons: [
'speed_limit_10.png',
'speed_limit_20.png',
'speed_limit_30.png',
'speed_limit_40.png'
],
// 定义气泡的显示属性，为true时，在被碰撞后仍能显示
forceVisible: true,
// 定义气泡碰撞优先级，数值越大，优先级越低
priority: 3,
// 定义气泡展示的最小层级
minZoom: 2,
// 定义气泡展示的最大层级
maxZoom: 20,
// 定义气泡是否可见
visible: true,
// 定义气泡叠加层级属性
zIndex: 1
}
// 添加气泡
this.bubble = await this.mapController.addBubble(bubbleOptions);
let imageOverlayParams: mapCommon.ImageOverlayParams = {
// 覆盖物范围
bounds: {
southwest: { latitude: 32, longitude: 118 },
northeast: { latitude: 32.4, longitude: 118.4 }
},
// 覆盖物图片
image: 'icon/icon.png',
transparency: 0.3,
zIndex: 101,
anchorU: 0.5,
anchorV: 0.5,
clickable: true,
visible: true,
bearing: 0
};
// 添加覆盖物
await this.mapController?.addImageOverlay(imageOverlayParams);
// 设置压盖顺序，最底层的是覆盖物，后面依次是POI、支持碰撞的覆盖物和Marker，Marker在最表面一层
let mapElementTypeArr: Array<mapCommon.MapElementType> = [
mapCommon.MapElementType.OVERLAY,
mapCommon.MapElementType.POI,
mapCommon.MapElementType.CUSTOM_POI,
mapCommon.MapElementType.MARKER];
this.mapController.setDisplayOrder(mapElementTypeArr);
}
};
}
build() {
Stack() {
Column() {
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback });
}.width('100%')
}.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-location-services-V14
爬取时间: 2025-04-29 21:15:44
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-site-search-V14
爬取时间: 2025-04-29 21:15:57
来源: Huawei Developer
场景介绍
提供多种查询Poi信息的能力：
接口说明
以下是Poi搜索相关接口，主要由site命名空间下的方法提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| searchByText(searchByTextParams: SearchByTextParams): Promise<SearchByTextResult> | 关键字搜索。 |
| searchByText(context: common.Context, searchByTextParams: SearchByTextParams): Promise<SearchByTextResult> | 关键字搜索。支持上传Context上下文。 |
| nearbySearch(nearbySearchParams: NearbySearchParams): Promise<NearbySearchResult> | 周边搜索。 |
| nearbySearch(context: common.Context, nearbySearchParams: NearbySearchParams): Promise<NearbySearchResult> | 周边搜索。支持上传Context上下文。 |
| queryAutoComplete(queryAutoCompleteParams: QueryAutoCompleteParams): Promise<QueryAutoCompleteResult> | 自动补全。 |
| queryAutoComplete(context: common.Context, queryAutoCompleteParams: QueryAutoCompleteParams): Promise<QueryAutoCompleteResult> | 自动补全。支持上传Context上下文。 |
| searchById(searchByIdParams: SearchByIdParams): Promise<SearchByIdResult> | 地点详情。 |
| searchById(context: common.Context, searchByIdParams: SearchByIdParams): Promise<SearchByIdResult> | 地点详情。支持上传Context上下文。 |
| SearchByTextParams | 关键字搜索的参数。 |
| NearbySearchParams | 周边搜索的参数。 |
| QueryAutoCompleteParams | 自动补全的参数。 |
| SearchByIdParams | 地点详情的参数。 |
| SearchByTextResult | 关键字搜索的结果。 |
| NearbySearchResult | 周边搜索的结果。 |
| QueryAutoCompleteResult | 自动补全的结果。 |
| SearchByIdResult | 地点详情的结果。 |
接口名
描述
searchByText(searchByTextParams:SearchByTextParams): Promise<SearchByTextResult>
关键字搜索。
searchByText(context:common.Context, searchByTextParams:SearchByTextParams): Promise<SearchByTextResult>
关键字搜索。支持上传Context上下文。
nearbySearch(nearbySearchParams:NearbySearchParams): Promise<NearbySearchResult>
周边搜索。
nearbySearch(context:common.Context, nearbySearchParams:NearbySearchParams): Promise<NearbySearchResult>
周边搜索。支持上传Context上下文。
queryAutoComplete(queryAutoCompleteParams:QueryAutoCompleteParams): Promise<QueryAutoCompleteResult>
自动补全。
queryAutoComplete(context:common.Context, queryAutoCompleteParams:QueryAutoCompleteParams): Promise<QueryAutoCompleteResult>
自动补全。支持上传Context上下文。
searchById(searchByIdParams:SearchByIdParams): Promise<SearchByIdResult>
地点详情。
searchById(context:common.Context, searchByIdParams:SearchByIdParams): Promise<SearchByIdResult>
地点详情。支持上传Context上下文。
SearchByTextParams
关键字搜索的参数。
NearbySearchParams
周边搜索的参数。
QueryAutoCompleteParams
自动补全的参数。
SearchByIdParams
地点详情的参数。
SearchByTextResult
关键字搜索的结果。
NearbySearchResult
周边搜索的结果。
QueryAutoCompleteResult
自动补全的结果。
SearchByIdResult
地点详情的结果。
开发步骤
```typescript
import { site } from '@kit.MapKit';
```
关键字搜索
```typescript
let params: site.SearchByTextParams = {
// 指定关键字
query: "Piazzale Dante, 41, 55049 Viareggio, Tuscany, Italy",
// 经纬度坐标
location: {
latitude: 31.984,
longitude: 118.76625
},
// 指定地理位置的范围半径
radius: 10000,
language: "en"
};
// 返回关键字搜索结果
const result = await site.searchByText(params);
console.info("Succeeded in searching by text.");
```
周边搜索
```typescript
let params: site.NearbySearchParams = {
// 指定关键字
query: "stazione di pomezia",
// 经纬度坐标
location: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
},
// 指定地理位置的范围半径
radius: 5000,
// 指定需要展示的poi类别
poiTypes: ["NATIONAL_RAILWAY_STATION"],
language: "en",
pageIndex: 1,
pageSize: 1
};
// 返回周边搜索结果
const result = await site.nearbySearch(params);
console.info("Succeeded in searching nearby.");
```
自动补全
```typescript
let params: site.QueryAutoCompleteParams = {
// 指定关键字
query: "hotel",
// 经纬度坐标
location: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
},
language: "en",
// 返回子节点
isChildren: true
};
// 返回自动补全结果
const result = await site.queryAutoComplete(params);
console.info("Succeeded in querying.");
```
地点详情
```typescript
let params: site.SearchByIdParams = {
// 指定主键地点ID
siteId: "144129739873977856",
language: "en",
// 返回子节点
isChildren: true
};
// 返回地点详情结果
const result = await site.searchById(params);
console.info("Succeeded in searching.");
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-site-geocode-V14
爬取时间: 2025-04-29 21:16:11
来源: Huawei Developer
场景介绍
提供正地理编码、逆地理编码的能力：
接口说明
以下是地理编码相关接口，主要由site命名空间下的方法提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| geocode(geocodeParams: GeocodeParams): Promise<GeocodeResult> | 正地理编码。 |
| geocode(context: common.Context, geocodeParams: GeocodeParams): Promise<GeocodeResult> | 正地理编码。支持上传Context上下文。 |
| reverseGeocode(reverseGeocodeParams: ReverseGeocodeParams): Promise<ReverseGeocodeResult> | 逆地理编码。 |
| reverseGeocode(context: common.Context, reverseGeocodeParams: ReverseGeocodeParams): Promise<ReverseGeocodeResult> | 逆地理编码。支持上传Context上下文。 |
| GeocodeParams | 正地理编码的参数。 |
| GeocodeResult | 正地理编码的结果。 |
| ReverseGeocodeParams | 逆地理编码的参数。 |
| ReverseGeocodeResult | 逆地理编码的结果。 |
接口名
描述
geocode(geocodeParams:GeocodeParams): Promise<GeocodeResult>
正地理编码。
geocode(context:common.Context, geocodeParams:GeocodeParams): Promise<GeocodeResult>
正地理编码。支持上传Context上下文。
reverseGeocode(reverseGeocodeParams:ReverseGeocodeParams): Promise<ReverseGeocodeResult>
逆地理编码。
reverseGeocode(context:common.Context, reverseGeocodeParams:ReverseGeocodeParams): Promise<ReverseGeocodeResult>
逆地理编码。支持上传Context上下文。
GeocodeParams
正地理编码的参数。
GeocodeResult
正地理编码的结果。
ReverseGeocodeParams
逆地理编码的参数。
ReverseGeocodeResult
逆地理编码的结果。
开发步骤
```typescript
import { site } from '@kit.MapKit';
```
正地理编码
根据地址获取地点的空间坐标，如经纬度，最多返回10条记录。
```typescript
let params: site.GeocodeParams = {
// 地址信息
"query": "Piazzale Dante, 41, 55049 Viareggio",
"language": "en"
};
const result = await site.geocode(params);
console.info("Succeeded in geocoding.");
```
逆地理编码
根据经纬度获取附近200m内地点的详细地址，最多返回11条记录。
```typescript
let params: site.ReverseGeocodeParams = {
// 位置经纬度
location: {
latitude: 31.984410259206815,
longitude: 118.76625379397866
},
language: "en",
radius: 200
};
const result = await site.reverseGeocode(params);
console.info("Succeeded in reversing.");
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-navi-V14
爬取时间: 2025-04-29 21:16:24
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-navi-routes-V14
爬取时间: 2025-04-29 21:16:37
来源: Huawei Developer
场景介绍
提供两点之间驾车、步行、骑行的路径规划能力。其中驾车路径规划支持添加途径点。
接口说明
以下是路径规划功能相关接口，主要由navi命名空间下的方法提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| getDrivingRoutes(params: DrivingRouteParams): Promise<RouteResult> | 驾车路径规划。 |
| getDrivingRoutes(context: common.Context, params: DrivingRouteParams): Promise<RouteResult> | 驾车路径规划。支持传入Context上下文。 |
| getWalkingRoutes(params: RouteParams): Promise<RouteResult> | 步行路径规划。 |
| getWalkingRoutes(context: common.Context, params: RouteParams): Promise<RouteResult> | 步行路径规划。支持传入Context上下文。 |
| getCyclingRoutes(params: RouteParams): Promise<RouteResult> | 骑行路径规划。 |
| getCyclingRoutes(context: common.Context, params: RouteParams): Promise<RouteResult> | 骑行路径规划。支持传入Context上下文。 |
| DrivingRouteParams | 驾车路径规划的参数。 |
| RouteParams | 步行、骑行路径规划的参数。 |
| RouteResult | 路径规划的结果。 |
接口名
描述
getDrivingRoutes(params:DrivingRouteParams): Promise<RouteResult>
驾车路径规划。
getDrivingRoutes(context:common.Context, params:DrivingRouteParams): Promise<RouteResult>
驾车路径规划。支持传入Context上下文。
getWalkingRoutes(params:RouteParams): Promise<RouteResult>
步行路径规划。
getWalkingRoutes(context:common.Context, params:RouteParams): Promise<RouteResult>
步行路径规划。支持传入Context上下文。
getCyclingRoutes(params:RouteParams): Promise<RouteResult>
骑行路径规划。
getCyclingRoutes(context:common.Context, params:RouteParams): Promise<RouteResult>
骑行路径规划。支持传入Context上下文。
DrivingRouteParams
驾车路径规划的参数。
RouteParams
步行、骑行路径规划的参数。
RouteResult
路径规划的结果。
开发步骤
```typescript
import { navi } from '@kit.MapKit';
```
驾车路径规划
根据起终点坐标检索符合条件的驾车路径规划方案。支持以下功能：
```typescript
async testDrivingRoutes(){
let params: navi.DrivingRouteParams = {
// 起点的经纬度
origins: [{
"latitude": 31.982129213545843,
"longitude": 120.27745557768591
}],
// 终点的经纬度
destination: {
"latitude": 31.982129213545843,
"longitude": 120.27745557768591
},
// 路径的途经点
waypoints: [{ "latitude": 31.967236140819114, "longitude": 120.27142088866847 },
{ "latitude": 31.972868002238872, "longitude": 120.2943211817165 },
{ "latitude": 31.98469327973332, "longitude": 120.29101107384068 }],
language: "zh_CN"
};
const result = await navi.getDrivingRoutes(params);
console.info("Succeeded in getting driving routes.");
}
```
步行路径规划
根据起终点坐标检索符合条件的步行路径规划方案。支持以下功能：
```typescript
async testWalkingRoutes(){
let params: navi.RouteParams = {
// 起点的经纬度
origins: [{ "latitude": 39.992281, "longitude": 116.31088 }, { "latitude": 39.996, "longitude": 116.311 }],
// 终点的经纬度
destination: { "latitude": 39.94, "longitude": 116.311 },
language: "zh_CN"
};
const result = await navi.getWalkingRoutes(params);
console.info("Succeeded in getting walking routes.");
}
```
骑行路径规划
根据起终点坐标检索符合条件的骑行路径规划方案。支持以下功能：
```typescript
async testCyclingRoutes() {
let params: navi.RouteParams = {
// 起点的经纬度
origins: [{ latitude: 31.9844102, longitude: 118.7662537 }],
// 终点的经纬度
destination: { latitude: 31.9874102, longitude: 118.7362537 },
language: "zh_CN"
};
const result = await navi.getCyclingRoutes(params);
console.info("Succeeded in getting cycling routes.");
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-navi-matrix-V14
爬取时间: 2025-04-29 21:16:51
来源: Huawei Developer
场景介绍
多个起点到多个终点的批量算路功能，在驾车、步行、骑行模式下，快速批量计算多个起点分别到多个终点的路线距离和耗时。
接口说明
以下是路径规划功能相关接口，主要由navi命名空间下的方法提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| getDrivingMatrix(params: DrivingMatrixParams): Promise<MatrixResult> | 驾车批量算路。 |
| getDrivingMatrix(context: common.Context, params: DrivingMatrixParams): Promise<MatrixResult> | 驾车批量算路。支持传入Context上下文。 |
| getWalkingMatrix(params: MatrixParams): Promise<MatrixResult> | 步行批量算路。 |
| getWalkingMatrix(context: common.Context, params: MatrixParams): Promise<MatrixResult> | 步行批量算路。支持传入Context上下文。 |
| getCyclingMatrix(params: MatrixParams): Promise<MatrixResult> | 骑行批量算路。 |
| getCyclingMatrix(context: common.Context, params: MatrixParams): Promise<MatrixResult> | 骑行批量算路。支持传入Context上下文。 |
| DrivingMatrixParams | 驾车批量算路的参数。 |
| MatrixParams | 步行、骑行批量算路的参数。 |
| MatrixResult | 批量算路的结果。 |
接口名
描述
getDrivingMatrix(params:DrivingMatrixParams): Promise<MatrixResult>
驾车批量算路。
getDrivingMatrix(context:common.Context, params:DrivingMatrixParams): Promise<MatrixResult>
驾车批量算路。支持传入Context上下文。
getWalkingMatrix(params:MatrixParams): Promise<MatrixResult>
步行批量算路。
getWalkingMatrix(context:common.Context, params:MatrixParams): Promise<MatrixResult>
步行批量算路。支持传入Context上下文。
getCyclingMatrix(params:MatrixParams): Promise<MatrixResult>
骑行批量算路。
getCyclingMatrix(context:common.Context, params:MatrixParams): Promise<MatrixResult>
骑行批量算路。支持传入Context上下文。
DrivingMatrixParams
驾车批量算路的参数。
MatrixParams
步行、骑行批量算路的参数。
MatrixResult
批量算路的结果。
开发步骤
```typescript
import { navi } from '@kit.MapKit';
```
驾车批量算路
根据多组起终点坐标批量检索符合条件的驾车路径规划方案。支持以下功能：
限制：起点数乘以终点数需小于100。
```typescript
async testDrivingMatrix() {
let params: navi.DrivingMatrixParams = {
// 起点的经纬度
"origins": [
{ "latitude": 31.9844, "longitude": 118.766253 },
{ "latitude": 31.9644, "longitude": 118.746253 }
],
// 终点的经纬度
"destinations": [
{ "latitude": 31.9344, "longitude": 118.706253 }
],
// 时间预估模型
"trafficMode": 2,
"language": "zh_CN"
};
const result = await navi.getDrivingMatrix(params);
console.info("Succeeded in getting driving matrix.");
}
```
步行批量算路
根据多组起终点坐标批量检索符合条件的步行路径规划方案。支持以下功能：
限制：起点数乘以终点数需小于100。
```typescript
async testWalkingMatrix() {
let params: navi.MatrixParams = {
// 起点的经纬度
"origins": [
{ "latitude": 31.9844, "longitude": 118.766253 },
{ "latitude": 31.9644, "longitude": 118.746253 }
],
// 终点的经纬度
"destinations": [{ "latitude": 31.9344, "longitude": 118.706253 }],
"language": "zh_CN"
};
const result = await navi.getWalkingMatrix(params);
console.info("Succeeded in getting walking matrix.");
}
```
骑行批量算路
根据多组起终点坐标批量检索符合条件的骑行路径规划方案。支持以下功能：
限制：起点数乘以终点数需小于100。
```typescript
async testCyclingMatrix() {
let params: navi.MatrixParams = {
// 起点的经纬度
"origins": [
{ "latitude": 31.9844, "longitude": 118.766253 },
{ "latitude": 31.9644, "longitude": 118.746253 }
],
// 终点的经纬度
"destinations": [{ "latitude": 31.9344, "longitude": 118.706253 }],
"language": "zh_CN"
};
const result = await navi.getCyclingMatrix(params);
console.info("Succeeded in getting cycling matrix.");
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-navi-snap-V14
爬取时间: 2025-04-29 21:17:04
来源: Huawei Developer
场景介绍
根据给定的坐标点捕捉道路，将用户的轨迹纠正到道路上，从而返回用户实际驾车经过的道路坐标。
接口说明
以下是路径规划功能相关接口，主要由navi命名空间下的方法提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| SnapToRoadsParams | 轨迹绑路的参数。 |
| snapToRoads(params: SnapToRoadsParams): Promise<SnapToRoadsResult> | 轨迹绑路。 |
| snapToRoads(context: common.Context, params: SnapToRoadsParams): Promise<SnapToRoadsResult> | 轨迹绑路。支持传入Context上下文。 |
| SnapToRoadsResult | 轨迹绑路的结果。 |
接口名
描述
SnapToRoadsParams
轨迹绑路的参数。
snapToRoads(params:SnapToRoadsParams): Promise<SnapToRoadsResult>
轨迹绑路。
snapToRoads(context:common.Context, params:SnapToRoadsParams): Promise<SnapToRoadsResult>
轨迹绑路。支持传入Context上下文。
SnapToRoadsResult
轨迹绑路的结果。
开发步骤
```typescript
import { navi } from '@kit.MapKit';
```
轨迹绑路
```typescript
async testSnapToRoads() {
let params: navi.SnapToRoadsParams = {
// 道路贴合点集合，不能超过100个，且相邻两个点距离需小于等于500米
points: [{
latitude: 31.984410259206815,
longitude: 118.76625379397866
}]
};
const result = await navi.snapToRoads(params);
console.info("Succeeded in snapping to roads.");
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-static-diagram-V14
爬取时间: 2025-04-29 21:17:18
来源: Huawei Developer
场景介绍
本章节将向您介绍如何使用静态图功能。静态图功能会返回一张地图图片，您可以将地图以图片形式嵌入自己的应用/元服务中。在使用时，您可以指定请求的地图位置、图片大小。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170122.72545554365453811580656747508359:50001231000000:2800:721EEA173E742A04AD98E7EDC53A534DC26047EFB6951E6EDFD417BB9DE00E2E.png)
接口说明
以下是地图静态图相关接口，获取静态图功能主要由staticMap命名空间下的方法提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| StaticMapOptions | 用于描述静态图属性。 |
| getMapImage(options: StaticMapOptions): Promise<image.PixelMap> | 根据提供的参数创建静态图。 |
| getMapImage(context: common.Context, options: StaticMapOptions): Promise<image.PixelMap> | 根据提供的参数创建静态图。支持上传Context上下文。 |
接口名
描述
StaticMapOptions
用于描述静态图属性。
getMapImage(options:StaticMapOptions): Promise<image.PixelMap>
根据提供的参数创建静态图。
getMapImage(context:common.Context, options:StaticMapOptions): Promise<image.PixelMap>
根据提供的参数创建静态图。支持上传Context上下文。
开发步骤
```typescript
import { staticMap } from '@kit.MapKit';
```
```typescript
@Entry
@Component
struct StaticMapDemo {
@State image?: PixelMap = undefined;
build() {
Column() {
this.buildDemoUI();
}.width('100%')
.margin({ bottom: 48 })
.backgroundColor(0xf2f2f2)
.height('100%')
}
@Builder
buildDemoUI() {
// 展示获取的静态图
Image(this.image)
.width('100%')
.fitOriginalSize(false)
.border({ width: 1 })
.borderStyle(BorderStyle.Dashed)
.objectFit(ImageFit.Contain)
.height("90%")
Row() {
Button("getStaticMap")
.fontSize(12)
.onClick(async () => {
// 设置静态图标记参数
let markers: Array<staticMap.StaticMapMarker> = [{
location: {
latitude: 50,
longitude: 126.3
},
font: 'statics',
defaultIconSize: staticMap.IconSize.TINY
}];
// 设置静态图绘制路径参数
let path: staticMap.StaticMapPath = {
locations: [
{
latitude: 50,
longitude: 126
},
{
latitude: 50.3,
longitude: 126
},
{
latitude: 50.3,
longitude: 126.3
},
{
latitude: 49.7,
longitude: 126
},
{
latitude: 50,
longitude: 126
}
],
width: 3
};
// 拼装静态图参数
let option: staticMap.StaticMapOptions = {
location: {
latitude: 50,
longitude: 126
},
zoom: 10,
imageWidth: 1024,
imageHeight: 1024,
scale: 1,
markers: markers,
path: path
};
// 获取静态图
await staticMap.getMapImage(option).then((value) => {
this.image = value;
console.info("Succeeded in getting image.");
});
})
}.margin({ top: 12 })
}
}
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170123.31383923821283283888372519527743:50001231000000:2800:C379B3A9E09C2F905F21F60DE85E5706DA7EF0D6C0A321B59F4FA2944E330780.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-advanced-controls-V14
爬取时间: 2025-04-29 21:17:31
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-location-details-V14
爬取时间: 2025-04-29 21:17:44
来源: Huawei Developer
场景介绍
本章节将向您介绍如何集成地点详情展示控件，您无需自己开发地图页面，可快速实现查看地点详情展示功能。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170123.63180502136194667656193464366417:50001231000000:2800:17EAC03987E3BD450F406D61A58E1156824BCBC14EB755BC120C1E0584429CBE.png)
接口说明
地点详情控件功能主要由sceneMap命名空间下的queryLocation方法提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| LocationQueryOptions | 查询地点详情的参数。 |
| queryLocation(context: common.UIAbilityContext, options: LocationQueryOptions): Promise<void> | 查询地点详情。 |
接口名
描述
LocationQueryOptions
查询地点详情的参数。
queryLocation(context: common.UIAbilityContext, options:LocationQueryOptions): Promise<void>
查询地点详情。
开发步骤
```typescript
import { sceneMap } from '@kit.MapKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { common } from '@kit.AbilityKit';
```
```typescript
let queryLocationOptions: sceneMap.LocationQueryOptions = { siteId: "922207154068557824" };
// 拉起地点详情页
sceneMap.queryLocation(getContext(this) as common.UIAbilityContext, queryLocationOptions).then(() => {
console.info("QueryLocation", "Succeeded in querying location.");
}).catch((err: BusinessError) => {
console.error("QueryLocation", `Failed to query Location, code: ${err.code}, message: ${err.message}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-location-selecting-V14
爬取时间: 2025-04-29 21:17:57
来源: Huawei Developer
场景介绍
本章节将向您介绍如何集成地点选取控件，您无需自己开发地图页面，可快速实现地点选取的能力。
|  |  |
| --- | --- |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170123.10556464657263723852374364913676:50001231000000:2800:9444E9F273915CE072670AD2EF8454F80E511111BEB7194B61E04F27F4204B56.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170123.92603025412853424626435034655353:50001231000000:2800:31797F1D474D3CC4BBB24A078BE84B6AE326A0B272B9B65EDCEC1D007703212F.png)
接口说明
地点选取控件功能主要由sceneMap命名空间下的chooseLocation方法提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| LocationChoosingOptions | 地点选取的参数。 |
| chooseLocation(context: common.UIAbilityContext, options: LocationChoosingOptions): Promise<LocationChoosingResult> | 地点选取。 |
| LocationChoosingResult | 地点选取的返回结果。 |
接口名
描述
LocationChoosingOptions
地点选取的参数。
chooseLocation(context: common.UIAbilityContext, options:LocationChoosingOptions): Promise<LocationChoosingResult>
地点选取。
LocationChoosingResult
地点选取的返回结果。
开发步骤
```typescript
import { sceneMap } from '@kit.MapKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { common } from '@kit.AbilityKit';
```
```typescript
let locationChoosingOptions: sceneMap.LocationChoosingOptions = {
// 地图中心点坐标
location: { latitude: 39.92194051376904, longitude: 116.3971836796932 },
language: 'en',
// 展示搜索控件
searchEnabled: true,
// 展示附近Poi
showNearbyPoi: true
};
// 拉起地点选取页
sceneMap.chooseLocation(getContext(this) as common.UIAbilityContext, locationChoosingOptions).then((data) => {
console.info("ChooseLocation", "Succeeded in choosing location.");
}).catch((err: BusinessError) => {
console.error("ChooseLocation", `Failed to choose location, code: ${err.code}, message: ${err.message}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-location-division-V14
爬取时间: 2025-04-29 21:18:11
来源: Huawei Developer
场景介绍
本章节将向您介绍如何集成区划选择控件。
区划选择控件可加载全球或指定国家的区划信息，支持以树状结构化选择。支持功能：
|   图1 选择国家  |   图2 选择省市   |
| --- | --- |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170123.53466695049496538429294265303961:50001231000000:2800:E41501E31DA5E88585BC68237D1E88F019311C726B8BC0DA733039A42B1E82C6.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170123.03858060104013158328985739846683:50001231000000:2800:8B464D7A4C6AF241D996B055F053F3A549DA4F851CA8F4BFE97AEA4ED3B963B6.png)
接口说明
区划选择控件功能主要由sceneMap命名空间下的selectDistrict方法提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| DistrictSelectOptions | 区划选择页面初始选项。 |
| selectDistrict(context: common.Context, options: DistrictSelectOptions): Promise<DistrictSelectResult> | 调出区划选择页面。 |
| DistrictSelectResult | 区划选择结果。 |
接口名
描述
DistrictSelectOptions
区划选择页面初始选项。
selectDistrict(context:common.Context, options:DistrictSelectOptions): Promise<DistrictSelectResult>
调出区划选择页面。
DistrictSelectResult
区划选择结果。
开发步骤
```typescript
import { sceneMap } from '@kit.MapKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
```typescript
let districtSelectOptions: sceneMap.DistrictSelectOptions= {
countryCode: "CN"
};
// 拉起区划选择页
sceneMap.selectDistrict(getContext(this), districtSelectOptions).then((data) => {
console.info("SelectDistrict", "Succeeded in selecting district.");
}).catch((err: BusinessError) => {
console.error("SelectDistrict", `Failed to select district, code: ${err.code}, message: ${err.message}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-petalmaps-V14
爬取时间: 2025-04-29 21:18:24
来源: Huawei Developer
通过AppLinking拉起Petal Maps鸿蒙应用APP
Petal 地图提供了通过AppLinking拉起应用的能力。 当前可以通过AppLinking拉起地图应用到首页、路径规划、导航、地点详情、地点搜索页面。
该功能支持的Petal 地图应用版本大于等于1.7.0.300。
| 接口名称  | 接口调用方向  | 接口描述  |
| --- | --- | --- |
| 拉起Petal 地图 APP  | Map Kit或三方应用 -> Petal 地图 APP  | HarmonyOS系统openLink接口。  |
接口名称
接口调用方向
接口描述
拉起Petal 地图 APP
Map Kit或三方应用 -> Petal 地图 APP
HarmonyOS系统openLink接口。
拉起方实现跳转
通过openLink接口拉起。将appLinkingOnly参数设为true，若有匹配的应用，则直接打开目标应用。若无App Linking匹配的应用, 目前openLink接口会抛异常给开发者进行处理。鸿蒙将会支持，在没有安装应用时候，牵引用户到应用市场进行下载。
Petal 地图使用的坐标类型
在国内站点，中国大陆使用GCJ02坐标系，中国台湾使用WGS84坐标系。
在海外站点，统一使用WGS84坐标系。坐标系转换参考：地图坐标系说明及转换。
拉起Petal 地图首页
```typescript
import { common } from '@kit.AbilityKit';
const uri = 'https://www.petalmaps.com/?utm_source=fb';
let context = getContext(this) as common.UIAbilityContext;
context.openLink(uri, {
appLinkingOnly: true
})
```
| 参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| uri  | string  | 是  | 拉起页面地址，https://www.petalmaps.com。  |
参数名
类型
必填
说明
uri
string
是
拉起页面地址，https://www.petalmaps.com。
| 参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| utm_source  | string  | 是  | 接入方业务名或包名，Link请求来源。  |
参数名
类型
必填
说明
utm_source
string
是
接入方业务名或包名，Link请求来源。
-
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170123.04979206741766816443173318678782:50001231000000:2800:95584BEEFAE2CB758BC0D2B3FCA287B46A9D59BE9F3BDB79F347BB72A5695CE7.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170123.08185853774495551052303222211263:50001231000000:2800:CF239ECDCD43FB3E3F165873BDFA6497FAADCD2F7CCEA6F69DA729147C9ACBC8.png)
拉起Petal 地图查看位置详情
```typescript
import { common } from '@kit.AbilityKit';
const uri = 'https://www.petalmaps.com/place/?z=16&marker=48.2944863308775,4.07333135604859&placeId=653905656638747008&utm_source=fb';
let context = getContext(this) as common.UIAbilityContext;
context.openLink(uri, {
appLinkingOnly: true
})
```
| 参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| uri  | string  | 是  | 拉起页面地址，https://www.petalmaps.com/place。  |
参数名
类型
必填
说明
uri
string
是
拉起页面地址，https://www.petalmaps.com/place。
| 参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| utm_source  | string  | 是  | 接入方业务名或包名，Link请求来源。  |
| marker  | string  | 是  | 位置纬经度。  |
| placeId  | string  | 否  | 位置ID，如果有，优先使用。如果没有填写placeId，则调用逆地理接口，展示位置及其对应的纬经度。  |
| z  | string  | 否  | z取层级范围3~20的整数，不符合或不填则按照默认层级展示。  |
| coordinateType  | string  | 否  | 传入的纬经度的坐标系类型。0-WGS84，1-GCJ02，默认GCJ02。  |
参数名
类型
必填
说明
utm_source
string
是
接入方业务名或包名，Link请求来源。
marker
string
是
位置纬经度。
placeId
string
否
位置ID，如果有，优先使用。如果没有填写placeId，则调用逆地理接口，展示位置及其对应的纬经度。
z
string
否
z取层级范围3~20的整数，不符合或不填则按照默认层级展示。
coordinateType
string
否
传入的纬经度的坐标系类型。0-WGS84，1-GCJ02，默认GCJ02。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170123.41893007185128420321663697057770:50001231000000:2800:8684B929189EB37D7B9AC149425C115DDD25FD61CC60FE9758E2A405CB93BDB5.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170123.79112459369750649497495579224115:50001231000000:2800:64BC1F09C9D2684D9763252773304E0DC2E775AB5688FA65D96B0C614B88A0E2.jpg)
拉起Petal 地图查看路径规划
```typescript
import { common } from '@kit.AbilityKit';
const uri = 'https://www.petalmaps.com/routes/?saddr=25.102916,55.165363&daddr=25.164610000000,55.228869000000&type=walk&utm_source=fb';
let context = getContext(this) as common.UIAbilityContext;
context.openLink(uri, {
appLinkingOnly: true
});
```
| 参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| uri  | string  | 是  | 拉起页面地址，https://www.petalmaps.com/routes。  |
参数名
类型
必填
说明
uri
string
是
拉起页面地址，https://www.petalmaps.com/routes。
| 参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| utm_source  | string  | 是  | Link请求来源，接入方业务名或包名。  |
| saddr  | string  | 否  | 起点纬经度(纬度在前，经度在后)，默认取当前位置。支持纬经度+名称, 名称括号为英文格式，中间可以有空格。例：48.883653,2.311279(中 软国际)，名称括号为英文格式，中间可以有空格，拉起地图后起终点显示中软国际。支持家或公司, 家对应参数值为home公司的参数值为company，没有设置家或公司则拉起设置页。  |
| daddr  | string  | 是  | 终点纬经度(纬度在前，经度在后), 支持纬经度+名称, 名称括号为英文格式，中间可以有空格。例：48.883653,2.311279(中 软国际)，名称括号为英文格式，中间可以有空格，拉起地图后起终点显示中软国际。支持家或公司, 家对应参数值为home公司的参数值为company，没有设置家或公司则拉起设置页。  |
| type  | string  | 否  | 交通出行工具。drive(驾车)、bus(公交)、walk(步行)、bicycle(骑行), 不填或者错误格式会默认是驾车。  |
| coordinateType  | string  | 否  | 传入的纬经度的坐标系类型。0-WGS84，1-GCJ02，默认GCJ02。  |
参数名
类型
必填
说明
utm_source
string
是
Link请求来源，接入方业务名或包名。
saddr
string
否
起点纬经度(纬度在前，经度在后)，默认取当前位置。支持纬经度+名称, 名称括号为英文格式，中间可以有空格。例：48.883653,2.311279(中 软国际)，名称括号为英文格式，中间可以有空格，拉起地图后起终点显示中软国际。支持家或公司, 家对应参数值为home公司的参数值为company，没有设置家或公司则拉起设置页。
daddr
string
是
终点纬经度(纬度在前，经度在后), 支持纬经度+名称, 名称括号为英文格式，中间可以有空格。例：48.883653,2.311279(中 软国际)，名称括号为英文格式，中间可以有空格，拉起地图后起终点显示中软国际。支持家或公司, 家对应参数值为home公司的参数值为company，没有设置家或公司则拉起设置页。
type
string
否
交通出行工具。drive(驾车)、bus(公交)、walk(步行)、bicycle(骑行), 不填或者错误格式会默认是驾车。
coordinateType
string
否
传入的纬经度的坐标系类型。0-WGS84，1-GCJ02，默认GCJ02。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170124.13896635561146289381605358151023:50001231000000:2800:3619D3BBB87CEEC56DBCC2D9BDF286AE30772615E315E8CC00EF6F2D451521FE.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170124.02816892463965239472982687667063:50001231000000:2800:67C65A09D4E4B95031AE2587977EE1012B1F3DDAD0AEF15918FEC1381E1D4CD7.jpg)
拉起Petal 地图发起导航
```typescript
import { common } from '@kit.AbilityKit';
const uri = 'https://www.petalmaps.com/navigation/?saddr=31.97655,118.568523(测试1)&daddr=31.8888,118.6584722(测试2)&type=drive&utm_source=ft';
let context = getContext(this) as common.UIAbilityContext
context.openLink(uri, {
appLinkingOnly: true
})
```
| 参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| uri  | string  | 是  | 拉起页面地址, https://www.petalmaps.com/navigation。  |
参数名
类型
必填
说明
uri
string
是
拉起页面地址, https://www.petalmaps.com/navigation。
| 参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| utm_source  | string  | 是  | Link请求来源，接入方业务名或包名。  |
| saddr  | string  | 否  | 起点纬经度(纬度在前，经度在后)，默认取当前位置。支持纬经度+名称。支持家或公司。  |
| daddr  | string  | 是  | 终点纬经度(纬度在前，经度在后)，支持纬经度+名称。支持家或公司。  |
| type  | string  | 否  | 交通出行工具。drive(驾车)、bus(公交)、walk(步行)、bicycle(骑行), 不填或者错误格式会默认是驾车。如果填bus拉起地图后会停留在路线规划页面，不会发起导航。  |
| coordinateType  | string  | 否  | 传入的纬经度的坐标系类型。0-WGS84，1-GCJ02，默认GCJ02 。  |
参数名
类型
必填
说明
utm_source
string
是
Link请求来源，接入方业务名或包名。
saddr
string
否
起点纬经度(纬度在前，经度在后)，默认取当前位置。支持纬经度+名称。支持家或公司。
daddr
string
是
终点纬经度(纬度在前，经度在后)，支持纬经度+名称。支持家或公司。
type
string
否
交通出行工具。drive(驾车)、bus(公交)、walk(步行)、bicycle(骑行), 不填或者错误格式会默认是驾车。如果填bus拉起地图后会停留在路线规划页面，不会发起导航。
coordinateType
string
否
传入的纬经度的坐标系类型。0-WGS84，1-GCJ02，默认GCJ02 。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170124.82734376491166628766173758095998:50001231000000:2800:7AD81159BFD5C9CA34C3D2FBB2F175B0C00537700A8685EF059AB7497F15764A.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170124.73159384155346008309538940901438:50001231000000:2800:D95EDE0F23286BED1A61D5F199C24E607B6B17BE85DE299A04DC797DD26FB436.jpg)
拉起Petal 地图进行位置搜索
```typescript
import { common } from '@kit.AbilityKit';
const uri = 'https://www.petalmaps.com/search/?q=coffee&utm_source=fb';
let context = getContext(this) as common.UIAbilityContext;
context.openLink(uri, {
appLinkingOnly: true
})
```
| 参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| uri  | string  | 是  | 拉起页面地址，https://www.petalmaps.com/search。  |
参数名
类型
必填
说明
uri
string
是
拉起页面地址，https://www.petalmaps.com/search。
| 参数名  | 类型  | 必填  | 说明  |
| --- | --- | --- | --- |
| utm_source  | string  | 是  | Link请求来源，接入方业务名或包名。  |
| q  | string  | 是  | 位置名称。  |
参数名
类型
必填
说明
utm_source
string
是
Link请求来源，接入方业务名或包名。
q
string
是
位置名称。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170124.49704183095014927128229585629762:50001231000000:2800:FB0AC4DBD02CD7628528E6834BD47AD08ED91B0F25AA026A730D4F590EF0BE7F.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170124.87621373829910401599343507627527:50001231000000:2800:E27E3A4A42D2C73F2776BB34E5BDA9BEC7798AB0853DBDAF5A6556DF4B31E9CF.jpg)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-calculation-tool-V14
爬取时间: 2025-04-29 21:18:37
来源: Huawei Developer
坐标系知识介绍
华为地图涉及2种坐标系：
华为地图使用的坐标类型
中国大陆、中国香港和中国澳门使用GCJ02坐标系，中国台湾和海外使用WGS84坐标系。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-convert-coordinate-V14
爬取时间: 2025-04-29 21:18:51
来源: Huawei Developer
场景介绍
华为地图在中国大陆使用GCJ02坐标系，若使用WGS84坐标系直接叠加在华为地图上，因坐标值不同，展示位置会有偏移。所以，在中国大陆如果使用WGS84坐标调用Map Kit服务，需要先将其转换为GCJ02坐标系再访问。
接口说明
以下是坐标转换功能相关接口，主要由map命名空间下的convertCoordinateSync、rectifyCoordinate方法提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| mapCommon.CoordinateType | 坐标系类型。 |
| convertCoordinateSync(fromType: mapCommon.CoordinateType, toType: mapCommon.CoordinateType, location: mapCommon.LatLng): mapCommon.LatLng | 坐标转换，将WGS84坐标系转换为GCJ02坐标系。 |
| rectifyCoordinate(context: common.Context, locations: Array<mapCommon.CoordinateLatLng>): Promise<Array<mapCommon.CoordinateLatLng>> | 坐标纠偏。 |
| mapCommon.LatLng | 经纬度对象。 |
接口名
描述
mapCommon.CoordinateType
坐标系类型。
convertCoordinateSync(fromType:mapCommon.CoordinateType, toType:mapCommon.CoordinateType, location:mapCommon.LatLng):mapCommon.LatLng
坐标转换，将WGS84坐标系转换为GCJ02坐标系。
rectifyCoordinate(context:common.Context, locations: Array<mapCommon.CoordinateLatLng>): Promise<Array<mapCommon.CoordinateLatLng>>
坐标纠偏。
mapCommon.LatLng
经纬度对象。
开发步骤
```typescript
import { map, mapCommon } from '@kit.MapKit';
```
坐标转换
```typescript
let wgs84Position: mapCommon.LatLng = {
latitude: 30,
longitude: 118
};
// 转换经纬度坐标
let gcj02Position: mapCommon.LatLng =
map.convertCoordinateSync(mapCommon.CoordinateType.WGS84, mapCommon.CoordinateType.GCJ02, wgs84Position);
```
坐标纠偏
rectifyCoordinate接口根据输入的坐标系和坐标，判断是否需要纠偏坐标，规则如下：
-  检查传入的坐标是否在大陆/港澳地区，如果不在，返回WGS84坐标系和输入的原始坐标，否则返回GCJ02坐标系和输入的原始坐标。
-  返回WGS84坐标系和输入的原始坐标。
-  检查传入的坐标是否在大陆/港澳地区，如果在，返回GCJ02坐标系和转换后的坐标，否则返回WGS84坐标系和输入的原始坐标。
-  返回WGS84坐标系和输入的原始坐标。
rectifyCoordinate接口仅为解决原始坐标与华为地图展示偏转的问题。
```typescript
let locations: Array<mapCommon.CoordinateLatLng> = [
{
// 输入巴黎坐标和GCJ02坐标系，返回WGS84坐标系和输入的巴黎坐标
coordinateType: mapCommon.CoordinateType.GCJ02,
location: { latitude: 42.860000, longitude: 2.340000 }
},
{
// 输入香港坐标和GCJ02坐标系，返回GCJ02坐标系和输入的香港坐标
coordinateType: mapCommon.CoordinateType.GCJ02,
location: { latitude: 22.280556, longitude: 114.984000 }
},
{
// 输入香港坐标和WGS84坐标系，若当前地图站点使用GCJ02坐标系，返回GCJ02坐标系和转换后的香港坐标，
// 若当前地图站点使用WGS84坐标系，返回WGS84坐标系和原香港坐标
coordinateType: mapCommon.CoordinateType.WGS84,
location: { latitude: 22.280556, longitude: 114.984000 }
},
{
// 输入巴黎坐标和WGS84坐标系，返回WGS84坐标系和输入的巴黎坐标
coordinateType: mapCommon.CoordinateType.WGS84,
location: { latitude: 42.860000, longitude: 2.340000 }
}
];
// 包含await的外层方法需要添加async关键字
let arr: Array<mapCommon.CoordinateLatLng> = await map.rectifyCoordinate(getContext(), locations);
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-calculate-distance-V14
爬取时间: 2025-04-29 21:19:05
来源: Huawei Developer
场景介绍
根据用户指定的两个经纬度坐标点，计算这两个点间的直线距离，单位为米。
接口说明
以下是距离计算功能相关接口，主要由map命名空间下的calculateDistance方法提供，更多接口及使用方法请参见接口文档。
| 接口名 | 描述 |
| --- | --- |
| mapCommon.LatLng | 经纬度对象。 |
| calculateDistance(from: mapCommon.LatLng, to: mapCommon.LatLng): number | 计算坐标点之间的距离。 |
接口名
描述
mapCommon.LatLng
经纬度对象。
calculateDistance(from:mapCommon.LatLng, to:mapCommon.LatLng): number
计算坐标点之间的距离。
开发步骤
```typescript
import { map, mapCommon } from '@kit.MapKit';
```
```typescript
let fromLatLng: mapCommon.LatLng = {
latitude: 38,
longitude: 118
};
let toLatLng: mapCommon.LatLng = {
latitude: 39,
longitude: 119
};
let distance = map.calculateDistance(fromLatLng, toLatLng);
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-faq-V14
爬取时间: 2025-04-29 21:19:18
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-faq-1-V14
爬取时间: 2025-04-29 21:19:31
来源: Huawei Developer
现象描述
无法加载地图。
可能原因
处理步骤

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-faq-3-V14
爬取时间: 2025-04-29 21:19:45
来源: Huawei Developer
siteId有多种获取方式，这里提供其中的3种作为参考：
1. 可通过on(type: 'poiClick')方法获取。
2. 可通过位置搜索相关接口（关键字搜索、周边搜索、地点详情、自动补全、正地理编码）的返回结果中获取。
3. 可通过chooseLocation接口的返回结果中获取。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-faq-4-V14
爬取时间: 2025-04-29 21:19:58
来源: Huawei Developer
现象描述
地图页面操作手势卡顿或者不生效。
可能原因
1.  应用主线程处理大批量逻辑时，存在主线程阻塞，此时进行地图手势操作，手势应答会变慢甚至手势响应失败。
处理步骤
```typescript
import { AsyncCallback, BusinessError } from '@kit.BasicServicesKit';
import { map, mapCommon, MapComponent } from '@kit.MapKit';
class MyDataSource implements IDataSource {
private list: number[] = [];
constructor(list: number[]) {
this.list = list;
}
totalCount(): number {
return this.list.length;
}
getData(index: number): number {
return this.list[index];
}
registerDataChangeListener(listener: DataChangeListener): void {
}
unregisterDataChangeListener(listener: DataChangeListener): void {
}
}
@Entry
@Component
struct SwiperExample {
private swiperController: SwiperController = new SwiperController();
private data: MyDataSource = new MyDataSource([]);
private mapOptions?: mapCommon.MapOptions;
private callback?: AsyncCallback<map.MapComponentController>;
private mapController?: map.MapComponentController;
private mapEventManager?: map.MapEventManager;
@State mapPositionX: number = 0;
@State mapPositionY: number = 0;
@State mapHeight: number = 0;
@State mapWidth: number = 0;
@State index: number = 0;
// 判断坐标是否在地图矩形内
isMap(event: TouchEvent) {
if (event.changedTouches[0].displayX > this.mapPositionX
&& event.changedTouches[0].displayX < this.mapPositionX + this.mapWidth
&& event.changedTouches[0].displayY > this.mapPositionY
&& event.changedTouches[0].displayY < this.mapPositionY + this.mapHeight) {
return true;
}
return false;
}
aboutToAppear(): void {
let list: number[] = [];
for (let i = 1; i <= 10; i++) {
list.push(i);
}
this.data = new MyDataSource(list);
this.mapOptions = {
position: {
target: {
latitude: 31.98441025,
longitude: 118.766253
},
zoom: 10,
tilt: 10,
bearing: 90
},
scaleControlsEnabled: true
}
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
this.mapEventManager = this.mapController.getEventManager();
let callback = () => {
console.info(`on-mapLoad`);
};
this.mapEventManager.on("mapLoad", callback);
}
}
}
build() {
Column({ space: 5 }) {
Swiper(this.swiperController) {
LazyForEach(this.data, (item: string) => {
if (item == "3") {
Column() {
Text(item.toString())
.width('90%')
.height(160)
.backgroundColor(0xAFEEEE)
.textAlign(TextAlign.Center)
.fontSize(30)
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback })
// 获取MapComponent的位置和长宽
.width('100%')
.height('65%')
.onAreaChange((_oldValue: Area, newValue: Area) => {
try {
if (newValue.globalPosition.x !== undefined && newValue.globalPosition.y !== undefined) {
this.mapPositionX = Number(newValue.globalPosition.x);
this.mapPositionY = Number(newValue.globalPosition.y);
this.mapHeight = Number(newValue.height);
this.mapWidth = Number(newValue.width);
}
} catch (error) {
let e: BusinessError = error as BusinessError;
console.log("onAreaChange error code:" + e.code + "message:" + e.message);
}
})
}.height("100%")
} else {
Text(item.toString())
.width('90%')
.height(160)
.backgroundColor(0xAFEEEE)
.textAlign(TextAlign.Center)
.fontSize(30)
}
}, (item: string) => item)
}
// 手势判断 当index为存在地图页面且点击在地图矩形内时为HitTestMode.None（不响应Swiper手势，响应子组件手势）
.onTouchIntercept((event: TouchEvent) => {
if (this.index === 2 && this.isMap(event)) {
return HitTestMode.None;
}
return HitTestMode.Transparent;
})
.cachedCount(2)
.index(1)
.loop(true)
.itemSpace(0)
// 设置圆点导航点样式
.indicator(
new DotIndicator()
.itemWidth(15)
.itemHeight(15)
.selectedItemWidth(15)
.selectedItemHeight(15)
.color(Color.Gray)
.selectedColor(Color.Blue))
.displayArrow({
// 设置导航点箭头样式
showBackground: true,
isSidebarMiddle: true,
backgroundSize: 24,
backgroundColor: Color.White,
arrowSize: 18,
arrowColor: Color.Blue
}, false)
.curve(Curve.Linear)
.onChange((index: number) => {
this.index = index;
})
.onGestureSwipe((index: number, extraInfo: SwiperAnimationEvent) => {
console.info("index: " + index);
console.info("current offset: " + extraInfo.currentOffset);
})
Row({ space: 12 }) {
Button('showNext')
.onClick(() => {
this.swiperController.showNext();
})
Button('showPrevious')
.onClick(() => {
this.swiperController.showPrevious();
})
}.margin(5)
}.width('100%')
.margin({ top: 5 })
}
}
```
```typescript
import { AsyncCallback, BusinessError } from '@kit.BasicServicesKit';
import { map, mapCommon, MapComponent } from '@kit.MapKit';
class MyDataSource implements IDataSource {
private list: number[] = [];
constructor(list: number[]) {
this.list = list;
}
totalCount(): number {
return this.list.length;
}
getData(index: number): number {
return this.list[index];
}
registerDataChangeListener(listener: DataChangeListener): void {
}
unregisterDataChangeListener(listener: DataChangeListener): void {
}
}
@Entry
@Component
struct SwiperExample {
private swiperController: SwiperController = new SwiperController();
private data: MyDataSource = new MyDataSource([]);
private mapOptions?: mapCommon.MapOptions;
private callback?: AsyncCallback<map.MapComponentController>;
private mapController?: map.MapComponentController;
private mapEventManager?: map.MapEventManager;
@State mapPositionX: number = 0;
@State mapPositionY: number = 0;
@State mapHeight: number = 0;
@State mapWidth: number = 0;
@State index: number = 0;
// 判断坐标是否在地图矩形内
isMap(event: TouchEvent) {
if (event.changedTouches[0].displayX > this.mapPositionX
&& event.changedTouches[0].displayX < this.mapPositionX + this.mapWidth
&& event.changedTouches[0].displayY > this.mapPositionY
&& event.changedTouches[0].displayY < this.mapPositionY + this.mapHeight) {
return true;
}
return false;
}
aboutToAppear(): void {
let list: number[] = [];
for (let i = 1; i <= 10; i++) {
list.push(i);
}
this.data = new MyDataSource(list);
this.mapOptions = {
position: {
target: {
latitude: 31.98441025,
longitude: 118.766253
},
zoom: 10,
tilt: 10,
bearing: 90
},
scaleControlsEnabled: true
}
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
this.mapEventManager = this.mapController.getEventManager();
let callback = () => {
console.info(`on-mapLoad`);
};
this.mapEventManager.on("mapLoad", callback);
}
}
}
build() {
Column({ space: 5 }) {
Swiper(this.swiperController) {
LazyForEach(this.data, (item: string) => {
if (item == "3") {
Column() {
Text(item.toString())
.width('90%')
.height(160)
.backgroundColor(0xAFEEEE)
.textAlign(TextAlign.Center)
.fontSize(30)
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback })
// 获取MapComponent的位置和长宽
.width('100%')
.height('65%')
.onAreaChange((_oldValue: Area, newValue: Area) => {
try {
if (newValue.globalPosition.x !== undefined && newValue.globalPosition.y !== undefined) {
this.mapPositionX = Number(newValue.globalPosition.x);
this.mapPositionY = Number(newValue.globalPosition.y);
this.mapHeight = Number(newValue.height);
this.mapWidth = Number(newValue.width);
}
} catch (error) {
let e: BusinessError = error as BusinessError;
console.log("onAreaChange error code:" + e.code + "message:" + e.message);
}
})
}.height("100%")
} else {
Text(item.toString())
.width('90%')
.height(160)
.backgroundColor(0xAFEEEE)
.textAlign(TextAlign.Center)
.fontSize(30)
}
}, (item: string) => item)
}
// 手势判断 当index为存在地图页面且点击在地图矩形内时为HitTestMode.None（不响应Swiper手势，响应子组件手势）
.onTouchIntercept((event: TouchEvent) => {
if (this.index === 2 && this.isMap(event)) {
return HitTestMode.None;
}
return HitTestMode.Transparent;
})
.cachedCount(2)
.index(1)
.loop(true)
.itemSpace(0)
// 设置圆点导航点样式
.indicator(
new DotIndicator()
.itemWidth(15)
.itemHeight(15)
.selectedItemWidth(15)
.selectedItemHeight(15)
.color(Color.Gray)
.selectedColor(Color.Blue))
.displayArrow({
// 设置导航点箭头样式
showBackground: true,
isSidebarMiddle: true,
backgroundSize: 24,
backgroundColor: Color.White,
arrowSize: 18,
arrowColor: Color.Blue
}, false)
.curve(Curve.Linear)
.onChange((index: number) => {
this.index = index;
})
.onGestureSwipe((index: number, extraInfo: SwiperAnimationEvent) => {
console.info("index: " + index);
console.info("current offset: " + extraInfo.currentOffset);
})
Row({ space: 12 }) {
Button('showNext')
.onClick(() => {
this.swiperController.showNext();
})
Button('showPrevious')
.onClick(() => {
this.swiperController.showPrevious();
})
}.margin(5)
}.width('100%')
.margin({ top: 5 })
}
}
```
1.  请分析应用的业务逻辑，将复杂逻辑放到子线程中处理。
```typescript
import { AsyncCallback, BusinessError } from '@kit.BasicServicesKit';
import { map, mapCommon, MapComponent } from '@kit.MapKit';
class MyDataSource implements IDataSource {
private list: number[] = [];
constructor(list: number[]) {
this.list = list;
}
totalCount(): number {
return this.list.length;
}
getData(index: number): number {
return this.list[index];
}
registerDataChangeListener(listener: DataChangeListener): void {
}
unregisterDataChangeListener(listener: DataChangeListener): void {
}
}
@Entry
@Component
struct SwiperExample {
private swiperController: SwiperController = new SwiperController();
private data: MyDataSource = new MyDataSource([]);
private mapOptions?: mapCommon.MapOptions;
private callback?: AsyncCallback<map.MapComponentController>;
private mapController?: map.MapComponentController;
private mapEventManager?: map.MapEventManager;
@State mapPositionX: number = 0;
@State mapPositionY: number = 0;
@State mapHeight: number = 0;
@State mapWidth: number = 0;
@State index: number = 0;
// 判断坐标是否在地图矩形内
isMap(event: TouchEvent) {
if (event.changedTouches[0].displayX > this.mapPositionX
&& event.changedTouches[0].displayX < this.mapPositionX + this.mapWidth
&& event.changedTouches[0].displayY > this.mapPositionY
&& event.changedTouches[0].displayY < this.mapPositionY + this.mapHeight) {
return true;
}
return false;
}
aboutToAppear(): void {
let list: number[] = [];
for (let i = 1; i <= 10; i++) {
list.push(i);
}
this.data = new MyDataSource(list);
this.mapOptions = {
position: {
target: {
latitude: 31.98441025,
longitude: 118.766253
},
zoom: 10,
tilt: 10,
bearing: 90
},
scaleControlsEnabled: true
}
this.callback = async (err, mapController) => {
if (!err) {
this.mapController = mapController;
this.mapEventManager = this.mapController.getEventManager();
let callback = () => {
console.info(`on-mapLoad`);
};
this.mapEventManager.on("mapLoad", callback);
}
}
}
build() {
Column({ space: 5 }) {
Swiper(this.swiperController) {
LazyForEach(this.data, (item: string) => {
if (item == "3") {
Column() {
Text(item.toString())
.width('90%')
.height(160)
.backgroundColor(0xAFEEEE)
.textAlign(TextAlign.Center)
.fontSize(30)
MapComponent({ mapOptions: this.mapOptions, mapCallback: this.callback })
// 获取MapComponent的位置和长宽
.width('100%')
.height('65%')
.onAreaChange((_oldValue: Area, newValue: Area) => {
try {
if (newValue.globalPosition.x !== undefined && newValue.globalPosition.y !== undefined) {
this.mapPositionX = Number(newValue.globalPosition.x);
this.mapPositionY = Number(newValue.globalPosition.y);
this.mapHeight = Number(newValue.height);
this.mapWidth = Number(newValue.width);
}
} catch (error) {
let e: BusinessError = error as BusinessError;
console.log("onAreaChange error code:" + e.code + "message:" + e.message);
}
})
}.height("100%")
} else {
Text(item.toString())
.width('90%')
.height(160)
.backgroundColor(0xAFEEEE)
.textAlign(TextAlign.Center)
.fontSize(30)
}
}, (item: string) => item)
}
// 手势判断 当index为存在地图页面且点击在地图矩形内时为HitTestMode.None（不响应Swiper手势，响应子组件手势）
.onTouchIntercept((event: TouchEvent) => {
if (this.index === 2 && this.isMap(event)) {
return HitTestMode.None;
}
return HitTestMode.Transparent;
})
.cachedCount(2)
.index(1)
.loop(true)
.itemSpace(0)
// 设置圆点导航点样式
.indicator(
new DotIndicator()
.itemWidth(15)
.itemHeight(15)
.selectedItemWidth(15)
.selectedItemHeight(15)
.color(Color.Gray)
.selectedColor(Color.Blue))
.displayArrow({
// 设置导航点箭头样式
showBackground: true,
isSidebarMiddle: true,
backgroundSize: 24,
backgroundColor: Color.White,
arrowSize: 18,
arrowColor: Color.Blue
}, false)
.curve(Curve.Linear)
.onChange((index: number) => {
this.index = index;
})
.onGestureSwipe((index: number, extraInfo: SwiperAnimationEvent) => {
console.info("index: " + index);
console.info("current offset: " + extraInfo.currentOffset);
})
Row({ space: 12 }) {
Button('showNext')
.onClick(() => {
this.swiperController.showNext();
})
Button('showPrevious')
.onClick(() => {
this.swiperController.showPrevious();
})
}.margin(5)
}.width('100%')
.margin({ top: 5 })
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-personal-privacy-V14
爬取时间: 2025-04-29 21:20:12
来源: Huawei Developer
最后修改时间：2024/06/09
此文档针对华为作为最终用户数据处理者，开发者作为最终用户数据控制者的数据处理进行说明，包括：
华为地图服务处理的个人数据清单
| 个人数据清单  | 使用目的  | 存留期  |
| --- | --- | --- |
| 粗略位置或者精确位置  | 地图组件API：开发者需要展示当前位置，MapKit将从开发者应用进程里收集用户位置，如果收集成功，将在地图组件上显示表示用户位置的小蓝点。 静态图API：开发者提供位置信息，MapKit生成对应位置的地图图片。 地点搜索API：开发者提供位置信息，MapKit基于位置信息查找相关地点，提高地点搜索的准确率。 路线规划API：开发者提供位置信息，MapKit基于位置信息进行路线规划。  | 不留存  |
| 精确位置  | 地图Picker：开发者调用地图Picker API，MapKit会收集用户位置，在地图Picker上显示用户位置，或基于位置信息查找地点。  | 不留存  |
| IP地址  | 该信息用于地点搜索API，如果开发者没有提供位置信息，MapKit根据当前用户的IP地址计算出粗略位置信息，用于提高地点搜索的准确率。  | 不留存  |
| 运营商信息  | 该信息用于判断云侧服务路由地址。  | 不留存  |
| 匿名搜索关键字  | 该信息用于地点搜索API，开发者提供搜索关键字，MapKit返回相关的搜索结果。  | 不留存  |
个人数据清单
使用目的
存留期
粗略位置或者精确位置
地图组件API：开发者需要展示当前位置，MapKit将从开发者应用进程里收集用户位置，如果收集成功，将在地图组件上显示表示用户位置的小蓝点。
静态图API：开发者提供位置信息，MapKit生成对应位置的地图图片。
地点搜索API：开发者提供位置信息，MapKit基于位置信息查找相关地点，提高地点搜索的准确率。
路线规划API：开发者提供位置信息，MapKit基于位置信息进行路线规划。
不留存
精确位置
地图Picker：开发者调用地图Picker API，MapKit会收集用户位置，在地图Picker上显示用户位置，或基于位置信息查找地点。
不留存
IP地址
该信息用于地点搜索API，如果开发者没有提供位置信息，MapKit根据当前用户的IP地址计算出粗略位置信息，用于提高地点搜索的准确率。
不留存
运营商信息
该信息用于判断云侧服务路由地址。
不留存
匿名搜索关键字
该信息用于地点搜索API，开发者提供搜索关键字，MapKit返回相关的搜索结果。
不留存
指导开发者如何帮助最终用户实现对数据的控制
-  不存储用户个人数据。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-appendix-V14
爬取时间: 2025-04-29 21:20:25
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-review-number-V14
爬取时间: 2025-04-29 21:20:38
来源: Huawei Developer
审图号：GS(2024) 1955号
送审单位：华为软件技术有限公司

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-privacy-V14
爬取时间: 2025-04-29 21:20:51
来源: Huawei Developer
© 2006-2020 TomTom. All rights reserved. This material is proprietary and the subject of copyright protection, database right protection and other Intellectual Property Rights owned by TomTom or its suppliers. The use of this material is subject to the terms of a license agreement. Any unauthorized copying or disclosure of this material will lead to criminal and civil liabilities
© NAVINFO. All rights reserved
© BEV, GZ 1368/2003
© Source data. State committee on property of the Republic of Belarus, 2019
© Republic unitary organization Belgeodsia, 2019
© 2006 – 2019 TomTom. All rights reserved. This material is proprietary and the subject of copyright protection and other intellectual property rights owned or licensed to TomTom. The product includes information copied with permission from Canadian authorities, including © Canada Post Corporation. All rights reserved. The use of this material is subject to the terms of a License Agreement. You will be held liable for any unauthorized copying or disclosure of this material
The following copyright notice applies to the use of Points of Interest:
© 2006 – 2019 TomTom. All rights reserved. This material is proprietary and the subject of copyright protection and other intellectual property rights owned or licensed to TomTom. The product includes information copied with permission from Canadian authorities, including © Canada Post Corporation, All rights reserved. The use of this material is subject to the terms of a License Agreement. You will be held liable for any unauthorized copying or disclosure of this material
The following copyright notice applies to the use of Points of Interest:
© 2006 – 2019 TomTom. All rights reserved. Portions of the POI database contained in Points of Interest North America have been provided by Neustar Localeze
The following copyright notice applies to the use of Telecommunications:
© 2019 Pitney Bowes. All rights reserved. In addition, for the following product layers Wire Center Boundaries, ILEC Boundaries, and Rate Center Boundaries, the following also applies: This product contains information and/or data of Telcordia Technologies, Inc. (Telcordia) licensed to be included herein.
The following copyright notice applies to the use of Logistics:
© 2006 – 2019 TomTom. Truck Attribute Data © 2004 - 2019 ProMiles Software Development Corporation. All rights reserved. This material is proprietary and the subject of copyright protection and other intellectual property rights owned or licensed to TomTom.
© DAV, violation of these copyrights shall cause legal proceedings
The following copyright applies to the Advanced Navigable MAP, Address Points, 2D City Map and Buildings: Source: Direction générale des Finances Publiques – Cadastre; Updated 2019
GeoBasis-DE / LDBV 2019
© Base data Bakosurtanal
© 2019 GeoDirectory
© Shobunsha Publications, Inc. © Shobunsha
© Royal Jordanian Geographic center
Macao Special Administrative Region Government – Cartography and Cadastre Bureau
© Mapping Unit, Malta Planning Authority
Based upon the Ordnance Survey or Northern Ireland's data of 2019 with the permission of the Controller of Her Majesty's Stationary Office, © Crown copyright and database rights.
© ROSREESTR
© Swisstopo
© United States Postal Service 2019
© OpenStreetMap contributors, www.openstreetmap.org/copyright.

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-language-V14
爬取时间: 2025-04-29 21:21:05
来源: Huawei Developer
| 语言名称  | 语种代码  |
| --- | --- |
| 英语  | en  |
| 中文  | zh  |
| 简体中文  | zh_CN  |
语言名称
语种代码
英语
en
中文
zh
简体中文
zh_CN

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/map-supported-V14
爬取时间: 2025-04-29 21:21:19
来源: Huawei Developer
| 国家/地区名  | 英文名称  |
| --- | --- |
| 阿尔巴尼亚  | Albania  |
| 阿尔及利亚  | Algeria  |
| 安道尔  | Andorra  |
| 安哥拉  | Angola  |
| 安圭拉  | Anguilla  |
| 安提瓜和巴布达  | Antigua and Barbuda  |
| 阿根廷  | Argentina  |
| 亚美尼亚  | Armenia  |
| 阿鲁巴  | Aruba  |
| 澳大利亚  | Australia  |
| 奥地利  | Austria  |
| 阿塞拜疆  | Azerbaijan  |
| 亚速尔群岛  | Azores  |
| 巴哈马  | Bahamas  |
| 巴林  | Bahrain  |
| 巴利阿里群岛  | Balearic Islands  |
| 孟加拉国  | Bangladesh  |
| 巴巴多斯  | Barbados  |
| 白俄罗斯  | Belarus  |
| 比利时  | Belgium  |
| 伯利兹  | Belize  |
| 贝宁  | Benin  |
| 不丹  | Bhutan  |
| 玻利维亚  | Bolivia  |
| 波斯尼亚和黑塞哥维那  | Bosnia and Herzegovina  |
| 博茨瓦纳  | Botswana  |
| 巴西  | Brazil  |
| 英属维尔京群岛  | British Virgin Islands  |
| 文莱  | Brunei  |
| 保加利亚  | Bulgaria  |
| 布基纳法索  | Burkina Faso  |
| 布隆迪  | Burundi  |
| 柬埔寨  | Cambodia  |
| 喀麦隆  | Cameroon  |
| 加纳利群岛  | Canary Islands  |
| 佛得角  | Cape Verde  |
| 荷属加勒比区  | Caribbean Netherlands  |
| 开曼群岛  | Cayman Islands  |
| 中非共和国  | Central African Republic  |
| 乍得  | Chad  |
| 智利  | Chile  |
| 中国大陆  | Chinese mainland  |
| 克利珀顿岛  | Clipperton Island  |
| 科科斯（基林）群岛  | Cocos (Keeling) Islands  |
| 哥伦比亚  | Colombia  |
| 科摩罗  | Comoros  |
| 刚果（布）  | Congo - Brazzaville  |
| 刚果（金）  | Congo - Kinshasa  |
| 库克群岛  | Cook Islands  |
| 哥斯达黎加  | Costa Rica  |
| 科特迪瓦  | Côte d'Ivoire  |
| 克罗地亚  | Croatia  |
| 库拉索  | Curaçao  |
| 塞浦路斯  | Cyprus  |
| 捷克  | Czechia  |
| 朝鲜  | Democratic People's Republic of Korea  |
| 丹麦  | Denmark  |
| 吉布提  | Djibouti  |
| 多米尼加  | Dominica  |
| 厄瓜多尔  | Ecuador  |
| 埃及  | Egypt  |
| 萨尔瓦多  | El Salvador  |
| 赤道几内亚  | Equatorial Guinea  |
| 厄立特里亚  | Eritrea  |
| 爱沙尼亚  | Estonia  |
| 斯威士兰  | Eswatini  |
| 埃塞俄比亚  | Ethiopia  |
| 福克兰群岛  | Falkland Islands  |
| 法罗群岛  | Faroe Islands  |
| 密克罗尼西亚  | Federated States of Micronesia  |
| 斐济  | Fiji  |
| 芬兰  | Finland  |
| 法国  | France  |
| 法属圭亚那  | French Guiana  |
| 法属波利尼西亚  | French Polynesia  |
| 加蓬  | Gabon  |
| 冈比亚  | Gambia  |
| 格鲁吉亚  | Georgia  |
| 德国  | Germany  |
| 加纳  | Ghana  |
| 直布罗陀  | Gibraltar  |
| 希腊  | Greece  |
| 格陵兰  | Greenland  |
| 格林纳达  | Grenada  |
| 瓜德罗普  | Guadeloupe  |
| 危地马拉  | Guatemala  |
| 根西岛  | Guernsey  |
| 几内亚  | Guinea  |
| 几内亚比绍  | Guinea-Bissau  |
| 圭亚那  | Guyana  |
| 海地  | Haiti  |
| 洪都拉斯  | Honduras  |
| 中国香港  | Hong Kong (China)  |
| 匈牙利  | Hungary  |
| 冰岛  | Iceland  |
| 印度  | India  |
| 印度尼西亚  | Indonesia  |
| 伊拉克  | Iraq  |
| 爱尔兰  | Ireland  |
| 马恩岛  | Isle of Man  |
| 意大利  | Italy  |
| 牙买加  | Jamaica  |
| 日本  | Japan  |
| 泽西岛  | Jersey  |
| 约旦  | Jordan  |
| 哈萨克斯坦  | Kazakhstan  |
| 肯尼亚  | Kenya  |
| 基里巴斯  | Kiribati  |
| 科威特  | Kuwait  |
| 吉尔吉斯斯坦  | Kyrgyzstan  |
| 老挝  | Laos  |
| 拉脱维亚  | Latvia  |
| 黎巴嫩  | Lebanon  |
| 莱索托  | Lesotho  |
| 利比里亚  | Liberia  |
| 利比亚  | Libyan  |
| 列支敦士登  | Liechtenstein  |
| 立陶宛  | Lithuania  |
| 卢森堡  | Luxembourg  |
| 中国澳门  | Macao (China)  |
| 中国台湾  | Taiwan (China)  |
| 马达加斯加  | Madagascar  |
| 马德拉群岛  | Madeira Islands  |
| 马拉维  | Malawi  |
| 马来西亚  | Malaysia  |
| 马尔代夫  | Maldives  |
| 马里  | Mali  |
| 马耳他  | Malta  |
| 马绍尔群岛  | Marshall Islands  |
| 马提尼克  | Martinique  |
| 毛里塔尼亚  | Mauritania  |
| 毛里求斯  | Mauritius  |
| 马约特  | Mayotte  |
| 墨西哥  | Mexico  |
| 摩尔多瓦  | Moldova  |
| 摩纳哥  | Monaco  |
| 蒙古  | Mongolia  |
| 黑山  | Montenegro  |
| 蒙特塞拉特  | Montserrat  |
| 摩洛哥  | Morocco  |
| 莫桑比克  | Mozambique  |
| 缅甸  | Myanmar  |
| 纳米比亚  | Namibia  |
| 瑙鲁  | Nauru  |
| 尼泊尔  | Nepal  |
| 荷兰  | Netherlands  |
| 新喀里多尼亚  | New Caledonia  |
| 新西兰  | New Zealand  |
| 尼加拉瓜  | Nicaragua  |
| 尼日尔  | Niger  |
| 尼日利亚  | Nigeria  |
| 纽埃  | Niue  |
| 北马其顿  | North Macedonia  |
| 挪威  | Norway  |
| 阿曼  | Oman  |
| 巴基斯坦  | Pakistan  |
| 帕劳  | Palau  |
| 巴勒斯坦领土  | Palestine  |
| 巴拿马  | Panama  |
| 巴布亚新几内亚  | Papua New Guinea  |
| 巴拉圭  | Paraguay  |
| 秘鲁  | Peru  |
| 菲律宾  | Philippines  |
| 皮特凯恩群岛  | Pitcairn Islands  |
| 波兰  | Poland  |
| 葡萄牙  | Portugal  |
| 波多黎各  | Puerto Rico  |
| 卡塔尔  | Qatar  |
| 留尼汪  | Réunion  |
| 罗马尼亚  | Romania  |
| 俄罗斯  | Russia  |
| 卢旺达  | Rwanda  |
| 圣巴泰勒米  | Saint Barthélemy  |
| 圣赫勒拿  | Saint Helena  |
| 圣基茨和尼维斯  | Saint Kitts and Nevis  |
| 圣卢西亚  | Saint Lucia  |
| 法属圣马丁  | Saint Martin (France)  |
| 荷属圣马丁  | Saint Martin (Netherlands)  |
| 圣皮埃尔和密克隆群岛  | Saint Pierre and Miquelon  |
| 圣马力诺  | San Marino  |
| 圣多美和普林西比  | São Tomé and Príncipe  |
| 沙特阿拉伯  | Saudi Arabia  |
| 塞内加尔  | Senegal  |
| 塞尔维亚  | Serbia  |
| 塞舌尔  | Seychelles  |
| 塞拉利昂  | Sierra Leone  |
| 新加坡  | Singapore  |
| 斯洛伐克  | Slovakia  |
| 斯洛文尼亚  | Slovenia  |
| 所罗门群岛  | Solomon Islands  |
| 索马里  | Somalia  |
| 南非  | South Africa  |
| 南乔治亚岛和南桑威奇群岛  | South Georgia and South Sandwich Islands  |
| 韩国  | South Korea  |
| 西班牙  | Spain  |
| 斯里兰卡  | Sri Lanka  |
| 苏里南  | Suriname  |
| 瑞典  | Sweden  |
| 瑞士  | Switzerland  |
| 叙利亚  | Syrian Arab Republic  |
| 塔吉克斯坦  | Tajikistan  |
| 坦桑尼亚  | Tanzania  |
| 泰国  | Thailand  |
| 东帝汶  | Timor-Leste  |
| 多哥  | Togo  |
| 托克劳  | Tokelau  |
| 汤加  | Tonga  |
| 特立尼达和多巴哥  | Trinidad and Tobago  |
| 突尼斯  | Tunisia  |
| 土耳其  | Türkiye  |
| 土库曼斯坦  | Turkmenistan  |
| 图瓦卢  | Tuvalu  |
| 乌干达  | Uganda  |
| 乌克兰  | Ukraine  |
| 阿拉伯联合酋长国  | United Arab Emirates  |
| 英国  | United Kingdom  |
| 美国  | United States  |
| 美属维尔京群岛  | United States Virgin Islands  |
| 乌拉圭  | Uruguay  |
| 乌兹别克斯坦  | Uzbekistan  |
| 梵蒂冈城  | Vatican City  |
| 委内瑞拉  | Venezuela  |
| 越南  | Vietnam  |
| 瓦利斯和富图纳  | Wallis and Futuna  |
| 也门  | Yemen  |
| 赞比亚  | Zambia  |
| 津巴布韦  | Zimbabwe  |
国家/地区名
英文名称
阿尔巴尼亚
Albania
阿尔及利亚
Algeria
安道尔
Andorra
安哥拉
Angola
安圭拉
Anguilla
安提瓜和巴布达
Antigua and Barbuda
阿根廷
Argentina
亚美尼亚
Armenia
阿鲁巴
Aruba
澳大利亚
Australia
奥地利
Austria
阿塞拜疆
Azerbaijan
亚速尔群岛
Azores
巴哈马
Bahamas
巴林
Bahrain
巴利阿里群岛
Balearic Islands
孟加拉国
Bangladesh
巴巴多斯
Barbados
白俄罗斯
Belarus
比利时
Belgium
伯利兹
Belize
贝宁
Benin
不丹
Bhutan
玻利维亚
Bolivia
波斯尼亚和黑塞哥维那
Bosnia and Herzegovina
博茨瓦纳
Botswana
巴西
Brazil
英属维尔京群岛
British Virgin Islands
文莱
Brunei
保加利亚
Bulgaria
布基纳法索
Burkina Faso
布隆迪
Burundi
柬埔寨
Cambodia
喀麦隆
Cameroon
加纳利群岛
Canary Islands
佛得角
Cape Verde
荷属加勒比区
Caribbean Netherlands
开曼群岛
Cayman Islands
中非共和国
Central African Republic
乍得
Chad
智利
Chile
中国大陆
Chinese mainland
克利珀顿岛
Clipperton Island
科科斯（基林）群岛
Cocos (Keeling) Islands
哥伦比亚
Colombia
科摩罗
Comoros
刚果（布）
Congo - Brazzaville
刚果（金）
Congo - Kinshasa
库克群岛
Cook Islands
哥斯达黎加
Costa Rica
科特迪瓦
Côte d'Ivoire
克罗地亚
Croatia
库拉索
Curaçao
塞浦路斯
Cyprus
捷克
Czechia
朝鲜
Democratic People's Republic of Korea
丹麦
Denmark
吉布提
Djibouti
多米尼加
Dominica
厄瓜多尔
Ecuador
埃及
Egypt
萨尔瓦多
El Salvador
赤道几内亚
Equatorial Guinea
厄立特里亚
Eritrea
爱沙尼亚
Estonia
斯威士兰
Eswatini
埃塞俄比亚
Ethiopia
福克兰群岛
Falkland Islands
法罗群岛
Faroe Islands
密克罗尼西亚
Federated States of Micronesia
斐济
Fiji
芬兰
Finland
法国
France
法属圭亚那
French Guiana
法属波利尼西亚
French Polynesia
加蓬
Gabon
冈比亚
Gambia
格鲁吉亚
Georgia
德国
Germany
加纳
Ghana
直布罗陀
Gibraltar
希腊
Greece
格陵兰
Greenland
格林纳达
Grenada
瓜德罗普
Guadeloupe
危地马拉
Guatemala
根西岛
Guernsey
几内亚
Guinea
几内亚比绍
Guinea-Bissau
圭亚那
Guyana
海地
Haiti
洪都拉斯
Honduras
中国香港
Hong Kong (China)
匈牙利
Hungary
冰岛
Iceland
印度
India
印度尼西亚
Indonesia
伊拉克
Iraq
爱尔兰
Ireland
马恩岛
Isle of Man
意大利
Italy
牙买加
Jamaica
日本
Japan
泽西岛
Jersey
约旦
Jordan
哈萨克斯坦
Kazakhstan
肯尼亚
Kenya
基里巴斯
Kiribati
科威特
Kuwait
吉尔吉斯斯坦
Kyrgyzstan
老挝
Laos
拉脱维亚
Latvia
黎巴嫩
Lebanon
莱索托
Lesotho
利比里亚
Liberia
利比亚
Libyan
列支敦士登
Liechtenstein
立陶宛
Lithuania
卢森堡
Luxembourg
中国澳门
Macao (China)
中国台湾
Taiwan (China)
马达加斯加
Madagascar
马德拉群岛
Madeira Islands
马拉维
Malawi
马来西亚
Malaysia
马尔代夫
Maldives
马里
Mali
马耳他
Malta
马绍尔群岛
Marshall Islands
马提尼克
Martinique
毛里塔尼亚
Mauritania
毛里求斯
Mauritius
马约特
Mayotte
墨西哥
Mexico
摩尔多瓦
Moldova
摩纳哥
Monaco
蒙古
Mongolia
黑山
Montenegro
蒙特塞拉特
Montserrat
摩洛哥
Morocco
莫桑比克
Mozambique
缅甸
Myanmar
纳米比亚
Namibia
瑙鲁
Nauru
尼泊尔
Nepal
荷兰
Netherlands
新喀里多尼亚
New Caledonia
新西兰
New Zealand
尼加拉瓜
Nicaragua
尼日尔
Niger
尼日利亚
Nigeria
纽埃
Niue
北马其顿
North Macedonia
挪威
Norway
阿曼
Oman
巴基斯坦
Pakistan
帕劳
Palau
巴勒斯坦领土
Palestine
巴拿马
Panama
巴布亚新几内亚
Papua New Guinea
巴拉圭
Paraguay
秘鲁
Peru
菲律宾
Philippines
皮特凯恩群岛
Pitcairn Islands
波兰
Poland
葡萄牙
Portugal
波多黎各
Puerto Rico
卡塔尔
Qatar
留尼汪
Réunion
罗马尼亚
Romania
俄罗斯
Russia
卢旺达
Rwanda
圣巴泰勒米
Saint Barthélemy
圣赫勒拿
Saint Helena
圣基茨和尼维斯
Saint Kitts and Nevis
圣卢西亚
Saint Lucia
法属圣马丁
Saint Martin (France)
荷属圣马丁
Saint Martin (Netherlands)
圣皮埃尔和密克隆群岛
Saint Pierre and Miquelon
圣马力诺
San Marino
圣多美和普林西比
São Tomé and Príncipe
沙特阿拉伯
Saudi Arabia
塞内加尔
Senegal
塞尔维亚
Serbia
塞舌尔
Seychelles
塞拉利昂
Sierra Leone
新加坡
Singapore
斯洛伐克
Slovakia
斯洛文尼亚
Slovenia
所罗门群岛
Solomon Islands
索马里
Somalia
南非
South Africa
南乔治亚岛和南桑威奇群岛
South Georgia and South Sandwich Islands
韩国
South Korea
西班牙
Spain
斯里兰卡
Sri Lanka
苏里南
Suriname
瑞典
Sweden
瑞士
Switzerland
叙利亚
Syrian Arab Republic
塔吉克斯坦
Tajikistan
坦桑尼亚
Tanzania
泰国
Thailand
东帝汶
Timor-Leste
多哥
Togo
托克劳
Tokelau
汤加
Tonga
特立尼达和多巴哥
Trinidad and Tobago
突尼斯
Tunisia
土耳其
Türkiye
土库曼斯坦
Turkmenistan
图瓦卢
Tuvalu
乌干达
Uganda
乌克兰
Ukraine
阿拉伯联合酋长国
United Arab Emirates
英国
United Kingdom
美国
United States
美属维尔京群岛
United States Virgin Islands
乌拉圭
Uruguay
乌兹别克斯坦
Uzbekistan
梵蒂冈城
Vatican City
委内瑞拉
Venezuela
越南
Vietnam
瓦利斯和富图纳
Wallis and Futuna
也门
Yemen
赞比亚
Zambia
津巴布韦
Zimbabwe

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/notification-kit-V14
爬取时间: 2025-04-29 21:21:32
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/notification-overview-V14
爬取时间: 2025-04-29 21:21:46
来源: Huawei Developer
Notification Kit（用户通知服务）为开发者提供本地通知发布通道，开发者可借助Notification Kit将应用产生的通知直接在客户端本地推送给用户，本地通知根据通知类型及发布场景会产生对应的铃声、震动、横幅、锁屏、息屏、通知栏提醒和显示。
使用场景
当应用处于前台运行时，开发者可以使用Notification Kit向用户发布通知。当应用转为后台时，本地通知发布通道关闭，开发者需要接入Push Kit进行云侧离线通知的发布。
开发者可以在多种场景中运用本地通知能力。如同步用户的上传下载进度、发布即时的客服支付通知、更新运动步数等。
能力范围
Notification Kit支持的能力主要包括:
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170125.13349019462896430811118839077905:50001231000000:2800:EDB55FA54EDEF8C6171E8D865761E3AFAB2B2E96305AF6603CDC111E445FD27B.png)
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170125.78760928002934739326848868519740:50001231000000:2800:5D983A924655BA59D72802C9A103A01C88C6528D7D9F1DB3BEB803C3174A891E.png)
使用Notification Kit的主要业务流程如下：
1.请求通知授权。
2.应用发布通知到通知服务。
3.将通知展示到通知中心。
通知样式
实际显示效果依赖设备能力和通知中心UI设计样式。
Notification Kit中常用的通知样式如下：
| 类型 | 通知样式 | 规格描述 |
| --- | --- | --- |
| 文本 |  | 通知文本内容最多显示三行，超长后以“...”截断。 |
| 多行文本 |  | 最多可显示三行内容，每行内容超长后以“...”截断。 |
| 通知角标 |  | 以数字的形式展示在右上角。 |
| 进度条 |  | 进度类通知。 |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170125.57577144204003331335062201591016:50001231000000:2800:8039F5A97BB77557A6424B9CE40E4479C53241C9B3137DBF5A4F88E254D3452F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170125.32636711110209006011493239318321:50001231000000:2800:584C77FE08A820F7DF038BA246D66A182E6AA386CB4566B320D3904ADDB5E74A.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170125.36695519324157397237934116450774:50001231000000:2800:0D72E5AC482573EEB4D8894A669CADB833A3A8F5C7FFB0041C0D946F388026C3.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170125.16261142057904670578452153945149:50001231000000:2800:98B892480DCBEF58219B463E6494BE835F5636AF6DA9E17E02961AD99532F4EA.png)
约束限制
与相关Kit的关系

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/notification-enable-V14
爬取时间: 2025-04-29 21:22:00
来源: Huawei Developer
应用需要获取用户授权才能发送通知。在通知发布前调用requestEnableNotification()方法，弹窗让用户选择是否允许发送通知，后续再次调用requestEnableNotification()方法时，则不再弹窗。
接口说明
接口详情参见API参考。
表1通知授权接口功能介绍
| 接口名 | 描述 |
| --- | --- |
| isNotificationEnabled():Promise<boolean> | 查询通知是否授权。 |
| requestEnableNotification(context: UIAbilityContext): Promise<void> | 请求发送通知的许可，第一次调用会弹窗让用户选择。 |
开发步骤
1.  导入NotificationManager模块。
```typescript
import { notificationManager } from '@kit.NotificationKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { common } from '@kit.AbilityKit';
const TAG: string = '[PublishOperation]';
const DOMAIN_NUMBER: number = 0xFF00;
```
2.  请求通知授权。 可通过requestEnableNotification的错误码判断用户是否授权。若返回的错误码为1600004，即为拒绝授权。
```typescript
let context = getContext(this) as common.UIAbilityContext;
notificationManager.isNotificationEnabled().then((data: boolean) => {
hilog.info(DOMAIN_NUMBER, TAG, "isNotificationEnabled success, data: " + JSON.stringify(data));
if(!data){
notificationManager.requestEnableNotification(context).then(() => {
hilog.info(DOMAIN_NUMBER, TAG, `[ANS] requestEnableNotification success`);
}).catch((err : BusinessError) => {
if(1600004 == err.code){
hilog.error(DOMAIN_NUMBER, TAG, `[ANS] requestEnableNotification refused, code is ${err.code}, message is ${err.message}`);
} else {
hilog.error(DOMAIN_NUMBER, TAG, `[ANS] requestEnableNotification failed, code is ${err.code}, message is ${err.message}`);
}
});
}
}).catch((err : BusinessError) => {
hilog.error(DOMAIN_NUMBER, TAG, `isNotificationEnabled fail, code is ${err.code}, message is ${err.message}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/notification-badge-V14
爬取时间: 2025-04-29 21:22:13
来源: Huawei Developer
针对未读的通知，系统提供了角标设置接口，将未读通知个数显示在桌面图标的右上角角标上。
通知增加时，角标上显示的未读通知个数需要增加。
通知被查看后，角标上显示的未读通知个数需要减少，没有未读通知时，不显示角标。
接口说明
当角标设定个数取值0时，表示清除角标。取值大于99时，通知角标将显示99+。
-  增加角标数，支持如下两种方法： 发布通知时，在NotificationRequest的badgeNumber字段里携带，桌面收到通知后，在原角标数上累加、呈现。 调用接口setBadgeNumber()设置，桌面按设置的角标数呈现。
-  发布通知时，在NotificationRequest的badgeNumber字段里携带，桌面收到通知后，在原角标数上累加、呈现。
-  调用接口setBadgeNumber()设置，桌面按设置的角标数呈现。
-  减少角标数，目前仅支持通过setBadgeNumber()设置。
-  发布通知时，在NotificationRequest的badgeNumber字段里携带，桌面收到通知后，在原角标数上累加、呈现。
-  调用接口setBadgeNumber()设置，桌面按设置的角标数呈现。
| 接口名 | 描述 |
| --- | --- |
| setBadgeNumber(badgeNumber: number, callback: AsyncCallback<void>): void | 设置角标个数。 |
开发步骤
1.  导入NotificationManager模块。
```typescript
import { notificationManager } from '@kit.NotificationKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
const TAG: string = '[PublishOperation]';
const DOMAIN_NUMBER: number = 0xFF00;
```
2.  增加角标个数。 发布通知在NotificationRequest的badgeNumber字段里携带，可参考通知发布章节。 示例为调用setBadgeNumber接口增加角标，在发布完新的通知后，调用该接口。
```typescript
let setBadgeNumberCallback = (err: BusinessError): void => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `Failed to set badge number. Code is ${err.code}, message is ${err.message}`);
return;
}
hilog.info(DOMAIN_NUMBER, TAG, `Succeeded in setting badge number.`);
}
let badgeNumber = 9;
notificationManager.setBadgeNumber(badgeNumber, setBadgeNumberCallback);
```
3.  减少角标个数。 一条通知被查看后，应用需要调用接口设置剩下未读通知个数，桌面刷新角标。
```typescript
let setBadgeNumberCallback = (err: BusinessError): void => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `Failed to set badge number. Code is ${err.code}, message is ${err.message}`);
return;
}
hilog.info(DOMAIN_NUMBER, TAG, `Succeeded in setting badge number.`);
}
let badgeNumber = 8;
notificationManager.setBadgeNumber(badgeNumber, setBadgeNumberCallback);
```
常见问题
由于setBadgeNumber为异步接口，使用setBadgeNumber连续设置角标时，为了确保执行顺序符合预期，需要确保上一次设置完成后才能进行下一次设置。
-  反例 每次接口调用是相互独立的、没有依赖关系的，实际执行时无法保证调用顺序。 示例如下：
```typescript
let badgeNumber: number = 10;
notificationManager.setBadgeNumber(badgeNumber).then(() => {
hilog.info(DOMAIN_NUMBER, TAG, `setBadgeNumber 10 success.`);
});
badgeNumber = 11;
notificationManager.setBadgeNumber(badgeNumber).then(() => {
hilog.info(DOMAIN_NUMBER, TAG, `setBadgeNumber 11 success.`);
});
```
-  正例 多次接口调用存在依赖关系，确保上一次设置完成后才能进行下一次设置。 示例如下：
```typescript
let badgeNumber: number = 10;
notificationManager.setBadgeNumber(badgeNumber).then(() => {
hilog.info(DOMAIN_NUMBER, TAG, `setBadgeNumber 10 success.`);
badgeNumber = 11;
notificationManager.setBadgeNumber(badgeNumber).then(() => {
hilog.info(DOMAIN_NUMBER, TAG, `setBadgeNumber 11 success.`);
});
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/notification-slot-V14
爬取时间: 2025-04-29 21:22:26
来源: Huawei Developer
系统支持多种通知渠道，不同通知渠道对应的通知提醒方式不同，可以根据应用的实际场景选择适合的通知渠道，并对通知渠道进行管理（支持创建、查询、删除等操作）。
通知渠道类型说明
不同类型的通知渠道对应的通知提醒方式不同，详见下表。其中，Y代表支持，N代表不支持。
| SlotType | 取值 | 分类 | 通知中心 | 横幅 | 锁屏 | 铃声/振动 | 状态栏图标 | 自动亮屏 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| UNKNOWN_TYPE | 0 | 未知类型 | Y | N | N | N | N | N |
| SOCIAL_COMMUNICATION | 1 | 社交通信 | Y | Y | Y | Y | Y | Y |
| SERVICE_INFORMATION | 2 | 服务提醒 | Y | Y | Y | Y | Y | Y |
| CONTENT_INFORMATION | 3 | 内容资讯 | Y | N | N | N | N | N |
| CUSTOMER_SERVICE | 5 | 客服消息 | Y | N | N | Y | Y | N |
| OTHER_TYPES | 0xFFFF | 其他 | Y | N | N | N | N | N |
接口说明
通知渠道主要接口如下。其他接口介绍详情参见API参考。
| 接口名 | 描述 |
| --- | --- |
| addSlot(type: SlotType): Promise<void> | 创建指定类型的通知渠道。 |
| getSlot(slotType: SlotType): Promise<NotificationSlot> | 获取一个指定类型的通知渠道。 |
| removeSlot(slotType: SlotType): Promise<void> | 删除此应用程序指定类型的通知渠道。 |
除了可以使用addslot()创建通知渠道，还可以在发布通知的NotificationRequest中携带notificationSlotType字段，如果对应渠道不存在，会自动创建。
开发步骤
1.  导入notificationManager模块。
```typescript
import { notificationManager } from '@kit.NotificationKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
const TAG: string = '[PublishOperation]';
const DOMAIN_NUMBER: number = 0xFF00;
```
2.  创建指定类型的通知渠道。
```typescript
// addslot回调
let addSlotCallBack = (err: BusinessError): void => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `addSlot failed, code is ${err.code}, message is ${err.message}`);
} else {
hilog.info(DOMAIN_NUMBER, TAG, `addSlot success`);
}
}
notificationManager.addSlot(notificationManager.SlotType.SOCIAL_COMMUNICATION, addSlotCallBack);
```
3.  查询指定类型的通知渠道。 获取对应渠道是否创建以及该渠道支持的通知提醒方式，比如是否有声音提示，是否有震动，锁屏是否可见等。
```typescript
// getSlot回调
let getSlotCallback = (err: BusinessError, data: notificationManager.NotificationSlot): void => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `Failed to get slot. Code is ${err.code}, message is ${err.message}`);
} else {
hilog.info(DOMAIN_NUMBER, TAG, `Succeeded in getting slot.`);
if (data != null) {
hilog.info(DOMAIN_NUMBER, TAG, `slot enable status is ${JSON.stringify(data.enabled)}`);
hilog.info(DOMAIN_NUMBER, TAG, `slot level is ${JSON.stringify(data.level)}`);
hilog.info(DOMAIN_NUMBER, TAG, `vibrationEnabled status is ${JSON.stringify(data.vibrationEnabled)}`);
hilog.info(DOMAIN_NUMBER, TAG, `lightEnabled status is ${JSON.stringify(data.lightEnabled)}`);
}
}
}
let slotType: notificationManager.SlotType = notificationManager.SlotType.SOCIAL_COMMUNICATION;
notificationManager.getSlot(slotType, getSlotCallback);
```
4.  删除指定类型的通知渠道。
```typescript
// removeSlot回调
let removeSlotCallback = (err: BusinessError): void => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `removeSlot failed, code is ${JSON.stringify(err.code)}, message is ${JSON.stringify(err.message)}`);
} else {
hilog.info(DOMAIN_NUMBER, TAG, "removeSlot success");
}
}
let slotType: notificationManager.SlotType = notificationManager.SlotType.SOCIAL_COMMUNICATION;
notificationManager.removeSlot(slotType, removeSlotCallback);
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/publish-notification-V14
爬取时间: 2025-04-29 21:22:40
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/text-notification-V14
爬取时间: 2025-04-29 21:22:53
来源: Huawei Developer
文本类型通知主要应用于发送短信息、提示信息等，支持普通文本类型和多行文本类型。
表1基础类型通知中的内容分类
| 类型 | 描述 |
| --- | --- |
| NOTIFICATION_CONTENT_BASIC_TEXT | 普通文本类型。 |
| NOTIFICATION_CONTENT_MULTILINE | 多行文本类型。 |
接口说明
通知发布接口说明详见下表，通知发布的详情可通过入参NotificationRequest来进行指定，可以包括通知内容、通知ID、通知的通道类型和通知发布时间等信息。
| 接口名 | 描述 |
| --- | --- |
| publish(request: NotificationRequest, callback: AsyncCallback<void>): void | 发布通知。 |
开发步骤
1.  导入模块。
```typescript
import { notificationManager } from '@kit.NotificationKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
const TAG: string = '[PublishOperation]';
const DOMAIN_NUMBER: number = 0xFF00;
```
2.  构造NotificationRequest对象，并发布通知。 普通文本类型通知由标题、文本内容和附加信息三个字段组成，其中标题和文本内容是必填字段，大小均需要小于200字节，超出部分会被截断。 多行文本类型通知继承了普通文本类型的字段，同时新增了多行文本内容、内容概要和通知展开时的标题，其字段均小于200字节，超出部分会被截断。通知默认显示与普通文本相同，展开后，标题显示为展开后标题内容，多行文本内容多行显示。
```typescript
let notificationRequest: notificationManager.NotificationRequest = {
id: 1,
content: {
notificationContentType: notificationManager.ContentType.NOTIFICATION_CONTENT_BASIC_TEXT, // 普通文本类型通知
normal: {
title: 'test_title',
text: 'test_text',
additionalText: 'test_additionalText',
}
}
};
notificationManager.publish(notificationRequest, (err: BusinessError) => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `Failed to publish notification. Code is ${err.code}, message is ${err.message}`);
return;
}
hilog.info(DOMAIN_NUMBER, TAG, 'Succeeded in publishing notification.');
});
```
3.  普通文本类型通知由标题、文本内容和附加信息三个字段组成，其中标题和文本内容是必填字段，大小均需要小于200字节，超出部分会被截断。
```typescript
let notificationRequest: notificationManager.NotificationRequest = {
id: 1,
content: {
notificationContentType: notificationManager.ContentType.NOTIFICATION_CONTENT_BASIC_TEXT, // 普通文本类型通知
normal: {
title: 'test_title',
text: 'test_text',
additionalText: 'test_additionalText',
}
}
};
notificationManager.publish(notificationRequest, (err: BusinessError) => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `Failed to publish notification. Code is ${err.code}, message is ${err.message}`);
return;
}
hilog.info(DOMAIN_NUMBER, TAG, 'Succeeded in publishing notification.');
});
```
4.  多行文本类型通知继承了普通文本类型的字段，同时新增了多行文本内容、内容概要和通知展开时的标题，其字段均小于200字节，超出部分会被截断。通知默认显示与普通文本相同，展开后，标题显示为展开后标题内容，多行文本内容多行显示。
```typescript
let notificationRequest: notificationManager.NotificationRequest = {
id: 3,
content: {
notificationContentType: notificationManager.ContentType.NOTIFICATION_CONTENT_MULTILINE, // 多行文本类型通知
multiLine: {
title: 'test_title',
text: 'test_text',
briefText: 'test_briefText',
longTitle: 'test_longTitle',
lines: ['line_01', 'line_02', 'line_03', 'line_04'],
}
}
};
// 发布通知
notificationManager.publish(notificationRequest, (err: BusinessError) => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `Failed to publish notification. Code is ${err.code}, message is ${err.message}`);
return;
}
hilog.info(DOMAIN_NUMBER, TAG, 'Succeeded in publishing notification.');
});
```
-  普通文本类型通知由标题、文本内容和附加信息三个字段组成，其中标题和文本内容是必填字段，大小均需要小于200字节，超出部分会被截断。
```typescript
let notificationRequest: notificationManager.NotificationRequest = {
id: 1,
content: {
notificationContentType: notificationManager.ContentType.NOTIFICATION_CONTENT_BASIC_TEXT, // 普通文本类型通知
normal: {
title: 'test_title',
text: 'test_text',
additionalText: 'test_additionalText',
}
}
};
notificationManager.publish(notificationRequest, (err: BusinessError) => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `Failed to publish notification. Code is ${err.code}, message is ${err.message}`);
return;
}
hilog.info(DOMAIN_NUMBER, TAG, 'Succeeded in publishing notification.');
});
```
-  多行文本类型通知继承了普通文本类型的字段，同时新增了多行文本内容、内容概要和通知展开时的标题，其字段均小于200字节，超出部分会被截断。通知默认显示与普通文本相同，展开后，标题显示为展开后标题内容，多行文本内容多行显示。
```typescript
let notificationRequest: notificationManager.NotificationRequest = {
id: 3,
content: {
notificationContentType: notificationManager.ContentType.NOTIFICATION_CONTENT_MULTILINE, // 多行文本类型通知
multiLine: {
title: 'test_title',
text: 'test_text',
briefText: 'test_briefText',
longTitle: 'test_longTitle',
lines: ['line_01', 'line_02', 'line_03', 'line_04'],
}
}
};
// 发布通知
notificationManager.publish(notificationRequest, (err: BusinessError) => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `Failed to publish notification. Code is ${err.code}, message is ${err.message}`);
return;
}
hilog.info(DOMAIN_NUMBER, TAG, 'Succeeded in publishing notification.');
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/progress-bar-notification-V14
爬取时间: 2025-04-29 21:23:07
来源: Huawei Developer
进度条通知也是常见的通知类型，主要应用于文件下载、事务处理进度显示。当前系统提供了进度条模板，发布通知应用设置好进度条模板的属性值，如模板名、模板数据，通过通知子系统发送到通知栏显示。
目前系统模板仅支持进度条模板，通知模板NotificationTemplate中的data参数为用户自定义数据，用于显示与模块相关的数据。
接口说明
isSupportTemplate()是查询模板是否支持接口，目前仅支持进度条模板。
| 接口名 | 描述 |
| --- | --- |
| isSupportTemplate(templateName: string): Promise<boolean> | 查询模板是否存在。 |
开发步骤
1.  导入模块。
```typescript
import { notificationManager } from '@kit.NotificationKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
const TAG: string = '[PublishOperation]';
const DOMAIN_NUMBER: number = 0xFF00;
```
2.  查询系统是否支持进度条模板，查询结果为支持downloadTemplate模板类通知。 查询系统支持进度条模板后，再进行后续的步骤操作。
```typescript
notificationManager.isSupportTemplate('downloadTemplate').then((data:boolean) => {
hilog.info(DOMAIN_NUMBER, TAG, 'Succeeded in supporting download template notification.');
let isSupportTpl: boolean = data; // isSupportTpl的值为true表示支持downloadTemplate模板类通知，false表示不支持
}).catch((err: BusinessError) => {
hilog.error(DOMAIN_NUMBER, TAG, `Failed to support download template notification. Code is ${err.code}, message is ${err.message}`);
});
```
3.  构造进度条模板对象，并发布通知。
```typescript
let notificationRequest: notificationManager.NotificationRequest = {
id: 5,
content: {
notificationContentType: notificationManager.ContentType.NOTIFICATION_CONTENT_BASIC_TEXT,
normal: {
title: 'test_title',
text: 'test_text',
additionalText: 'test_additionalText'
}
},
// 构造进度条模板，name字段当前需要固定配置为downloadTemplate
template: {
name: 'downloadTemplate',
data: { title: 'File Title', fileName: 'music.mp4', progressValue: 45 }
}
}
// 发布通知
notificationManager.publish(notificationRequest, (err: BusinessError) => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `Failed to publish notification. Code is ${err.code}, message is ${err.message}`);
return;
}
hilog.info(DOMAIN_NUMBER, TAG, 'Succeeded in publishing notification.');
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/notification-with-wantagent-V14
爬取时间: 2025-04-29 21:23:20
来源: Huawei Developer
当发布通知时，如果期望用户可以通过点击通知栏拉起目标应用组件或发布公共事件，可以通过Ability Kit申请WantAgent封装至通知消息中。
图1携带行为意图的通知运行机制
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170126.58327706980616993983672291642074:50001231000000:2800:203A3DBC8BB26FDD4DF8D2818807449555D834A5FDB8F74B50FD45F51FF20712.png)
接口说明
具体接口描述，详见WantAgent接口文档。
| 接口名 | 描述 |
| --- | --- |
| getWantAgent(info: WantAgentInfo, callback: AsyncCallback<WantAgent>): void | 创建WantAgent。 |
开发步骤
1.  导入模块。
```typescript
import { notificationManager } from '@kit.NotificationKit';
import { wantAgent, WantAgent } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
const TAG: string = '[PublishOperation]';
const DOMAIN_NUMBER: number = 0xFF00;
```
2.  创建WantAgentInfo信息。 场景一：创建拉起UIAbility的WantAgent的WantAgentInfo信息。 场景二：创建发布公共事件的WantAgent的WantAgentInfo信息。
```typescript
let wantAgentObj:WantAgent; // 用于保存创建成功的wantAgent对象，后续使用其完成触发的动作。
// 通过WantAgentInfo的operationType设置动作类型
let wantAgentInfo:wantAgent.WantAgentInfo = {
wants: [
{
deviceId: '',
bundleName: 'com.samples.notification',
abilityName: 'SecondAbility',
action: '',
entities: [],
uri: '',
parameters: {}
}
],
actionType: wantAgent.OperationType.START_ABILITY,
requestCode: 0,
wantAgentFlags:[wantAgent.WantAgentFlags.CONSTANT_FLAG]
};
```
3.  调用getWantAgent()方法进行创建WantAgent。
```typescript
// 创建WantAgent
wantAgent.getWantAgent(wantAgentInfo, (err: BusinessError, data:WantAgent) => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `Failed to get want agent. Code is ${err.code}, message is ${err.message}`);
return;
}
hilog.info(DOMAIN_NUMBER, TAG, 'Succeeded in getting want agent.');
wantAgentObj = data;
});
```
4.  构造NotificationRequest对象，并发布WantAgent通知。
```typescript
// 构造NotificationRequest对象
let notificationRequest: notificationManager.NotificationRequest = {
content: {
notificationContentType: notificationManager.ContentType.NOTIFICATION_CONTENT_BASIC_TEXT,
normal: {
title: 'Test_Title',
text: 'Test_Text',
additionalText: 'Test_AdditionalText',
},
},
id: 6,
label: 'TEST',
// wantAgentObj使用前需要保证已被赋值（即步骤3执行完成）
wantAgent: wantAgentObj,
}
notificationManager.publish(notificationRequest, (err: BusinessError) => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `Failed to publish notification. Code is ${err.code}, message is ${err.message}`);
return;
}
hilog.info(DOMAIN_NUMBER, TAG, 'Succeeded in publishing notification.');
});
```
5.  用户通过点击通知栏上的通知，系统会自动触发WantAgent的动作。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/notification-cancel-V14
爬取时间: 2025-04-29 21:23:34
来源: Huawei Developer
用户收到通知提醒后，点击通知并拉起应用到前台时，应用可以选择取消某条通知或所有通知。
例如，用户收到某个好友的IM消息，点击通知进入应用查看消息后，应用可以取消相关通知提醒。
接口说明
通知取消接口如下。接口详情参见API参考。
| 接口名 | 描述 |
| --- | --- |
| cancel(id: number, callback: AsyncCallback<void>): void | 取消指定的通知。 |
| cancelAll(callback: AsyncCallback<void>): void | 取消所有该应用发布的通知。 |
开发步骤
本文以取消文本类型通知为例进行说明，其他类型通知取消操作与此类似。
1.  导入模块。
```typescript
import { notificationManager } from '@kit.NotificationKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
const TAG: string = '[PublishOperation]';
const DOMAIN_NUMBER: number = 0xFF00;
```
2.  发布通知。 参考发布文本类型通知。
3.  取消通知。
```typescript
// 当拉起应用到前台，查看消息后，调用该接口取消通知。
notificationManager.cancel(1, (err: BusinessError) => {
if (err) {
hilog.error(DOMAIN_NUMBER, TAG, `Failed to cancel notification. Code is ${err.code}, message is ${err.message}`);
return;
}
hilog.info(DOMAIN_NUMBER, TAG, 'Succeeded in canceling notification.');
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-kit-guide-V14
爬取时间: 2025-04-29 21:23:47
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-introduction-V14
爬取时间: 2025-04-29 21:24:01
来源: Huawei Developer
Payment Kit（华为支付服务）提供了方便、安全和快捷的支付方式，开发者在开发的商户应用/元服务中接入华为支付服务便捷且快速。
商户应用/元服务接入Payment Kit后，可在商户的应用/元服务内通过拉起华为支付收银台来完成订单的支付并展示支付结果以及完成用户对实体商品或服务（例如酒店服务、出行服务、充值缴费服务等）的购买。
Payment Kit还提供了数字人民币支付能力，商户通过接入数字人民币支付能力，可在商户的应用/元服务调用开放API接口，拉起数字人民币收银台来完成订单支付。
场景介绍
-  用户在商户的应用/元服务选购完不同的商品后，可以直接在商户的应用/元服务里完成下单和支付。 接入场景：商户基础支付场景、平台类商户合单支付场景、通用收银台支付相关场景。
-  用户在商户APP应用/元服务选购完商品或主动点击商户提供的签约选项后，商户的应用/元服务可拉起华为支付签约收银台，用户完成签约后，后续再次购买商品时，商户可以直接发起代扣，减少用户拉起收银台、输入支付密码等相关操作。 接入场景：支付并签约场景、签约代扣场景。
-  用户在商户APP应用/元服务进行话费充值，选好充值金额后发起支付，商户的应用/元服务通过拉起数字人民币收银台完成订单支付以及话费充值的操作。 接入场景：数字人民币支付场景。
基本概念
数字人民币：数字人民币是中国人民银行提供的通用账户型法定数字货币，由指定合格的运营机构参与运营，具有账户和价值模式。以广义账户体系为基础，与传统银行账户体系融合互通，支持可控匿名，具有法偿性。
通用收银台：为鸿蒙生态下的应用和元服务提供收款能力的收银台。
商户模型与支付能力
如接入数字人民币支付场景，需在运营机构或受理服务机构完成商户入网（参见这里）。
Payment Kit当前提供三种接入商户模型：商户(下文统称为直连商户)、平台类商户、服务商。开发者需要根据实际业务模式选择适用的合作身份。商户模型详细内容请参见接入模式。
| 商户模型  | 说明  |
| --- | --- |
| 直连商户  | 直接与华为支付对接，使用华为支付服务的经营主体。  |
| 平台类商户  | 为商户交易场景提供支付、结算解决方案，主要面向对商品交易或服务进行线上撮合和管理的平台。 子商户：平台上入驻华为支付开展交易的商家，与平台类商户关联。  |
| 服务商  | 为商户提供开户申请、支付接入、技术开发等综合解决方案机构。 特约商户：服务商推荐在华为支付入网的商户，与服务商关联。  |
商户模型
说明
直连商户
直接与华为支付对接，使用华为支付服务的经营主体。
平台类商户
为商户交易场景提供支付、结算解决方案，主要面向对商品交易或服务进行线上撮合和管理的平台。
子商户：平台上入驻华为支付开展交易的商家，与平台类商户关联。
服务商
为商户提供开户申请、支付接入、技术开发等综合解决方案机构。
特约商户：服务商推荐在华为支付入网的商户，与服务商关联。
Payment Kit支持的支付能力如下：
| 支付能力  | 支持的商户  | 接入场景  | 描述  |
| --- | --- | --- | --- |
| 基础支付  | 直连商户、平台类商户、服务商  | 商户基础支付场景 通用收银台支付相关场景  | 用户选购商品后，商户通过接入基础支付完成用户订单的创建与支付。  |
| 合单支付  | 平台类商户  | 平台类商户合单支付场景  | 通过合单支付，商户可将不同商户的一个或多个订单合并到同一个订单完成支付。  |
| 支付并签约  | 直连商户、服务商  | 支付并签约场景  | 用户支付完成后可与商户签订协议，完成后续相关业务自动扣款。  |
| 签约代扣  | 直连商户、服务商  | 签约代扣场景  | 商户可主动发起与用户签订相关协议，完成相关业务自动扣款（如水电费预缴，自动充值代扣等），减少一些业务相关的用户操作。  |
| 数字人民币支付  | 运营机构或受理服务机构入网的商户  | 数字人民币支付场景  | 在运营机构或受理服务机构入网的商户可通过接入数字人民币来完成如用户话费充值缴费等相关支付操作。  |
支付能力
支持的商户
接入场景
描述
基础支付
直连商户、平台类商户、服务商
商户基础支付场景
通用收银台支付相关场景
用户选购商品后，商户通过接入基础支付完成用户订单的创建与支付。
合单支付
平台类商户
平台类商户合单支付场景
通过合单支付，商户可将不同商户的一个或多个订单合并到同一个订单完成支付。
支付并签约
直连商户、服务商
支付并签约场景
用户支付完成后可与商户签订协议，完成后续相关业务自动扣款。
签约代扣
直连商户、服务商
签约代扣场景
商户可主动发起与用户签订相关协议，完成相关业务自动扣款（如水电费预缴，自动充值代扣等），减少一些业务相关的用户操作。
数字人民币支付
运营机构或受理服务机构入网的商户
数字人民币支付场景
在运营机构或受理服务机构入网的商户可通过接入数字人民币来完成如用户话费充值缴费等相关支付操作。
支付能力之间的差异：
华为支付接入顺序如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170126.29263736418039491582669783002956:50001231000000:2800:99B29F439889205FC421A47D120CE2A92A40621E8006D3AA95554CDD6A3B6BED.png)
数字人民币支付接入顺序如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170126.63838460784088817345375763023332:50001231000000:2800:B61DAA4783DC6A0120DD2EC1149CF203E73CB33E46AF1994B486C6A8007564E8.png)
通用收银台混合支付场景接入顺序如下：
通用收银台纯外部支付场景接入顺序如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170126.24609394363780034148285986671490:50001231000000:2800:9D8AFF180CA68D256D03CC6C9DB615039EBBD51F22146D8286B69E824A026DB9.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170126.35560184795020835285601710210813:50001231000000:2800:F28225AFE61EE209F551F2478516120FCDC898452533EB49F4FE1879498CB105.png)
功能使用限制
Payment Kit的能力只支持实物商品和服务（酒店服务、出行服务、充值缴费服务）的支付，暂不支持如电子虚拟人物形象，游戏中的关卡、货币及道具等虚拟商品的支付。
虚拟商品的支付可接入IAP应用内支付服务。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-access-specifications-V14
爬取时间: 2025-04-29 21:24:15
来源: Huawei Developer
为了确保用户获得良好的支付体验，Payment Kit制定了相关接入规范，请开发者遵照执行，具体要求（非强制性）如下：
支付方式呈现
支付体验要求
1.  商户收银台（不支持银行卡快捷支付） 商户收银台（支持银行卡快捷支付）
|   |   |    |
| --- | --- | --- |
| 商户收银台（不支持银行卡快捷支付）  | 商户收银台（支持银行卡快捷支付）  |    |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170126.95412031697841604312752629997962:50001231000000:2800:F55AFEEA5CAAB13CD0D4ECE95E7C47066136F17EBF6A690E53D43E70133C0253.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170126.50840319004047215792015753992049:50001231000000:2800:D49A8B772D9DD5F5D250EB07B6C88E5722EC8A6CCA34FF1ED4C68186AB55E839.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-preparations-V14
爬取时间: 2025-04-29 21:24:28
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-merc-regist-apply-V14
爬取时间: 2025-04-29 21:24:41
来源: Huawei Developer
华为支付当前仅支持商户接入，在开发前需要先完成华为支付商户入网。
商户入网后会分配对应的商户号，商户号作为开放API接口请求的必要入参，在开发前需要先获取商户号。
如已完成商户入网并获取好商户号请跳过该步骤。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-product-configuration-V14
爬取时间: 2025-04-29 21:24:55
来源: Huawei Developer
如涉及以下场景，需提前完成相关产品的开通或配置操作。如不涉及，请直接跳转下一章节。
场景一：产品开通操作
部分支付场景接入涉及产品开通，未开通产品直接接入，商户请求华为支付开放的API接口时可能会导致“商户未找到对应的产品示例”、“不支持的操作”等异常响应。开通产品需商户侧与华为支付侧沟通（合作咨询可点击此处）后申请开通对应产品。
涉及产品开通的支付场景如下：
涉及商户：直连商户、服务商、平台类商户
处理人：商户产品、商户BD等
场景二：涉及账单下载
如需要生成及下载账单，需商户在华为支付商户平台入网时设置的管理员先在“华为支付商户平台> 商户中心 > 产品功能 > 功能设置”中开启“账单接口获取开关”，开启后次日开始生成前一日的账单。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170127.03382331941512564750103283406302:50001231000000:2800:60DC25B6F91E6CE04F2F194AF3005271F50033676751432189D8E7BC9E9090BB.png)
涉及商户：直连商户、服务商、平台类商户
处理人：商户在华为支付商户平台设置的超级管理员
场景三：服务商代特约商户发起退款
服务商商户模型接入，特约商户需要发起退款，涉及服务商代特约商户发起退款，需要服务商在华为支付商户平台上申请API退款授权完成特约商户退款授权操作。
涉及商户：服务商
处理人：商户在华为支付商户平台设置的超级管理员
场景四：设置支付账户留存金额
商户交易款项会结算到卡，商户可设置支付账户留存金额并充值留存一定的余额在支付账户，以此保证退款功能正常可用。
涉及商户：直连商户、服务商、平台类商户
处理人：商户在华为支付商户平台设置的超级管理员
场景五：涉及账单分账
商户如需对订单进行分账操作，可通过直连商户预下单或平台类商户/服务商预下单接口中allocationType字段实现，使用该字段前需商户侧与华为支付侧沟通（合作咨询可点击此处）后申请开通并配置分账能力。
分账相关操作参见分账交易管理。
涉及商户：直连商户、服务商、平台类商户
处理人：商户在华为支付商户平台设置的超级管理员

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-config-agc-V14
爬取时间: 2025-04-29 21:25:08
来源: Huawei Developer
请先参考“应用开发准备”完成基本准备工作及指纹配置，再继续进行以下开发活动。
开通步骤
1.
2.
3.
4.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170127.39786182882679133468893286056536:50001231000000:2800:B100257CDFCA9BF8F2CA6D2F163D9B1BD08CCDE99F4CEDED51EEA4319381551F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170127.29609885397328754009074503331582:50001231000000:2800:2B86C3FFC73CBA155AA96EED6E8826EA858A8476933AD99B17515F8D276E3060.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170127.91432169686364063925052060868004:50001231000000:2800:1A6187F47CB1C7CDBBB649771B2ACC595B00F8B465D8C6A71FB924525CDC3666.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170127.84250173724460848747191496549092:50001231000000:2800:514A72492F35C32E4E814C718019317EB58F2969522773BFE3AA0D9939D36495.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-binding-appid-to-merc-V14
爬取时间: 2025-04-29 21:25:21
来源: Huawei Developer
商户号绑定AppID的商户需要通过华为支付商户平台入网，详见商户入网和获取商户号。通过华为开发者联盟官网开通商户服务入网的商户暂不支持直接接入华为支付以及绑定AppID操作。
商户（以下所称商户含上文介绍中的所有商户模型）后续支付交易依赖于AppGallery Connect中创建应用生成的AppID与商户号的关联关系。商户在请求预下单接口传递AppID入参，后续可以在AppGallery Connect网站上基于应用维度查看交易报表数据。传递AppID入参后，华为支付侧会校验商户号与传递的AppID是否匹配，如不匹配则会直接响应异常。因此，接入华为支付服务前商户需要为商户号绑定AppID，如无商户号则需要先申请，详细介绍参考商户入网和获取商户号。
AppID绑定详细可参见AppID管理及关联。
基本概念
同主体：商户号与AppID所关联的营业主体信息一致。
异主体：商户号与AppID关联的营业主体信息不一致。
绑定AppID说明
直连商户/平台类商户绑定
1.
2.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170127.89506318231688683108855935579917:50001231000000:2800:0596474D89CDDB76AEDEA8F272D6187B81EC487EBF9A2E63E5E9E3D7C221B791.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170127.30074741564356846304643447225857:50001231000000:2800:2A79C1A8F020E76F0E50FA4899F263FA4B434B889F43F25C4DB538AA5C0EC344.png)
服务商绑定
服务商绑定AppID涉及如下场景：
1.  服务商需要绑定服务商应用AppID可直接在华为支付商户平台发起绑定申请。
2.  特约商户需要绑定特约商户应用AppID，需要服务商在华为支付商户平台发起邀请特约商户绑定AppID才可以进行绑定。
服务商绑定
1.
2.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170127.39524303602205528346106037335910:50001231000000:2800:2E3A625AA9A1AC833F524672D0EAEECD2515279363834E75BEF878140C7D5596.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170127.04910792127098069111661615119452:50001231000000:2800:894070F2204486AD8CC080C1CBB41F80E3A37811AEA06571E1EC2BA95192041B.png)
服务商邀请特约商户绑定
1.
2.
3.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170127.17926864293873316400275022218492:50001231000000:2800:D711CAA3F675281A9867C7521C25481CACA074D094EFC179FDD8A1B029F61B11.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170128.45498838411441652254221576020538:50001231000000:2800:694F3591D7C1CE69552ACBC5FD12ADD4475ADA6DC1CEBA30A633D535B66E1D86.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170128.63909999353573299706444633555218:50001231000000:2800:0517039460712E13B03A60748C17ADF156343F86661F12239C923B248D49A72A.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-certificates-config-V14
爬取时间: 2025-04-29 21:25:35
来源: Huawei Developer
开发者接入华为支付开放API接口，需要通过证书来对请求内容及响应内容做签名和验证签名，以保证请求的安全性和可靠性。
本文将介绍接入过程中相关证书的作用和获取方法。在准备证书前，请在华为支付商户平台入网，具体请参见商户入网。
需准备证书：商户证书、华为支付证书（公钥）。
证书说明
证书使用如图所示：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170128.18802694971932645362908617588904:50001231000000:2800:E1114D519009399B6AE4773B2A9BF23EDF4283D29B50A59918CD7A0452A1D1F5.png)
商户证书
商户证书是指由商户自行生成（参见生成商户证书）或申请（可自行网上搜索并选择CA认证机构进行证书申请）的，包含商户公钥和私钥信息的证书。
私钥用于商户在华为支付开放API接口请求过程中的签名，公钥用于提供给华为支付侧进行请求验签。
该证书文件要求为pem格式，支持RSA和SM2两种算法类型的证书。
证书私钥
商户自行生成或申请商户证书时，会配套生成商户私钥。
证书公钥
商户自行生成或申请商户证书时，会配套生成商户公钥。
-
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170128.74481896742558947611950261390947:50001231000000:2800:83F0F9827398B12F93813B98A7C79F8DE9BC47F9CE826FA957F026134B51B518.png)
生成商户证书
方式1：使用JavaScript的库线下生成（生成RSA算法类型证书为例，推荐方法）
1.  登录Node.js官方网站，下载Node.js软件包。请选择LTS版本，并根据电脑操作系统选择对应的软件包。 如果安装Node.js没有选择默认安装目录，则需要在系统变量“path”中手工添加环境变量信息“我的电脑>属性>高级系统设置>高级>环境变量”增加Node.js的安装路径。 打开命令行工具，输入node -v命令，能正常查询Node.js的版本号，说明Node.js执行环境配置完成。
```typescript
const crypto = require('crypto');
// 生成密钥对
const { publicKey, privateKey } = crypto.generateKeyPairSync('rsa', {
modulusLength: 3072, // 密钥长度，不少于3072
publicKeyEncoding: {
type: 'spki', // 公钥编码格式
format: 'pem' // 公钥输出格式
},
privateKeyEncoding: {
type: 'pkcs8', // 私钥编码格式
format: 'pem' // 私钥输出格式
}
});
console.info('生成的公钥：');
console.info(publicKey);
console.info('生成的私钥：');
console.info(privateKey);
```
2.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170128.57719162779286503969987279212633:50001231000000:2800:E06561B313EBFA7896D899FF8254641FF993B1A950B8D5112DA93A8CA590B204.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170128.16006092920288465748361577027107:50001231000000:2800:B4223B4137C1CA101729A88A628B2A46BD4B0AD418E65854BE02E30EC94B7CC6.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170128.81053933678903564575399818422169:50001231000000:2800:A5B8A478A68CC16DEB645919211936D0D80B953F73E2AA123DAEED6827752A60.png)
方式2：使用在线工具生成
开发者可自行搜索使用相关开源的在线工具或网站生成相应证书公私钥对。
生成公私钥为敏感操作，请谨慎使用，建议开发者自行生成密钥对。
上传商户证书
证书公钥生成后须商户手动上传到华为支付商户平台，用于华为支付服务器对支付请求验证签名。
上传的证书公钥需要满足如下要求：
请登录华为支付商户平台，在“证书管理 > 上传商户证书”模块进行商户证书公钥上传。
华为支付证书
华为支付证书是指由华为支付提供的，包含华为支付平台标识、公钥信息的证书。该证书算法为SM2。
下载华为支付证书
登录华为支付商户平台后，通过“商户中心 > 证书管理 > 华为支付证书”页签进行华为支付证书下载，该证书用于校验华为支付给商户业务系统发送的信息，如支付结果信息等。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170128.66645624249117929698652103820857:50001231000000:2800:4AA20450E9CFD393E5648A83E773C612223026DA5D57EAC6D81EA7DC1289867E.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-server-connect-V14
爬取时间: 2025-04-29 21:27:00
来源: Huawei Developer
Payment Kit服务提供了支付系统相关的一系列API接口。为减小API接口的接入工作量，华为支付服务提供了java版本对应的Maven依赖用于云侧服务对接。
开发者可通过Maven集成来完成服务器开发环境的构建，以此来快速使用华为支付提供的API接口。
可下载示例代码支付-华为支付服务-服务端用以快速完成商户服务器接入。
约束与限制
商户使用提供的示例代码接入华为支付前请确保网络已正常连接，可以从华为支付仓库地址正常拉取Maven依赖。
开发环境：JDK1.8及以上。
集成Maven依赖
在示例代码pom.xml文件中已配置仓库地址，如无法正常拉取依赖，可在Maven配置文件“settings.xml”中添加华为支付的Maven仓库地址。
在示例代码pom.xml文件中已引入jar包的Maven坐标。如商户自己构建工程则需在pom.xml文件中引入如下坐标：
配置初始化
将以下商户相关配置添加到示例代码配置文件src/main/resources/petalpayconfig.properties。
配置内容示例如下：
```shell
# 商户号
PETALPAY.MERC_NO=121540000***
# 商户私钥
PETALPAY.MERC_PRIVATE_KEY=MIIJQwIBADAN=9w0BAQEFAASCCS0wg******************************CldcDlDCSsdfDceCSDr+RyvJdfcXssdEA=
# 商户证书ID
PETALPAY.MERC_AUTH_ID=101540200089***
# 商户私钥签名类型
PETALPAY.SIGN_TYPE=RSA
# 华为支付服务域名
PETALPAY.SERVER_HOST=https://petalpay-developer.cloud.huawei.com.cn
# 华为支付服务回调验签公钥
PETALPAY.HW_PAY_PUBLIC_KEY_FOR_CALLBACK=6D015316F09CB747E4467******************************DB46DA4BD0960ADD500D84912
# 华为支付服务加密公钥（非必选）PETALPAY.HW_PUBLIC_KEY_FOR_SESSIONKEY=042A7D32FA19C29D3E722D6C4ACAC0B******************************E5A5B1C8120DAC9882E4B093B9CE7A38296F87F41747D319A
# 商户号关联的APPID
PETALPAY.APPID=111831***
```
业务接口请求
1.  方式二：自定义实现请求客户端工具类。开发者如果需要自定义接口请求的client，用于处理请求中的日志打印等操作，可以通过继承PetalPayClient 来实现。示例如下：
2.  不同API接口调用URI不一样，详情请参见API参考文档。
通知回调处理
可使用VerifyTools.getCallbackResult方法自动处理回调结果验签并返回响应给华为支付服务器以及实现CallBackHandleInterface接口来处理回调结果。
通知回调处理示例如下：
关于通知回调更多具体要求可参考通知回调接口说明。
敏感信息处理
为了保证API接口请求通信过程中敏感信息字段（如用户的住址、银行卡号、手机号码等，涉及加密字段会在具体API接口中标注）的机密性，华为支付服务要求加密上送。 如开发者使用对应业务接口涉及字段加密，请联系华为侧工程师获取对应的SM2加密公钥（合作咨询可点击此处）。
涉及秘钥：
| 秘钥类型 | 来源 | 作用 |
| --- | --- | --- |
| SM2 | 华为支付提供。 | 加密开发者生成的SM4秘钥。 |
| SM4 | 开发者生成。 | 加密敏感信息字段。 |
秘钥类型
来源
作用
SM2
华为支付提供。
加密开发者生成的SM4秘钥。
SM4
开发者生成。
加密敏感信息字段。
处理逻辑：
1、开发者生成SM4对称密钥，用于加密敏感数据内容并作为入参传递给华为支付。
2、开发者使用华为支付提供的SM2秘钥加密生成的SM4对称密钥并通过PayMercAuth.sessionKey字段传递给华为支付用于解密敏感信息。
本质为SM4对称密钥加密，示例代码如下：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-digital-cny-pay-preparations-V14
爬取时间: 2025-04-29 21:27:14
来源: Huawei Developer
如不接入数字人民币支付能力或已完成运营机构或受理服务机构商户入网并获取了商户号和APPID，可跳过该步骤。
数字人民币支付仅支持通过运营机构或受理服务机构申请的商户接入，在开发前需要先完成商户入网（可拨打数字人民币客服热线956196根据指引完成商户入网）。
商户入网后，数字人民币的运营机构会分配对应的商户号和APPID，商户号和APPID是开放API接口请求的必要入参。
应用配置

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-payment-process-V14
爬取时间: 2025-04-29 21:27:27
来源: Huawei Developer
场景介绍
例如用户出行需要提前预定酒店房间，此时用户可打开商户开发的APP应用/元服务，选好预定房间后发起支付，商户通过接入华为支付拉起华为支付收银台完成单个订单支付。
支持商户模型：直连商户、平台类商户、服务商
华为支付收银台展示：
|  |  |  |
| --- | --- | --- |
| 支付方式选择页面 | 支付页面 | 支付结果展示页面 |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170129.86938657576018214087346665733246:50001231000000:2800:B46C91E6420F7DBD572BEA1A1747E6170F2A57EF99A23857CBE9D94E8F7C3456.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170129.49786001448158831918543610384093:50001231000000:2800:AEDF20D83F678DA57B166860008E0617A16B3E9F263CE5E01E3E435F2CD0B213.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170129.26944804258284861412304580102692:50001231000000:2800:379546D94772BBDC820A1BFC24CD6DEF8C04D409E93C53A348D8347077B00D28.png)
支付方式选择页面
支付页面
支付结果展示页面
业务流程
开发者通过接入Payment Kit基础支付，可以简便快捷的实现应用的支付能力。具体接入流程如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170129.76004486122660012155666699936078:50001231000000:2800:B00D704BF020E8EB204006E42EDBA5A9C67AE343D2F7746EE7E92A199CF4530A.png)
接口说明
接口返回值有两种返回形式：Promise和AsyncCallback。Promise和AsyncCallback只是返回方式不一样，功能相同。具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| requestPayment(context:common.UIAbilityContext, orderStr: string): Promise<void>; |  拉起Payment Kit支付收银台。  |
| requestPayment(context:common.UIAbilityContext, orderStr: string, callback: AsyncCallback<void>): void; |
接口名
描述
requestPayment(context:common.UIAbilityContext, orderStr: string): Promise<void>;
拉起Payment Kit支付收银台。
requestPayment(context:common.UIAbilityContext, orderStr: string, callback: AsyncCallback<void>): void;
开发步骤
预下单（服务器开发）
1.  为保证支付订单的安全性和可靠性需要对请求body和请求头PayMercAuth对象内的入参排序拼接进行签名。请参考排序拼接和签名示例代码。
2.  商户服务器需要将客户端支付接口入参orderStr签名后返回给客户端。 orderStr中sign字段签名规则是将除sign外的参数都做排序拼接后再签名，签名值赋值给sign字段。 以下为开放API接口请求及orderStr构建示例代码片段：
拉起华为支付收银台（端侧开发）
商户客户端使用orderStr作为参数调用requestPayment接口拉起Payment Kit支付收银台。
```typescript
import { BusinessError } from '@kit.BasicServicesKit';
import { paymentService } from '@kit.PaymentKit';
import { common } from '@kit.AbilityKit';
@Entry
@Component
struct Index {
context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
requestPaymentPromise() {
// use your own orderStr
const orderStr = '{"app_id":"***","merc_no":"***","prepay_id":"xxx","timestamp":"1680259863114","noncestr":"1487b8a60ed9f9ecc0ba759fbec23f4f","sign":"****","auth_id":"***"}';
paymentService.requestPayment(this.context, orderStr)
.then(() => {
// pay success
console.info('succeeded in paying');
})
.catch((error: BusinessError) => {
// failed to pay
console.error(`failed to pay, error.code: ${error.code}, error.message: ${error.message}`);
});
}
build() {
Column() {
Button('requestPaymentPromise')
.type(ButtonType.Capsule)
.width('50%')
.margin(20)
.onClick(() => {
this.requestPaymentPromise();
})
}
.width('100%')
.height('100%')
}
}
```
支付结果回调通知（服务器开发）
支付成功后华为支付服务器会调用开发者提供的回调接口，将支付信息返回给开发者的服务器，回调详细信息按商户模式请参见直连商户支付结果回调通知或平台类商户/服务商支付结果回调通知。
回调接口是开发者调用预下单时的入参字段callbackUrl。
为保证信息合法性，商户服务器需要对返回的支付信息进行SM2验签，验签注意事项：
延伸和拓展
当开发者完成上述能力之后还可以调用以下API接口完成订单相关操作。
直连商户
查询支付订单、申请退款、查询退款订单、查询对账单、查询结算账单。
平台类商户/服务商
查询支付订单、申请退款、查询退款订单、查询对账单、查询结算账单。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-partner-combined-V14
爬取时间: 2025-04-29 21:27:40
来源: Huawei Developer
场景介绍
用户在商户开发的APP应用/元服务上购买了一个旅行套餐，包含机票、保险、酒店等这几个不同的产品对应不同的收单商户，但用户是一次支付。平台类商户通过接入合单支付将多个不同商户的订单合到同一订单下发起支付。
支持商户模型：平台类商户
华为支付收银台合单支付展示：
|  |  |  |    |
| --- | --- | --- | --- |
| 支付方式选择页面 | 订单详情页面 | 支付结果展示页面 |    |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170129.29442469338011165215783572704290:50001231000000:2800:8061E0882646C880C3147DE74C75EA395F8CC8B3E316F333E989321314CA66AF.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170129.88017232523269590504816488447698:50001231000000:2800:5E96F95D5DCCBD4930291EBE2028FE3C2E0B19B67411EA79747D191FF788D02B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170129.71803449554688106844413617417216:50001231000000:2800:2BE28827569FD61AB5A500619504829E2340E5DCAC75CF6655BAE9EECB3CE9FC.png)
支付方式选择页面
订单详情页面
支付结果展示页面
业务流程
开发者通过接入Payment Kit合单支付，可以将多个子订单合并到同一个主订单里完成支付。具体接入流程如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170129.70003050508255549228581786837382:50001231000000:2800:21E37AADC13C8873D46E23CA31B6983ED5BAE9F58F8F6196EDC3D780E8EC2008.png)
接口说明
接口返回值有两种返回形式：Promise和AsyncCallback。Promise和AsyncCallback只是返回方式不一样，功能相同。具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| requestPayment(context:common.UIAbilityContext, orderStr: string): Promise<void>; |  拉起Payment Kit支付收银台。  |
| requestPayment(context:common.UIAbilityContext, orderStr: string, callback: AsyncCallback<void>): void; |
接口名
描述
requestPayment(context:common.UIAbilityContext, orderStr: string): Promise<void>;
拉起Payment Kit支付收银台。
requestPayment(context:common.UIAbilityContext, orderStr: string, callback: AsyncCallback<void>): void;
开发步骤
预下单（服务器开发）
1.  为保证支付订单的安全性和可靠性需要对请求body和请求头PayMercAuth对象内的入参排序拼接进行签名。请参考排序拼接和签名示例代码。
拉起华为支付收银台（端侧开发）
使用服务端返回的orderStr调用requestPayment接口拉起Payment Kit支付收银台。合单支付拉起支付收银台与商户基础支付场景处理逻辑一致，可参见这里。
支付结果回调通知（服务器开发）
支付成功后华为支付服务器会调用开发者提供回调接口，将支付信息返回给开发者的服务器，回调详细信息按商户模式请参见平台类商户合单支付结果回调通知。
延伸和拓展
当开发者完成上述能力之后，可以调用以下API接口完成订单其他相关操作。
平台类商户
查询合单支付订单、申请退款、查询退款订单、查询对账单、查询结算账单。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-password-free-pay-V14
爬取时间: 2025-04-29 21:27:54
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-password-free-pay-overview-V14
爬取时间: 2025-04-29 21:28:07
来源: Huawei Developer
免密代扣包括支付并签约以及签约代扣场景。
开发者接入免密支付前需先申请开通签约代扣产品（即申请配置免密代扣模板和获取协议模板ID），产品开通参见产品开通操作。
华为支付以模板维度管理每一个代扣扣费服务，主要组成要素如下：
| 字段含义 | 开发者对接字段 | 说明 |
| --- | --- | --- |
| 协议模板ID | planId | 由华为支付分配的唯一模板ID，开发对接免密支付必选参数之一。 |
| 商户签约协议号 | mercContractCode | 即商户签约标识。开发者请求签约时传入的签约协议号，商户侧生成，商户需保证唯一性。 |
| 委托代扣协议ID | contractId | 即华为签约标识。商户与用户签约成功后从华为支付签约回调通知中返回给商户或通过直连商户查询签约信息或服务商查询签约信息接口查询获取。 |
字段含义
开发者对接字段
说明
协议模板ID
planId
由华为支付分配的唯一模板ID，开发对接免密支付必选参数之一。
商户签约协议号
mercContractCode
即商户签约标识。开发者请求签约时传入的签约协议号，商户侧生成，商户需保证唯一性。
委托代扣协议ID
contractId
即华为签约标识。商户与用户签约成功后从华为支付签约回调通知中返回给商户或通过直连商户查询签约信息或服务商查询签约信息接口查询获取。
接入免密支付需注意：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-pay-and-sign-V14
爬取时间: 2025-04-29 21:28:21
来源: Huawei Developer
场景介绍
用户在商户APP应用/元服务选购完不同的商品确认订单后，跳转至用户支付并签约确认页面，用户完成支付并签约后，后续再次购买商品时，商户可以直接发起代扣，减少用户拉起收银台、输入支付密码等相关操作。
支持商户模型：直连商户、服务商
华为支付支付并签约页面展示：
|  |  |    |
| --- | --- | --- |
| 支付并签约确认页面 | 结果展示页面 |    |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170130.08998335899925953987570526314257:50001231000000:2800:67395F289A9CC9BA56504C8A338C8C65EDDC958EFB245F9298FF2DBB283FFD2D.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170130.58943931628821971241842478675808:50001231000000:2800:7CB8131C510600BB8D78161565E4324E876A9CC69658969E532431B9E2AA1B0F.png)
支付并签约确认页面
结果展示页面
业务流程
开发者通过接入Payment Kit 提供的支付并签约能力，可以让用户在支付完成后快速与商户建立签约代扣的关系。具体接入流程如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170130.36255501917507557273730300340193:50001231000000:2800:06018CA319A59E6836C66019C63CD56B4B03AEA86212577BDFFCAEA5201B67BC.png)
接口说明
接口返回值有两种返回形式：Promise和AsyncCallback。Promise和AsyncCallback只是返回方式不一样，功能相同。具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| requestPayment(context:common.UIAbilityContext, orderStr: string): Promise<void>; |  拉起Payment Kit支付收银台。  |
| requestPayment(context:common.UIAbilityContext, orderStr: string, callback: AsyncCallback<void>): void; |
接口名
描述
requestPayment(context:common.UIAbilityContext, orderStr: string): Promise<void>;
拉起Payment Kit支付收银台。
requestPayment(context:common.UIAbilityContext, orderStr: string, callback: AsyncCallback<void>): void;
开发步骤
预下单（服务器开发）
1.  为保证支付订单的安全性和可靠性需要对请求body和请求头PayMercAuth对象内的入参排序拼接进行签名，请参考排序拼接和签名示例代码。
拉起华为支付收银台（端侧开发）
使用orderStr调用requestPayment接口拉起Payment Kit支付收银台。
支付并签约拉起支付收银台与商户基础支付场景处理逻辑一致，可参见这里。
支付并签约结果处理（服务器开发）
商户在构建直连商户预下单或服务商预下单请求参数时，传入一个callbackUrl。在完成支付并签约后，华为支付服务器将以POST方式调用callbackUrl，将支付并签约的结果返回给商户服务器。
为保证信息合法性，商户服务器需要对返回的支付信息进行SM2验签，验签注意事项：
延伸和拓展
当开发者完成上述支付并签约接入操作之后还可以调用以下API接口完成订单相关操作。
直连商户
查询支付订单、申请退款、查询退款订单、查询签约订单、申请解约、查询对账单、查询结算账单。
服务商
查询支付订单、申请退款、查询退款订单、查询签约订单、申请解约、查询对账单、查询结算账单。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-withhold-process-V14
爬取时间: 2025-04-29 21:28:35
来源: Huawei Developer
场景介绍
用户在商户APP应用/元服务开通会员一段时间后，想要每个月自动续费而不用自己每个月都重新开通，商户可提供自动续费选项，用户主动选择开启，商户通过请求预签约接口发起签约，待签约生效后，商家可以按照协议中的时间，会员到期后直接发起免密代扣请求完成扣款续费，无需用户每个月都进行开通会员操作。
支持商户模型：直连商户、服务商
华为支付签约页面展示：
|  |  |    |
| --- | --- | --- |
| 签约确认页面 | 签约结果展示页面 |    |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170130.32218162406911325915195811729157:50001231000000:2800:37294C77CC228F752DAB3D6BBDE5A2B5D9BDBF25FCD9A07F842F66583EA3D174.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170130.78298784631119448499330572991360:50001231000000:2800:E61117F6E75C334D1C0E4859AA1363C412B057112442A943D162DCD89C208186.png)
签约确认页面
签约结果展示页面
业务流程
开发者通过接入Payment Kit 签约代扣能力，在获取用户签约授权的前提下，可以向用户的华为支付账户发起支付扣款，无需用户输入支付密码就可以优先使用签约的支付方式完成扣款。具体接入流程如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170130.87745925041529657150201521232802:50001231000000:2800:50119794CB6B054E828E3B2C062232F0B4FA82A03CB805E6942EE37CA170FB4C.png)
接口说明
接口返回值有两种返回形式：Promise和AsyncCallback。Promise和AsyncCallback只是返回方式不一样，功能相同。具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| requestContract(context: common.UIAbilityContext, contractStr: string): Promise<void>； |  拉起Payment Kit签约收银台。  |
| requestContract(context: common.UIAbilityContext, contractStr: string, callback: AsyncCallback<void>): void; |
接口名
描述
requestContract(context: common.UIAbilityContext, contractStr: string): Promise<void>；
拉起Payment Kit签约收银台。
requestContract(context: common.UIAbilityContext, contractStr: string, callback: AsyncCallback<void>): void;
开发步骤
预签约（服务器开发）
1.  为保证支付订单的安全性和可靠性需要对请求body和请求头PayMercAuth对象内的入参排序拼接进行签名。请参考排序拼接和签名示例代码。 以下为开放API接口请求及contractStr构建示例代码片段：
拉起华为支付签约收银台（端侧开发）
商户客户端使用contractStr作为参数调用requestContract接口拉起Payment Kit签约收银台。
当接口通过.then()方法返回时，则表示当前订单支付成功，通过.catch()方法返回表示订单支付失败。当此次请求有异常时，可通过error.code获取错误码，错误码相关信息请参见错误码。示例代码如下：
```typescript
import { BusinessError } from '@kit.BasicServicesKit';
import { paymentService } from '@kit.PaymentKit';
import { common } from '@kit.AbilityKit';
@Entry
@Component
struct Index {
context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
requestContractPromise() {
// use your own contractStr
const contractStr = '{"appId":"***","preSignNo":"***"}';
paymentService.requestContract(this.context, contractStr)
.then(() => {
// succeeded in signing
console.info('succeeded in signing');
})
.catch((error: BusinessError) => {
// failed to sign
console.error(`failed to sign, error.code: ${error.code}, error.message: ${error.message}`);
});
}
build() {
Column() {
Button('requestContractPromise')
.type(ButtonType.Capsule)
.width('50%')
.margin(20)
.onClick(() => {
this.requestContractPromise();
})
}
.width('100%')
.height('100%')
}
}
```
签约结果回调通知（服务器开发）
支付成功后华为支付服务器会调用开发者提供的回调接口，将签约信息返回给开发者服务器，回调详细信息按商户模式请参见签约结果回调通知。
回调接口是开发者调用预签约时的入参字段callbackUrl或签约模板配置的回调地址。
为保证信息合法性，商户服务器需要对返回的支付信息进行SM2验签，验签注意事项：
延伸和拓展
当开发者完成上述能力之后还可以调用以下API接口完成订单相关操作。
直连商户
申请免密代扣、查询签约订单、查询代扣订单、申请解约、申请退款、查询退款订单、查询对账单、查询结算账单。
服务商
申请免密代扣、查询签约订单、查询代扣订单、申请解约、申请退款、查询退款订单、查询对账单、查询结算账单。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-digital-cny-pay-V14
爬取时间: 2025-04-29 21:28:49
来源: Huawei Developer
场景介绍
例如用户需要通过数字钱包充值话费，此时用户可打开商户APP应用，选好充值金额发起支付，商户通过接入数字人民币支付服务，拉起数字人民币收银台完成订单支付。
支持商户模型：运营机构或受理服务机构入网的商户
数字人民币收银台展示：
|  |  |  |
| --- | --- | --- |
| 数字人民币收银台页面 | 输入支付密码页面 | 支付结果展示页面 |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170130.06237722589681669720687948417395:50001231000000:2800:81E8485664D4A31281333F7F87A4A47CA19803B28773179211309C6656EE7C8B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170131.46053443789858244222062414696985:50001231000000:2800:B70D086E24F0DEB7982D92DC160DEDDEA27E3D601CF66370298E82A0FF5BD71E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170131.22384051349581023626917178712445:50001231000000:2800:9B4130D9A188F7C8C93CB87960A90AFCE2DA387763F02DF0E6E47E93A9BC419C.png)
数字人民币收银台页面
输入支付密码页面
支付结果展示页面
业务流程
开发者接入数字人民币支付服务，可以快速实现应用的数字人民币支付能力。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170131.65496582085609705513575215620933:50001231000000:2800:CE98A5C18C32F6F830364C8240B506F5E0235AEFC714ED66B7D52A754D4D10E2.png)
接口说明
接口返回值返回形式为Promise。具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| requestEcnyPayment(context:common.Context, orderInfo: EcnyOrderInfo): Promise<EcnyPayResult>; | 拉起数字人民币收银台。 |
接口名
描述
requestEcnyPayment(context:common.Context, orderInfo: EcnyOrderInfo): Promise<EcnyPayResult>;
拉起数字人民币收银台。
开发步骤
获取开发指引
拨打数字人民币客服热线（956196）获取运营机构或受理服务机构提供的开发指引。
预下单（服务器开发）
开发者需要按照运营机构或受理服务机构提供的开发指引进行开发。
拉起数字人民币收银台（端侧开发）
商户客户端使用orderInfo作为参数调用requestEcnyPayment接口拉起数字人民币收银台。
当接口通过.then()方法返回时，则表示当前订单支付成功，通过.catch()方法返回表示订单支付失败。
当此次请求有异常时，可通过error.code获取错误码，错误码相关信息请参见错误码。
支付结果回调通知（服务器开发）
开发者需要按照运营机构或受理服务机构提供的开发指引进行开发。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-common-pay-connect-V14
爬取时间: 2025-04-29 21:29:02
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-common-pay-introduction-V14
爬取时间: 2025-04-29 21:29:15
来源: Huawei Developer
Payment Kit通用收银台上可以包含多种支付方式，支持自由组合。根据不同的资金处理方式可将通用收银台支付分为以下支付模式：
| 支付模式  | 资金处理  | 说明  |
| --- | --- | --- |
| 华为支付  | 支付方式全由华为支付处理资金  | 收银台支付方式有华为支付、三方支付，都由华为支付提供资金处理。  |
| 混合支付  | 部分支付方式由华为支付处理资金  | 收银台支付方式有华为支付、三方支付，其中华为支付由华为支付提供资金处理，三方支付由三方支付平台提供资金处理。  |
| 纯外部支付  | 支付方式不通过华为支付处理资金  | 收银台支付方式仅包含三方支付，由三方支付平台提供资金处理。  |
支付模式
资金处理
说明
华为支付
支付方式全由华为支付处理资金
收银台支付方式有华为支付、三方支付，都由华为支付提供资金处理。
混合支付
部分支付方式由华为支付处理资金
收银台支付方式有华为支付、三方支付，其中华为支付由华为支付提供资金处理，三方支付由三方支付平台提供资金处理。
纯外部支付
支付方式不通过华为支付处理资金
收银台支付方式仅包含三方支付，由三方支付平台提供资金处理。
产品开通与配置
如接入混合支付、纯外部支付，开发者需与华为支付业务侧沟通（合作咨询可点击此处）后提供以下信息给华为支付业务侧添加支付模式相关配置，配置项内容参考如下：
| 配置项  | 是否必选  | 说明  |
| --- | --- | --- |
| AppID  | 是  | 应用的AppID（在AppGallery Connect网站点击“我的项目”，在项目列表中找到项目，在“项目设置 > 常规”页面的“应用”区域获取“APP ID”的值）。  |
| 应用名称  | 是  | 应用的名称（AppID关联应用的名称）。  |
| 收银台模式  | 是  | 收银台接入的支付模式（未配置商户三方支付相关配置时，默认为华为支付模式）。 2：混合支付模式3：纯外部支付模式  |
| 启用状态  | 是  | 是否启用应用申请的三方支付相关配置。 启用未启用  |
| 三方支付方式配置项（可配多个）     | 是  | 支付方式枚举值。wechat_pay：微信支付ali_pay：支付宝 其他说明支付方式选择“其他”时需人工输入。涉及三方支付方式配置，商户需提供：该支付方式在收银台展示的名称。选择该支付方式时返回给商户的支付方式code。      |
| 否  | 支付方式logo（支付方式枚举为“其他”时需提供）。  |
| 否  | 跳转链接（跳转三方支付链接时，加载校验规则匹配需要）。  |
| 否  | referer链接（根据支付方式是否需要配置决定，涉及referer校验需提供。微信H5支付场景下必选）。  |
配置项
是否必选
说明
AppID
是
应用的AppID（在AppGallery Connect网站点击“我的项目”，在项目列表中找到项目，在“项目设置 > 常规”页面的“应用”区域获取“APP ID”的值）。
应用名称
是
应用的名称（AppID关联应用的名称）。
收银台模式
是
收银台接入的支付模式（未配置商户三方支付相关配置时，默认为华为支付模式）。
启用状态
是
是否启用应用申请的三方支付相关配置。
三方支付方式配置项（可配多个）
是
否
支付方式logo（支付方式枚举为“其他”时需提供）。
否
跳转链接（跳转三方支付链接时，加载校验规则匹配需要）。
否
referer链接（根据支付方式是否需要配置决定，涉及referer校验需提供。微信H5支付场景下必选）。
约束与限制
设备类型：华为手机。
HarmonyOS系统：HarmonyOS 5.0.2(14)及以上。
HarmonyOS SDK版本：HarmonyOS 5.0.2(14)及以上。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-common-pay-mix-V14
爬取时间: 2025-04-29 21:29:29
来源: Huawei Developer
场景介绍
用户在开发者的应用/元服务中选购完商品，点击确认支付，应用/元服务拉起通用收银台支付时，用户可以在通用收银台支付方式中选择华为支付方式或第三方支付方式完成商品订单的支付。
支持商户模型：直连商户、平台类商户、服务商
通用收银台混合支付页面展示：
|  |  |  |
| --- | --- | --- |
| 支付方式选择页面 | 支付页面 | 支付结果展示页面 |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170131.29850686959603389721206034627354:50001231000000:2800:FB792EB0B65D1926AFEBB74116A4FCE27BA4F9E583A24E3677E97044C209B70E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170131.49491076031681515900020868469034:50001231000000:2800:0A986D5868E8A2A4CDE143A4CB771E960BAB58B6550F5B490D922BB491EF1D0C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170131.06239855453573052028359572882939:50001231000000:2800:26F5BC8DB728362B4092AE977FD012E9F76F10B00D6166814C7C6D94ED2826C6.png)
支付方式选择页面
支付页面
支付结果展示页面
接入流程
华为支付通用收银台混合支付接入流程如下：
| 步骤 | 说明 |
| --- | --- |
| 商户入网及开发准备 |   华为支付商户入网及开发准备  在准备开发前，商户需要在华为支付商户平台入网及完成开发准备操作。 支持的商户模型：直连商户、平台商户、服务商。 商户模型详细内容请参见接入模式。  三方支付商户入网（非必选）  由于三方支付为直接连接第三方支付平台完成支付，故可能涉及需要开发者在第三方支付平台注册、创建商户（建议开发者用新申请的商户号与现有商户号做区分）。 |
| 产品开通与配置 | 接入通用收银台，商户入网后需与华为支付业务侧沟通（合作咨询可点击此处）后申请开通三方支付及完成相关支付模式配置。 |
| 通用收银台接入 | 根据混合支付场景开发步骤完成通用收银台支付接入。 |
步骤
说明
商户入网及开发准备
在准备开发前，商户需要在华为支付商户平台入网及完成开发准备操作。
支持的商户模型：直连商户、平台商户、服务商。
商户模型详细内容请参见接入模式。
由于三方支付为直接连接第三方支付平台完成支付，故可能涉及需要开发者在第三方支付平台注册、创建商户（建议开发者用新申请的商户号与现有商户号做区分）。
产品开通与配置
接入通用收银台，商户入网后需与华为支付业务侧沟通（合作咨询可点击此处）后申请开通三方支付及完成相关支付模式配置。
通用收银台接入
根据混合支付场景开发步骤完成通用收银台支付接入。
业务流程
混合支付模式，收银台上用户可选择华为支付或三方支付方式支付。具体接入流程如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170131.49603473879171558671494187192906:50001231000000:2800:03A3857F2F639FDE12BCCDA95B852866D44820F046F2C0D639300640E93E164F.png)
选择华为支付场景
7-1. 用户选择华为支付方式支付，Payment Kit客户端向Payment Kit服务端发起支付请求。
7-1-1. Payment Kit服务端处理支付操作。
7-1-2. Payment Kit服务端同步返回支付状态给Payment Kit客户端，Payment Kit客户端展示支付状态后返回商户客户端。
7-1-3. Payment Kit服务端通过回调接口将支付结果返回给商户服务端。
7-1-4. 商户服务端收到支付结果回调响应后，使用SM2验签方式对支付结果进行验签
选择三方支付场景
7-2. 用户选择三方支付方式并确认支付。
7-2-1. Payment Kit客户端将用户在通用收银台选择支付方式并确认支付后的支付信息PayResult返回给商户客户端。
7-2-2. 商户客户端将支付方式通知给商户服务端。
7-2-3. 商户服务端调用三方支付服务端预下单接口获取支付信息。
7-2-4. 三方支付服务端将支付跳转链接信息返回给商户服务端。
7-2-5. 商户服务端将支付跳转链接信息返回给商户客户端。
7-2-6. 商户客户端构建订单支付跳转信息orderStr请求requestPayment接口跳转三方支付。
7-2-7. Payment Kit客户端根据传递的支付消息拉起三方支付收银台。
7-2-8. 三方支付客户端展示支付收银台。
7-2-9. 用户完成支付操作。
7-2-10. 三方支付服务端处理支付。
7-2-11. 三方支付服务端同步返回支付状态给三方支付客户端，三方支付客户端展示支付状态后返回商户客户端。
7-2-12. 三方支付服务端通过回调接口将支付结果返回给商户服务端。
7-2-13. 商户服务端收到支付结果回调请求后，根据三方支付服务要求对支付结果进行验签。
接口说明
混合支付场景拉起通用收银台接口通过Promise返回结果。具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| requestPayment(context: common.UIAbilityContext, orderStr: string, payload: string): Promise<PayResult> | 支持拉起Payment Kit通用收银台（含华为支付）、跳转三方支付收银台。  |
接口名
描述
requestPayment(context: common.UIAbilityContext, orderStr: string, payload: string): Promise<PayResult>
支持拉起Payment Kit通用收银台（含华为支付）、跳转三方支付收银台。
开发步骤
华为支付预下单
1.  为保证支付订单的安全性和可靠性需要对请求body和请求头PayMercAuth对象内的入参排序拼接进行签名。请参考排序拼接和签名示例代码。
拉起通用收银台（端侧开发）
商户客户端使用orderStr作为参数调用requestPayment接口拉起Payment Kit支付收银台。
```typescript
import { BusinessError } from '@kit.BasicServicesKit';
import { paymentService } from '@kit.PaymentKit';
import { common } from '@kit.AbilityKit';
@Entry
@Component
struct Index {
context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
requestPaymentPromise() {
// used orderStr to pay for an order, use your own orderStr.
const orderStr = '{"app_id":"***","merc_no":"***","prepay_id":"xxx","timestamp":"1680259863114","noncestr":"1487b8a60ed9f9ecc0ba759fbec23f4f","sign":"****","auth_id":"***"}';
paymentService.requestPayment(this.context, orderStr, "AP")
.then((payResult: paymentService.PayResult) => {
// succeeded in paying
console.info('succeeded in paying, pay result: ', payResult);
})
.catch((error: BusinessError) => {
// failed to pay
console.error(`failed to pay, error.code: ${error.code}, error.message: ${error.message}`);
});
}
build() {
Column() {
Button('requestPaymentPromise')
.type(ButtonType.Capsule)
.width('50%')
.margin(20)
.onClick(() => {
this.requestPaymentPromise();
})
}
.width('100%')
.height('100%')
}
}
```
支付处理
场景1：用户选择华为支付方式支付
用户选择华为支付方式支付，通用收银台会直接处理支付，支付成功后华为支付服务器会调用开发者提供的回调接口，将支付信息返回给开发者的服务器，回调详细信息按商户模式请参见直连商户支付结果回调通知或平台类商户/服务商支付结果回调通知。
为保证信息合法性，商户服务器需要对返回的支付信息进行SM2验签，验签注意事项：
场景2：用户选择三方支付方式支付
```typescript
import { BusinessError } from '@kit.BasicServicesKit';
import { paymentService } from '@kit.PaymentKit';
import { common } from '@kit.AbilityKit';
@Entry
@Component
struct Index {
context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
requestPaymentPromise() {
// used orderStr to jump third-party payment, use your own orderStr.
const orderStr = '{"nextAction":"L","linkUrl":"https://www.***.pay.com/h5pay?prepay_id=***&sign=***","scheme":"","clientToken":"***"}';
paymentService.requestPayment(this.context, orderStr, "AP")
.then((payResult: paymentService.PayResult) => {
// succeeded in paying
console.info('succeeded in paying, pay result: ', payResult);
})
.catch((error: BusinessError) => {
// failed to pay
console.error(`failed to pay, error.code: ${error.code}, error.message: ${error.message}`);
});
}
build() {
Column() {
Button('requestPaymentPromise')
.type(ButtonType.Capsule)
.width('50%')
.margin(20)
.onClick(() => {
this.requestPaymentPromise();
})
}
.width('100%')
.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-common-pay-external-V14
爬取时间: 2025-04-29 21:29:42
来源: Huawei Developer
场景介绍
用户在开发者的应用/元服务中选购完商品，点击下单购买，应用/元服务拉起通用收银台支付仅可以选择三方支付方式完成商品订单的支付。
支持商户模型：不涉及华为支付商户入网。
通用收银台纯外部支付页面展示：
|  |  |    |
| --- | --- | --- |
| 支付方式选择页面 | 跳转三方支付页面 |    |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170132.65639333769502858335832606911404:50001231000000:2800:1E077F52870602DD3EE3EB16D59268ACA9C7B4F73CF1DE86E85C4271C606701B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170132.95626625692203103522768317662545:50001231000000:2800:1935489855A1E6C8389BDEE54B78A84B7E5ACF11D9A96734E4B5141994710E80.png)
支付方式选择页面
跳转三方支付页面
接入流程
华为支付通用收银台纯外部支付接入流程如下：
| 步骤 | 说明 |
| --- | --- |
| 商户入网（非必选） | 由于三方支付为直接连接第三方支付平台完成支付，故可能涉及需要开发者在第三方支付平台注册、创建商户（建议开发者用新申请的商户号与现有商户号做区分）。 |
| 产品开通与配置 | 申请开通三方支付及完成相关支付模式配置。 |
| 通用收银台接入 | 根据纯外部支付场景开发步骤完成通用收银台支付接入。 |
步骤
说明
商户入网（非必选）
由于三方支付为直接连接第三方支付平台完成支付，故可能涉及需要开发者在第三方支付平台注册、创建商户（建议开发者用新申请的商户号与现有商户号做区分）。
产品开通与配置
申请开通三方支付及完成相关支付模式配置。
通用收银台接入
根据纯外部支付场景开发步骤完成通用收银台支付接入。
业务流程
纯外部支付模式下，收银台仅支持第三方平台支付，用户无法使用华为支付。具体接入流程如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170132.33177446629058264150272590984870:50001231000000:2800:5B6559C5CBCB1609BE0CC73B4CB185E0BCCF7CC5A0998DFB31CAEFAE62A26C9C.png)
接口说明
拉起通用收银台接口通过Promise返回结果。具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| cashierPicker(context: common.UIAbilityContext, paymentInfo: PaymentInfo): Promise<PickerResult> | 拉起Payment Kit通用收银台（不含华为支付）。  |
| requestPayment(context: common.UIAbilityContext, orderStr: string, payload: string): Promise<PayResult> | 跳转三方支付收银台 |
接口名
描述
cashierPicker(context: common.UIAbilityContext, paymentInfo: PaymentInfo): Promise<PickerResult>
拉起Payment Kit通用收银台（不含华为支付）。
requestPayment(context: common.UIAbilityContext, orderStr: string, payload: string): Promise<PayResult>
跳转三方支付收银台
开发步骤
拉起通用收银台
商户客户端构建PaymentInfo参数请求cashierPicker接口拉起Payment Kit通用收银台，用户选择支付方式并确认支付后，Payment Kit客户端将支付信息PickerResult返回给商户客户端 。
```typescript
import { BusinessError } from '@kit.BasicServicesKit';
import { paymentService } from '@kit.PaymentKit';
import { common } from '@kit.AbilityKit';
@Entry
@Component
struct Index {
context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
requestCashierPickerCallBack() {
// use your own paymentInfo
const paymentInfo: paymentService.PaymentInfo= {
tradeSummary: "***交易",
amount: 100,
currency: "CNY",
extraInfo: '{"***":"***"}'
}
paymentService.cashierPicker(this.context, paymentInfo)
.then((pickerResult: paymentService.PickerResult) => {
// succeeded in paying
console.info('succeeded in paying, picker result: ', pickerResult);
})
.catch((error: BusinessError) => {
// failed to pay
console.error(`failed to pay, error.code: ${error.code}, error.message: ${error.message}`);
});
}
build() {
Column() {
Button('requestCashierPickerCallBack')
.type(ButtonType.Capsule)
.width('50%')
.margin(20)
.onClick(() => {
this.requestCashierPickerCallBack();
})
}
.width('100%')
.height('100%')
}
}
```
跳转三方支付收银台
商户客户端根据支付信息PickerResult按照三方支付平台接入要求创建订单获取拉起三方支付收银台链接并构建订单支付跳转信息orderStr请求requestPayment接口跳转或拉起三方支付收银台。
```typescript
import { BusinessError } from '@kit.BasicServicesKit';
import { paymentService } from '@kit.PaymentKit';
import { common } from '@kit.AbilityKit';
@Entry
@Component
struct Index {
context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
requestPaymentPromise() {
// used orderStr to jump third-party payment, use your own orderStr.
const orderStr = '{"nextAction":"L","linkUrl":"https://www.***.pay.com/h5pay?prepay_id=***&sign=***","scheme":"","clientToken":"***"}';
paymentService.requestPayment(this.context, orderStr, "AP")
.then((payResult: paymentService.PayResult) => {
// succeeded in paying
console.info('succeeded in paying, pay result: ', payResult);
})
.catch((error: BusinessError) => {
// failed to pay
console.error(`failed to pay, error.code: ${error.code}, error.message: ${error.message}`);
});
}
build() {
Column() {
Button('requestPaymentPromise')
.type(ButtonType.Capsule)
.width('50%')
.margin(20)
.onClick(() => {
this.requestPaymentPromise();
})
}
.width('100%')
.height('100%')
}
}
```
支付结果处理
开发者按照三方支付平台要求完成订单支付后的下一步业务处理，如对返回的支付结果信息验签等。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-V14
爬取时间: 2025-04-29 21:29:56
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-1-V14
爬取时间: 2025-04-29 21:30:09
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-2-V14
爬取时间: 2025-04-29 21:30:22
来源: Huawei Developer
签名的公私钥对是由开发者自行生成，生成后将公钥上传到华为支付商户平台后可获取相应的请求参数authId，具体流程查看准备证书章节。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-3-V14
爬取时间: 2025-04-29 21:30:36
来源: Huawei Developer
GET请求需要对path url进行签名，例如查询支付订单的待签名内容是：“/api/v2/aggr/transactions/orders/{sysTransOrderNo}”。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-4-V14
爬取时间: 2025-04-29 21:30:49
来源: Huawei Developer
请检查orderStr入参格式，要求为JsonStr的格式（参见示例代码），不可为json对象或重复序列化。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-5-V14
爬取时间: 2025-04-29 21:31:02
来源: Huawei Developer
该情况一般属于入参格式存在问题，还请根据支付的回调信息进行定位，请检查以下注意事项：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-6-V14
爬取时间: 2025-04-29 21:31:16
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-7-V14
爬取时间: 2025-04-29 21:31:29
来源: Huawei Developer
同一个商户号、使用同一个华为支付账号、使用同一套签约模板时，多次重复签约时只会生成一笔签约。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-8-V14
爬取时间: 2025-04-29 21:31:43
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-9-V14
爬取时间: 2025-04-29 21:31:56
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-10-V14
爬取时间: 2025-04-29 21:32:10
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-11-V14
爬取时间: 2025-04-29 21:32:23
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-12-V14
爬取时间: 2025-04-29 21:32:37
来源: Huawei Developer
请检查是否使用相同的订单号重复预下单，需要更换下商户订单号mercOrderNo再重新发起预下单请求。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-13-V14
爬取时间: 2025-04-29 21:32:51
来源: Huawei Developer
prepayId有效期为10分钟。目前没有提供可以查询prepayId的接口。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-14-V14
爬取时间: 2025-04-29 21:33:04
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-15-V14
爬取时间: 2025-04-29 21:33:18
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-16-V14
爬取时间: 2025-04-29 21:33:31
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-17-V14
爬取时间: 2025-04-29 21:33:44
来源: Huawei Developer
营销活动不需要商户侧传递，拉起收银台前华为支付会根据用户和商户去获取华为支付侧配置的营销活动信息展示在收银台，若用户使用了营销活动，支付结果就会返回营销信息。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-18-V14
爬取时间: 2025-04-29 21:33:58
来源: Huawei Developer
App和元服务属于不同的应用，appId因此不同，商户号、证书等是可以共用一套的。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-19-V14
爬取时间: 2025-04-29 21:34:11
来源: Huawei Developer
目前商户接入联调建议直接在生产环境联调。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-20-V14
爬取时间: 2025-04-29 21:34:25
来源: Huawei Developer
callerId和mercNo或者combineMercNo都是请求发起方商户号。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-21-V14
爬取时间: 2025-04-29 21:34:40
来源: Huawei Developer
鉴权请求头“PayMercAuth”会先校验相关字段再做验签。bodySign字段设置为空值，Payment Kit服务器不会做验签，直接响应异常给商户。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-22-V14
爬取时间: 2025-04-29 21:34:54
来源: Huawei Developer
请检查首次发起退款是否已正常完成退款。订单已经全额退款后，使用相同的商户订单号重复发起退款不会再返回退款金额。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-23-V14
爬取时间: 2025-04-29 21:35:08
来源: Huawei Developer
除接入指导文档中提供给商户的退款接口进行退款，商户也可以登录华为支付商户平台，选择“交易中心 > 交易明细 > 订单详情”页面，在操作菜单中点击退款发起退款操作。
这个功能商户不需要对接联调，可以直接使用，支持发起部分退款和全额退款。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-24-V14
爬取时间: 2025-04-29 21:35:22
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-25-V14
爬取时间: 2025-04-29 21:35:35
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-26-V14
爬取时间: 2025-04-29 21:35:48
来源: Huawei Developer
可能是开发者联盟上商户应用管理员的企业证件号码（营业执照注册号）未正确维护导致。
1.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170133.31264295973409105858182562260485:50001231000000:2800:11651DEAC3A7E77326E8112848E9706C918199A9A69A5461758FF1E0F3D32809.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170133.23712648662117486203546584578667:50001231000000:2800:51829BE0632D6E99E90D80B073B5233487EE09FF18017CFD4B17EF0976A17042.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/payment-faq-27-V14
爬取时间: 2025-04-29 21:36:02
来源: Huawei Developer
您可拨打数字人民币客服热线咨询接入流程和相关讯息。
客服热线：956196。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-kit-guide-V14
爬取时间: 2025-04-29 21:36:15
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-introduction-V14
爬取时间: 2025-04-29 21:36:29
来源: Huawei Developer
PDF Kit（PDF服务）包含pdfService和PdfView组件。
pdfService提供了加载和保存PDF文档、在PDF页面中添加文本内容、图片、批注、页眉页脚、水印、背景图片、书签、判断PDF文档是否加密及删除文档加密等相关的功能，对PDF文档的操作有更多的应用场景。
PdfView组件提供了文档预览功能，如：PDF文档预览、高亮显示、搜索关键字，批注等场景。
PDF Kit更多的示例代码请参考CodeLab和SampleCode。
pdfService与PdfView能力比较
| PDF Kit能力  | pdfService是否支持  | PdfView预览组件是否支持  |
| --- | --- | --- |
| 打开和保存文档  | 支持  | 支持  |
| 释放文档  | 支持  | 支持  |
| PDF文档转图片  | 支持  | 支持  |
| 添加、删除批注  | 支持  | 支持  |
| 管理书签  | 支持  | 不支持  |
| 添加、编辑、删除PDF页  | 支持  | 不支持  |
| 添加、删除文本内容  | 支持  | 不支持  |
| 添加、删除图片内容  | 支持  | 不支持  |
| 编辑页眉页脚、水印、背景  | 支持  | 不支持  |
| 判断PDF文档是否加密  | 支持  | 不支持  |
| 删除文档加密  | 支持  | 不支持  |
| PDF文档预览  | 不支持  | 支持  |
| 搜索关键字  | 不支持  | 支持  |
| PDF文档监听回调  | 不支持  | 支持  |
PDF Kit能力
pdfService是否支持
PdfView预览组件是否支持
打开和保存文档
支持
支持
释放文档
支持
支持
PDF文档转图片
支持
支持
添加、删除批注
支持
支持
管理书签
支持
不支持
添加、编辑、删除PDF页
支持
不支持
添加、删除文本内容
支持
不支持
添加、删除图片内容
支持
不支持
编辑页眉页脚、水印、背景
支持
不支持
判断PDF文档是否加密
支持
不支持
删除文档加密
支持
不支持
PDF文档预览
不支持
支持
搜索关键字
不支持
支持
PDF文档监听回调
不支持
支持
约束与限制
支持的设备
当前PDF Kit相关能力只支持在真机上运行，华为Phone、Tablet和2in1，暂不支持在模拟器上运行。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-pdfservice-implements-V14
爬取时间: 2025-04-29 21:36:42
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-open-docunent-V14
爬取时间: 2025-04-29 21:36:56
来源: Huawei Developer
对PDF文档添加内容、页眉页脚、水印、背景图片或书签等操作前，需要打开文档，并且在文档操作完成后，保存PDF文档。
pdfService和PdfView都可实现打开和保存文档，使用场景上有如下区别：
接口说明
| 接口名 | 描述 |
| --- | --- |
| loadDocument(path: string, password?: string, onProgress?: Callback<number>): ParseResult | 加载指定文档路径。 |
| saveDocument(path: string, onProgress?: Callback<number>): boolean | 保存文档。 |
接口名
描述
loadDocument(path: string, password?: string, onProgress?: Callback<number>): ParseResult
加载指定文档路径。
saveDocument(path: string, onProgress?: Callback<number>): boolean
保存文档。
示例代码
```typescript
import { common } from '@kit.AbilityKit';
import { pdfService } from '@kit.PDFKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { fileIo } from '@kit.CoreFileKit';
@Entry
@Component
struct PdfPage {
private pdfDocument: pdfService.PdfDocument = new pdfService.PdfDocument();
private context = getContext() as common.UIAbilityContext;
private filePath = '';
@State saveEnable: boolean = false;
aboutToAppear(): void {
this.filePath = this.context.filesDir + '/input.pdf';
let res = fileIo.accessSync(this.filePath);
if(!res) {
// 确保在工程目录src/main/resources/rawfile里有input.pdf文档
let content: Uint8Array = this.context.resourceManager.getRawFileContentSync('rawfile/input.pdf');
let fdSand =
fileIo.openSync(this.filePath, fileIo.OpenMode.WRITE_ONLY | fileIo.OpenMode.CREATE | fileIo.OpenMode.TRUNC);
fileIo.writeSync(fdSand.fd, content.buffer);
fileIo.closeSync(fdSand.fd);
}
this.pdfDocument.loadDocument(this.filePath);
}
build() {
Column() {
// 另存为一份PDF文档
Button('Save As').onClick(() => {
// 可以对PDF文档添加页眉页脚，水印，背景等一些内容，然后另存文档
let outPdfPath = this.context.filesDir + '/testSaveAsPdf.pdf';
let result = this.pdfDocument.saveDocument(outPdfPath);
this.saveEnable = true;
hilog.info(0x0000, 'PdfPage', 'saveAsPdf %{public}s!', result ? 'success' : 'fail');
})
// 保存覆盖源PDF文档
Button('Save').enabled(this.saveEnable).onClick(() => {
// 这里可以对PDF文档添加内容、页眉页脚、水印、背景等一些内容，然后保存文档
let tempDir = this.context.tempDir;
let tempFilePath = tempDir + `/temp${Math.random()}.pdf`;
fileIo.copyFileSync(this.filePath, tempFilePath);
let pdfDocument: pdfService.PdfDocument = new pdfService.PdfDocument();
// 加载临时文档
let loadResult = pdfDocument.loadDocument(tempFilePath, '');
if (loadResult === pdfService.ParseResult.PARSE_SUCCESS) {
let result = pdfDocument.saveDocument(this.filePath);
hilog.info(0x0000, 'PdfPage', 'savePdf %{public}s!', result ? 'success' : 'fail');
}
})
}
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-add-delete-page-V14
爬取时间: 2025-04-29 21:37:09
来源: Huawei Developer
在PDF文档中添加或删除页面，包括：
接口说明
| 接口名 | 描述 |
| --- | --- |
| insertBlankPage(index: number, width: number, height: number): PdfPage | 在指定位置插入空白PDF页。 |
| getPage(index: number): PdfPage | 获取指定页的对象。 |
| insertPageFromDocument(document: PdfDocument, fromIndex: number, pageCount: number, index: number): PdfPage | 将其他文档的页添加到当前文档。 |
| deletePage(index: number, count: number): void | 删除指定的PDF页。 |
接口名
描述
insertBlankPage(index: number, width: number, height: number): PdfPage
在指定位置插入空白PDF页。
getPage(index: number): PdfPage
获取指定页的对象。
insertPageFromDocument(document: PdfDocument, fromIndex: number, pageCount: number, index: number): PdfPage
将其他文档的页添加到当前文档。
deletePage(index: number, count: number): void
删除指定的PDF页。
示例代码

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-add-txt-img-annot-V14
爬取时间: 2025-04-29 21:37:23
来源: Huawei Developer
支持编辑PDF页面内容，包括：
-  通过索引指定PDF页面添加批注，并对批注在页面中的位置，字体、批注边框等设置，批注提供了多种风格样式，包括：文本批注TextAnnotationInfo、下划线批注LineAnnotationInfo、高亮批注HighlightAnnotationInfo、删除线批注StrikethroughAnnotationInfo等共13种。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170133.78606624287541384765894467694350:50001231000000:2800:402A8A292AF86BC11A4857723FA1AC34B280AB0AFFE03349BF21FF67A0300CA9.png)
接口说明
| 接口名 | 描述 |
| --- | --- |
| addTextObject(text: string, x: number, y: number, style: TextStyle): void | 添加文本内容，只可按行添加。 |
| addImageObject(path: string, x: number, y: number, width: number, height: number): void | 在PDF文档的页面中添加图片。 |
| deleteGraphicsObject(object: GraphicsObject): void | 删除指定的GraphicsObject。 |
| addAnnotation(annotationInfo: PdfAnnotationInfo): PdfAnnotation | 在当前页添加批注。 |
接口名
描述
addTextObject(text: string, x: number, y: number, style: TextStyle): void
添加文本内容，只可按行添加。
addImageObject(path: string, x: number, y: number, width: number, height: number): void
在PDF文档的页面中添加图片。
deleteGraphicsObject(object: GraphicsObject): void
删除指定的GraphicsObject。
addAnnotation(annotationInfo: PdfAnnotationInfo): PdfAnnotation
在当前页添加批注。
添加文本和图片
添加文本批注

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-doc-to-imgs-V14
爬取时间: 2025-04-29 21:37:37
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-get-img-V14
爬取时间: 2025-04-29 21:37:50
来源: Huawei Developer
场景介绍
PDF文档页面转换为图片，或将页面的指定区域转换为图片时使用。
接口说明
| 接口名 | 描述 |
| --- | --- |
| getPagePixelMap(): image.PixelMap | 获取当前页的图片。 |
| getCustomPagePixelMap(matrix: PdfMatrix, isGray: boolean, drawAnnotations: boolean): image.PixelMap | 获取指定PdfPage区域的图片内容。 |
| getAreaPixelMap(matrix: PdfMatrix, bitmapwidth: number, bitmapHeight: number, isGray: boolean, drawAnnotations: boolean): image.PixelMap | 获取指定PdfPage区域的图片内容，并指定图片的宽和高。 |
接口名
描述
getPagePixelMap(): image.PixelMap
获取当前页的图片。
getCustomPagePixelMap(matrix: PdfMatrix, isGray: boolean, drawAnnotations: boolean): image.PixelMap
获取指定PdfPage区域的图片内容。
getAreaPixelMap(matrix: PdfMatrix, bitmapwidth: number, bitmapHeight: number, isGray: boolean, drawAnnotations: boolean): image.PixelMap
获取指定PdfPage区域的图片内容，并指定图片的宽和高。
示例代码
```typescript
import { pdfService } from '@kit.PDFKit';
import { image } from '@kit.ImageKit';
import { fileIo as fs } from '@kit.CoreFileKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
@Entry
@Component
struct PdfPage {
private pdfDocument: pdfService.PdfDocument = new pdfService.PdfDocument();
private context = getContext() as common.UIAbilityContext;
private loadResult: pdfService.ParseResult = pdfService.ParseResult.PARSE_ERROR_FORMAT;
aboutToAppear(): void {
// 确保沙箱目录有input.pdf文档
let filePath = this.context.filesDir + '/input.pdf';
this.loadResult = this.pdfDocument.loadDocument(filePath);
}
// 将 pixelMap 转成图片格式
pixelMap2Buffer(pixelMap: image.PixelMap): Promise<ArrayBuffer> {
return new Promise((resolve, reject) => {
/**
设置打包参数
format：图片打包格式，只支持 jpg 和 webp
quality：JPEG 编码输出图片质量
bufferSize：图片大小，默认 10M
*/
let packOpts: image.PackingOption = { format: 'image/jpeg', quality: 98 }
// 创建ImagePacker实例
const imagePackerApi = image.createImagePacker()
imagePackerApi.packToData(pixelMap, packOpts).then((buffer: ArrayBuffer) => {
resolve(buffer)
}).catch((err: BusinessError) => {
reject()
})
})
}
build() {
Column() {
// 获取为图片并保存到应用沙箱
Button('getPagePixelMap').onClick(async () => {
if (this.loadResult === pdfService.ParseResult.PARSE_SUCCESS) {
let page = this.pdfDocument.getPage(0)
let pixmap: image.PixelMap = page.getPagePixelMap();
if (!pixmap) {
return
}
const imgBuffer = await this.pixelMap2Buffer(pixmap)
const file =
fs.openSync(this.context.filesDir + `/${Date.now()}.png`, fs.OpenMode.READ_WRITE | fs.OpenMode.CREATE);
await fs.write(file.fd, imgBuffer)
// 关闭文档
await fs.close(file.fd)
}
})
// 获取指定PdfPage区域的图片内容。
Button('getCustomPagePixelMap').onClick(async () => {
if (this.loadResult === pdfService.ParseResult.PARSE_SUCCESS) {
let page = this.pdfDocument.getPage(0);
let matrix = new pdfService.PdfMatrix();
matrix.x = 100;
matrix.y = 100;
matrix.width = 500;
matrix.height = 500;
matrix.rotate = 0;
let pixmap: image.PixelMap = page.getCustomPagePixelMap(matrix, false, false);
if (!pixmap) {
return;
}
const imgBuffer = await this.pixelMap2Buffer(pixmap);
const file =
fs.openSync(this.context.filesDir + `/${Date.now()}.jpeg`, fs.OpenMode.READ_WRITE | fs.OpenMode.CREATE);
await fs.write(file.fd, imgBuffer);
// 关闭文件
await fs.close(file.fd);
}
})
// 获取指定PdfPage区域的图片内容
Button('getAreaPixelMap').onClick(async () => {
if (this.loadResult === pdfService.ParseResult.PARSE_SUCCESS) {
let page = this.pdfDocument.getPage(0);
let matrix = new pdfService.PdfMatrix();
matrix.x = 100;
matrix.y = 100;
matrix.width = 500;
matrix.height = 500;
matrix.rotate = 0;
let pixmap: image.PixelMap = page.getAreaPixelMap(matrix, 400, 400, true, false);
if (!pixmap) {
return
}
const imgBuffer = await this.pixelMap2Buffer(pixmap)
const file =
fs.openSync(this.context.filesDir + `/${Date.now()}.bmp`, fs.OpenMode.READ_WRITE | fs.OpenMode.CREATE);
await fs.write(file.fd, imgBuffer)
// 关闭文件
await fs.close(file.fd);
}
})
}
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-convert-img-V14
爬取时间: 2025-04-29 21:38:04
来源: Huawei Developer
场景介绍
将整个PDF文档的页面转换为图片，每页为一张图片，并且所有图片存放在指定的同一个文件夹下。
当前支持的图片格式请参考ImageFormat。
接口说明
| 接口名 | 描述 |
| --- | --- |
| convertToImage(path: string, format: ImageFormat, onProgress?: Callback<number>): boolean | 转换PDF文档为图片。 |
接口名
描述
convertToImage(path: string, format: ImageFormat, onProgress?: Callback<number>): boolean
转换PDF文档为图片。
示例代码
```typescript
import { fileIo as fs } from '@kit.CoreFileKit';
import { common } from '@kit.AbilityKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { pdfService } from '@kit.PDFKit';
@Entry
@Component
struct PdfPage {
private pdfDocument: pdfService.PdfDocument = new pdfService.PdfDocument();
private context = getContext() as common.UIAbilityContext;
private loadResult: pdfService.ParseResult = pdfService.ParseResult.PARSE_ERROR_FORMAT;
aboutToAppear(): void {
// 确保沙箱目录有input.pdf文档
let filePath = this.context.filesDir + '/input.pdf';
this.loadResult = this.pdfDocument.loadDocument(filePath);
}
build() {
Column() {
// 获取为图片并保存到应用沙箱
Button('convertToImage').onClick(async () => {
if (this.loadResult === pdfService.ParseResult.PARSE_SUCCESS) {
let outputPath = getContext().filesDir + '/output/';
fs.mkdir(outputPath);
// 将所有的页面转化为png图片，并存储在output文件夹里
let res = this.pdfDocument.convertToImage(outputPath, pdfService.ImageFormat.PNG);
hilog.info(0x0000, 'PdfPage', 'convertToImage %{public}s!', res ? 'success' : 'fail');
}
})
}
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-isencrypt-removesecurity-V14
爬取时间: 2025-04-29 21:38:17
来源: Huawei Developer
PDF Kit支持判断PDF文档是否加密及删除PDF加密锁。
当前PDF Kit不支持PDF文档加密。
接口说明
| 接口名 | 描述 |
| --- | --- |
| isEncrypted(path: string): boolean | 判断当前文档是否已加密。 |
| removeSecurity(): boolean | 删除文档加密锁。 |
接口名
描述
isEncrypted(path: string): boolean
判断当前文档是否已加密。
removeSecurity(): boolean
删除文档加密锁。
示例代码
```typescript
import { pdfService } from '@kit.PDFKit';
import { common } from '@kit.AbilityKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
@Entry
@Component
struct PdfPage {
private pdfDocument: pdfService.PdfDocument = new pdfService.PdfDocument();
private context = getContext() as common.UIAbilityContext;
build() {
Column() {
// 判断文档是否加密，并删除加密
Button('isEncryptedAndRemoveSecurity').onClick(async () => {
// 确保沙箱目录有input.pdf文档
let filePath = this.context.filesDir + '/input.pdf';
let isEncrypt = this.pdfDocument.isEncrypted(filePath);
if (isEncrypt) {
let hasRemoveEncrypt = this.pdfDocument.removeSecurity();
hilog.info(0x0000, 'PdfPage', 'isEncryptedAndRemoveSecurity %{public}s!',
hasRemoveEncrypt ? 'success' : 'fail');
}
})
}
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-add-bookmark-V14
爬取时间: 2025-04-29 21:38:31
来源: Huawei Developer
PDF Kit支持添加和删除PDF文档书签。
添加书签时，可设置标题、颜色，是否粗体、斜体、跳转信息等。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170134.09571664141623305588425060250938:50001231000000:2800:4BA347DD5DE9DE47D7C0EF3B6CD3138D4442FBBD2C60AFE27C4AF14B1AA2089F.png)
接口说明
| 接口名 | 描述 |
| --- | --- |
| createBookmark(): Bookmark | 创建PDF文档书签。 |
| getRootBookmark(): Bookmark | 获取PDF文档第一个根书签。 |
| insertBookmark(bookmark: Bookmark, parent: Bookmark, position: number): boolean | 插入PDF文档书签。 |
| setBookmarkInfo(info: BookmarkInfo): void | 设置书签信息。 |
| removeBookmark(bookmark: Bookmark): boolean | 移除PDF文档书签。 |
接口名
描述
createBookmark(): Bookmark
创建PDF文档书签。
getRootBookmark(): Bookmark
获取PDF文档第一个根书签。
insertBookmark(bookmark: Bookmark, parent: Bookmark, position: number): boolean
插入PDF文档书签。
setBookmarkInfo(info: BookmarkInfo): void
设置书签信息。
removeBookmark(bookmark: Bookmark): boolean
移除PDF文档书签。
示例代码

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-add-headerfooter-V14
爬取时间: 2025-04-29 21:38:44
来源: Huawei Developer
PDF Kit支持对指定页面添加、删除页眉页脚。页眉页脚信息包含文字、日期和页码等相关内容，并可设置字体大小、颜色和间距等相关样式，具体属性参考HeaderFooterInfo。如下图：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170134.39810919269179412451439015653055:50001231000000:2800:9F9027B298A9E6ACE64366E58ED401B57DA8E17DDB1A80BEB77C6F80DC0DBF12.jpg)
接口说明
| 接口名 | 描述 |
| --- | --- |
| addHeaderFooter(info: HeaderFooterInfo, startIndex: number, endIndex: number, oddPages: boolean, evenPages: boolean): void | 插入PDF文档页眉页脚。 |
| removeHeaderFooter(): boolean | 删除PDF文档页眉页脚。 |
接口名
描述
addHeaderFooter(info: HeaderFooterInfo, startIndex: number, endIndex: number, oddPages: boolean, evenPages: boolean): void
插入PDF文档页眉页脚。
removeHeaderFooter(): boolean
删除PDF文档页眉页脚。
addHeaderFooter方法属于耗时业务，需要遍历每一页去添加页眉页脚，添加页面较多时建议放到线程里去处理。
示例代码

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-add-watermark-V14
爬取时间: 2025-04-29 21:38:59
来源: Huawei Developer
对指定页面添加水印，包括文本水印或图片水印。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170134.84205968230464051911100700640816:50001231000000:2800:334A72D280C9851797AC086FB92AD0E7A5C88305F88496C972987765E9994E74.png)
接口说明
| 接口名 | 描述 |
| --- | --- |
| addWatermark(info: WatermarkInfo, startIndex: number, endIndex: number, oddPages: boolean, evenPages: boolean): void | 插入水印到PDF文档。如果插入的是图片，支持的图片格式参考ImageFormat，文本字符无限制。 |
| removeWatermark(): boolean | 删除PDF文档水印。 |
接口名
描述
addWatermark(info: WatermarkInfo, startIndex: number, endIndex: number, oddPages: boolean, evenPages: boolean): void
插入水印到PDF文档。如果插入的是图片，支持的图片格式参考ImageFormat，文本字符无限制。
removeWatermark(): boolean
删除PDF文档水印。
addWatermark方法属于耗时业务，需要遍历每一页去添加水印，添加页面较多时建议放到线程里去处理。
示例代码
添加文本水印
添加图片水印

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-add-background-V14
爬取时间: 2025-04-29 21:39:12
来源: Huawei Developer
对指定页面添加背景图片或背景颜色，并设置大小、旋转、透明度和位置等属性，支持图片格式：PNG、BMP、JPEG。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170134.17015540230427812142531410419029:50001231000000:2800:1F641A94396ED94B3EAC34CAB78E22F6994BEBF4FF6BBECC5DEEF765AE5D1E0A.png)
接口说明
| 接口名 | 描述 |
| --- | --- |
| addBackground(info: BackgroundInfo, startIndex: number, endIndex: number, oddPages: boolean, evenPages: boolean): void | 插入PDF文档背景。 |
| removeBackground(): boolean | 删除PDF文档背景。 |
接口名
描述
addBackground(info: BackgroundInfo, startIndex: number, endIndex: number, oddPages: boolean, evenPages: boolean): void
插入PDF文档背景。
removeBackground(): boolean
删除PDF文档背景。
addBackground方法属于耗时业务，需要遍历每一页去添加背景，添加页面较多时建议放到线程里去处理。
示例代码

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-pdfview-implements-V14
爬取时间: 2025-04-29 21:39:26
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-pdfview-component-V14
爬取时间: 2025-04-29 21:39:39
来源: Huawei Developer
PDF Kit提供了丰富的PDF文档预览能力，比如：
详细说明及使用请参考：PdfView组件。
示例代码
```typescript
import { pdfService, pdfViewManager, PdfView } from '@kit.PDFKit'
import { common } from '@kit.AbilityKit';
import { fileIo } from '@kit.CoreFileKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
@Entry
@Component
struct Index {
private controller: pdfViewManager.PdfController = new pdfViewManager.PdfController();
aboutToAppear(): void {
let context = getContext() as common.UIAbilityContext;
let dir: string = context.filesDir
// 确保在工程目录src/main/resources/rawfile里存在input.pdf文档
let filePath: string = dir + '/input.pdf';
let res = fileIo.accessSync(filePath);
if (!res) {
let content: Uint8Array = context.resourceManager.getRawFileContentSync('rawfile/input.pdf');
let fdSand =
fileIo.openSync(filePath, fileIo.OpenMode.WRITE_ONLY | fileIo.OpenMode.CREATE | fileIo.OpenMode.TRUNC);
fileIo.writeSync(fdSand.fd, content.buffer);
fileIo.closeSync(fdSand.fd);
}
(async () => {
// 该监听方法只能在文档加载前调用一次
this.controller.registerPageCountChangedListener((pageCount: number) => {
hilog.info(0x0000, 'registerPageCountChanged-', pageCount.toString());
});
let loadResult1: pdfService.ParseResult = await this.controller.loadDocument(filePath);
// 注意：这里刚加载文档，请不要在这里立即设置PDF文档的预览方式
})()
}
build() {
Row() {
PdfView({
controller: this.controller,
pageFit: pdfService.PageFit.FIT_WIDTH,
showScroll: true
})
.id('pdfview_app_view')
.layoutWeight(1);
}
.width('100%')
.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-pdfview-open-V14
爬取时间: 2025-04-29 21:39:52
来源: Huawei Developer
场景介绍
通过加载本地路径的PDF文档，实现打开PDF文档的预览功能。当PDF文档做了批注等相关的信息时，可以使用保存功能。
和pdfService的打开和保存能力相同，具体区别查看pdfService的打开和保存PDF文档的场景介绍。
接口说明
| 接口名 | 描述 |
| --- | --- |
| loadDocument(path: string, password?: string, initPageIndex?: number, onProgress?: Callback<number>): Promise<ParseResult> | 加载PDF文档。 |
| saveDocument(path: string, onProgress?: Callback<number>): Promise<number> | 保存PDF文档，使用Promise异步回调。 |
接口名
描述
loadDocument(path: string, password?: string, initPageIndex?: number, onProgress?: Callback<number>): Promise<ParseResult>
加载PDF文档。
saveDocument(path: string, onProgress?: Callback<number>): Promise<number>
保存PDF文档，使用Promise异步回调。
示例代码
```typescript
import { pdfService, PdfView, pdfViewManager } from '@kit.PDFKit';
import { common } from '@kit.AbilityKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
@Entry
@Component
struct PdfPage {
private controller: pdfViewManager.PdfController = new pdfViewManager.PdfController();
private context = getContext() as common.UIAbilityContext;
private loadResult: pdfService.ParseResult = pdfService.ParseResult.PARSE_ERROR_FORMAT;
aboutToAppear(): void {
// 确保沙箱目录有input.pdf文档
let filePath = this.context.filesDir + '/input.pdf';
(async () => {
this.loadResult = await this.controller.loadDocument(filePath);
})()
}
build() {
Column() {
// 保存Pdf文档
Button('savePdfDocument').onClick(async () => {
if (this.loadResult === pdfService.ParseResult.PARSE_SUCCESS) {
let savePath = this.context.filesDir + '/savePdfDocument.pdf';
let result = await this.controller.saveDocument(savePath);
hilog.info(0x0000, 'PdfPage', 'savePdfDocument %{public}s!', result ? 'success' : 'fail');
}
})
PdfView({
controller: this.controller,
pageFit: pdfService.PageFit.FIT_WIDTH,
showScroll: true
})
.id('pdfview_app_view')
.layoutWeight(1);
}
.width('100%')
.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-pdfview-preview-method-V14
爬取时间: 2025-04-29 21:40:06
来源: Huawei Developer
pdfViewManager为PDF文档提供了丰富的预览特定特性。
图1：提供了双页预览布局，页面宽度适配和连续滚动的预览方式
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170135.82376201940110102506785337301168:50001231000000:2800:6F89548E91F3C93BB53D3C2F89B298301819C6DA1A4B78457F32D7F9ABB2AEBB.jpg)
接口说明
| 接口名 | 描述 |
| --- | --- |
| setPageLayout(columnCount: PageLayout): void | 设置页面布局模式。其中“columnCount”取值如下：  1：单页面 2：双页面  |
| setPageContinuous(isContinuous: boolean): void | 设置页面滚动是否连续排列。 |
| setPageFit(pageFit: PageFit): void | 设置页面的适配模式。 |
| goToPage(pageIndex: number): void | 跳转到指定页。 |
| setPageZoom(zoom: number): void | 设置视图的缩放比例。 |
接口名
描述
setPageLayout(columnCount: PageLayout): void
设置页面布局模式。其中“columnCount”取值如下：
setPageContinuous(isContinuous: boolean): void
设置页面滚动是否连续排列。
setPageFit(pageFit: PageFit): void
设置页面的适配模式。
goToPage(pageIndex: number): void
跳转到指定页。
setPageZoom(zoom: number): void
设置视图的缩放比例。
示例代码

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-pdfview-search-V14
爬取时间: 2025-04-29 21:40:19
来源: Huawei Developer
预览PDF文档时，可以对页面的关键词（英文字符不区分大小写）进行搜索并高亮显示，同时使用setSearchIndex方法高亮显示指定的搜索结果。
使用getSearchIndex方法获取当前高亮的索引，可以使用clearSearch方法清除所有搜索结果。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170135.65078864189706730284560043604325:50001231000000:2800:09FF4F8D1159A000B71990793A8CB4EF4521BE3F71DB34883BB91B699C375C0B.jpg)
接口说明
| 接口名 | 描述 |
| --- | --- |
| searchKey(text: string, listener: Callback<number>): void | 搜索文本并返回匹配的总数。 |
接口名
描述
searchKey(text: string, listener: Callback<number>): void
搜索文本并返回匹配的总数。
示例代码

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-pdfview-highlight-V14
爬取时间: 2025-04-29 21:40:33
来源: Huawei Developer
PDF文档在预览时，可以对页面的矩形区域或文本设置高亮显示，高亮颜色可以自定义。
setHighlightText可以同时高亮多个不同的文本。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170135.67612766819097592201254162162298:50001231000000:2800:1EFEE5A01CE78E2C6E024A53D4B658A89C6233BB86C3B5214777D09116183074.jpg)
接口说明
| 接口名 | 描述 |
| --- | --- |
| setHighlightText(pageIndex: number, textArray: string[], color: number): void | 高亮指定文本。 |
接口名
描述
setHighlightText(pageIndex: number, textArray: string[], color: number): void
高亮指定文本。
setHighlightText和searchKey功能互斥。
示例代码
```typescript
import { pdfService, PdfView, pdfViewManager } from '@kit.PDFKit';
import { common } from '@kit.AbilityKit';
@Entry
@Component
struct PdfPage {
private controller: pdfViewManager.PdfController = new pdfViewManager.PdfController();
private context = getContext() as common.UIAbilityContext;
private loadResult: pdfService.ParseResult = pdfService.ParseResult.PARSE_ERROR_FORMAT;
aboutToAppear(): void {
// 确保沙箱目录有input.pdf文档
let filePath = this.context.filesDir + '/input.pdf';
(async () => {
this.loadResult = await this.controller.loadDocument(filePath);
})()
}
build() {
Column() {
Row() {
// 设置文本的高亮显示风格
Button('setHighlightText').onClick(async () => {
if (this.loadResult === pdfService.ParseResult.PARSE_SUCCESS) {
this.controller.setHighlightText(0, ['白皮书'], 0xAAF9CC00);
}
})
}
// 加载PdfView组件进行预览
PdfView({
controller: this.controller,
pageFit: pdfService.PageFit.FIT_WIDTH,
showScroll: true
})
.id('pdfview_app_view')
.layoutWeight(1);
}
.width('100%').height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-pdfview-annotation-V14
爬取时间: 2025-04-29 21:40:46
来源: Huawei Developer
进入批注模式，目前支持高亮、下划线和删除线类型批注。
接口说明
| 接口名 | 描述 |
| --- | --- |
| enableAnnotation(annotationType: SupportedAnnotationType, color?: number): void | 在常用操作之间切换并添加批注。 |
接口名
描述
enableAnnotation(annotationType: SupportedAnnotationType, color?: number): void
在常用操作之间切换并添加批注。
示例代码
```typescript
import { pdfService, pdfViewManager, PdfView } from '@kit.PDFKit';
import { common } from '@kit.AbilityKit';
@Entry
@Component
struct PdfPage {
private pdfController = new pdfViewManager.PdfController();
private context = getContext() as common.UIAbilityContext;
aboutToAppear(): void {
// 确保沙箱目录有input.pdf文档
let filePath = this.context.filesDir + '/input.pdf';
(async () => {
let loadResult: pdfService.ParseResult = await this.pdfController.loadDocument(filePath);
if (pdfService.ParseResult.PARSE_SUCCESS === loadResult) {
// 添加删除线批注
this.pdfController.enableAnnotation(pdfViewManager.SupportedAnnotationType.STRIKETHROUGH, 0xAAEEEEEE);
}
})()
}
build() {
Column() {
// 加载PdfView组件进行预览
PdfView({
controller: this.pdfController,
pageFit: pdfService.PageFit.FIT_WIDTH,
showScroll: true
})
.id('pdfview_app_view')
.layoutWeight(1);
}
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-pdfview-page2img-V14
爬取时间: 2025-04-29 21:41:00
来源: Huawei Developer
场景介绍
调用getPagePixelMap方法，将指定PDF页面转化为图片。
接口说明
| 接口名 | 描述 |
| --- | --- |
| getPagePixelMap(pageIndex: number, isSync?: boolean): Promise<image.PixelMap> | 获取对应PDF页面的缩略图，使用Promise异步回调。 |
接口名
描述
getPagePixelMap(pageIndex: number, isSync?: boolean): Promise<image.PixelMap>
获取对应PDF页面的缩略图，使用Promise异步回调。
示例代码
```typescript
import { pdfService, pdfViewManager } from '@kit.PDFKit';
import { image } from '@kit.ImageKit';
import { fileIo as fs } from '@kit.CoreFileKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
@Entry
@Component
struct PdfPage {
private controller: pdfViewManager.PdfController = new pdfViewManager.PdfController();
private context = getContext() as common.UIAbilityContext;
private loadResult: pdfService.ParseResult = pdfService.ParseResult.PARSE_ERROR_FORMAT;
aboutToAppear(): void {
// 确保沙箱目录有input.pdf文档
let filePath = this.context.filesDir + '/input.pdf';
(async () => {
this.loadResult = await this.controller.loadDocument(filePath);
})()
}
// 将 pixelMap 转成图片格式
pixelMap2Buffer(pixelMap: image.PixelMap): Promise<ArrayBuffer> {
return new Promise((resolve, reject) => {
/**
设置打包参数
format：图片打包格式，只支持 jpg 和 webp
quality：JPEG 编码输出图片质量
bufferSize：图片大小，默认 10M
*/
let packOpts: image.PackingOption = { format: 'image/jpeg', quality: 98 }
// 创建ImagePacker实例
const imagePackerApi = image.createImagePacker()
imagePackerApi.packToData(pixelMap, packOpts).then((buffer: ArrayBuffer) => {
resolve(buffer)
}).catch((err: BusinessError) => {
reject()
})
})
}
build() {
Column() {
// 转换为图片并保存到应用沙箱
Button('getPagePixelMap').onClick(async () => {
if (this.loadResult === pdfService.ParseResult.PARSE_SUCCESS) {
let pixmap: image.PixelMap = await this.controller.getPagePixelMap(0, true);
if (!pixmap) {
return
}
const imgBuffer = await this.pixelMap2Buffer(pixmap)
const file =
fs.openSync(this.context.filesDir + `/${Date.now()}.png`, fs.OpenMode.READ_WRITE | fs.OpenMode.CREATE);
await fs.write(file.fd, imgBuffer);
// 关闭文件
await fs.close(file.fd)
}
})
}
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-faq-V14
爬取时间: 2025-04-29 21:41:13
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-faq-4-V14
爬取时间: 2025-04-29 21:41:26
来源: Huawei Developer
PDF Kit移除页眉页脚，水印或背景不会针对具体页面，请参考页眉页脚，水印或背景图片。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-faq-4-online-preview-V14
爬取时间: 2025-04-29 21:41:40
来源: Huawei Developer
PDF文档不支持在线预览，需要把文档下载到本地，才能预览，具体可参见预览PDF文档。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/pdf-faq-4-load-save-V14
爬取时间: 2025-04-29 21:41:53
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/preview-kit-guide-V14
爬取时间: 2025-04-29 21:42:06
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/preview-introduction-V14
爬取时间: 2025-04-29 21:42:20
来源: Huawei Developer
业务简介
Preview Kit（文件预览服务）为应用提供便捷的文件快速预览服务。应用可以通过Preview Kit提供的预览API，快速启动预览界面，实现对各类文件的预览。
通过Preview Kit，用户可以对用户文件（包括图片、视频、音频、文本、html等）进行内容查看。同时用户还可以通过点击右上角的“使用其他应用打开”的按钮跳转到具体的应用进行展示，从而进行其他操作，如图片的旋转、放大等。
目前，Preview Kit实现Office的预览能力，主要是借助WPS的能力实现的，预览界面会有WPS提供的技术支持，并展示WPS的入口，统一按照文件预览的风格进行页面布局。
场景介绍
Preview Kit能够对图片、视频、音频、文本、html进行预览查看，满足绝大多数办公开发的需求，包括：
支持的文件类型
Preview Kit支持图片、视频、音频、文本、html以及文件夹进行查看，具体类型如下：
| 类型  | 文件后缀  | mimeType类型  |
| --- | --- | --- |
| 文本  | txt、cpp、c、h、java、xhtml、xml  | text/plain、text/x-c++src、text/x-csrc、text/x-chdr、text/x-java、application/xhtml+xml、text/xml  |
| 网页  | html、htm  | text/html  |
| 图片  | jpg、png、gif、webp、bmp、svg  | image/jpeg、image/png、image/gif、image/webp，image/bmp、image/svg+xml  |
| 音频  | m4a、aac、mp3、ogg、wav  | audio/mp4a-latm、audio/aac、audio/mpeg、audio/ogg、audio/x-wav  |
| 视频  | mp4、mkv、ts  | video/mp4、video/x-matroska、video/mp2ts  |
| 文档  | pdf  | application/pdf  |
| Office文档  | doc、docx、xls、xlsx、ppt、pptx、csv  | application/msword、application/vnd.openxmlformats-officedocument.wordprocessingml.document、application/vnd.ms-excel、application/vnd.openxmlformats-officedocument.spreadsheetml.sheet、application/vnd.ms-powerpoint、application/vnd.openxmlformats-officedocument.presentationml.presentation、text/comma-separated-values  |
| 文件夹  | 无  | 无  |
类型
文件后缀
mimeType类型
文本
txt、cpp、c、h、java、xhtml、xml
text/plain、text/x-c++src、text/x-csrc、text/x-chdr、text/x-java、application/xhtml+xml、text/xml
网页
html、htm
text/html
图片
jpg、png、gif、webp、bmp、svg
image/jpeg、image/png、image/gif、image/webp，image/bmp、image/svg+xml
音频
m4a、aac、mp3、ogg、wav
audio/mp4a-latm、audio/aac、audio/mpeg、audio/ogg、audio/x-wav
视频
mp4、mkv、ts
video/mp4、video/x-matroska、video/mp2ts
文档
pdf
application/pdf
Office文档
doc、docx、xls、xlsx、ppt、pptx、csv
application/msword、application/vnd.openxmlformats-officedocument.wordprocessingml.document、application/vnd.ms-excel、application/vnd.openxmlformats-officedocument.spreadsheetml.sheet、application/vnd.ms-powerpoint、application/vnd.openxmlformats-officedocument.presentationml.presentation、text/comma-separated-values
文件夹
无
无
基本概念
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170135.90864325819943390058583763471903:50001231000000:2800:531928F01FEF78FE09637ACCCD55972E111B6C996C1BDC0D8EFDCE16E7029428.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/preview-filepreview-V14
爬取时间: 2025-04-29 21:42:33
来源: Huawei Developer
接口说明
接口返回值有两种返回形式：callback和promise，promise和callback只是返回值方式不一样，功能相同。具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| openPreview(context: Context, file: PreviewInfo, info?: DisplayInfo): Promise<void> | 打开预览功能。通过传入单个文件预览信息以及悬浮窗口属性信息，打开预览窗口。1秒内重复调用无效。使用Promise方式异步返回结果。 |
| openPreview(context: Context, file: PreviewInfo, info: DisplayInfo, callback: AsyncCallback<void>): void | 打开预览功能。通过传入单个文件预览信息以及悬浮窗口属性信息，打开预览窗口。1秒内重复调用无效。传入callback进行异步回调。 |
| openPreview(context: Context, files: Array<PreviewInfo>, index?: number): Promise<void> | 打开预览功能。通过传入多个文件预览信息以及选择展示的文件信息下标，打开预览窗口。1秒内重复调用无效。使用Promise方式异步返回结果。仅移动端可用。 |
| canPreview(context: Context, uri: string): Promise<boolean> | 根据文件的uri判断文件是否可预览。  当传入支持的文件类型（图片、视频、音频、文本、html）和文件夹uri并且文件存在时，会返回true。 当传入不可预览的文件uri时，返回false。  |
| hasDisplayed(context: Context): Promise<boolean> | 判断预览窗口是否已经存在。预览窗口是单例的形式。  如果预览窗口已经打开过并且没关闭，那会返回true。 如果没打开或者打开后已关闭，那将返回false。  |
| closePreview(context: Context): Promise<void> | 关闭预览窗口，仅当预览窗口存在时起效。 |
| loadData(context: Context, file: PreviewInfo): Promise<void> | 加载预览文件信息。仅当预览窗口存在时生效。100毫秒内重复调用无效。  传入可预览文件以及文件夹时展示对应预览界面。 传入不可预览文件显示不支持预览界面。  |
接口名
描述
openPreview(context: Context, file: PreviewInfo, info?: DisplayInfo): Promise<void>
打开预览功能。通过传入单个文件预览信息以及悬浮窗口属性信息，打开预览窗口。1秒内重复调用无效。使用Promise方式异步返回结果。
openPreview(context: Context, file: PreviewInfo, info: DisplayInfo, callback: AsyncCallback<void>): void
打开预览功能。通过传入单个文件预览信息以及悬浮窗口属性信息，打开预览窗口。1秒内重复调用无效。传入callback进行异步回调。
openPreview(context: Context, files: Array<PreviewInfo>, index?: number): Promise<void>
打开预览功能。通过传入多个文件预览信息以及选择展示的文件信息下标，打开预览窗口。1秒内重复调用无效。使用Promise方式异步返回结果。仅移动端可用。
canPreview(context: Context, uri: string): Promise<boolean>
根据文件的uri判断文件是否可预览。
hasDisplayed(context: Context): Promise<boolean>
判断预览窗口是否已经存在。预览窗口是单例的形式。
closePreview(context: Context): Promise<void>
关闭预览窗口，仅当预览窗口存在时起效。
loadData(context: Context, file: PreviewInfo): Promise<void>
加载预览文件信息。仅当预览窗口存在时生效。100毫秒内重复调用无效。
开发步骤
1.
```typescript
import { filePreview } from '@kit.PreviewKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
```typescript
// 该沙箱uri仅为参考，需要根据实际业务传入真实存在的uri
let uri = 'file://com.example.myapplication/data/storage/el2/base/haps/entry/files/1.txt';
let uiContext = getContext(this);
filePreview.canPreview(uiContext, uri).then((result) => {    // 传入支持的文件类型且项目存在时会返回true
console.info(`Succeeded in obtaining the result of whether it can be previewed. result = ${result}`);
}).catch((err: BusinessError) => {
console.error(`Failed to obtain the result of whether it can be previewed, err.code = ${err.code}, err.message = ${err.message}`);
});
```
```typescript
let uiContext = getContext(this);
let displayInfo: filePreview.DisplayInfo = {
x: 100,
y: 100,
width: 800,
height: 800
};
let fileInfo: filePreview.PreviewInfo = {
title: '1.txt',
// 该沙箱uri仅为参考，需要根据实际业务传入真实uri
uri: 'file://com.example.myapplication/data/storage/el2/base/haps/entry/files/1.txt',
mimeType: 'text/plain'
};
filePreview.openPreview(uiContext, fileInfo, displayInfo).then(() => {
console.info('Succeeded in opening preview');
}).catch((err: BusinessError) => {
console.error(`Failed to open preview, err.code = ${err.code}, err.message = ${err.message}`);
});
```
```typescript
let uiContext = getContext(this);
let displayInfo: filePreview.DisplayInfo = {
x: 100,
y: 100,
width: 800,
height: 800
};
let fileInfo: filePreview.PreviewInfo = {
title: '1.txt',
// 该沙箱uri仅为参考，需要根据实际业务传入真实uri
uri: 'file://com.example.myapplication/data/storage/el2/base/haps/entry/files/1.txt',
mimeType: 'text/plain'
};
filePreview.openPreview(uiContext, fileInfo, displayInfo).then(() => {
console.info('Succeeded in opening preview');
}).catch((err: BusinessError) => {
console.error(`Failed to open preview, err.code = ${err.code}, err.message = ${err.message}`);
});
```
```typescript
let uiContext = getContext(this);
let displayInfo: filePreview.DisplayInfo = {
x: 100,
y: 100,
width: 800,
height: 800
};
let fileInfo: filePreview.PreviewInfo = {
title: '1.txt',
// 该沙箱uri仅为参考，需要根据实际业务传入真实uri
uri: 'file://com.example.myapplication/data/storage/el2/base/haps/entry/files/1.txt',
mimeType: 'text/plain'
};
filePreview.openPreview(uiContext, fileInfo, displayInfo, (err) => {
if (err && err.code) {
console.error(`Failed to open preview, err.code = ${err.code}, err.message = ${err.message}`);
return;
}
console.info('Succeeded in opening preview');
});
```
```typescript
let uiContext = getContext(this);
let fileInfo: filePreview.PreviewInfo = {
title: '1.txt',
// 该uri仅为参考，需要根据实际业务传入真实uri
uri: 'file://com.example.myapplication/data/storage/el2/base/haps/entry/files/1.txt',
mimeType: 'text/plain'
};
let fileInfo1: filePreview.PreviewInfo = {
title: '2.txt',
// 该uri仅为参考，需要根据实际业务传入真实uri
uri: 'file://com.example.myapplication/data/storage/el2/base/haps/entry/files/2.txt',
mimeType: 'text/plain'
};
let files: Array<filePreview.PreviewInfo> = new Array();
files.push(fileInfo);
files.push(fileInfo1);
filePreview.openPreview(uiContext, files, 0).then(() => {
console.info('Succeeded in opening preview');
}).catch((err: BusinessError) => {
console.error(`Failed to open preview, err.code = ${err.code}, err.message = ${err.message}`);
});
```
2.
```typescript
let uiContext = getContext(this);
let fileInfo: filePreview.PreviewInfo = {
title: '2.txt',
// 该uri仅为参考，需要根据实际业务传入真实uri
uri: 'file://com.example.myapplication/data/storage/el2/base/haps/entry/files/2.txt',
mimeType: 'text/plain'
};
filePreview.loadData(uiContext, fileInfo).then(() => {   // 仅当预览窗口存在时起效
console.info('Succeeded in loading data.');
}).catch((err: BusinessError) => {
console.error(`Failed to load data, err.code = ${err.code}, err.message = ${err.message}`);
});
```
```typescript
let uiContext = getContext(this);
filePreview.closePreview(uiContext).then(() => {   // 仅当预览窗口存在时起效
console.info('Succeeded in closing preview');
}).catch((err: BusinessError) => {
console.error(`Failed to close preview, err.code = ${err.code}, err.message = ${err.message}`);
});
```
```typescript
let uiContext = getContext(this);
let displayInfo: filePreview.DisplayInfo = {
x: 100,
y: 100,
width: 800,
height: 800
};
let fileInfo: filePreview.PreviewInfo = {
title: '1.txt',
// 该沙箱uri仅为参考，需要根据实际业务传入真实uri
uri: 'file://com.example.myapplication/data/storage/el2/base/haps/entry/files/1.txt',
mimeType: 'text/plain'
};
filePreview.openPreview(uiContext, fileInfo, displayInfo).then(() => {
console.info('Succeeded in opening preview');
}).catch((err: BusinessError) => {
console.error(`Failed to open preview, err.code = ${err.code}, err.message = ${err.message}`);
});
```
```typescript
let uiContext = getContext(this);
let displayInfo: filePreview.DisplayInfo = {
x: 100,
y: 100,
width: 800,
height: 800
};
let fileInfo: filePreview.PreviewInfo = {
title: '1.txt',
// 该沙箱uri仅为参考，需要根据实际业务传入真实uri
uri: 'file://com.example.myapplication/data/storage/el2/base/haps/entry/files/1.txt',
mimeType: 'text/plain'
};
filePreview.openPreview(uiContext, fileInfo, displayInfo, (err) => {
if (err && err.code) {
console.error(`Failed to open preview, err.code = ${err.code}, err.message = ${err.message}`);
return;
}
console.info('Succeeded in opening preview');
});
```
```typescript
let uiContext = getContext(this);
let fileInfo: filePreview.PreviewInfo = {
title: '1.txt',
// 该uri仅为参考，需要根据实际业务传入真实uri
uri: 'file://com.example.myapplication/data/storage/el2/base/haps/entry/files/1.txt',
mimeType: 'text/plain'
};
let fileInfo1: filePreview.PreviewInfo = {
title: '2.txt',
// 该uri仅为参考，需要根据实际业务传入真实uri
uri: 'file://com.example.myapplication/data/storage/el2/base/haps/entry/files/2.txt',
mimeType: 'text/plain'
};
let files: Array<filePreview.PreviewInfo> = new Array();
files.push(fileInfo);
files.push(fileInfo1);
filePreview.openPreview(uiContext, files, 0).then(() => {
console.info('Succeeded in opening preview');
}).catch((err: BusinessError) => {
console.error(`Failed to open preview, err.code = ${err.code}, err.message = ${err.message}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/preview-faq-V14
爬取时间: 2025-04-29 21:42:47
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/preview-faq-1-V14
爬取时间: 2025-04-29 21:43:00
来源: Huawei Developer
Preview Kit的openPreview接口在传入文件预览信息时，当前仅支持传入文件的uri，不支持传入文件的沙箱路径。
如果调用openPreview接口后，显示预览失败，请检查传入的是否为uri并且检查传入的uri是否存在。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/preview-faq-2-V14
爬取时间: 2025-04-29 21:43:13
来源: Huawei Developer
DocumentViewPicker拿到的文件uri应用仅有临时权限，该权限无法分享给预览，导致预览失败。可先对uri持久化权限，然后再采用openPreview打开文件。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-kit-guide-V14
爬取时间: 2025-04-29 21:43:27
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-introduction-V14
爬取时间: 2025-04-29 21:43:41
来源: Huawei Developer
Push Kit（推送服务）是华为提供的消息推送平台，建立了从云端到终端的消息推送通道。所有HarmonyOS应用可通过集成Push Kit，实现向应用实时推送消息，使消息易见，构筑良好的用户关系，提升用户的感知度和活跃度。
产品优势
-  Push Kit通过提供系统级长链接，即使应用进程不在也能实时推送消息。
-  支持文本样式、通知大图标样式、多行文本样式、角标样式等多种消息展示方式，满足您多样化、个性化的消息发送需求。
-  开发者可以根据实际场景灵活接入场景化消息。如通过应用内通话消息实现音视频通话，通过通知扩展消息实现语音播报，通过后台消息实现配置更新等。
推送消息提示场景
推送消息指的是应用通过Push Kit发送的，在华为终端设备上显示的通知消息。显示场景主要包括通知中心、锁屏、横幅、桌面图标角标与通知图标。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094259.06326398281517228870111996876718:50001231000000:2800:3269916F73DD19F44E4445A4FF19F7A8953841486599A073D086678196CAB7D5.jpg)
有关各场景的详细说明请参见通知提示场景。
推送消息类型
Push Kit支持以下消息类型：
| 消息类型 | 说明 |
| --- | --- |
| 通知消息 | 通知消息由Push Kit直接下发，在终端设备的通知中心、锁屏、横幅等展示，用户点击后拉起应用。 您可以设置通知消息样式来吸引用户。 常用场景：行程提醒、账号动态等。 |
| 授权订阅消息 | 授权订阅消息是一种特殊的通知消息，Push Kit为开发者提供了一次性授权订阅能力，当且仅当用户同意订阅后，开发者可向用户推送对应的消息，从而实现服务闭环。 常用场景：订阅内容。 |
| 通知扩展消息 | 当用户终端收到您发送的通知扩展消息后，Push Kit会拉起应用的子进程，您可以在子进程中自行处理业务。 常用场景：语音播报。 |
| 卡片刷新消息 | 通过卡片刷新服务，在合适场景向用户即时推送卡片内容，提升用户的感知度和活跃度。 常用场景：打车出行、快递动态等。 |
| 后台消息 | 消息到达终端后，如果应用进程在运行，将消息内容传给应用，如果不在运行则缓存消息，等待应用启动后再传给应用，不显示通知。 常用场景：用于告知应用更新配置参数。 |
| 实况窗消息 | 应用服务端向Push Kit服务端发送创建或更新实况窗的请求，创建实况窗，或更新实况窗内容。 常用场景：赛事比分更新，出行打车状态更新等。 |
| 应用内通话消息 | 支持应用实现网络音视频通话的能力。 常用场景：网络音视频通话。 |
消息类型
说明
通知消息
通知消息由Push Kit直接下发，在终端设备的通知中心、锁屏、横幅等展示，用户点击后拉起应用。
您可以设置通知消息样式来吸引用户。
常用场景：行程提醒、账号动态等。
授权订阅消息
授权订阅消息是一种特殊的通知消息，Push Kit为开发者提供了一次性授权订阅能力，当且仅当用户同意订阅后，开发者可向用户推送对应的消息，从而实现服务闭环。
常用场景：订阅内容。
通知扩展消息
当用户终端收到您发送的通知扩展消息后，Push Kit会拉起应用的子进程，您可以在子进程中自行处理业务。
常用场景：语音播报。
卡片刷新消息
通过卡片刷新服务，在合适场景向用户即时推送卡片内容，提升用户的感知度和活跃度。
常用场景：打车出行、快递动态等。
后台消息
消息到达终端后，如果应用进程在运行，将消息内容传给应用，如果不在运行则缓存消息，等待应用启动后再传给应用，不显示通知。
常用场景：用于告知应用更新配置参数。
实况窗消息
应用服务端向Push Kit服务端发送创建或更新实况窗的请求，创建实况窗，或更新实况窗内容。
常用场景：赛事比分更新，出行打车状态更新等。
应用内通话消息
支持应用实现网络音视频通话的能力。
常用场景：网络音视频通话。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094300.96164599741436976016323441717700:50001231000000:2800:A3C23517DFCA7305FD4B9FBB5AA7D7ABE46DB75F853541C5717B3399BBDCE73C.png)
使用Push Kit的主要业务流程如下：
约束和限制
影响送达率的因素说明
Push Kit致力于提供安全可靠的系统级消息发送通道，保障消息成功送达。影响消息送达率的因素：
推送消息的及时性
在终端设备网络条件良好且不拥堵情况下，Push Kit将使用智能推送策略以减少推送消息的时延。
为降低夜间推送对用户的干扰，推送服务在每日凌晨0:00 至 6:00期间实施夜间管控策略。
在此期间，若设备处于非活跃状态（如熄屏），推送服务将缓存该时段内发送的消息。管控时段结束后，推送服务会将缓存的消息重发至端侧。
推送消息长度与数量限制
网络受限说明
如果终端设备连接的网络配置了防火墙，也会影响消息的送达率，请检查以下端口号是否被禁用。
端口号：
支持的国家/地区
Push Kit当前仅支持中国境内（不包含中国香港、中国澳门、中国台湾）。
模拟器版本说明
Push Kit当前仅支持ARM版本的模拟器。详细请参考应用服务模拟器列表。
与相关Kit的关系
示例代码
Push Kit（推送服务）示例代码，请参考示例代码。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-preparations-V14
爬取时间: 2025-04-29 21:43:54
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-specification-V14
爬取时间: 2025-04-29 21:44:07
来源: Huawei Developer
为维护华为通知生态秩序，保障用户合法权益和良好的使用体验，根据现行法律法规及《华为开发者服务协议》、《华为APIs使用协议》、《华为推送服务使用协议》、《应用审核指南》、《元服务审核指南》，特制定本规范。
所有发布上架到华为应用市场且使用推送通知行为的HarmonyOS应用、联运应用及元服务（以下简称应用）应当遵守本规范，若开发者的行为违反本规范或《华为应用市场联运服务协议》，华为有权根据本规范和《华为应用市场联运违规处罚规定》对开发者进行处罚。
Push Kit使用基本原则
通知内容
为保障推送内容信息的合法性、真实客观性、一致性、可读性，以及用户良好的通知使用体验，请您遵守通知内容管理细则。
通知样式
通知样式规范概要
| 总体原则  | 例外  |
| --- | --- |
| 不得伪造其他应用的推送消息，包括伪造应用icon、消息内容等。  | -  |
| 应用通知不得隐藏应用自身的icon。  | -  |
| 禁止使用不符合设计规范的样式。  | -  |
| 不得利用当前系统内仍存在的通知，将特定通知强制置顶显示。  | 语音、视频通话、媒体播放、进度类通知（下载、更新、上传等）、录音、导航、投屏、运动计时、步数。  |
| 不得更改一键删除按钮。  | -  |
| 不得伪造横幅通知、锁屏通知。  | -  |
| 不得重复发送相同内容的通知打扰用户。  | -  |
| 通知标题与文本内容不得重复。  | -  |
总体原则
例外
不得伪造其他应用的推送消息，包括伪造应用icon、消息内容等。
-
应用通知不得隐藏应用自身的icon。
-
禁止使用不符合设计规范的样式。
-
不得利用当前系统内仍存在的通知，将特定通知强制置顶显示。
语音、视频通话、媒体播放、进度类通知（下载、更新、上传等）、录音、导航、投屏、运动计时、步数。
不得更改一键删除按钮。
-
不得伪造横幅通知、锁屏通知。
-
不得重复发送相同内容的通知打扰用户。
-
通知标题与文本内容不得重复。
-
文本样式
| 描述  | 图片展示  |
| --- | --- |
| 通知文本内容最多可显示3行，超长后以“...”截断。  | 请参考设计-通知-普通通知。  |
描述
图片展示
通知文本内容最多可显示3行，超长后以“...”截断。
请参考设计-通知-普通通知。
通知角标
应用收到消息后以数字的形式展示角标，提醒用户查看消息。
| 描述  | 图片展示  |
| --- | --- |
| 以数字的形式展示在右上角。  | 请参考设计-通知-桌面图标角标。  |
描述
图片展示
以数字的形式展示在右上角。
请参考设计-通知-桌面图标角标。
通知大图标
| 描述  | 图片展示  |
| --- | --- |
| 适用于有图片预览的通知。  | 请参考设计-通知-图片预览通知。  |
描述
图片展示
适用于有图片预览的通知。
请参考设计-通知-图片预览通知。
通知大图标需要满足以下要求：
多行文本样式
应用的通知内容文字较多，且通知消息内容需有序展示。
| 描述  | 图片展示  |
| --- | --- |
| 适用于文本内容较长的通知，最多可显示3行内容，每行内容超长后以“...”截断。  | 请参考设计-通知-多行文本类通知。  |
描述
图片展示
适用于文本内容较长的通知，最多可显示3行内容，每行内容超长后以“...”截断。
请参考设计-通知-多行文本类通知。
通知跳转
通知开关授权
其他

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-config-setting-V14
爬取时间: 2025-04-29 21:44:21
来源: Huawei Developer
在开通推送服务前，请先参考“应用开发准备”创建项目和应用工程。
从HarmonyOS NEXT Developer Beta2起，开发者无需配置公钥指纹和Client ID。
操作步骤
1.
2.
3.  推送服务权益为项目级，若您已有开通过推送服务的项目，当您在项目中添加新的应用时，无需再次开通推送服务。
4.  推送服务当前仅支持中国境内（不包含中国香港、中国澳门、中国台湾），数据处理地固定为中国，请您选择数据处理位置为中国。
5.  若使用原有的Profile文件，请确保在申请Profile文件之前已开启“推送服务”，否则开启后需要重新申请Profile文件，并重新配置签名信息。
6.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094301.28366469816043979576905019169950:50001231000000:2800:A4235D471929972CDF0B7533730D53A7D4459085DBD08067DFB223AE535E5EC0.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094301.66807386693009026872913132136742:50001231000000:2800:BA1338C5159EA61B6FFE82465EDC113A587D8B258FB334E934FE1B60B56F03D5.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094301.65079769856190817391148109468073:50001231000000:2800:29035B963611884233B7EBAD45B4566E9566D224190E3DD6C80BA0A121DDBDC5.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094301.64969856813276821356699127513832:50001231000000:2800:832BAFA172FFED1A4E8995F78300C8FA262FA522C77456F49F387BEF08669A91.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094301.11000363657436222500710198926154:50001231000000:2800:B4CC2F0F9EF9011FB6FB3FCF5549093C75C8D3BA981371B2A359AD57B7EA3492.png)
（可选）设置数据处理位置
您可以在“项目设置 > 数据处理位置”页面设置或更新数据处理位置，步骤如下：
1.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094301.40488590483785741642821494519114:50001231000000:2800:C9B911440A6FA66051FD0807A5644FE3D9077D1E701C877976D25D91E1FDD97C.png)
如果设置的数据处理位置与您的服务器位置不一致，或者设置的数据处理位置与应用所服务的用户所在地不一致，都会导致推送消息无法下发。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-apply-right-V14
爬取时间: 2025-04-29 21:44:34
来源: Huawei Developer
场景化消息权益简介
Push Kit支持多种场景化消息类型，其中部分场景化消息类型需要您申请特殊权益才能正常发送。具体见下表：
| 场景化消息权益名称 | 功能描述 | 开放申请场景 |
| --- | --- | --- |
| 通知消息自分类权益 | 允许开发者自行对通知消息进行分类，以改善终端用户推送体验。您无须申请此权益也能推送通知消息，未开通权益时，Push Kit默认您推送的是资讯营销类消息。 | 所有应用可申请，部分自分类申请需与应用分类相关。 |
| 推送通知扩展消息权益 | 消息到达后，推送通知消息，同时唤醒应用执行语音播报等动作。您必须申请此权益才能推送通知扩展消息。 | 仅为有商家新订单提醒、商家收款场景的应用开放。 |
| 推送应用内通话消息权益 | 应用内通话消息到达用户设备后，唤醒目标应用，弹出呼叫接听界面，实现音视频通话。您必须申请此权益才能推送应用内通话消息。 | 仅用于具备应用内音视频通话功能场景的沟通类、告警类应用。 仅服务于自身企业或政府组织单位内部。 |
场景化消息权益名称
功能描述
开放申请场景
通知消息自分类权益
允许开发者自行对通知消息进行分类，以改善终端用户推送体验。您无须申请此权益也能推送通知消息，未开通权益时，Push Kit默认您推送的是资讯营销类消息。
所有应用可申请，部分自分类申请需与应用分类相关。
推送通知扩展消息权益
消息到达后，推送通知消息，同时唤醒应用执行语音播报等动作。您必须申请此权益才能推送通知扩展消息。
仅为有商家新订单提醒、商家收款场景的应用开放。
推送应用内通话消息权益
应用内通话消息到达用户设备后，唤醒目标应用，弹出呼叫接听界面，实现音视频通话。您必须申请此权益才能推送应用内通话消息。
仅用于具备应用内音视频通话功能场景的沟通类、告警类应用。
仅服务于自身企业或政府组织单位内部。
有关场景化消息权益的权益内容及申请方式，请见下方具体章节。
如果您在申请过程中遇到任何问题，请发送邮件至hwpush@huawei.com与我们取得联系。
申请通知消息自分类权益
通知消息分类方式
为了改善终端用户推送体验、营造良好可持续的通知生态，Push Kit对通知消息进行分类管理。根据消息内容，Push Kit将通知消息分类为服务与通讯、资讯营销两大类别。如您希望通知消息能更精准地符合业务需要，可以根据通知消息分类标准，自行对消息进行分类。
未开通通知消息自分类权益的应用，通知消息类型将会默认归为资讯营销类消息。
分类方式示意图：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094301.41589339388366926232561708463983:50001231000000:2800:540529DB17C4946DB494076A9CD24D25B6260028BF278464430E7551CB9CC865.png)
通知消息分类标准仅适用于推送通知消息，若您的应用涉及推送通知消息，则需按照标准进行分类。其他场景化消息可按照相应的指导完成开发适配。
通知消息分类标准与提醒方式
结合应用的消息内容和消息发送场景，Push Kit将通知消息分类为服务与通讯类和资讯营销类，并对不同类别的通知消息的提醒方式、消息展示位置、推送数量进行差异化管理，具体如下：
| 消息类型 | 场景说明 | 提醒方式与消息展示位置 | 推送数量限制 |
| --- | --- | --- | --- |
| 服务与通讯 | 包括社交通讯与服务提醒类消息，指应用借助通知中心及时向用户传递重要通知提醒，通常用户对接收此类消息有预期。 | 锁屏、铃声、振动等 | 与资讯营销消息、其他场景化消息合计不超过应用每日可向每设备发送的最大消息数量3000条。 |
| 资讯营销 | 包括资讯类消息和营销类消息，指的是运营人员向用户发送的活动信息、内容推荐、资讯等。 | 静默通知，仅在通知中心展示消息 | 根据应用类别限制每日推送数量，单个应用每日每设备推送数量为2条或5条。 |
消息类型
场景说明
提醒方式与消息展示位置
推送数量限制
服务与通讯
包括社交通讯与服务提醒类消息，指应用借助通知中心及时向用户传递重要通知提醒，通常用户对接收此类消息有预期。
锁屏、铃声、振动等
与资讯营销消息、其他场景化消息合计不超过应用每日可向每设备发送的最大消息数量3000条。
资讯营销
包括资讯类消息和营销类消息，指的是运营人员向用户发送的活动信息、内容推荐、资讯等。
静默通知，仅在通知中心展示消息
根据应用类别限制每日推送数量，单个应用每日每设备推送数量为2条或5条。
随着应用的消息发送场景不断变化，Push Kit的分类标准也将不断演进和补充，请及时留意本文档最新的分类说明。
服务与通讯类-社交通讯
| 消息类型 | 云端通知category取值 | 场景说明 | 消息提醒方式 |
| --- | --- | --- | --- |
| 即时聊天 | IM | 用户间点对点聊天消息（或私信）、群聊天消息。 注：需承诺不包括未关注人的私信、官方号或者商家批量推送给用户的私信或广告。 | 表示通知消息为服务与通讯类中的社交通讯。消息提醒方式默认为锁屏+铃声+振动（支持横幅通知提醒方式，实际提醒方式以应用在通知管理中的设置为准）。 |
| 音频、视频通话 | VOIP | 语音通话邀请、视频通话邀请、来电提醒等。 注：仅为用户通知提醒，不涉及在后台拉起应用进程建立通话过程。 |
消息类型
云端通知category取值
场景说明
消息提醒方式
即时聊天
IM
用户间点对点聊天消息（或私信）、群聊天消息。
注：需承诺不包括未关注人的私信、官方号或者商家批量推送给用户的私信或广告。
表示通知消息为服务与通讯类中的社交通讯。消息提醒方式默认为锁屏+铃声+振动（支持横幅通知提醒方式，实际提醒方式以应用在通知管理中的设置为准）。
音频、视频通话
VOIP
语音通话邀请、视频通话邀请、来电提醒等。
注：仅为用户通知提醒，不涉及在后台拉起应用进程建立通话过程。
服务与通讯类-服务提醒
| 消息类型 | 云端通知category取值 | 场景说明 | 消息提醒方式 |
| --- | --- | --- | --- |
| 订阅 | SUBSCRIPTION | 用户主动订阅的内容并确认会收到推送（订阅仅开放以下场景，其他场景不支持申请）。  主动设置的单场直播开播提醒、预约活动提醒。 主动设置的签到打卡提醒。 主动设置的商品降价提醒。 特别关注的账号/作者发布动态、书籍更新提醒。 用户主动设置的行情动态提醒。 付费订阅内容提醒。  注意 申请订阅类消息需要满足以下所有条件并提供完整截图证明：  应用内支持用户“订阅”和“取消订阅”（用户界面需要至少出现“订阅”或“预约”等字样；“订阅”和“取消订阅”按钮需在同一页面，“取消订阅”按钮不可隐藏）。 订阅是用户的主动行为，订阅按钮需默认关闭（在用户未订阅的情况下，不向用户推送消息）。 用户的订阅或关注不等同于用户允许接收订阅推送，“订阅”和“是否接收订阅推送”需要有互相独立且默认关闭的开关（例：订阅之后弹窗询问用户是否接收该订阅的通知推送）。 订阅消息的范围不宜过于宽泛、不具体（错误示例：订阅行情资讯、兴趣标签等，过于宽泛、不具体）。 推送内容中需要体现该条推送是用户的订阅消息（例：在消息标题或正文中携带“订阅消息”、“您订阅的xx”等字样）。   | 表示通知消息为服务与通讯类中的服务提醒。消息提醒方式默认为锁屏+铃声+振动（支持横幅通知提醒方式，实际提醒方式以应用在通知管理中的设置为准）。 |
| 出行 | TRAVEL | 用户出行产生的通知提醒，推送对象为消费者。  行程提醒。 班车/航班变动提醒。 酒店入住前提醒。 公交到站提醒。  |
| 健康 | HEALTH | 用户主动测量的健康数据通知，仅限运动类、健康类应用使用。  运动量（步数、骑行里程、游泳距离等）。 身体数据（心率、体重、体脂、消耗卡路里等）。  |
| 工作事项提醒 | WORK | 用户下一步需要做某件事项的提醒、待处理的业务流程。  工作提醒：会议提醒、待办提醒、日程安排、教学任务/课程提醒等。 待处理业务流程，推送对象为服务提供方：审核进度提醒、认证状态流程提醒、工单处理、卖家收到订单提醒、卖家收到售后提醒、催促卖家发货提醒、司机接单提醒。 商家运营：库存不足、售罄提醒、商品下架通知、限制提现、客诉警告、店铺限制、商品黑名单、交易违规、涉假/涉欺诈发货通知。  |
| 账号动态 | ACCOUNT | 用户账号和账号下资源资产的动态信息。  账号：账号上下线、账号状态变化、账号信息认证等。 资产：会员到期/过期、续费提醒、余额变动（余额必须为真实的资产变动，且需排除积分变动、金币变动，排名更新等）。  |
| 订单&物流 | EXPRESS | 正在交易或完成交易的订单信息及物流状态信息。  订单，推送对象为消费者：下单成功、订单详情、订单状态、订单投诉处理进度、开票信息。 物流：已发货、派送中、签收、取件。  |
| 财务 | FINANCE | 金额变化的交易提示，仅限金融银行类、支付类应用使用。 收付款、银行到账&扣款、交易提醒、催缴&退款信息、充值、待支付账单、贷款受理进度、还款/逾期提醒、资金冻结提醒、资金限制提醒、缴纳保证金提醒。 |
| 设备提醒 | DEVICE_REMINDER | IoT设备发出的设备状态/信息/提示/告警等提醒消息。 |
| 邮件 | MAIL | 新收到的邮件，仅限邮箱类应用、办公软件应用使用。 |
| 语音播报 | PLAY_VOICE | 需要用户特别注意的语音提醒，语音由应用本身进行播报。商家运营：用户支付金额提醒，用户取消支付提醒，来订单通知提醒。 | 表示通知消息为服务与通讯类中的服务提醒。消息提醒方式默认为锁屏+振动（支持横幅通知、响铃提醒方式，实际提醒方式以应用在通知管理中的设置为准）。为了避免和应用中的语音播报冲突，此种类型消息无铃声提醒。 |
消息类型
云端通知category取值
场景说明
消息提醒方式
订阅
SUBSCRIPTION
用户主动订阅的内容并确认会收到推送（订阅仅开放以下场景，其他场景不支持申请）。
申请订阅类消息需要满足以下所有条件并提供完整截图证明：
表示通知消息为服务与通讯类中的服务提醒。消息提醒方式默认为锁屏+铃声+振动（支持横幅通知提醒方式，实际提醒方式以应用在通知管理中的设置为准）。
出行
TRAVEL
用户出行产生的通知提醒，推送对象为消费者。
健康
HEALTH
用户主动测量的健康数据通知，仅限运动类、健康类应用使用。
工作事项提醒
WORK
用户下一步需要做某件事项的提醒、待处理的业务流程。
账号动态
ACCOUNT
用户账号和账号下资源资产的动态信息。
订单&物流
EXPRESS
正在交易或完成交易的订单信息及物流状态信息。
财务
FINANCE
金额变化的交易提示，仅限金融银行类、支付类应用使用。
收付款、银行到账&扣款、交易提醒、催缴&退款信息、充值、待支付账单、贷款受理进度、还款/逾期提醒、资金冻结提醒、资金限制提醒、缴纳保证金提醒。
设备提醒
DEVICE_REMINDER
IoT设备发出的设备状态/信息/提示/告警等提醒消息。
邮件
MAIL
新收到的邮件，仅限邮箱类应用、办公软件应用使用。
语音播报
PLAY_VOICE
需要用户特别注意的语音提醒，语音由应用本身进行播报。商家运营：用户支付金额提醒，用户取消支付提醒，来订单通知提醒。
表示通知消息为服务与通讯类中的服务提醒。消息提醒方式默认为锁屏+振动（支持横幅通知、响铃提醒方式，实际提醒方式以应用在通知管理中的设置为准）。为了避免和应用中的语音播报冲突，此种类型消息无铃声提醒。
资讯营销类-内容资讯
| 消息类型 | 云端通知category取值 | 场景说明 | 消息提醒方式 |
| --- | --- | --- | --- |
| 财经动态 | MARKETING    | 股票、彩票、期货、期权、外汇类通知，包括交易信息、行业公告等。 | 表示通知消息为资讯营销类。消息提醒方式为静默通知，仅在通知中心展示，不支持横幅通知。 |
| 生活资讯 |   天气：天气提醒、天气异常变化，包括气温、雾霾、台风、灾情、预警等。 导航：行驶路线、路况规划、路线中的交通状况（拥堵提醒）、位置使用、调用地图类应用进行定位等相关的通知。 各垂直行业相关信息。  |
| 调研 | 发送问卷以获得受访者的态度和意见，包括使用习惯、产品满意度、服务满意度等。 |
| 其他 | 面向广大用户发布的产品功能推荐、平台公告、应用更新升级提醒等。 |
| 内容推荐 | 非用户主动订阅，应用向用户推送的内容。 包括点评、书籍、广告、视频、音频、节目、课程、直播、社区话题、游戏宣传等。 |
| 新闻 | 及时地报道新近发生的、有价值的事实。 包括政治新闻、经济新闻、法律新闻、军事新闻、科技新闻、文教新闻、体育新闻、社会新闻等。 |
| 社交动态 |   用户之间的社交互动提醒，如：好友动态、新增粉丝、添加好友、被赞、被@、被收藏、评论、留言、关注、回复、转发等。 用户推荐：附近的人、大V、主播、异性、可能认识的人等。  |
消息类型
云端通知category取值
场景说明
消息提醒方式
财经动态
MARKETING
股票、彩票、期货、期权、外汇类通知，包括交易信息、行业公告等。
表示通知消息为资讯营销类。消息提醒方式为静默通知，仅在通知中心展示，不支持横幅通知。
生活资讯
调研
发送问卷以获得受访者的态度和意见，包括使用习惯、产品满意度、服务满意度等。
其他
面向广大用户发布的产品功能推荐、平台公告、应用更新升级提醒等。
内容推荐
非用户主动订阅，应用向用户推送的内容。
包括点评、书籍、广告、视频、音频、节目、课程、直播、社区话题、游戏宣传等。
新闻
及时地报道新近发生的、有价值的事实。
包括政治新闻、经济新闻、法律新闻、军事新闻、科技新闻、文教新闻、体育新闻、社会新闻等。
社交动态
资讯营销类-营销活动
| 消息类型 | 云端通知category取值 | 场景说明 | 消息提醒方式 |
| --- | --- | --- | --- |
| 功能推荐 | MARKETING  | 推荐用户使用当前产品的某一个功能。 | 表示通知消息为资讯营销类。消息提醒方式为静默通知，仅在通知中心展示，不支持横幅通知。 |
| 运营活动 | 非用户主动设置，由应用发起需由用户参与的运营活动、提醒消息、游戏提醒、服务等。 |
| 产品促销 | 产品信息相关推广、产品优惠，例如满减、低至、促销、买一送一、返利、优惠券、代金券、送红包相关的通知。 |
消息类型
云端通知category取值
场景说明
消息提醒方式
功能推荐
MARKETING
推荐用户使用当前产品的某一个功能。
表示通知消息为资讯营销类。消息提醒方式为静默通知，仅在通知中心展示，不支持横幅通知。
运营活动
非用户主动设置，由应用发起需由用户参与的运营活动、提醒消息、游戏提醒、服务等。
产品促销
产品信息相关推广、产品优惠，例如满减、低至、促销、买一送一、返利、优惠券、代金券、送红包相关的通知。
通知消息推送数量管理规则
根据通知消息分类标准，Push Kit将通知消息分为服务与通讯、资讯营销两大类别。对这两类通知消息，Push Kit有不同的频控规则。
| 二级分类 | 三级分类 | 单个应用每日每设备通知推送数量（单位：条） |
| --- | --- | --- |
| 新闻阅读 | 新闻（需具备《互联网新闻信息服务许可证》） | 5 |
| 电子书、杂志、有声读物、动漫、幽默、体育、分类信息 | 2 |
| 休闲益智 | 所有 | 2 |
| 经营策略 | 所有 | 2 |
| 体育竞技 | 所有 | 2 |
| 棋牌桌游 | 所有 | 2 |
| 动作射击 | 所有 | 2 |
| 角色扮演 | 所有 | 2 |
| 影音娱乐 | 所有 | 2 |
| 实用工具 | 所有 | 2 |
| 社交通讯 | 所有 | 2 |
| 教育 | 所有 | 2 |
| 拍摄美化 | 所有 | 2 |
| 美食 | 所有 | 2 |
| 出行导航 | 所有 | 2 |
| 旅游住宿 | 所有 | 2 |
| 购物比价 | 所有 | 2 |
| 商务 | 所有 | 2 |
| 儿童 | 所有 | 2 |
| 金融理财 | 所有 | 2 |
| 运动健康 | 所有 | 2 |
| 便捷生活 | 所有 | 2 |
| 汽车 | 所有 | 2 |
| 主题个性 | 所有 | 2 |
二级分类
三级分类
单个应用每日每设备通知推送数量（单位：条）
新闻阅读
新闻（需具备《互联网新闻信息服务许可证》）
5
电子书、杂志、有声读物、动漫、幽默、体育、分类信息
2
休闲益智
所有
2
经营策略
所有
2
体育竞技
所有
2
棋牌桌游
所有
2
动作射击
所有
2
角色扮演
所有
2
影音娱乐
所有
2
实用工具
所有
2
社交通讯
所有
2
教育
所有
2
拍摄美化
所有
2
美食
所有
2
出行导航
所有
2
旅游住宿
所有
2
购物比价
所有
2
商务
所有
2
儿童
所有
2
金融理财
所有
2
运动健康
所有
2
便捷生活
所有
2
汽车
所有
2
主题个性
所有
2
申请通知消息自分类权益
申请原则
当您充分了解了通知消息分类方式，准备申请通知消息自分类权益前，建议您先确认申请是否满足以下原则：
申请流程
1.
2.
3.
4.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094302.65897094407973419127880786823194:50001231000000:2800:3E208094F96CB1A988BFA549941B27AB8D5C68232F4ECF114205AF9F653BB31C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094302.66766577635285590555014058587303:50001231000000:2800:B3B2112FA9D70740446C4C25A8839E1A5DF30100589099391D2C81DB3763A156.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094302.95847125792169355408517536583572:50001231000000:2800:FDCE53A0D47483AFE42465788A7BD0E02470DE488EE87437B02FEFCE7DE6F467.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094302.86224212452596713980559679688549:50001231000000:2800:0935523BD144E3BBB83A207D5D69D62E880B97DC9AD013D6CDC6AA5F031888FD.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094302.36513086196346672400138919029917:50001231000000:2800:71433038D43C140FF1ACF0B503B6DD8AE3D52BECBE9EDC4D4A274B62A6FB84FC.png)
适配云端category字段
自分类权益生效后，应用推送的通知消息类型将根据您发送消息时的云端category字段进行归类。
category字段取值为大写的英文单词，且仅可填写在分类权益页面中已审批通过的category值，若出现分类错误或违反通知消息分类标准的场景，将被判为违规。
违规行为及相应的处理措施请参见通知违规处罚标准。
如果您对上述规则有任何疑问，请发送邮件至hwpush@huawei.com与我们取得联系。
申请推送通知扩展消息权益
当用户终端收到您发送的通知扩展消息后，Push Kit会拉起应用的子进程，您可以在子进程中自行处理业务，执行语音播报等动作，每次拉起通知扩展子进程的时长默认为10秒，每次拉起通知扩展子进程后，请在10秒内完成事务处理，超出10秒子进程生命周期结束。
申请推送通知扩展消息存在以下限制：
申请邮件模板
请提供如下信息到hwpush@huawei.com进行申请，我们会在15个工作日内回复申请结果，请您留意邮箱消息。
邮件主题：【场景化消息特殊权益申请】 - 通知扩展消息
邮件正文：
申请权限名称：通知扩展消息
企业名称：***
应用名称：***
应用包名：com.***.***
AppID：1****12
使用场景：***是商家交易平台，提供订单交易和收付款功能，希望借助通知扩展消息，实现对新订单和收款场景进行语音播报的功能。
承诺信息：
1.（应用名称）的通知扩展消息仅用于符合规定的场景中（具体场景）。
2.业务结束后，应用不再阻止系统休眠。
3.如有违反上述1、2的其他行为，同意华为Push Kit将该权益收回。
备注： 申请权益为“通知扩展消息”，需要根据具体使用场景，附带语音消息通知界面截图或语音播报录像。
申请推送应用内通话消息权益
应用内通话消息到达用户设备后，唤醒目标应用，弹出呼叫接听界面，实现音视频通话。
该场景仅用于具备应用内音视频通话功能场景的沟通类、告警类应用，仅服务于自身企业或政府组织单位内部。
申请邮件模板
当前应用内通话消息处于Beta阶段，仅提供邮件申请方式。
请提供如下信息到hwpush@huawei.com进行申请，我们会在15个工作日内回复申请结果，请您留意邮箱消息。
邮件主题：【场景消息特殊权益申请】 - 应用内通话消息
邮件正文：
申请权限名称：应用内通话消息
企业名称：***
应用名称：***
应用包名：com.***.***
AppID：1****12
使用场景：***办公类软件，提供音视频通话功能，希望借助应用内通话消息，实现音视频通话功能。
承诺信息：
备注：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-get-token-V14
爬取时间: 2025-04-29 21:44:47
来源: Huawei Developer
场景介绍
Push Kit在您获取Push Token时进行了推送服务权益校验，请您在进行开发前先阅读开通推送服务章节，完成相关配置。
Push Token标识了每台设备上每个应用，开发者调用getToken()接口向Push Kit服务端请求Push Token，获取到之后使用Push Token来推送消息。
Push Token一般情况不会变化，仅下列场景Push Token会发生变化：
因此，建议您在应用启动时调用getToken()接口，若设备的Push Token发生变化，及时上报到您的应用服务器更新Push Token。
注意事项
接口说明
接口返回值有两种返回形式：Callback和Promise回调。下表中仅展示Promise回调形式的接口，Promise和Callback只是返回值方式不一样，功能相同。
| 接口名 | 描述 |
| --- | --- |
| getToken(): Promise<string> | 以Promise形式获取Push Token。 |
| deleteToken(): Promise<void> | 以Promise形式删除Push Token。 |
接口名
描述
getToken(): Promise<string>
以Promise形式获取Push Token。
deleteToken(): Promise<void>
以Promise形式删除Push Token。
获取Push Token
1.
```typescript
import { pushService } from '@kit.PushKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { UIAbility, AbilityConstant, Want } from '@kit.AbilityKit';
```
2.
```typescript
export default class EntryAbility extends UIAbility {
// 入参 want 与 launchParam 并未使用，为初始化项目时自带参数
async onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): Promise<void> {
// 获取Push Token
try {
const pushToken: string = await pushService.getToken();
hilog.info(0x0000, 'testTag', 'Succeeded in getting push token');
} catch (err) {
let e: BusinessError = err as BusinessError;
hilog.error(0x0000, 'testTag', 'Failed to get push token: %{public}d %{public}s', e.code, e.message);
}
// 上报Push Token并上报到您的服务端
}
}
```
若您获取Push Token时发生APP身份验证失败错误（1000900010），请参考ArkTS API错误码排查。
删除Push Token
删除Push Token后，本应用下的所有Push Kit历史数据会一并删除。非必要情况，请您不要主动调用deleteToken()接口。
1.
```typescript
import { pushService } from '@kit.PushKit';
```
2.
```typescript
import { pushService } from '@kit.PushKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { UIAbility } from '@kit.AbilityKit';
export default class EntryAbility extends UIAbility {
async myDeletePushToken() {
try {
await pushService.deleteToken();
hilog.info(0x0000, 'testTag', 'Succeeded in deleting push token');
} catch (err) {
let e: BusinessError = err as BusinessError;
hilog.error(0x0000, 'testTag', 'Failed to delete push token: %{public}d %{public}s', e.code, e.message);
}
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-scenes-V14
爬取时间: 2025-04-29 21:45:01
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-alert-V14
爬取时间: 2025-04-29 21:45:14
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-send-alert-V14
爬取时间: 2025-04-29 21:45:28
来源: Huawei Developer
场景介绍
通知消息通过Push Kit通道直接下发，可在终端设备的通知中心、锁屏、横幅等展示，用户点击后拉起应用。您可以通过设置通知消息样式来吸引用户。
开通权益
Push Kit根据消息内容，将通知消息分类为服务与通讯、资讯营销两大类别，开放通知消息自分类权益。
两种类型的通知消息在提醒方式、消息展示位置、推送数量上皆存在差异。更多说明与权益申请详情参见申请通知消息自分类权益。
频控规则
调测阶段，每个项目每日全网最多可推送1000条测试消息。发送测试消息需设置testMessage为true。
正式发布阶段，单设备单应用下每日推送消息总条数受设备消息频控限制，所有场景化消息发送条数不超过3000条。
服务通讯类消息与资讯营销类消息存在不同的频控策略，详情请参见通知消息推送数量管理规则。
开发步骤
1.  本示例仅包含REST API中部分消息字段，关于服务端开发的更多详情请参见端云调试。
```json
// Request URL
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
// Request Header
Content-Type: application/json
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 0
// Request Body
{
"payload": {
"notification": {
"category": "MARKETING",
"title": "普通通知标题",
"body": "普通通知内容",
"clickAction": {
"actionType": 0
},
// 通知是否在应用在前台情况下展示，仅对alert消息生效(push-type为0)
"foregroundShow": true,
"notifyId": 12345
}
},
"target": {
"token": ["IQAAAA**********4Tw"]
},
"pushOptions": {
"testMessage": true,
"ttl": 86400
}
}
```
点击消息动作
点击消息进入应用首页并传递数据
1.  module.json5文件中的skills标签下可以同时存在多个skill对象，每个对象对应一种能力。 若您需要同时设置推送消息跳转能力和其他跳转能力（如NFC跳转、浏览器跳转等），需要在skills数组中创建不同的skill对象，分别映射对应的能力。
```json
{
"name": "TestAbility",
"srcEntry": "./ets/abilities/TestAbility.ets",
"exported": false,
"startWindowIcon": "$media:icon",
"startWindowBackground": "$color:start_window_background",
"skills": [
// 该skill标识应用首页，不要配置uris
{
"entities": [
"entity.system.home"
],
"actions": [
"action.system.home"
]
},
// 其他skill配置
{
}
]
}
```
2.
```json
// Request URL
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
// Request Header
Content-Type: application/json
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 0
// Request Body
{
"payload": {
"notification": {
"category": "MARKETING",
"title": "普通通知标题",
"body": "普通通知内容",
"clickAction": {
"actionType": 0,
"data": {"testKey": "testValue"}
}
}
},
"target": {
"token": ["IQAAAA**********4Tw"]
},
"pushOptions": {
"testMessage": true
}
}
```
3.  onNewWant()方法中覆写如下代码（热启动时进入该生命周期回调）： onNewWant()方法仅在单例（singleton）模式下可用。 点击消息，当应用进程不存在时，会在onCreate()方法中获取消息data数据，当应用进程存在时，会在onNewWant()方法中获取消息数据。
```typescript
import { UIAbility, Want } from '@kit.AbilityKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
export default class MainAbility extends UIAbility {
onCreate(want: Want): void {
// 获取消息中传递的data数据
const data = want.parameters;
const value = want.parameters?.["testKey"]; // value: "testValue"
hilog.info(0x0000, 'testTag', 'Succeeded in getting message data');
// 根据实际业务场景对data进行处理
}
}
```
点击消息进入应用内页并传递数据
1.  方式一：在skills标签中新增一个独立的skill对象，配置actions参数用于点击消息进入应用内页，示例如下： 方式二：在skills标签中新增一个独立的skill对象，配置uris参数用于点击消息进入应用内页（必须同时配置actions参数和uris参数，actions参数为空），示例如下： module.json5文件中的skills标签下可以同时存在多个skill对象，每个对象对应一种能力。 若您需要同时设置推送消息跳转能力和其他跳转能力（如NFC跳转、浏览器跳转等），需要在skills数组中创建不同的skill对象，分别映射对应的能力。
```json
{
"name": "TestAbility",
"srcEntry": "./ets/abilities/TestAbility.ets",
"exported": false,
"startWindowIcon": "$media:icon",
"startWindowBackground": "$color:start_window_background",
"skills": [
// 保持现有skill对象不变
{
"actions": [
"com.app.action"
]
},
// 新增一个独立的skill对象，配置actions参数
{
"actions": [
"com.test.action"
]
}
]
}
```
2.
```json
// Request URL
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
// Request Header
Content-Type: application/json
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 0
// Request Body
{
"payload": {
"notification": {
"category": "MARKETING",
"title": "普通通知标题",
"body": "普通通知内容",
"clickAction": {
"actionType": 1,
"action": "com.test.action",
"uri": "https://www.xxx.com:8080/push/test",
"data": {"testKey": "testValue"}
}
}
},
"target": {
"token": ["IQAAAA**********4Tw"]
},
"pushOptions": {
"testMessage": true
}
}
```
3.  onNewWant()方法中覆写如下代码（热启动时进入该生命周期回调）： onNewWant()方法仅在单例（singleton）模式下可用。 点击消息，当应用进程不存在时，会在onCreate()方法中获取消息data数据，当应用进程存在时，会在onNewWant()方法中获取消息数据。
```typescript
import { UIAbility, Want } from '@kit.AbilityKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
export default class TestAbility extends UIAbility {
onCreate(want: Want): void {
// 获取消息中传递的data数据
const data = want.parameters;
const value = want.parameters?.["testKey"]; // value: "testValue"
hilog.info(0x0000, 'testTag', 'Succeeded in getting message data');
// 根据实际业务场景对data进行处理
}
}
```
设置通知消息样式
Push Kit提供了多种通知消息样式，您可以自定义其中内容来吸引用户，从而提高应用的日活跃用户数量。
普通通知
您在发送通知消息时notification参数中必须携带title与body字段，来设置应用收到通知消息后展示在通知中心的标题与内容。文本内容最多显示3行，超出3行以“...”截断。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094305.85235882121709014966096350407731:50001231000000:2800:F41E612648E94021360DFD62B0995D433005A48FF7BE38B8629D990719236EAE.png)
消息体示例：
```json
{
"payload": {
"notification": {
"category": "MARKETING",
"title": "推送服务",
"body": "推送服务（Push Kit）是华为提供的消息推送平台，建立了从云端到终端的消息推送通道。您通过集成推送服务，可以向客户端应用实时推送消息，构筑良好的用户关系，提升用户的感知度和活跃度。",
"clickAction": {
"actionType": 0
}
}
},
"target": {
"token": ["IQAAAACy0tE*************MXzvN7iIKSBYontV2cWj-HFTY_8lSh04w"]
},
"pushOptions": {
"testMessage": true
}
}
```
通知角标
您可以发送通知消息时携带badge字段来设置应用收到通知消息后以数字的形式展示角标，提醒用户查看消息。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094305.52764825728059632075134730757154:50001231000000:2800:BFADA85681A8FE56F6075A6081CA00CC19A475B23165B6940CC47325F3FCF208.png)
消息体示例：
```json
{
"payload": {
"notification": {
"category": "MARKETING",
"title": "通知标题",
"body": "通知内容",
"badge":{
"addNum": 1,
"setNum": 99
},
"clickAction": {
"actionType": 0
}
}
},
"target": {
"token": ["IQAAAACy0tE*************MXzvN7iIKSBYontV2cWj-HFTY_8lSh04w"]
},
"pushOptions": {
"testMessage": true
}
}
```
通知大图标
推送服务禁止推送包含敏感信息的图片。
您可以发送通知消息时携带image字段设置消息大图标内容，提醒用户查看消息。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094305.31061828866987593881334470564481:50001231000000:2800:8B715C8763715F7128B3DDBEBAB5C303163CC90B16C574F04E2C65B8DDE755D4.png)
```json
{
"payload": {
"notification": {
"category": "MARKETING",
"title": "推送服务",
"body": "推送服务是华为提供的消息推送平台",
"image": "https://***.png",
"clickAction": {
"actionType": 0
}
}
},
"target": {
"token": ["IQAAAACy0tE*************MXzvN7iIKSBYontV2cWj-HFTY_8lSh04w"]
},
"pushOptions": {
"testMessage": true
}
}
```
支持的图片格式为PNG、JPG、JPEG、BMP，图片长*宽建议小于128*128像素，若超过49152像素，则图片不展示。
多行文本样式
您可以发送通知消息时在notification中携带inboxContent和style字段设置通知消息为多行文本样式。最多可展示3行内容，每行内容无法完全展示时以“...”截断。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094305.53025840334006983287361532822346:50001231000000:2800:FE056BF34DF1006DD80D2B26B5A57406EF903B065D10670D73DD8034631C45EC.png)
消息体示例：
```json
{
"payload": {
"notification": {
"category": "MARKETING",
"title": "推送个性化显示",
"body": "通知内容",
"style": 3,
"inboxContent": [
"1. 通知栏消息样式",
"2. 通知栏消息提醒方式和展示方式",
"3. 通知栏消息语言本地化"
],
"clickAction": {
"actionType": 0
}
}
},
"target": {
"token": ["IQAAAACy0tE*************MXzvN7iIKSBYontV2cWj-HFTY_8lSh04w"]
},
"pushOptions": {
"testMessage": true
}
}
```
开发通知消息账号校验
Push Kit提供了账号校验功能，该功能支持您根据终端设备上不同账户属性来推送消息，将通知发送给对应设备上的对应账号。
举例：华为手机上某个应用存在账号A和账号B，若当前登录的账号A切换至账号B后，发送给账号A的通知消息在到达设备后不会进行展示，以避免账号B看到账号A的消息。
Push Kit支持华为账号和应用账号两种账号类型：
-  该profileId为应用通过华为账号映射的唯一匿名标识。 调用bindAppProfileId()绑定接口时机： 调用unbindAppProfileId()解绑接口时机： 举例： 用户选择华为账号作为应用登录账号并登录账号A成功后，调用Push Kit绑定接口bindAppProfileId()将账号A的profileId绑定到当前设备的应用token上。应用服务器发送通知消息时若携带该账号A的profileId，则只有当前登录的华为账号为账号A时，才会展示通知消息；若不携带profileId，则无论当前登录的华为账号是否为账号A，都正常展示通知消息。
-  该profileId为应用通过自己的账号映射的唯一匿名标识。 调用bindAppProfileId()绑定接口时机： 调用unbindAppProfileId()解绑接口时机： 举例： 用户成功登录应用的账号A后，调用Push Kit绑定接口bindAppProfileId()将账号A的profileId绑定到当前设备的应用token上。应用服务器发送通知消息时若携带账号A的profileId，则只有当前登录的应用账号为账号A时，才会展示通知消息；若不携带profileId，则无论当前登录的应用账号是否为账号A，都正常展示通知消息。
若在账号登出时未做unbindAppProfileId()解绑，或者在账号切换时未做bindAppProfileId()重新绑定，则会导致应用依然能接收到原账号的通知消息。
1.
```typescript
import { hilog } from '@kit.PerformanceAnalysisKit';
import { pushCommon, pushService } from '@kit.PushKit';
import { BusinessError } from '@kit.BasicServicesKit';
// 定义需要绑定的profileId，建议使用账号id对应的匿名标识
const profileId = '1****9';
// 绑定应用账号
pushService.bindAppProfileId(pushCommon.AppProfileType.PROFILE_TYPE_APPLICATION_ACCOUNT, profileId).then(() => {
hilog.info(0x0000, 'testTag', 'Succeeded in binding app profile id');
}).catch((err: BusinessError) => {
hilog.error(0x0000, 'testTag', 'Failed to bind app profile id: %{public}d %{public}s', err.code, err.message);
});
```
2.
```json
// Request URL
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
// Request Header
Content-Type: application/json
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 0
// Request Body
{
"payload": {
"notification": {
"category": "MARKETING",
"title": "普通通知标题",
"body": "普通通知内容",
"profileId": "111***222",
"clickAction": {
"actionType": 0
}
}
},
"target": {
"token": ["IQAAAA**********4Tw"]
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-revoke-alert-V14
爬取时间: 2025-04-29 21:45:41
来源: Huawei Developer
当推送的通知消息内容有误或者存在违规情况时，可能会引起用户投诉或监管部门处罚等不良后果。Push Kit为您提供消息撤回功能，降低此类推送可能造成的影响。
开发步骤
1.
```json
// Request URL
POST https://push-api.cloud.huawei.com/v1/[clientId]/messages:revoke
// Request Header
Content-Type:application/json
Authorization:Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 0
// Request Body
{
"notifyId": 1234567,
"token": [
"pushToken1",
"pushToken2",
"pushToken3"
]
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-alert-subscribe-V14
爬取时间: 2025-04-29 21:45:55
来源: Huawei Developer
场景介绍
为了向用户提供更好的服务和更优的体验，Push Kit为开发者提供了一次性授权订阅消息（以下简称消息订阅）能力。当且仅当用户同意订阅后，开发者可向用户推送对应的消息，从而实现服务闭环。
开通权益
消息订阅能力目前处于Beta测试阶段，仅对受邀应用开放申请。
授权订阅消息与通知消息自分类中的“订阅”类型（category取值为SUBSCRIPTION）无关。
频控规则
调测阶段，每个项目每日全网最多可推送1000条测试消息。发送测试消息需设置testMessage为true。
正式发布阶段，单设备单应用下每日推送消息总条数受设备消息频控限制，所有场景化消息发送条数不超过3000条。
单设备单应用下，发起消息订阅不大于每5分钟30次，超过30次会进入频控状态，5分钟内不能对进入频控的同一终端再次发送订阅请求，超过5分钟后重置。
不论是测试消息还是正式消息，授权订阅消息单次推送仅能携带一个Token。
开发步骤
项目配置
查看模板详情
1.
2.
3.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094308.98825843647440888706037883231169:50001231000000:2800:BC0155AD393D7F69BDAC3F786F5F2738C75D19BDC1C7A3599F2F894D7A4FD79F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094308.16031671249790167197026103979529:50001231000000:2800:C85FE440ADE16CE2F57EEB9AE212836A1918ABC44A57EF74BA31463A2D9285EE.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094308.46921795109563167558213080941418:50001231000000:2800:F4BEC1912BBF37000186062C3D4A80F4D2EA93F4154C56F1B8F7678265243A3F.png)
推送授权订阅消息
获得应用对应的模板后，需要在应用进行代码适配，发起订阅通知请求（授权订阅弹窗请参见弹窗样式），告知用户是否接受应用向其发送通知，若用户允许即可推送消息。
1.  单次订阅最多支持输入3个entityId，若存在完全相同的entityId，最终只会保留1个。
```typescript
import { UIAbility } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { serviceNotification } from '@kit.PushKit';
export default class EntryAbility extends UIAbility {
async requestSubscribeNotification() {
try {
// entityIds请替换为待订阅的模板ID
let entityIds: string[] = ['id1', 'id2'];
hilog.info(0x0000, 'testTag', 'Request subscribe notification begin.');
hilog.info(0x0000, 'testTag', 'Request subscribe notification entityIds: %{public}s', entityIds);
const data: serviceNotification.RequestResult = await serviceNotification.requestSubscribeNotification(this.context, entityIds);
hilog.info(0x0000, 'testTag', 'Succeeded in requesting subscribe notification: %{public}s', JSON.stringify(data.entityResult));
} catch (err) {
let e: BusinessError = err as BusinessError;
hilog.error(0x0000, 'testTag', 'Failed to request subscribe notification: %{public}d %{public}s', e.code, e.message);
}
}
async onForeground(): Promise<void> {
try {
await this.requestSubscribeNotification();
} catch (err) {
let e: BusinessError = err as BusinessError;
hilog.error(0x0000, 'testTag', 'Failed to request subscribe notification: %{public}d %{public}s', e.code, e.message);
}
}
}
```
2.  本示例仅包含REST API中部分消息字段，关于服务端开发的更多详情请参见端云调试。
```json
// Request URL
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
// Request Header
Content-Type: application/json
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 0
// Request Body
{
"pushOptions": {
"testMessage": true
},
"payload": {
"subscription": {
"entityId": "TM*****FA9",
"data": {
"keyword1": "接单了",
"keyword2": "苏A12345",
"keyword3": "司机路径"
},
"clickAction": {
"actionType": 0
}
}
},
"target": {
"token": ["iqaaa*****aaaa"]
}
}
```
弹窗样式
弹窗样式请参考如下示例：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094309.35790549378680218566118948390497:50001231000000:2800:FFD0ECDD91232B7F2C215BC5735DF469E77E47766612F6DFFA93DF507B6EEB99.jpg)
弹窗中包含以下信息：
其中用户授权订阅按钮分为“允许本次发送”、“始终允许”和“取消”：
消息订阅为一次性授权订阅，无论用户是否已经授权“始终允许”，您推送消息前都需要发起消息订阅。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-form-update-V14
爬取时间: 2025-04-29 21:46:09
来源: Huawei Developer
场景介绍
如今衣食住行娱乐影音应用占据了大多数人的手机，一部手机可以满足日常大多需求，但对需要经常查看或进行简单操作的应用来说，总需要用户点开应用体验较繁琐。针对此种场景，HarmonyOS提供了Form Kit（卡片开发服务），您可以将应用的重要信息或操作前置到卡片，以达到服务直达、减少体验层级的目的。
面对需要实时更新信息的应用卡片，Push Kit向开发者提供了卡片刷新服务。应用通过集成Push Kit后获取Push Token，基于Push Kit的系统级通道，便可以在合适场景向用户即时推送卡片内容，从而提升用户的感知度和活跃度。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094311.31068637097507942116912871472738:50001231000000:2800:C6A52895CBDE944F8041E107A17613951DC1E1058B22A8562B9955EC871689DD.png)
频控规则
调测阶段，每个项目每日全网最多可推送1000条测试消息。发送测试消息需设置testMessage为true。
正式发布阶段，单设备单应用下每日推送消息总条数受设备消息频控限制，所有场景化消息发送条数不超过3000条。
单张服务卡片刷新消息受应用是否上架影响：
不论是测试消息还是正式消息，卡片刷新消息单次发送仅能携带一个Token。
开发步骤
开发卡片
推送卡片刷新消息前，您需先完成本地卡片的开发。
1.
```json
{
"forms": [
{
"name": "widget",
"src": "./ets/widget/pages/WidgetCard.ets",
"uiSyntax": "arkts",
"window": {
"designWidth": 720,
"autoDesignWidth": true
},
"colorMode": "auto",
"isDefault": true,
"updateEnabled": true,
"updateDuration": 1,
"scheduledUpdateTime": "10:30",
"defaultDimension": "2*2",
"supportDimensions": ["2*2"],
"dataProxyEnabled": true
}
]
}
```
2.
```typescript
import { formBindingData, formInfo, FormExtensionAbility } from '@kit.FormKit';
import { Want } from '@kit.AbilityKit';
export default class EntryFormAbility extends FormExtensionAbility {
onAddForm(want: Want): formBindingData.FormBindingData {
// 获取formId
const formId = want.parameters![formInfo.FormParam.IDENTITY_KEY] as string;
// 定义需要在WidgetCard中刷新的字段
class CreateFormData {
formId: string = '';
text_key: string = '';
image_key: string = '';
}
const obj: CreateFormData = {
formId: formId,
text_key: '默认文本',
image_key: ''
}
const bindingData: formBindingData.FormBindingData = formBindingData.createFormBindingData(obj);
// 定义需要通过Push Kit代理刷新的字段，每个key均需要在上面bindingData中定义
const text_key: formBindingData.ProxyData = {
key: 'text_key',
subscriberId: formId
};
const image_key: formBindingData.ProxyData = {
key: 'image_key',
subscriberId: formId
};
bindingData.proxies = [text_key, image_key];
return bindingData;
}
}
```
3.
```typescript
// 定义页面级的UI状态存储LocalStorage
const storage = new LocalStorage();
// 绑定
@Entry(storage)
@Component
struct WidgetCard {
@LocalStorageProp('formId') formId: string = '';
@LocalStorageProp('text_key') text: string = '';
@LocalStorageProp('image_key') image: string = '';
build() {
Flex({ direction: FlexDirection.Column }) {
Row() {
Text() {
// Span是Text组件的子组件，用于显示行内文本
Span('formID:')
Span(this.formId)
}
.fontSize(10)
}
Row() {
Text() {
Span('文本:')
Span(this.text)
}
.fontSize(10)
}
Row() {
if (this.image) {
Image('memory://' + this.image).height(80)
}
}
}
.padding(10)
.onClick(() => {
postCardAction(this, {
action: 'router',
abilityName: 'MainAbility', // 请配置为应用实际的abilityName
});
})
}
}
```
推送卡片刷新消息
1.
```typescript
// 以下为伪代码
import { Want } from '@kit.AbilityKit';
import { pushService } from '@kit.PushKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { formInfo } from '@kit.FormKit';
async function saveFormInfo(want: Want): Promise<void> {
try {
const formId = want.parameters![formInfo.FormParam.IDENTITY_KEY] as string;
const moduleName = want.moduleName;
const abilityName = want.abilityName;
const formName = want.parameters![formInfo.FormParam.NAME_KEY] as string;
const pushToken: string = await pushService.getToken();
// 将formId, moduleName, abilityName, formName, pushToken 上报到应用服务端
} catch (err) {
let e: BusinessError = err as BusinessError;
hilog.error(0x0000, 'testTag', 'Failed to save form info: %{public}d %{public}s', e.code, e.message);
}
}
```
2.  推送服务禁止推送包含敏感信息的图片。 支持图片的格式为PNG、JPG、JPEG，图片文件最大为512KB，图片长*宽<12800像素。
```json
// Request URL
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
// Request Header
Content-Type: application/json
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 1
// Request Body
{
"payload": {
"moduleName": "entry",
"abilityName": "EntryFormAbility",
"formName": "widget",
"formId": 423434262,
"version": 123456,
"formData": {
"text_key": "刷新文本内容"
},
"images": [
{
"keyName": "image_key",
"url": "https://***.png",
"require": 1
}
]
},
"target": {
"token": [
"IQAAAAC*************************dRH7_bPbfMrVfsYw"
]
},
"pushOptions": {
"testMessage": true
}
}
```
3.
4.
5.
6.
7.  推送服务禁止推送包含敏感信息的图片。 支持图片的格式为PNG、JPG、JPEG，图片文件最大为512KB，图片长*宽<12800像素。
-
-
-
-
-  推送服务禁止推送包含敏感信息的图片。 支持图片的格式为PNG、JPG、JPEG，图片文件最大为512KB，图片长*宽<12800像素。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094311.33194701356909273107625742793059:50001231000000:2800:CC86C8FE4D08C494DF271CEB2D0CC774673E3F6A0C0EAF7BF825128771CDF5D8.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094311.78173123857790111429568784890506:50001231000000:2800:521F185D9FFD28D1C40281A1EA60A5586E46079F7AB3BCB5B682727C7E26E886.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094311.49214408798049504873046649344501:50001231000000:2800:D1FBBD4D7DEB7D13FD66525D110BE9BDFAC4B84261304E3E602C566A7A9FDC53.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094311.63721420147702150222368336686725:50001231000000:2800:51D109AE88AA1FA1DFCD85910062DC767E329F3CDD4D68AC6FF9B2426F49A2F9.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094311.92536667794790116320657108990900:50001231000000:2800:60B238BA529AB5E6CA5616A46D5C25170D518655E084B79ECB680D38C5188249.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-extend-noti-V14
爬取时间: 2025-04-29 21:46:22
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-send-extend-noti-V14
爬取时间: 2025-04-29 21:46:36
来源: Huawei Developer
场景介绍
当用户终端收到您发送的通知扩展消息时：
开通权益
频控规则
调测阶段，每个项目每日全网最多可推送1000条测试消息。发送测试消息需设置testMessage为true。
正式发布阶段，单设备单应用下每日推送消息总条数受设备消息频控限制，所有场景化消息发送条数不超过3000条。
开发步骤
1.
```typescript
import { pushCommon, RemoteNotificationExtensionAbility } from '@kit.PushKit';
import { image } from '@kit.ImageKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { resourceManager } from '@kit.LocalizationKit';
import { common } from '@kit.AbilityKit';
export default class RemoteNotificationExtAbility extends RemoteNotificationExtensionAbility {
async onReceiveMessage(remoteNotificationInfo: pushCommon.RemoteNotificationInfo): Promise<pushCommon.RemoteNotificationContent> {
hilog.info(0x0000, 'testTag', 'RemoteNotificationExtAbility onReceiveMessage, remoteNotificationInfo');
// Read the pixel map object
const resourceMgr: resourceManager.ResourceManager = (this.context as common.UIExtensionContext).resourceManager;
const fileData: Uint8Array = await resourceMgr.getMediaContent($r('app.media.icon'));
const buffer = fileData.buffer;
const imageSource: image.ImageSource = image.createImageSource(buffer as ArrayBuffer);
const pixelMap: image.PixelMap = await imageSource.createPixelMap();
if (pixelMap) {
pixelMap.getImageInfo((err, imageInfo) => {
if (imageInfo) {
hilog.info(0x0000, 'testTag', `imageInfo ${imageInfo.size.width} * ${imageInfo.size.height}`);
}
});
}
// Return the replaced message content.
return {
title: 'Default replace title.',
text: 'Default replace text.',
badgeNumber: 1,
setBadgeNumber: 2,
overlayIcon: pixelMap,
wantAgent: {
abilityName: 'DemoAbility',
parameters: {
key: 'Default value'
}
}
}
}
onDestroy(): void {
hilog.info(0x0000, 'testTag', 'RemoteNotificationExtAbility onDestroy.');
}
}
```
2.
```json
"extensionAbilities": [
{
"name": "RemoteNotificationExtAbility",
"type": "remoteNotification",
"srcEntry": "./ets/entryability/RemoteNotificationExtAbility.ets",
"description": "RemoteNotificationExtAbility test",
"exported": false,
"skills": [
{
"actions": ["action.hms.push.extension.remotenotification"]
}
]
}
]
```
3.  推送服务禁止推送包含敏感信息的图片。
```json
// Request URL
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
// Request Header
Content-Type: application/json
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 2
// Request Body
{
"payload": {
"extraData": "通知扩展场景携带的额外数据",
"notification": {
"category": "EXPRESS",
"title": "通知标题",
"body": "通知内容",
"clickAction": {
"actionType": 0
},
"notifyId": 12345,
"image": "https://***.png"
}
},
"target": {
"token": ["IQAAAACy0tEjCgBijrEB3************8o0m5EdTXbdlhiIiX_vNGQ5Ic5rXWmw"]
},
"pushOptions": {
"testMessage": true,
"ttl": 86400
}
}
```
4.  推送服务禁止推送包含敏感信息的图片。
5.  并且在项目模块的src/main/module.json5文件的abilities模块中配置skills标签的actions属性内容为action.ohos.push.listener（有且只能有一个ability定义该action，若同时添加uris参数，则uris内容需为空）：
```typescript
import { UIAbility } from '@kit.AbilityKit';
import { pushService } from '@kit.PushKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
/**
* 此处以PushMessageAbility为例，接收通知扩展消息内容
*/
export default class PushMessageAbility extends UIAbility {
onCreate(): void {
try {
// receiveMessage中的参数固定为IM
pushService.receiveMessage('IM', this, (data) => {
// process message，并建议对Callback进行try-catch
try {
hilog.info(0x0000, 'testTag', 'Receive im message');
} catch (e) {
let errRes: BusinessError = e as BusinessError;
hilog.error(0x0000, 'testTag', 'Failed to process data: %{public}d %{public}s', errRes.code, errRes.message);
}
});
} catch (err) {
let e: BusinessError = err as BusinessError;
hilog.error(0x0000, 'testTag', 'Failed to get message: %{public}d %{public}s', e.code, e.message);
}
}
}
```
-  推送服务禁止推送包含敏感信息的图片。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-revoke-extend-noti-V14
爬取时间: 2025-04-29 21:46:50
来源: Huawei Developer
场景介绍
当推送的通知扩展消息内容有误或者存在违规情况时，可能会引起用户投诉或监管部门处罚等不良后果。Push Kit为您提供消息撤回功能，降低此类推送可能造成的影响。
开发步骤
1.
```json
// Request URL
POST https://push-api.cloud.huawei.com/v1/[clientId]/messages:revoke
// Request Header
Content-Type:application/json
Authorization:Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 2
// Request Body
{
"notifyId": 1234567,
"token": [
"pushToken1",
"pushToken2",
"pushToken3"
]
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-background-V14
爬取时间: 2025-04-29 21:47:03
来源: Huawei Developer
场景介绍
后台消息用于内容不频繁更新的场景，不会显示通知、播放铃声或改变应用角标。终端设备接收到后台消息后，如果应用进程在前台则将消息内容传给应用；如果应用进程不在前台则缓存消息，等待应用启动后再传给应用。
终端缓存消息默认仅缓存最新的一条消息，最多缓存7天。
频控规则
调测阶段，每个项目每日全网最多可推送1000条测试消息。发送测试消息需设置testMessage为true。
正式发布阶段，单设备单应用下每日推送消息总条数受设备消息频控限制，所有场景化消息发送条数不超过3000条。
开发步骤
开发者希望在应用进程不在前台时，可根据实际情况选择消息缓存的策略。
1.  字段名称 字段类型 说明 id INTEGER 自增主键。 message_id TEXT 消息id。 push_type TEXT 场景类型。 message_action INTEGER 消息动作。 message TEXT 消息内容，结构体如下： field1 TEXT 扩展字段1 field2 TEXT 扩展字段2 field3 TEXT 扩展字段3 field4 TEXT 扩展字段4 field5 TEXT 扩展字段5 create_time INTEGER 消息写入数据库的时间戳，单位毫秒（ms）。
2.
3.
4.
```typescript
import { UIAbility } from '@kit.AbilityKit';
import { pushService, pushCommon } from '@kit.PushKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
/**
* 此处以PushMessageAbility为例，接收后台消息内容
*/
export default class PushMessageAbility extends UIAbility {
onCreate(): void {
try {
pushService.receiveMessage('BACKGROUND', this, (data: pushCommon.PushPayload) => {
// process message，并建议对Callback进行try-catch
try {
hilog.info(0x0000, 'testTag', 'Receive background message');
} catch (e) {
let errRes: BusinessError = e as BusinessError;
hilog.error(0x0000, 'testTag', 'Failed to process data: %{public}d %{public}s', errRes.code, errRes.message);
}
});
} catch (err) {
let e: BusinessError = err as BusinessError;
hilog.error(0x0000, 'testTag', 'Failed to get background message: %{public}d %{public}s', e.code, e.message);
}
}
}
```
5.
```json
"abilities": [
{
"name": "PushMessageAbility",
"srcEntry": "./ets/abilities/PushMessageAbility.ets",
"launchType": "singleton",
"startWindowIcon": "$media:startIcon",
"startWindowBackground": "$color:start_window_background",
"exported": false,
"skills": [
{
"actions": [
"action.ohos.push.listener"
]
}
]
}
]
```
6.  当设备中的应用进程在前台时会直接拉起应用并将数据传递，您可以在receiveMessage()方法中获取消息数据。 当应用进程不在前台且proxyData为“ENABLE”时，推送服务将后台消息写入到数据库中，建议您在应用进程在前台时将数据库中数据迁移到您业务数据库中（避免数据库大小无限制增长）。当应用进程不在前台且无proxyData时则为缓存消息（发送多条消息时仅缓存最新的一条），等下次应用进程在前台时调用getToken()接口，Push Kit将重新发送缓存消息，您可以在receiveMessage()方法获取消息数据。
```json
// Request URL
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
// Request Header
Content-Type: application/json
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 6
// Request Body
{
"payload": {
"extraData": "携带的额外数据",
"proxyData": "ENABLE"
},
"target": {
"token": ["IQAAAACy***************2S8o0m5EdTXbdlhiIiX_vNGQ5Ic5rXWmw"]
}
}
```
| 字段名称 | 字段类型 | 说明 |
| --- | --- | --- |
| id | INTEGER | 自增主键。 |
| message_id | TEXT | 消息id。 |
| push_type | TEXT | 场景类型。 |
| message_action | INTEGER | 消息动作。 |
| message | TEXT | 消息内容，结构体如下： 
{  data: 消息体中的extraData} |
| field1 | TEXT | 扩展字段1 |
| field2 | TEXT | 扩展字段2 |
| field3 | TEXT | 扩展字段3 |
| field4 | TEXT | 扩展字段4 |
| field5 | TEXT | 扩展字段5 |
| create_time | INTEGER | 消息写入数据库的时间戳，单位毫秒（ms）。 |

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-update-liveview-V14
爬取时间: 2025-04-29 21:47:17
来源: Huawei Developer
场景介绍
实况窗是一种帮助用户聚焦正在进行的任务，方便快速查看和即时处理的通知形态。有关实况窗简介、权限申请、开放场景、设计规范等说明，请参见Live View Kit简介。
通过Push Kit发送的实况窗消息支持三种操作类型，分别是：
| 实况窗消息操作类型 | 支持操作的场景类型 | 说明 |
| --- | --- | --- |
| 创建实况窗 | FLIGHT、TAXI、TRAIN | 仅航班、出行打车、高铁/火车场景支持通过Push Kit创建实况窗，其他场景请通过Live View Kit本地创建。 |
| 更新实况窗 | 所有场景 | 所有场景皆支持通过Push Kit更新实况窗。 |
| 结束实况窗 | 所有场景 | 所有场景皆支持通过Push Kit结束实况窗。 |
实况窗消息操作类型
支持操作的场景类型
说明
创建实况窗
FLIGHT、TAXI、TRAIN
仅航班、出行打车、高铁/火车场景支持通过Push Kit创建实况窗，其他场景请通过Live View Kit本地创建。
更新实况窗
所有场景
所有场景皆支持通过Push Kit更新实况窗。
结束实况窗
所有场景
所有场景皆支持通过Push Kit结束实况窗。
有关场景类型的详细说明请参见支持的范围与场景。
根据创建实况窗的方式不同，通过Push Kit发送实况窗消息的流程有所区别。
通过Live View Kit创建实况窗，Push Kit更新与结束实况窗
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094318.97148518555958031101606990302152:50001231000000:2800:12E398CAE64E7F65F2ACE06286799A125FD4494B1F9A925381EE523892BF49D7.png)
通过Push Kit创建、更新、结束实况窗
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094318.95939948537620267382835162298327:50001231000000:2800:885A211B6AED987EC34A2712C43F36D11E3210BBFAAE9C39E6F4F4D8C70760B2.png)
实况窗更新效果示例图：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094318.10943911700486265876270020263044:50001231000000:2800:D00FC5493CB7925E58A3372BE118CD95BCEC83B17F070C3ACAC44D7D52C51CF2.png)
开通权益
推送实况窗消息前您需要开通对应的场景权益，可参见开通实况窗权益完成权益的申请。
必须要开通实况窗权益才可以通过Push Kit推送实况窗消息，无法通过添加白名单设备的方式进行调试。
频控规则
调测阶段，每个项目每日全网最多可推送1000条测试消息。发送测试消息需设置testMessage为true。
正式发布阶段，单设备单应用下每日推送消息总条数受设备消息频控限制，所有场景化消息发送条数不超过3000条。
单个实况窗消息，出行打车与赛事比分场景每个设备每5分钟最多更新30次，每小时最多更新180次。其余场景每个设备每5分钟最多更新10次，每小时最多更新60次。超过频次部分将丢弃不下发。
开发步骤
1.
```json
// Request URL
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
// Request Header
Content-Type: application/json
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 7
// Request Body
{
"payload": {
"activityId": 1,
"operation": 0,
"event": "TAXI",
"status": "DRIVER_ON_THE_WAY", // 司机正在赶来
"activityData": {
"notificationData": {
"type": 3,
"contentTitle": "{{status}}", // 司机正在赶来
"contentText": [
{
"text": "距您"
},
{
"text": "1.2公里",
"foregroundColor": "#FF317AF7"
},
{
"text": " | "
},
{
"text": "5分钟",
"foregroundColor": "#FF317AF7"
}
],
"clickAction": {
"actionType": 1, // 打开应用自定义页面
"action": "xxxxxx" // 应用内置页面ability对应的action
},
"richProgress": {
"type": 0,
"nodeIcons": ["icon1.png", "icon2.png", "icon3.png"], // 取值为“/resources/rawfile”路径下的文件名
"indicatorIcon": "taxi.png", // 取值为“/resources/rawfile”路径下的文件名
"progress": 40,
"indicatorType": 1,
"color": "#FF317AF7",
"bgColor": "#19000000"
},
"extend": {
"type": 3,
"pic": "phone.png", // 取值为“/resources/rawfile”路径下的文件名
"clickAction": {
"actionType": 0 // 点击辅助区打开应用首页
}
}
},
"capsuleData": {
"type": 1,
"status": 1,
"icon": "icon.svg", // 取值为“/resources/rawfile”路径下的文件名
"bgColor": "#FF317AF7",
"remind": "EXPAND",
"title": "接驾中",
"content": "预计5分钟"
}
}
},
"pushOptions": {
"ttl": 1000,
"biTag": "biTag"
},
"target": {
"token": [
"MAAALgE4G98BAAAAst************jq"
]
}
}
```
```json
// Request URL
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
// Request Header
Content-Type: application/json
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 7
// Request Body
{
"payload": {
"activityId": 1,
"operation": 0,
"event": "TAXI",
"status": "DRIVER_ON_THE_WAY", // 司机正在赶来
"activityData": {
"notificationData": {
"type": 3,
"contentTitle": "{{status}}", // 司机正在赶来
"contentText": [
{
"text": "距您"
},
{
"text": "1.2公里",
"foregroundColor": "#FF317AF7"
},
{
"text": " | "
},
{
"text": "5分钟",
"foregroundColor": "#FF317AF7"
}
],
"clickAction": {
"actionType": 1, // 打开应用自定义页面
"action": "xxxxxx" // 应用内置页面ability对应的action
},
"richProgress": {
"type": 0,
"nodeIcons": ["icon1.png", "icon2.png", "icon3.png"], // 取值为“/resources/rawfile”路径下的文件名
"indicatorIcon": "taxi.png", // 取值为“/resources/rawfile”路径下的文件名
"progress": 40,
"indicatorType": 1,
"color": "#FF317AF7",
"bgColor": "#19000000"
},
"extend": {
"type": 3,
"pic": "phone.png", // 取值为“/resources/rawfile”路径下的文件名
"clickAction": {
"actionType": 0 // 点击辅助区打开应用首页
}
}
},
"capsuleData": {
"type": 1,
"status": 1,
"icon": "icon.svg", // 取值为“/resources/rawfile”路径下的文件名
"bgColor": "#FF317AF7",
"remind": "EXPAND",
"title": "接驾中",
"content": "预计5分钟"
}
}
},
"pushOptions": {
"ttl": 1000,
"biTag": "biTag"
},
"target": {
"token": [
"MAAALgE4G98BAAAAst************jq"
]
}
}
```
2.  消息详情可参见场景化消息API接口功能介绍。（若开发者更新的实况窗为通过Push Kit远程创建的实况窗，更新时请遵守创建实况窗约束） 若发送的activityId对应的实况窗不存在（更新或结束实况窗的场景中），将限制使用该activityId发送实况窗消息24小时。
```json
// Request URL
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
// Request Header
Content-Type: application/json
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 7
// Request Body
{
"payload": {
"activityId": 1,
"operation": 1,
"event": "TAXI",
"status": "HEADING_TO_DESTINATION", // 正在去往目的地
"version": 1,
"activityData": {
"notificationData": {
"type": 3,
"contentTitle": "{{status}}", // 正在去往目的地
"contentText": [
{
"text": "距目的地"
},
{
"text": "7.2公里",
"foregroundColor": "#FF317AF7"
},
{
"text": " | 预计"
},
{
"text": "27分钟",
"foregroundColor": "#FF317AF7"
}
],
"clickAction": {
"actionType": 1, // 打开应用自定义页面
"action": "xxxxxx" // 应用内置页面ability对应的action
},
"richProgress": {
"type": 0,
"nodeIcons": ["icon1.png", "icon2.png", "icon3.png"], // 取值为“/resources/rawfile”路径下的文件名
"indicatorIcon": "taxi.png", // 取值为“/resources/rawfile”路径下的文件名
"progress": 70,
"indicatorType": 1,
"color": "#FF317AF7",
"bgColor": "#19000000"
},
"extend": {
"type": 0
}
},
"capsuleData": {
"type": 1,
"status": 1,
"icon": "icon.svg", // 取值为“/resources/rawfile”路径下的文件名
"bgColor": "#FF317AF7",
"title": "27分钟",
"content": "距目的地7.2公里"
}
}
},
"pushOptions": {
"ttl": 1000,
"biTag": "biTag"
},
"target": {
"token": [
"IQAAAACy0Yu************enANg"
]
}
}
```
3.  若发送的activityId对应的实况窗不存在（更新或结束实况窗的场景中），将限制使用该activityId发送实况窗消息24小时。
```json
// Request URL
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
// Request Header
Content-Type: application/json
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 7
// Request Body
{
"payload": {
"activityId": 1,
"operation": 0,
"event": "TAXI",
"status": "DRIVER_ON_THE_WAY", // 司机正在赶来
"activityData": {
"notificationData": {
"type": 3,
"contentTitle": "{{status}}", // 司机正在赶来
"contentText": [
{
"text": "距您"
},
{
"text": "1.2公里",
"foregroundColor": "#FF317AF7"
},
{
"text": " | "
},
{
"text": "5分钟",
"foregroundColor": "#FF317AF7"
}
],
"clickAction": {
"actionType": 1, // 打开应用自定义页面
"action": "xxxxxx" // 应用内置页面ability对应的action
},
"richProgress": {
"type": 0,
"nodeIcons": ["icon1.png", "icon2.png", "icon3.png"], // 取值为“/resources/rawfile”路径下的文件名
"indicatorIcon": "taxi.png", // 取值为“/resources/rawfile”路径下的文件名
"progress": 40,
"indicatorType": 1,
"color": "#FF317AF7",
"bgColor": "#19000000"
},
"extend": {
"type": 3,
"pic": "phone.png", // 取值为“/resources/rawfile”路径下的文件名
"clickAction": {
"actionType": 0 // 点击辅助区打开应用首页
}
}
},
"capsuleData": {
"type": 1,
"status": 1,
"icon": "icon.svg", // 取值为“/resources/rawfile”路径下的文件名
"bgColor": "#FF317AF7",
"remind": "EXPAND",
"title": "接驾中",
"content": "预计5分钟"
}
}
},
"pushOptions": {
"ttl": 1000,
"biTag": "biTag"
},
"target": {
"token": [
"MAAALgE4G98BAAAAst************jq"
]
}
}
```
-  若发送的activityId对应的实况窗不存在（更新或结束实况窗的场景中），将限制使用该activityId发送实况窗消息24小时。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-voip-V14
爬取时间: 2025-04-29 21:47:30
来源: Huawei Developer
场景介绍
应用内通话消息，支持应用实现网络音视频通话的能力。当终端处于锁屏或解锁两种不同状态时，Push Kit将分别进行以下处理：
接听视频时会拉起应用内的接听界面。接通后，可以正常挂断（主动挂断/被动挂断）应用内通话消息。
应用内通话消息样式可参考如下示例，真实样式请以实际效果为准：
| 锁屏 | 来电横幅 |
| --- | --- |
|  |  |
锁屏
来电横幅
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094320.90156803080638156551626170777716:50001231000000:2800:4530F9ACA87C4AB6F831DE64D3D378F67D9A701F395D783422E925CE5457D776.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094320.42282798623988868841085860071617:50001231000000:2800:94BA95EF7C9E656FE38B74BB2EEA9B3475DF710BC5A79663D56F26F006E76C27.png)
开通权益
推送应用内通话消息需要申请场景化消息权益，请参见申请推送应用内通话消息权益。
频控规则
调测阶段，每个项目每日全网最多可推送1000条测试消息。发送测试消息需设置testMessage为true。
正式发布阶段，单设备单应用下每日推送消息总条数受设备消息频控限制，所有场景化消息发送条数不超过3000条。
开发步骤
1.  CalleeUtil.ets（在项目工程的src/main/ets/utils目录下），处理应用内通话挂断，代码示例如下： TimeoutUtil.ets（在项目工程的src/main/ets/utils目录下），处理应用内通话连接超时，代码示例如下： VoipCallUtil.ets（在项目工程的src/main/ets/utils目录下），处理应用内通话状态变更，代码示例如下： 需要在项目工程的src/main/resources/rawfile目录下添加example.png，表示来电时的用户头像。
```typescript
import { UIAbility } from '@kit.AbilityKit';
import { pushService } from '@kit.PushKit';
import { window } from '@kit.ArkUI';
import { voipCall } from '@kit.CallServiceKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { image } from '@kit.ImageKit';
import { resourceManager } from '@kit.LocalizationKit';
import { TimeoutUtil } from '../utils/TimeoutUtil';
import { VoipCallUtil } from '../utils/VoipCallUtil';
import { CalleeUtil } from '../utils/CalleeUtil';
// 定义端侧从云侧下发的消息中解析场景类型的字段，例如：端侧定义scene字段，此时从云侧传递extraData时携带scene字段，可决定是音频呼叫或视频呼叫
interface VoipScene {
scene: string;
}
interface Content {
data: string;
header: string;
callId: string;
}
export default class PushMessageAbility extends UIAbility {
onCreate(): void {
try {
pushService.receiveMessage('VoIP', this, (data) => {
// process message，并建议对Callback进行try-catch
try {
hilog.info(0x0000, 'testTag', ` VOIP get message:${JSON.stringify(data)}`);
this.processVoIPMainMsg(data.data);
} catch (error) {
hilog.error(0x0000, 'testTag', 'Failed to process data: %{public}d %{public}s', error.code, error.message);
}
});
hilog.info(0x0000, 'testTag', 'Succeeded in registering VoIP.');
} catch (e) {
hilog.info(0x0000, 'testTag', `Failed to register VOIP, error: ${e.code}, ${e.message}.`);
}
}
private async processVoIPMainMsg(data: string): Promise<void> {
hilog.info(0x0000, 'testTag', 'processVoIPMainMsg');
let content: Content = JSON.parse(data);
let scene: VoipScene = JSON.parse(content.data);
let callId: string = content.callId;
hilog.info(0x0000, 'testTag', `callId: ${callId}.`);
hilog.info(0x0000, 'testTag', `scene: ${scene}.`);
if (callId) {
AppStorage.setOrCreate('close', false);
voipCall.on('voipCallUiEvent', async (event) => {
hilog.info(0x0000, 'testTag', `DemoPushMessageAbility voipCallUiEvent: ${JSON.stringify(event)}.`);
TimeoutUtil.stop();
switch (event.voipCallUiEvent) {
case voipCall.VoipCallUiEvent.VOIP_CALL_EVENT_VOICE_ANSWER:
case voipCall.VoipCallUiEvent.VOIP_CALL_EVENT_VIDEO_ANSWER:
VoipCallUtil.reportCallStateChange(voipCall.VoipCallState.VOIP_CALL_STATE_ACTIVE);
AppStorage.setOrCreate('answered', true);
break;
case voipCall.VoipCallUiEvent.VOIP_CALL_EVENT_REJECT:
case voipCall.VoipCallUiEvent.VOIP_CALL_EVENT_HANGUP:
CalleeUtil.close();
break;
default: {
break;
}
}
})
const resourceMgr : resourceManager.ResourceManager = this.context.resourceManager;
// example.png表示用户头像，取值为“/resources/rawfile”路径下的文件名
const fileData : Uint8Array = await resourceMgr.getRawFileContent('example.png');
const buffer = fileData.buffer;
const imageSource : image.ImageSource = image.createImageSource(buffer);
const pixelMap : image.PixelMap = await imageSource.createPixelMap();
if (pixelMap) {
pixelMap.getImageInfo((err, imageInfo) => {
if (imageInfo) {
hilog.info(0x0000, 'testTag', `DemoPushMessageAbility imageInfo: ${imageInfo.size.width} * ${imageInfo.size.height}.`);
}
});
}
// 定义应用内通话时传入的数据。注意，voipCallType.scene为您自定义的场景类型字段，从云侧推送消息时，请注意与端侧取值保持一致
let call: voipCall.VoipCallAttribute = {
callId: callId,
voipCallType: scene?.scene === 'video' ? voipCall.VoipCallType.VOIP_CALL_VIDEO : voipCall.VoipCallType.VOIP_CALL_VOICE,
userName: 'push',
userProfile: pixelMap,
abilityName: 'PushMessageAbility',
voipCallState: voipCall.VoipCallState.VOIP_CALL_STATE_RINGING
};
try {
let error = await voipCall.reportIncomingCall(call);
if (error) {
hilog.info(0x0000, 'testTag', ` PushMessageAbility reportIncomingCall result: ${error}.`);
let err: voipCall.ErrorReason = error as voipCall.ErrorReason;
if (err !== voipCall.ErrorReason.ERROR_NONE) {
hilog.info(0x0000, 'testTag', `PushMessageAbility reportIncomingCall failed: ${error}.`);
return;
}
}
VoipCallUtil.init(callId);
} catch (e) {
hilog.info(0x0000, 'testTag', ` PushMessageAbility reportIncomingCall exception: ${e}.`);
}
}
hilog.info(0x0000, 'testTag', `processVoIPMainMsg end.`);
}
onWindowStageCreate(windowStage: window.WindowStage): void {
hilog.info(0x0000, 'testTag', `PushMessageAbility onWindowStageCreate.`);
windowStage.loadContent('pages/CalleePage');
}
onDestroy(): void {
hilog.info(0x0000, 'testTag', 'PushMessageAbility onDestroy.');
}
}
```
2.  CallComponent.ets（在项目工程的src/main/ets/component目录下），代码示例如下： 在项目工程的 src/main/resources/base/profile/main_pages.json添加page目录，示例如下： 示例代码提供的页面效果仅供开发参考，不代表最终效果。
```typescript
import CallComponent from '../component/CallComponent';
import { router } from '@kit.ArkUI';
import { CalleeUtil } from '../utils/CalleeUtil';
@Entry
@Component
struct CalleePage {
@StorageLink('close') @Watch('close') end: boolean | undefined = undefined;
interval: number = 0;
aboutToAppear() {
this.end = false;
}
private close() {
CalleeUtil.close(true);
router.back(); // 此处仅为示例（跳转返回），请根据实际情况设定路由
}
aboutToDisappear() {
clearInterval(this.interval);
}
build() {
Column() {
CallComponent({})
}
}
}
```
3.
```json
"abilities": [
{
"name": "PushMessageAbility",
"srcEntry": "./ets/entryability/PushMessageAbility.ets",
"launchType": "singleton",
"description": "PushMessageAbility test",
"startWindowIcon": "$media:startIcon",
"startWindowBackground": "$color:start_window_background",
"exported": false,
"skills": [
{
"actions": ["action.ohos.push.listener"]
}
]
}
]
```
4.
```json
// Request URL
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
// Request Header
Content-Type: application/json
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type: 10
{
"pushOptions": {
"ttl": 30
},
"payload": {
"extraData": "{\"scene\": \"voice\"}"
},
"target": {
"token": ["IQAAAACy0tEjCgBijrEB3************8o0m5EdTXbdlhiIiX_vNGQ5Ic5rXWmw"]
}
}
```
5.  进行音视频通话时，若您的应用处于Overhead场景（设备发热严重或负载较重，Level=4），请降低码率和帧率，或关闭视频流降级为音频。相关说明请参见Basic Services Kit（基础服务）提供的接口getLevel()。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-server-V14
爬取时间: 2025-04-29 21:47:43
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-server-intro-V14
爬取时间: 2025-04-29 21:47:56
来源: Huawei Developer
推送场景化消息章节中囊括了Push Kit的所有推送场景，每个推送场景的开发可大致分为两大步骤：
本章则在其基础上提供了更详细的服务侧（以下简称“云侧”）开发内容，以便您在完成端侧开发后更好地进行端云联调。阅读本章节时，请确保您至少已成功获取Push Token。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094322.94731465509197891612459504853742:50001231000000:2800:EB11AE0ECB158B539C77BB3B30C99868DC57B80CBE8A2BD12CAA71D500FF0237.png)
Push Kit云侧主要业务流程如下：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-jwt-token-V14
爬取时间: 2025-04-29 21:48:10
来源: Huawei Developer
概述
服务账号（Service Account）是一种可实现服务器与服务器之间接口鉴权的账号，在华为开发者联盟的API Console上创建服务账号，您可根据返回的公私钥在业务应用中生成鉴权令牌，调用支持此类鉴权的华为公开API。
服务账号令牌为JWT（JSON Web Token）格式字符串，JWT数据格式包括三个部分：
这三个部分通过“.”进行连接，其中Signature为通过SHA256withRSA/PSS算法对Header与Payload拼接的字符串签名生成的字符串。
示例
```json
eyJra*****JjNjBjMXXX.
eyJhd*****JodHRXXX.
BRNss*****7az5oU7-Zp5g9X2WJVXXX
```
更多JWT的相关知识请参见Introduction to JSON Web Tokens。
开发步骤
1.  您需要在华为开发者联盟的API Console上创建并下载推送服务API的服务账号密钥文件，相关创建步骤请参见API Console操作指南-服务账号密钥。 您申请后的服务账号密钥样例文件形式可参考（文件内容已经经过脱敏处理）：
```json
{
"project_id": "*****",
"key_id": "*****",
"private_key": "-----BEGIN PRIVATE KEY-----\nMIIJQgIBADANBgkqhkiG9w0BAQEFAASCCSwwggkoAgEAAoICAQCKw6kJKtCh7qmMvp1u1dI27z2TKZrPOzHbQaXO/Eez0AWZ2EN+ouF496R3pfo7fQXC1XOT/YTbVC4DNZwWSMA54fu3/AOCY9Zzyi46OK*****==\n-----END PRIVATE KEY-----\n",
"sub_account": "*****",
"auth_uri": "https://oauth-login.cloud.huawei.com/oauth2/v3/authorize",
"token_uri": "https://oauth-login.cloud.huawei.com/oauth2/v3/token",
"auth_provider_cert_uri": "https://oauth-login.cloud.huawei.com/oauth2/v3/certs",
"client_cert_uri": "https://oauth-login.cloud.huawei.com/oauth2/v3/x509?client_id=*****"
}
```
2.  根据服务账号密钥文件中的key_id字段拼接以下JSON体，对JSON体进行BASE64编码。 示例 字段名 描述 kid 服务账号密钥文件中key_id字段。 typ 数据类型，固定为：JWT。 alg 算法类型，固定为：PS256。
```json
{
"kid": "*****",
"typ": "JWT",
"alg": "PS256"
}
```
3.  根据服务账号密钥文件中的sub_account字段拼接以下JSON体，对JSON体进行BASE64编码。 示例 字段名 描述 iss 服务账号密钥文件中sub_account字段，标识数据生成者。 aud 固定为：https://oauth-login.cloud.huawei.com/oauth2/v3/token。 iat JWT签发UTC时间戳，为自UTC时间1970年1月1日00:00:00的秒数（您的服务器时间需要校准为标准时间）。 exp JWT到期UTC时间戳，比iat晚3600秒。
```json
{
"aud": "https://oauth-login.cloud.huawei.com/oauth2/v3/token",
"iss": "*****",
"exp": 1581410664,
"iat": 1581407064
}
```
4.  将完成BASE64编码后的Header字符串与Payload字符串，通过“.”进行连接，您可在业务应用中，通过服务账号密钥文件中的private_key（华为不进行存储，请您妥善保管），使用SHA256withRSA/PSS算法对拼接的字符串签名。 至此，您已经完成服务账号鉴权令牌JWT的生成。
| 字段名  | 描述  |
| --- | --- |
| kid  | 服务账号密钥文件中key_id字段。  |
| typ  | 数据类型，固定为：JWT。  |
| alg  | 算法类型，固定为：PS256。  |
| 字段名  | 描述  |
| --- | --- |
| iss  | 服务账号密钥文件中sub_account字段，标识数据生成者。  |
| aud  | 固定为：https://oauth-login.cloud.huawei.com/oauth2/v3/token。  |
| iat  | JWT签发UTC时间戳，为自UTC时间1970年1月1日00:00:00的秒数（您的服务器时间需要校准为标准时间）。  |
| exp  | JWT到期UTC时间戳，比iat晚3600秒。  |
在线生成服务账号鉴权令牌
若您想在正式开发前调试功能，可使用在线生成工具获取JWT Token。
请注意，生成JWT Token时Algorithm请选择PS256。
调用推送服务REST API
您的应用调用推送服务REST API时，需要把已获得的服务账号鉴权令牌放在Authorization头部来进行鉴权。
示例
```json
POST https://push-api.cloud.huawei.com/v3/3158882***52863/messages:send
Authorization: Bearer eyJr*****OiIx---****.eyJh*****iJodHR--***.QRod*****4Gp---****
push-type:0
```
Authorization格式：Bearer后面拼接空格，再拼接获取的鉴权信息。
示例代码
为了方便您生成服务账号鉴权令牌，我们提供了Java语言的示例代码，请按照说明替换参数运行。
如果您使用其他开发语言，请选择对应的JWT开源组件进行开发。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-scenes-send-V14
爬取时间: 2025-04-29 21:48:23
来源: Huawei Developer
场景介绍
Push Kit支持您使用HTTPS协议接入云侧，使用场景化V3接口发送场景化消息，并将不同场景定义为不同push-type。
您可发送的场景化消息类型如下表：
| push-type | 名称 |
| --- | --- |
| 0 | Alert消息（通知消息、授权订阅消息） |
| 1 | 卡片刷新 |
| 2 | 通知扩展消息 |
| 6 | 后台消息 |
| 7 | 实况窗消息 |
| 10 | 应用内通话消息 |
push-type
名称
0
Alert消息（通知消息、授权订阅消息）
1
卡片刷新
2
通知扩展消息
6
后台消息
7
实况窗消息
10
应用内通话消息
有关场景化消息的更详细说明，请参见REST API-场景化消息API接口。
开发步骤
1.  HTTPS POST URL： “[projectId]”请替换为您应用的项目ID。登录AppGallery Connect网站，选择“我的项目”，在项目列表中选择对应的项目，左侧导航栏选择“项目设置”，在该页面获取“项目ID”。 请求消息头示例： 通知消息体示例：
```json
POST https://push-api.cloud.huawei.com/v3/[projectId]/messages:send
```
Push Kit提供了基于Java语言的服务端示例代码（包括申请鉴权令牌，发送通知消息与卡片刷新消息功能），方便您参考使用，详情请参见示例代码。
AppGallery Connect在线推送通知消息
当前仅支持配置Alert消息。
1.
2.
3.  字段值 说明 选择应用 必填字段，消息发送的目标应用。 名称 必填字段，用于在管理台中标识通知，此名称不会给用户显示。 场景化类型 场景化消息类型，当前仅支持Alert消息。 字段值 说明 是否测试消息 (testMessage) 必选字段，对应场景化接口中的testMessage参数； 测试消息标识： 离线消息缓存机制 (collapseKey) 可选字段，对应场景化接口中的collapseKey参数； 离线消息缓存控制方式，取值范围-1~100： 消息缓存时间 (ttl) 可选字段，对应场景化接口中的ttl参数； 消息缓存时间，单位是秒。在用户设备离线时，消息在Push服务器进行缓存，在消息缓存时间内用户设备上线，消息会下发，超过缓存时间后消息会丢弃，默认值为86400秒（1天），最大值为15天。 批量任务消息标识 (biTag) 可选字段，对应场景化接口中的biTag参数； 批量任务消息标识，消息回执时会返回给应用服务器，长度最大64字节。 回执ID (receiptId) 可选字段，对应场景化接口中的receiptId参数； 回执ID指定本次下行消息的回执地址及配置。该回执ID可以在配置回执参数中查看。 字段值 说明 设备Token (token) 必填字段，对应场景化接口中的token参数； 按照Token向目标用户推送消息。 样例：IQAAA******* 字段值 说明 消息类别 (category) 必填字段，对应场景化接口中的category参数； 通知消息类别。完成申请通知消息自分类权益后，用于标识消息类型，不同的通知消息类型影响消息展示和提醒方式。取值如下： 消息标题 (title) 必填字段，对应场景化接口中的title参数； 通知消息标题。 消息内容 (body) 必填字段，对应场景化接口中的body参数； 通知消息内容。 点击通知动作 (actionType) 必填字段，对应场景化接口中的clickAction中actionType参数； 点击消息后触发的动作，可选择打开应用首页、自定义action页面或自定义intentUri页面。
4.  预览效果仅供参考，请以客户端实际效果为准。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094323.72725013455619920378408637908894:50001231000000:2800:D28E541332E277D3DE4A8B80ABCB1DE51F5C9CC9EE597D0320A6FA248EC44B2C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094323.70944109132973706904214860159043:50001231000000:2800:DAF2EAD711C251E3BC5C77C683D47DE46A8D016F898F7E05C63DAD09A22B9B64.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094323.95997802185529922972210616048684:50001231000000:2800:BE67A0A448DA3D79326CEDD0F7BDCAC846C3561C662F7FCC61EA429F2A1A3DED.png)
| 字段值 | 说明 |
| --- | --- |
| 选择应用 | 必填字段，消息发送的目标应用。 |
| 名称 | 必填字段，用于在管理台中标识通知，此名称不会给用户显示。 |
| 场景化类型 | 场景化消息类型，当前仅支持Alert消息。 |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094323.69550899666391743676484444654048:50001231000000:2800:BA8520B1EAB32D2D0BA9B09283AA3BBD9585D26F363FC09076D832ACC6F330DE.png)
| 字段值 | 说明 |
| --- | --- |
| 是否测试消息 (testMessage) | 必选字段，对应场景化接口中的testMessage参数； 测试消息标识：  false：正式消息 true：测试消息（默认值）  |
| 离线消息缓存机制 (collapseKey) | 可选字段，对应场景化接口中的collapseKey参数； 离线消息缓存控制方式，取值范围-1~100：  0：对每个应用发送到该用户设备的离线消息只会缓存最新的一条； -1：对所有离线消息都缓存（默认值）； 1~100：离线消息缓存分组标识，对离线消息进行分组缓存，每个应用每一组最多缓存一条离线消息。  |
| 消息缓存时间 (ttl) | 可选字段，对应场景化接口中的ttl参数； 消息缓存时间，单位是秒。在用户设备离线时，消息在Push服务器进行缓存，在消息缓存时间内用户设备上线，消息会下发，超过缓存时间后消息会丢弃，默认值为86400秒（1天），最大值为15天。 |
| 批量任务消息标识 (biTag) | 可选字段，对应场景化接口中的biTag参数； 批量任务消息标识，消息回执时会返回给应用服务器，长度最大64字节。 |
| 回执ID (receiptId) | 可选字段，对应场景化接口中的receiptId参数； 回执ID指定本次下行消息的回执地址及配置。该回执ID可以在配置回执参数中查看。 |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094323.63140533172053797740762916333954:50001231000000:2800:C75E933ECD10A4709546353FE73A54534D62087649B8E48A6CC7A9191FAD0788.png)
| 字段值 | 说明 |
| --- | --- |
| 设备Token (token) | 必填字段，对应场景化接口中的token参数； 按照Token向目标用户推送消息。 样例：IQAAA******* |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094323.51254066035182771697808831826756:50001231000000:2800:41C8E8C9A769A4A4D3D124E624631BF6E4BA146D193C28B2878C91E8ED108DE5.png)
| 字段值 | 说明 |
| --- | --- |
| 消息类别 (category) | 必填字段，对应场景化接口中的category参数； 通知消息类别。完成申请通知消息自分类权益后，用于标识消息类型，不同的通知消息类型影响消息展示和提醒方式。取值如下：  即时聊天：IM 音视频通话：VOIP 订阅：SUBSCRIPTION 出行：TRAVEL 健康：HEALTH 工作事项提醒：WORK 账号动态：ACCOUNT 订单&物流：EXPRESS 财务：FINANCE 设备提醒：DEVICE_REMINDER 邮件：MAIL 新闻、内容推荐、社交动态、产品促销、财经动态、生活资讯、调研、功能推荐、运营活动（仅对内容进行标识，不会加快消息发送），统称为资讯营销类消息：MARKETING PLAY_VOICE：语音播报  |
| 消息标题 (title) | 必填字段，对应场景化接口中的title参数； 通知消息标题。 |
| 消息内容 (body) | 必填字段，对应场景化接口中的body参数； 通知消息内容。 |
| 点击通知动作 (actionType) | 必填字段，对应场景化接口中的clickAction中actionType参数； 点击消息后触发的动作，可选择打开应用首页、自定义action页面或自定义intentUri页面。 |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094323.24510461230258362306516174503205:50001231000000:2800:16F3434AEA68BDA3F17E132FBAEA1253A442A1C32A20B24F077F39FC23934D17.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-msg-receipt-V14
爬取时间: 2025-04-29 21:48:37
来源: Huawei Developer
场景介绍
消息回执是指Push Kit服务端将消息推送到用户终端之后，端侧会给Push服务端反馈送达结果，与此同时，Push服务端会将消息送达状态以回执消息形式发送给您的应用回执服务端，方便您获取消息下达端侧后的状态，定位问题等。
受网络环境以及消息量的影响，消息回执在Push服务端收到端侧响应后发送，会存在一些延迟现象，如果较长时间无法收到回执，可能是设备处于离线状态。
回执服务开发
请参见消息回执API开发您的回执服务器代码，服务接口地址将作为配置回执参数中的回调地址。
开通回执权益
1.
2.
3.
4.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094324.87368994425501481673492261975652:50001231000000:2800:126E79A495697D02903B9D3A1345A9CF4B6AD3266673DBE4457788466BA0B00C.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094324.86320210778423702988917877978341:50001231000000:2800:CAB82C6C28A09F5F905ABA13C9FB1542FCBFAFEB4C7F08B88B9CAB404A92BE73.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094324.25467913588473799697026476198764:50001231000000:2800:AD2A23360B0F9837FF9843B36623712F239655B144F8FD55FFEA278FBE8F13AA.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094324.72260668982186257503441395825471:50001231000000:2800:D7DD30DD5818E1441D9D3B5488974587E643E06453C2287BC85E2ED549DF485F.png)
配置回执参数
点击“新建回执”后，需要配置如下参数：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094324.32647711404476808239864217858854:50001231000000:2800:FB146BBC3B45C81683AF621CCE24DFBCA3F739934CFCD388E98D5CE9D18AC115.png)
1.  回调地址配置完成后，Push Kit服务器会校验回执服务器（接收回执消息的应用服务器）提供的证书是否为商用CA签发证书。 证书过期将导致您无法接收消息回执，请及时更换回执服务器证书。
2.
3.  证书过期将导致您无法接收消息回执，请及时更换回执服务器证书。
4.  其中timestamp为回执消息的时间戳（标准Unix时间戳），nonce为UUID随机数，value为签名信息，签名方法为：Base64(HMAC-SHA256(secret, timestamp+nonce+userName))。 生成签名示例（以下为java代码）：
```json
X-HUAWEI-CALLBACK-ID:
timestamp=1563*****1261;nonce=a07bfa17-6d82-4b53-a9a2-07c*****eef1;value=E4YeO*********************QXF+c=
```
5.  其中timestamp为回执消息的时间戳（标准Unix时间戳），nonce为UUID随机数，value为签名信息，签名方法为：Base64(HMAC-SHA256(secret, timestamp+nonce+userName))。
```json
X-HUAWEI-CALLBACK-ID:
timestamp=1563*****1261;nonce=a07bfa17-6d82-4b53-a9a2-07c*****eef1;value=E4YeO*********************QXF+c=
```
6.  生成签名示例（以下为java代码）：
7.  V1回执不支持场景化消息发送，请使用V2回执。
8.  示例报文： 消息到达回执： 除卡片刷新场景外的其他场景化消息均支持消息到达回执。 卡片刷新回执： 您的回执服务器必须返回成功的响应，才能测试通过，再点击“提交”完成回执的创建。 成功响应：
```json
{
"statuses": [
{
"biTag": "bi**62",
"pushType": 0,
"token": "MsDZmCSyuS+Gd***********ZLs8Es",
"requestId": "169802**1701",
"appPackageName": "com.**.**",
"deliveryStatus": {
"result": 0,
"timestamp": 1697741455082
}
}
]
}
```
-
-  证书过期将导致您无法接收消息回执，请及时更换回执服务器证书。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094324.92914737197955514239417090823951:50001231000000:2800:BB5E3CC87C8570DF5B9DE75F38E959F41F28D6089A1405EE278AA7DFD2ECA3FF.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094324.71025176018619472203279714710959:50001231000000:2800:11A4F7924B954B28D8E391CA914BE51CBEC80F45473CF3CC2969D48DAE2E35E5.png)
1.  其中timestamp为回执消息的时间戳（标准Unix时间戳），nonce为UUID随机数，value为签名信息，签名方法为：Base64(HMAC-SHA256(secret, timestamp+nonce+userName))。
```json
X-HUAWEI-CALLBACK-ID:
timestamp=1563*****1261;nonce=a07bfa17-6d82-4b53-a9a2-07c*****eef1;value=E4YeO*********************QXF+c=
```
2.  生成签名示例（以下为java代码）：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094324.57745934554002651523013109928975:50001231000000:2800:5B1C8CF5BB5A3ABAFA626F6CF940EBC5F43AAF9731F62046A596CFB4B96F1A1F.png)
回执状态码
您可以基于接收到的消息回执码进行数据统计和分析，回执状态码如下表所示：
| 回执状态码 | 状态码描述 | 原因及处理 |
| --- | --- | --- |
| 0 | 成功送达 | 不涉及。 |
| 2 | Token无效，应用卸载 | 成功发送到设备后发现应用不存在，通常表示应用已卸载。 |
| 5 | Token无效，Token不匹配 | 终端收到应用的Push消息，但Push消息带的Token与本地应用的Token不一致。请排查以下几种原因：  终端用户清除了本地应用数据。 终端用户通过卸载再安装的方式更新了本地应用。 您在应用中调用pushService.deleteToken()方法删除了本地应用的Token。 您在应用中调用了deleteAAID()，该方法删除AAID的同事也会删除本地应用的Token。 终端设备恢复出厂设置后终端用户重新进入预安装应用或者重新安装并进入应用。             终端收到应用的Push消息，但检查本地数据存储中并没有应用的Token。请排查以下原因：            应用未激活。   若您的问题仍无法解决，请通过在线提单提交问题。 |
| 6 | 通知消息不展示 | 请排查以下三种原因：  用户关闭了设备上的系统通知总开关。 用户关闭了本应用的通知渠道开关。 用户开启了未成年模式。  |
| 10 | 非活跃设备 | 设备为非活跃设备（终端设备未接入网络达30天），消息不进行下发。 |
| 14 | 其它错误 | 系统内部网络异常。 |
| 15 | 离线用户消息管控 |   设置了离线用户消息覆盖（服务端API中的collapseKey）功能，消息被覆盖掉了，未下发到设备。 离线消息最多缓存120条，超过后旧消息被新消息覆盖。  |
| 22 | 目标用户不匹配 | 多用户场景，下发消息的目标用户与当前终端设备上的实际用户不匹配。请排查Push Token是否是当前用户登录时申请的。 |
| 27 | 在终端设备上目标应用进程不存在导致透传消息被缓存 | 目标应用进程不存在且应用启动管理关闭自启动和关联启动的情况下，透传消息将被缓存。 |
| 31 | 目标应用中不存在指向的页面 | 请参见点击消息动作检查应用skills标签配置和消息请求体中的clickAction字段。 |
| 51 | 终端设备处于开机未解锁状态 | 用户重启终端设备后，点亮屏幕未解锁。 |
| 102 | 消息频控丢弃 | 每天向某个设备上某个应用最多可发送3000条消息，超过3000条后当天无法向该设备的该应用继续发送消息，请超过零点后再发送消息。 |
| 144 | profileId不存在 | 发送下行消息时请检查场景化消息payload中的profileId字段。 |
| 151 | 推送消息未展示或卡片formId不存在 |   请检查卡片是否已经添加到终端设备桌面。 请检查卡片刷新消息中指定的formId是否存在。  |
| 155 | 实况窗通知更新失败 | 请检查您的通知是否未创建或已经过期。 |
| 156 | 实况窗通知消息乱序更新 | 实况窗通知消息携带version小于当前版本，更新失败。 |
| 158 | 创建的实况窗已存在 | 在设备中已存在通过Live View Kit创建的activityId相同的实况窗。 |
| 188 | 拉起应用失败 | 请稍后重试。 |
| 191 | 角标更新失败 | 系统内部设置角标异常。 |
| 256 | 消息频次限制 | 频次限制请参考消息发送频次限制。 |
| 259 | 消息被拒绝 |   发送消息中存在违规内容。 存在不安全的url。  请更换消息体内容或url。 |
| 261 | 卡片不存在 | 卡片刷新消息被Push服务端管控不下发（管控周期30天），建议做过滤处理减少无效推送。原因：不存在卡片刷新消息中指定formId的卡片。 建议填写已分配过的formId，避免后续formId分配后，对应的卡片刷新消息被管控导致管控周期内无法下发。 |
| 262 | 卡片刷新次数达上限 | 卡片刷新消息被Push服务端管控不下发（管控周期1天），建议做过滤处理减少无效推送。原因：终端设备上对应的卡片刷新次数达到上限(未被Push服务端频次限制)。 |
| 264 | 消息未订阅 | 发送的订阅消息，但实际未订阅。 |
| 265 | 实况窗通知更新被管控 | 发送的activityId对应的实况窗通知不存在，限制发送该activityId的实况窗通知消息24小时。 |
| 268 | 未携带status字段 | 通过Push Kit创建的实况窗，在对该实况窗更新时未携带status字段。 |
| 269 | 重复创建实况窗 | 通过Push Kit创建的实况窗重复（activityId相同）。 |
回执状态码
状态码描述
原因及处理
0
成功送达
不涉及。
2
Token无效，应用卸载
成功发送到设备后发现应用不存在，通常表示应用已卸载。
5
Token无效，Token不匹配
终端收到应用的Push消息，但Push消息带的Token与本地应用的Token不一致。请排查以下几种原因：
若您的问题仍无法解决，请通过在线提单提交问题。
6
通知消息不展示
请排查以下三种原因：
10
非活跃设备
设备为非活跃设备（终端设备未接入网络达30天），消息不进行下发。
14
其它错误
系统内部网络异常。
15
离线用户消息管控
22
目标用户不匹配
多用户场景，下发消息的目标用户与当前终端设备上的实际用户不匹配。请排查Push Token是否是当前用户登录时申请的。
27
在终端设备上目标应用进程不存在导致透传消息被缓存
目标应用进程不存在且应用启动管理关闭自启动和关联启动的情况下，透传消息将被缓存。
31
目标应用中不存在指向的页面
请参见点击消息动作检查应用skills标签配置和消息请求体中的clickAction字段。
51
终端设备处于开机未解锁状态
用户重启终端设备后，点亮屏幕未解锁。
102
消息频控丢弃
每天向某个设备上某个应用最多可发送3000条消息，超过3000条后当天无法向该设备的该应用继续发送消息，请超过零点后再发送消息。
144
profileId不存在
发送下行消息时请检查场景化消息payload中的profileId字段。
151
推送消息未展示或卡片formId不存在
155
实况窗通知更新失败
请检查您的通知是否未创建或已经过期。
156
实况窗通知消息乱序更新
实况窗通知消息携带version小于当前版本，更新失败。
158
创建的实况窗已存在
在设备中已存在通过Live View Kit创建的activityId相同的实况窗。
188
拉起应用失败
请稍后重试。
191
角标更新失败
系统内部设置角标异常。
256
消息频次限制
频次限制请参考消息发送频次限制。
259
消息被拒绝
请更换消息体内容或url。
261
卡片不存在
卡片刷新消息被Push服务端管控不下发（管控周期30天），建议做过滤处理减少无效推送。原因：不存在卡片刷新消息中指定formId的卡片。
建议填写已分配过的formId，避免后续formId分配后，对应的卡片刷新消息被管控导致管控周期内无法下发。
262
卡片刷新次数达上限
卡片刷新消息被Push服务端管控不下发（管控周期1天），建议做过滤处理减少无效推送。原因：终端设备上对应的卡片刷新次数达到上限(未被Push服务端频次限制)。
264
消息未订阅
发送的订阅消息，但实际未订阅。
265
实况窗通知更新被管控
发送的activityId对应的实况窗通知不存在，限制发送该activityId的实况窗通知消息24小时。
268
未携带status字段
通过Push Kit创建的实况窗，在对该实况窗更新时未携带status字段。
269
重复创建实况窗
通过Push Kit创建的实况窗重复（activityId相同）。
您需要对上述状态中的2、5、6、10做过滤处理，减少对这些用户的无效推送。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-get-aaid-V14
爬取时间: 2025-04-29 21:48:50
来源: Huawei Developer
AAID（Anonymous Application Identifier）：应用匿名标识符，标识运行在移动智能终端设备上的应用实例，只有该应用实例才能访问该标识符，它只存在于应用的安装期，总长度36位。与无法重置的设备级硬件ID相比，AAID具有更好的隐私权属性。
AAID具有以下特性：
场景介绍
AAID会在包括但不限于下述场景中发生变化：
接口说明
接口返回值有两种返回形式：Callback和Promise回调。下表中仅展示Promise回调形式的接口，Promise和Callback只是返回值方式不一样，功能相同。
| 接口名 | 描述 |
| --- | --- |
| getAAID(): Promise<string> | 获取AAID，使用Promise异步返回结果。 |
| deleteAAID(): Promise<void> | 删除AAID，使用Promise异步返回结果。 |
接口名
描述
getAAID(): Promise<string>
获取AAID，使用Promise异步返回结果。
deleteAAID(): Promise<void>
删除AAID，使用Promise异步返回结果。
获取AAID
1.
```typescript
import { AAID } from '@kit.PushKit';
import { AbilityConstant, UIAbility, Want } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.
```typescript
export default class EntryAbility extends UIAbility {
// 入参want与launchParam并未使用，为初始化项目时自带参数
async onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): Promise<void> {
// 获取AAID
try {
const aaid: string = await AAID.getAAID();
hilog.info(0x0000, 'testTag', 'Succeeded in getting AAID.');
} catch (err) {
let e: BusinessError = err as BusinessError;
hilog.error(0x0000, 'testTag', 'Failed to get AAID: %{public}d %{public}s', e.code, e.message);
}
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-faq-V14
爬取时间: 2025-04-29 21:49:04
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-faq-1-V14
爬取时间: 2025-04-29 21:49:17
来源: Huawei Developer
云侧消息下发成功后，可能会因为消息频控、通知开关未打开等原因，导致端侧消息未展示。
请您自查是否为以下情况造成：
Push Kit建议您开发消息回执，Push服务端会将消息送达状态以回执消息形式发送给您的应用回执服务端，方便您获取消息下达端侧后的状态，通过回执状态码定位问题。
您可以登录AppGallery Connect进行消息追踪和token信息查询，查询路径：“我的项目 > 增长 > 推送服务 > 自助分析（Beta）”。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-faq-2-V14
爬取时间: 2025-04-29 21:49:30
来源: Huawei Developer
如何处理应用类别误分类
未发布应用，可以登录AppGallery Connect网站，点击“应用发布”，在应用列表中找到您的应用，修改应用分类。关于应用分类信息，请参见华为应用市场应用分类示例。
如何处理通知消息类别误分类
应用在不违反通知违规处罚标准的前提下推送消息，可按要求申请通知消息自分类权益。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-faq-3-V14
爬取时间: 2025-04-29 21:49:43
来源: Huawei Developer
建议您优化推送策略，做精细化推送，尽量减少或避免全量用户的推送。如果您的消息内容中有符合服务与通讯类消息的内容，建议您申请和接入消息自分类，详情请参见通知消息分类标准与提醒方式，接入后该类消息的限制为每个设备每天不超过3000条。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-faq-4-V14
爬取时间: 2025-04-29 21:49:57
来源: Huawei Developer
推送服务对通知消息的频控规则说明，请参见消息频控。
使用REST API接口单次推送消息可携带的Push Token数量是多少？
单次推送消息可携带的Push Token最多1000个，因此Push Kit服务器每次最多根据Token发送1000条消息。如果大于1000条，请求会返回错误码80300010，建议开发者分批发送。
推送消息最大为4KB，这是否意味着给1000个Token推送消息将超过此限制？
消息体大小限制不包括Token。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-faq-5-V14
爬取时间: 2025-04-29 21:50:10
来源: Huawei Developer
当终端处于设备重启后的首次锁屏状态时，应用子进程可能会因数据区加密而导致访问失败，进而出现业务无法正常执行的情况。请您在开发时适配此种场景，进行相关异常保护。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-faq-6-V14
爬取时间: 2025-04-29 21:50:24
来源: Huawei Developer
详情请参见Call Service Kit常见问题。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-faq-7-V14
爬取时间: 2025-04-29 21:50:37
来源: Huawei Developer
场景化消息请求体中，接口URL版本为V3 Beta（https://push-api.cloud.huawei.com/v3/[projectId]/messages:send）时，仅支持给HarmonyOS Next/5.x及之后的系统版本推送通知；接口URL版本为V2（https://push-api.cloud.huawei.com/v2/[projectId]/messages:send）时，仅支持给HarmonyOS 3.x/4.x的系统版本推送通知。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-personal-data-V14
爬取时间: 2025-04-29 21:50:51
来源: Huawei Developer
最后修改时间：2024/06/03
本章针对华为作为最终用户数据处理者，开发者作为最终用户数据控制者的数据处理进行说明，包括：
Push Kit处理的个人数据清单
| 个人数据清单  | 使用目的  | 存留期  |
| --- | --- | --- |
| 设备标识符（Push Token）  | 用于将应用消息推送到目标设备  | 设备标识符在服务器最多存储15天  |
| 应用基本信息  | 用于将应用消息推送到目标设备  | 应用基本信息在服务器最多存储6个月  |
| AAID（应用匿名标识符）  | 用于申请Push Token  | 不存储  |
| 应用消息  | 用于设备离线，应用消息无法到达端侧时的缓存重发  | 应用消息最多在服务器存储15天  |
个人数据清单
使用目的
存留期
设备标识符（Push Token）
用于将应用消息推送到目标设备
设备标识符在服务器最多存储15天
应用基本信息
用于将应用消息推送到目标设备
应用基本信息在服务器最多存储6个月
AAID（应用匿名标识符）
用于申请Push Token
不存储
应用消息
用于设备离线，应用消息无法到达端侧时的缓存重发
应用消息最多在服务器存储15天
以上存储的个人数据将会通过安全传输通道上传至华为服务器处理。请您在用户同意应用的隐私声明后，再调用Push Kit的接口。
指导开发者如何帮助最终用户实现对数据的控制
-  设备标识符最多存储15天，应用基本信息最多存储6个月，时间到达后自动删除服务器数据。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-appendix-V14
爬取时间: 2025-04-29 21:51:04
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-detail-rules-V14
爬取时间: 2025-04-29 21:51:17
来源: Huawei Developer
目的
为保障华为推送平台内容信息的合法性、真实客观性、一致性、可读性，以及用户良好的通知使用体验，制定了Push Kit通知内容管理细则。
定义
推送通知指出现在通知中心、锁屏、桌面横幅的应用消息。
推送内容指推送通知所展现的、用户与推送通知的交互行为所产生的所有元素，包括但不限于消息框、推送文字（标题、文本内容）、图片、应用图标、跳转方式、跳转落地页等。
推送各元素的定义：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250414094328.92133873479329171036355577101853:50001231000000:2800:AAB22DA696360099F43C91C72FC6400E5FDD69E5081CCA704CEC85C0A24F591C.png)
通知内容原则
华为推送平台的通知内容需遵照内容一致性、真实客观性、可读性、合规性原则，为用户提供有价值的通知内容信息，以提升用户与推送通知的互动率，并提高用户的使用满意度。
一致性原则
推送内容与应用的业务内容相关（即应用内包含的业务）；推送内容各要素需要与应用基本信息（即在应用市场登记的基本信息）保持一致，不应使用其他应用或品牌的图标、品牌名、产品名。新闻等推送内容，因业务涉及其他应用的图标和名称，不在此范围。
真实客观原则
应推送真实客观的内容，不得推送虚假、欺骗、夸张内容。
可读性原则
合规性原则
禁止在推送中使用以下内容：
推送新闻信息内容的禁止性要求：
附录1 推送内容相关法律法规及规范要求参考
《中华人民共和国个人信息保护法》
《中华人民共和国网络安全法》
《互联网信息服务管理办法》
《网络信息内容生态治理规定》
《移动互联网应用程序信息服务管理规定》
《清朗·移动应用程序PUSH弹窗突出问题专项整治》
附录2 广告、新闻资讯类推送相关法律法规参考
广告营销类推送：
《中华人民共和国广告法》
《互联网广告管理暂行办法》
《中华人民共和国反不正当竞争法》
新闻资讯类推送：
《互联网新闻信息服务管理规定》
本管理细则根据法律法规要求、《华为开发者服务协议》、《华为APIs使用协议》、《华为推送服务使用协议》、《应用审核指南》、《元服务审核指南》和平台体验要求制定。
对第三方网站的内容，华为不承担任何责任。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/push-punishment-standards-V14
爬取时间: 2025-04-29 21:51:31
来源: Huawei Developer
违规分类、违规行为及违规处罚标准
当您的应用存在违规行为时，Push Kit会向应用的开发者账号发送违规通知邮件或短信，请您按照邮件或短信中提供的步骤查看违规处罚详情。
| 违规分类及违规行为  | 违规处罚标准  |
| --- | --- |
| 类型一：违反通知样式、通知跳转、通知内容、通知分类、通知开关授权等，影响用户体验。 通知样式违规 伪造成其他应用推送消息，包括伪造应用名称、icon和消息内容等。应用通知隐藏应用自身的名称和icon。发送不符合设计规范的通知样式。滥用通知样式，如设置通知背景图或更改推送文案颜色等。未经授权，强行将通知置顶。通知无法直接删除。伪造横幅通知、锁屏通知。 通知跳转违规 以推送消息为手段，故意在后台拉起应用进程。以推送消息为手段，利用本应用唤醒其他应用。利用推送消息诱导下载安装第三方应用。通知点击跳转链接为非法网站。 通知内容原则违规 违反通知内容一致性原则、真实客观原则、可读性原则及合规性原则。 通知分类违规 通知分类错误，违反通知消息分类标准与提醒方式。 通知开关授权违规 首次启动时未弹窗询问用户是否允许通知。通知未经用户授权而默认开启。将多个事件通知放在一个授权开关内诱导用户一键开启。 其他 应用间互相恶意“保活”。其他影响华为终端用户体验的行为。 说明恶意“保活”：指的是未经过用户允许和非正常业务需要的场景下，将应用进程拉起。   | 近12个月内： 首次违规：邮件警告。7个自然日内未完成整改，按二次违规处罚。二次违规：暂停应用发送资讯营销消息7个自然日。7个自然日内未完成整改，按三次违规处罚。三次及以上违规：90个自然日内所有消息归为静默提醒，所有消息统一限频2条/天。 注意违规应用需在违规警告发出的7个自然日内完成整改，并反馈整改结果，否则平台将加重处罚。应用提交整改反馈时，请参考整改承诺声明。   |
| 类型二：违反法律法规  | 禁用华为推送；按行政监管机构要求，禁用至处罚指令解除。  |
| 类型三：违反实况窗样式、场景使用规范，影响用户体验 样式违规使用不符合规范的实况窗样式。  场景使用违规非用户主动行为触发的实况窗通知，用户对通知内容无明确的预期。实况窗用于营销、广告场景或其他未经评审的场景。实况窗具体使用场景与应用实际申请通过的场景不一致。   | 应用需在收到违规处罚通知的3个自然日内完成整改，并反馈整改结果，否则将回收违规场景的实况窗通知权益。 注意应用提交整改反馈时，请参考整改承诺声明。   |
违规分类及违规行为
违规处罚标准
类型一：违反通知样式、通知跳转、通知内容、通知分类、通知开关授权等，影响用户体验。
通知样式违规
通知跳转违规
通知内容原则违规
通知分类违规
通知开关授权违规
其他
恶意“保活”：指的是未经过用户允许和非正常业务需要的场景下，将应用进程拉起。
近12个月内：
类型二：违反法律法规
禁用华为推送；按行政监管机构要求，禁用至处罚指令解除。
类型三：违反实况窗样式、场景使用规范，影响用户体验
应用需在收到违规处罚通知的3个自然日内完成整改，并反馈整改结果，否则将回收违规场景的实况窗通知权益。
应用提交整改反馈时，请参考整改承诺声明。
整改承诺声明
应用提交整改反馈时，需提供带有该违规应用上架主体公司盖章的《整改承诺声明》，具体内容如下：
致：华为软件技术有限公司
本公司的应用：应用名称：***（以下简称“该应用”）、APP ID/应用包名：***，***版本，在使用Push Kit（推送服务）期间，于__年__月__日，因_______原因（“违规情况”）被处罚。
本公司在此确认，针对违规情况，整改措施如下：
问题一：***
整改措施：
问题二：***
整改措施：
整改完成时间：__年__月__日
本公司承诺将遵守适用的法律法规，在使用Push Kit期间，已仔细阅读并同意遵守《华为推送服务协议》《Push Kit接入规范》等相关的协议条款。若本公司再次出现任何违反适用法律法规或前述协议条款的情形，本公司同意接受华为对该应用和/或本公司的处理，并独立承担关于该应用的全部问题和责任；如给华为及其关联公司、合作伙伴或其他第三方造成损失的，本公司将承担全部责任并赔偿由此造成的一切损失。
特此声明和保证。
违规处罚申诉
根据违规处理规定，应用出现违规行为，其对应的推送权益可能受到影响。
若您对应用违规处罚判定有异议，您可以通过下述路径查看违规处罚详情，并在收到违规处罚通知后三个工作日内进行申诉（同一违规事件仅允许三次申诉）。
违规处罚详情查看路径：登录AppGallery Connect网站，点击“我的项目”，在项目列表中找到您的项目，点击“项目设置 > 增长 > 推送服务”，找到“配置 > 项目状态”，进入违规处罚页面，即可查看和处理违规处罚。
我们将根据您申诉的合理性、申诉材料真实性、违规影响范围进行评议，并反馈结果。若申诉评议通过，可酌情减轻处罚。
如有疑问，请发送邮件至hwpush@huawei.com咨询。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-guide-V14
爬取时间: 2025-04-29 21:51:44
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-introduction-V14
爬取时间: 2025-04-29 21:51:58
来源: Huawei Developer
Scenario Fusion Kit（融合场景服务）基于ArkUI框架组件开发，提供跨多个子系统融合的场景化组件，降低开发者接入复杂度，确保鸿蒙生态体验统一。ArkUI一行核心代码启用，智能推荐输入建议，复杂表单一键填充。融合场景服务通过完善应用/元服务的系统开发能力，进一步丰富鸿蒙生态，满足开发者在HarmonyOS系统下的服务闭环诉求。
业务价值
-  跨子系统构建体验一致的场景化组件，只需开发者一次引入，支持应用/元服务高频通用场景便捷开发，提升应用/元服务开发效率。
-  Button组件与华为账号、系统设置等部件协同，规范组件单击行为，保障用户体验一致性。
-  智能填充帮助用户轻松地完成表单填写。集成ArkUI输入组件后，一行代码配置快速启用功能。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-preparations-V14
爬取时间: 2025-04-29 21:52:12
来源: Huawei Developer
请先参考“应用开发准备”完成基本准备工作及指纹配置，再继续进行以下开发活动。
申请权限
开发者需要根据实际场景申请对应权限，具体申请方式请参见声明权限。
| 权限  | 使用场景  |
| --- | --- |
| ohos.permission.GET_WIFI_INFO  | 使用场景化API获取Wi-Fi信息需要申请该权限（使用API13及以上版本时不需要设置该权限）。  |
| ohos.permission.ACCESS_BLUETOOTH  | 使用场景化API获取蓝牙信息需要申请该权限（使用API13及以上版本时不需要设置该权限）。  |
权限
使用场景
ohos.permission.GET_WIFI_INFO
使用场景化API获取Wi-Fi信息需要申请该权限（使用API13及以上版本时不需要设置该权限）。
ohos.permission.ACCESS_BLUETOOTH
使用场景化API获取蓝牙信息需要申请该权限（使用API13及以上版本时不需要设置该权限）。
获取用户程序访问控制权限可参考程序访问控制管理。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-button-V14
爬取时间: 2025-04-29 21:52:26
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-button-getphonenumber-V14
爬取时间: 2025-04-29 21:52:39
来源: Huawei Developer
场景介绍
快速验证手机号Button功能用于帮助开发者向用户发起手机号申请，应用在满足《常见类型移动互联网应用程序必要个人信息范围规定》（对第三方网站的内容，华为公司不承担任何责任）中使用手机号的必要业务场景，经用户同意后，应用可获取手机号，为用户提供相应服务（详见场景介绍）。
应用/元服务仅在首次使用时需要用户进行授权，授权成功后，后续只验证授权手机号，不可修改。
前提条件
参见开发前提。
效果图展示
单击“快速验证手机号”按钮，拉起验证界面（完整流程可参考手机号快速验证）。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170145.03797731455471984726110639940907:50001231000000:2800:B3550D7C1686F6772E23C1250676D5B364CC5CB5829A65761C4B8A1F71C9FD94.png)
开发步骤
1.
```typescript
import { FunctionalButton, functionalButtonComponentManager } from '@kit.ScenarioFusionKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.  其他参数请参考：FunctionalButton（Button组件）。
```typescript
@Entry
@Component
struct Index {
build() {
Row() {
Column() {
// Declare FunctionalButton.
FunctionalButton({
params: {
// OpenType.GET_PHONE_NUMBER indicates that the button is used to verify mobile numbers quickly.
openType: functionalButtonComponentManager.OpenType.GET_PHONE_NUMBER,
label: '快速验证手机号',
// Adjust the button style.
styleOption: {
styleConfig: new functionalButtonComponentManager.ButtonConfig()
.fontSize(20)
.fontColor(Color.Black)
},
},
// When OpenType is set to GET_PHONE_NUMBER, the callback must be onGetPhoneNumber.
controller: new functionalButtonComponentManager.FunctionalButtonController()
.onGetPhoneNumber((err, data) => {
if (err) {
// Error processing.
hilog.error(0x0000, "testTag", "error： %{public}d %{public}s", err.code, err.message);
return;
}
// Success processing.
hilog.info(0x0000, "testTag", "succeeded in authenticating");
// Process the authorization code.
let authorizationCode = data.code;
})
})
}
.width('100%')
}
.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-button-chooseavatar-V14
爬取时间: 2025-04-29 21:52:53
来源: Huawei Developer
场景介绍
本章节将向您介绍如何使用选择头像Button功能，开发者可调用对应Button组件快速拉起头像选择页面，供用户完成华为账号头像或其他头像的选择与展示。
前提条件
参见开发前提。
效果图展示
单击头像按钮拉起半模态选择头像页面来设置头像。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170145.88941115053559623525021304667823:50001231000000:2800:8B61A05B8F5DBCC7399BB50F3C43DF7D7DF03856AAA5311BEA2C686193664AFF.png)
开发步骤
1.
```typescript
import { FunctionalButton, functionalButtonComponentManager } from '@kit.ScenarioFusionKit'
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.  其他参数请参考：FunctionalButton（Button组件）。
```typescript
@Entry
@Component
struct Index {
// Add the account.png file to the /resources/base/media/ directory. Otherwise, an error message is displayed, indicating that the file cannot be found.
@State url: ResourceStr = $r('app.media.account');
build() {
Column() {
// Declare FunctionalButton.
FunctionalButton({
params: {
// OpenType.CHOOSE_AVATAR indicates that the button is used to select an avatar.
openType: functionalButtonComponentManager.OpenType.CHOOSE_AVATAR,
label: '',
// Adjust the button style.
styleOption: {
styleConfig: new functionalButtonComponentManager.ButtonConfig()
.type(ButtonType.Normal)
.backgroundImage(this.url)
.backgroundImageSize(ImageSize.Cover)
.width(80)
.height(80)
.backgroundColor('#E5E5E5')
},
},
// When OpenType is set to CHOOSE_AVATAR, the callback must be onChooseAvatar.
controller: new functionalButtonComponentManager.FunctionalButtonController().onChooseAvatar((err, data) => {
if (err) {
// Error processing.
hilog.error(0x0000, "testTag", "error： %{public}d %{public}s", err.code, err.message);
return;
}
// Success processing.
hilog.info(0x0000, "testTag", "succeeded in choosing avatar");
this.url = data.avatarUri!;
})
})
}
.padding({ top: 200 })
.height('100%')
.width('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-button-launchapp-V14
爬取时间: 2025-04-29 21:53:06
来源: Huawei Developer
场景介绍
本章节将向您介绍如何使用Button组件打开APP功能，可调用对应Button组件打开另一个应用。
效果图展示
单击“打开APP”按钮，出现提示弹窗，单击“允许”，跳转至新的应用界面。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170146.32462065026048103076396280533592:50001231000000:2800:4E600DDCB3DA685FB488CDCE120DDA259D3900BC7393001B3BF9D764815FEFD6.png)
弹窗是否弹出以及弹窗效果与跳转目标APP相关。
开发步骤
1.
```typescript
import { FunctionalButton, functionalButtonComponentManager } from '@kit.ScenarioFusionKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.  其他参数请参考：FunctionalButton（Button组件）。
```typescript
@Entry
@Component
struct Index {
build() {
Row() {
Column() {
// Declare FunctionalButton.
FunctionalButton({
params: {
// OpenType.LAUNCH_APP indicates that the button is used to launch an app.
openType: functionalButtonComponentManager.OpenType.LAUNCH_APP,
label: '打开APP',
// When OpenType is set to functionalButtonComponentManager.OpenType.LAUNCH_APP, appParam is mandatory.
appParam: {
bundleName: "xxx",
abilityName: "xxx"
},
// Adjust the button style.
styleOption: {
styleConfig: new functionalButtonComponentManager.ButtonConfig()
.fontSize(20)
.fontColor(Color.Black)
},
},
// When OpenType is set to LAUNCH_APP, the callback must be onLaunchAPP.
controller: new functionalButtonComponentManager.FunctionalButtonController().onLaunchApp((err) => {
if (err) {
// Error processing.
hilog.error(0x0000, "testTag", "error： %{public}d %{public}s", err.code, err.message);
return;
}
// Success processing. No value is returned upon a success.
hilog.info(0x0000, "testTag", "succeeded in launching app");
})
})
}
.width('100%')
}
.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-button-ship-to-V14
爬取时间: 2025-04-29 21:53:20
来源: Huawei Developer
场景介绍
本章节将向您介绍如何使用选择收货地址Button功能，开发者可调用对应Button组件快速拉起地址选择页面，并返回用户选择的收货地址。
前提条件
参见开发前提。
效果图展示
单击“选择收货地址”按钮，拉起选择收货地址界面选择已保存的地址，也可单击“管理/新增收货地址”进入添加收货地址界面（完整流程可参考获取收货地址）。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170146.07853035553912782555703801859801:50001231000000:2800:BC34932B5C41E46471600AF17933081362F90C4FAB47A4F9FA65BEF4199E6AEF.png)
开发步骤
1.
```typescript
import { FunctionalButton, functionalButtonComponentManager } from '@kit.ScenarioFusionKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.  其他参数请参考：FunctionalButton（Button组件）。
```typescript
@Entry
@Component
struct Index {
build() {
Row() {
Column() {
// Declare FunctionalButton.
FunctionalButton({
params: {
// OpenType.CHOOSE_ADDRESS indicates that the button is used to select a shipping address.
openType: functionalButtonComponentManager.OpenType.CHOOSE_ADDRESS,
label: '选择收货地址',
// Adjust the button style.
styleOption: {
bgColor: functionalButtonComponentManager.ColorType.DEFAULT,
size: functionalButtonComponentManager.SizeType.DEFAULT,
plain: false,
disabled: false,
loading: false,
hoverClass: functionalButtonComponentManager.HoverClassType.HOVER_CLASS,
hoverStartTime: 0,
hoverStayTime: 0,
styleConfig: new functionalButtonComponentManager.ButtonConfig()
.fontSize(20)
.fontColor(Color.Black)
},
},
// When OpenType is set to CHOOSE_ADDRESS, the callback must be onChooseAddress.
controller: new functionalButtonComponentManager.FunctionalButtonController()
.onChooseAddress((err, data) => {
if (err) {
// Error processing.
hilog.error(0x0000, "testTag", "error： %{public}d %{public}s", err.code, err.message);
return;
}
// Success processing.
hilog.info(0x0000, "testTag", "succeeded in choosing address");
// Obtain address information.
let userName: string = data.userName;
let mobileNumber: string = data.mobileNumber as string;
let countryCode: string = data.countryCode as string;
let provinceName: string = data.provinceName as string;
let cityName: string = data.cityName as string;
let districtName: string = data.districtName as string;
let streetName: string = data.streetName as string;
let detailedAddress: string = data.detailedAddress;
})
})
}.width('100%')
}.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-button-invoice-title-V14
爬取时间: 2025-04-29 21:53:33
来源: Huawei Developer
场景介绍
本章节将向您介绍如何使用选择发票抬头Button功能，开发者可调用对应Button组件跳转发票抬头选择页面，供用户完成已保存发票抬头的选择。
前提条件
参见开发前提。
效果图展示
单击“选择发票抬头”按钮，拉起选择发票抬头界面可选择已保存发票，也可单击“管理/新增发票抬头”进入新增企业/个人发票抬头界面（完整流程请参考获取发票抬头）。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170146.77671902261683206245983356225247:50001231000000:2800:6FF4B130C04089CA65C27764505FE9E82EEF928AE9D7489CF0A4BABFA56374FB.png)
开发步骤
1.
```typescript
import { FunctionalButton, functionalButtonComponentManager } from '@kit.ScenarioFusionKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.  其他参数请参考：FunctionalButton（Button组件）。
```typescript
@Entry
@Component
struct Index {
build() {
Row() {
Column() {
// Declare FunctionalButton.
FunctionalButton({
params: {
// OpenType.CHOOSE_INVOICE_TITLE indicates that the button is used to select an invoice title.
openType: functionalButtonComponentManager.OpenType.CHOOSE_INVOICE_TITLE,
label: '选择发票抬头',
// Adjust the button style.
styleOption: {
bgColor: functionalButtonComponentManager.ColorType.DEFAULT,
size: functionalButtonComponentManager.SizeType.DEFAULT,
plain: false,
disabled: false,
loading: false,
hoverClass: functionalButtonComponentManager.HoverClassType.HOVER_CLASS,
hoverStartTime: 0,
hoverStayTime: 0,
styleConfig: new functionalButtonComponentManager.ButtonConfig()
.fontSize(20)
.fontColor(Color.Black)
},
},
// When OpenType is set to CHOOSE_INVOICE_TITLE, the callback must be onChooseInvoiceTitle.
controller: new functionalButtonComponentManager.FunctionalButtonController()
.onChooseInvoiceTitle((err, data) => {
if (err) {
// Error processing.
hilog.error(0x0000, "testTag", "error： %{public}d %{public}s", err.code, err.message);
return;
}
// Success processing.
hilog.info(0x0000, "testTag", "succeeded in obtaining invoice title");
// Obtain invoice information.
let type: string = data.type;
let title: string = data.title;
let taxNumber: string = data.taxNumber;
let companyAddress: string | undefined = data.companyAddress;
let telephone: string | undefined = data.telephone;
let bankName: string | undefined = data.bankName;
let bankAccount: string | undefined = data.bankAccount;
})
})
}
.width('100%')
}
.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-button-selecting-point-V14
爬取时间: 2025-04-29 21:53:47
来源: Huawei Developer
场景介绍
本章节将向您介绍如何使用地图选点Button功能，开发者可调用Button组件拉起Map Kit的地图选点页面，用户在地图中选择位置后，位置相关信息返回Button界面。
该场景暂不支持2in1设备。
前提条件
参见开发准备。
效果图展示
单击“地图选点”按钮拉起地图选点页面。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170147.51416778214178311062413068181512:50001231000000:2800:F13380FEA30329FC1C67ECE0FCFEF4189712DB473F8E8861E24F8BC608B14A32.png)
开发步骤
1.
```typescript
import { FunctionalButton, functionalButtonComponentManager } from '@kit.ScenarioFusionKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.  其他参数请参考：FunctionalButton（Button组件）。
```typescript
@Entry
@Component
struct Index {
build() {
Row() {
Column() {
// Declare FunctionalButton.
FunctionalButton({
params: {
// OpenType.CHOOSE_LOCATION indicates that the button is used to select a location on the map.
openType: functionalButtonComponentManager.OpenType.CHOOSE_LOCATION,
label: '地图选点',
// Adjust the button style.
styleOption: {
bgColor: functionalButtonComponentManager.ColorType.DEFAULT,
size: functionalButtonComponentManager.SizeType.DEFAULT,
plain: false,
disabled: false,
loading: false,
hoverClass: functionalButtonComponentManager.HoverClassType.HOVER_CLASS,
hoverStartTime: 0,
hoverStayTime: 0,
styleConfig: new functionalButtonComponentManager.ButtonConfig()
.fontSize(20)
.fontColor(Color.Black)
},
},
// When OpenType is set to CHOOSE_LOCATION, the callback must be onChooseLocation.
controller: new functionalButtonComponentManager.FunctionalButtonController()
.onChooseLocation((err, data) => {
if (err) {
// Error processing.
hilog.error(0x0000, "testTag", "error： %{public}d %{public}s", err.code, err.message);
return;
}
// Success processing.
hilog.info(0x0000, "testTag", "succeeded in choosing location");
let name: string = data.name;
let address: string = data.address;
let longitude: number = data.longitude;
let latitude: number = data.latitude;
})
})
}
.width('100%')
}
.height('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-button-permissiononsetting-V14
爬取时间: 2025-04-29 21:54:00
来源: Huawei Developer
场景介绍
本章节将向您介绍如何使用权限设置Button，开发者可调用对应Button组件，二次拉起权限设置弹框。
仅支持UIAbility/UIExtensionAbility。
在调用此接口前，应用需要先调用requestPermissionsFromUser，如果用户在首次权限设置弹框时已授权，调用当前接口将无法拉起二次授权页面。
前提条件
效果图展示
单击“请求用户授权”按钮触发首次权限设置弹框，选择“不允许”后，单击“权限设置”按钮拉起二次授权页面。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150020.23141534719105063373549835579201:50001231000000:2800:D1CC377648D05F79637EF0483EC87FA48DDB65027BE240124207667DB1CAAE11.png)
开发步骤
1.
```typescript
import { FunctionalButton, functionalButtonComponentManager } from '@kit.ScenarioFusionKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { abilityAccessCtrl, common, PermissionRequestResult } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.  其他参数请参考：FunctionalButton（Button组件）。
```typescript
@Entry
@Component
struct Index {
build() {
Row() {
Column({ space: 3 }) {
// Invoke the requestPermissionsFromUser interface Button.
Button('请求用户授权')
.fontSize(20)
.fontColor(Color.Black)
.onClick(() => {
let atManager: abilityAccessCtrl.AtManager = abilityAccessCtrl.createAtManager();
let context: Context = this.getUIContext().getHostContext() as common.UIAbilityContext;
try {
// Add the ohos.permission.READ_CALENDAR, ohos.permission.WRITE_CALENDAR permission to the module.json5 file.
atManager.requestPermissionsFromUser(context,
['ohos.permission.READ_CALENDAR', 'ohos.permission.WRITE_CALENDAR'],
(err: BusinessError, data: PermissionRequestResult) => {
if (err) {
hilog.error(0x0000, "testTag", "failed in requesting Permissions from user : %{public}d %{public}s",
err.code, err.message);
} else {
hilog.info(0x0000, "testTag", 'data permissions: %{public}s', data.permissions?.join(','));
hilog.info(0x0000, "testTag", 'data authResults: %{public}s', data.authResults?.join(','));
hilog.info(0x0000, "testTag", 'data dialogShownResults: %{public}s',data.dialogShownResults?.join(','));
}
})
} catch (err) {
hilog.error(0x0000, "testTag", "error： %{public}d %{public}s", err.code, err.message);
}
})
// Declare FunctionalButton.
FunctionalButton({
params: {
// OpenType.PERMISSION_SETTING indicates that the button is used to set permission.
openType: functionalButtonComponentManager.OpenType.PERMISSION_SETTING,
label: '权限设置',
permissionListParam: ['ohos.permission.READ_CALENDAR', 'ohos.permission.WRITE_CALENDAR'],
// Adjust the button style.
styleOption: {
styleConfig: new functionalButtonComponentManager.ButtonConfig()
.fontSize(20)
.fontColor(Color.Black)
},
},
// When OpenType is set to PERMISSION_SETTING, the callback must be onPermissionSetting.
controller: new functionalButtonComponentManager.FunctionalButtonController().onPermissionSetting((err,
data) => {
if (err) {
// Error processing.
hilog.error(0x0000, "testTag", "error： %{public}d %{public}s", err.code, err.message);
return;
}
// Success processing.
hilog.info(0x0000, "testTag", "succeeded in setting permission ");
let result = data.permissionResult;
result.forEach(res => {
hilog.info(0x0000, "testTag", "data: %{public}s", String(res));
})
})
})
}
.width('100%')
}
.height('100%')
}
}
```
3.  其他参数请参考：FunctionalButton（Button组件）。
-  其他参数请参考：FunctionalButton（Button组件）。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-api-information-attribute-V14
爬取时间: 2025-04-29 21:54:14
来源: Huawei Developer
通过API获取系统信息属性
场景介绍
Scenario Fusion Kit提供获取系统信息属性API，调用该接口可以获取设备、网络状态、屏幕、语言、主题等系统信息属性。
接口说明
以下是获取系统信息属性的接口说明，更多接口及使用方法请参见API参考。
| 接口名 | 描述 |
| --- | --- |
| getSystemInfoSync(properties?: Array<SystemInfoType>): SystemInfo | 获取系统信息属性的方法，支持获取设备、网络状态、屏幕、语言、主题等系统信息的请求对象，包含请求参数。 说明 getSystemInfoSync接口暂不支持获取windowWidth、windowHeight、statusBarHeight和screenSafeArea属性，如需获取可使用getSystemInfo接口。  |
接口名
描述
getSystemInfoSync(properties?: Array<SystemInfoType>):SystemInfo
获取系统信息属性的方法，支持获取设备、网络状态、屏幕、语言、主题等系统信息的请求对象，包含请求参数。
getSystemInfoSync接口暂不支持获取windowWidth、windowHeight、statusBarHeight和screenSafeArea属性，如需获取可使用getSystemInfo接口。
开发步骤
1.
```typescript
import { atomicService } from '@kit.ScenarioFusionKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.
```typescript
let stateArray: Array<atomicService.SystemInfoType> =
['brand', 'deviceModel', 'screenWidth', 'screenHeight', 'language',
'osFullName', 'fontSizeSetting', 'sdkApiVersion', 'bluetoothEnabled',
'wifiEnabled', 'locationEnabled', 'deviceOrientation', 'theme']
try {
let data = atomicService.getSystemInfoSync(stateArray)
hilog.info(0x0000, 'testTag','succeeded in getting system info');
let brand : string | undefined = data.brand;
let deviceModel : string | undefined = data.deviceModel;
let screenWidth : number | undefined = data.screenWidth;
let screenHeight : number | undefined = data.screenHeight;
let language : string | undefined = data.language;
let osFullName : string | undefined = data.osFullName;
let fontSizeSetting : number | undefined = data.fontSizeSetting;
let sdkApiVersion : number | undefined = data.sdkApiVersion;
let bluetoothEnabled : boolean | undefined = data.bluetoothEnabled;
let wifiEnabled : boolean | undefined = data.wifiEnabled;
let locationEnabled : boolean | undefined = data.locationEnabled;
let deviceOrientation : string | undefined = data.deviceOrientation;
let theme : ColorMode | undefined = data.theme;
} catch (error) {
hilog.error(0x0000, 'testTag', 'failReason: %{public}d %{public}s', error.code, error.message);
}
```
通过API异步获取系统信息属性
场景介绍
Scenario Fusion Kit提供获取系统信息属性API，调用该接口可以获取设备、网络状态、屏幕、语言、主题等系统信息属性。
接口说明
以下是使用Promise异步回调获取系统信息属性的接口说明，更多接口及使用方法请参见API参考。
| 接口名 | 描述 |
| --- | --- |
| getSystemInfo(properties?: Array<SystemInfoType>): Promise<SystemInfo> | 获取系统信息属性的方法，支持获取设备、网络状态、屏幕、语言、主题等系统信息的请求对象，包含请求参数。 |
接口名
描述
getSystemInfo(properties?: Array<SystemInfoType>): Promise<SystemInfo>
获取系统信息属性的方法，支持获取设备、网络状态、屏幕、语言、主题等系统信息的请求对象，包含请求参数。
开发步骤
1.
```typescript
import { atomicService } from '@kit.ScenarioFusionKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { window } from '@kit.ArkUI';
```
2.
通过API获取系统设置属性
场景介绍
Scenario Fusion Kit提供获取系统设置属性API，调用该接口可以获取蓝牙、定位、wifi开关信息，以及设备方向信息等系统信息属性。
接口说明
以下是获取系统设置属性的接口说明，更多接口及使用方法请参见API参考。
| 接口名 | 描述 |
| --- | --- |
| getSystemSetting(properties?: Array<SystemSettingType>): SystemSettingInfo | 获取系统设置属性的方法，支持获取蓝牙、定位、wifi开关信息，以及设备方向信息的请求对象。 |
接口名
描述
getSystemSetting(properties?: Array<SystemSettingType>):SystemSettingInfo
获取系统设置属性的方法，支持获取蓝牙、定位、wifi开关信息，以及设备方向信息的请求对象。
开发步骤
1.
```typescript
import { atomicService } from '@kit.ScenarioFusionKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.
```typescript
let stateArray: Array<atomicService.SystemSettingType> =
['bluetoothEnabled', 'locationEnabled', 'deviceOrientation', 'wifiEnabled']
try {
let data = atomicService.getSystemSetting(stateArray)
hilog.info(0x0000, 'testTag','succeeded in getting system setting info');
let bluetoothEnabled : boolean | undefined = data.bluetoothEnabled;
let locationEnabled : boolean | undefined = data.locationEnabled;
let deviceOrientation : string | undefined = data.deviceOrientation;
let wifiEnabled : boolean | undefined = data.wifiEnabled;
} catch (error) {
hilog.error(0x0001, 'testTag', 'failReason: %{public}d %{public}s', error.code, error.message);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-api-path-conversion-V14
爬取时间: 2025-04-29 21:54:27
来源: Huawei Developer
场景介绍
Scenario Fusion Kit提供文件路径转换的API，在HarmonyOS 4.x到HarmonyOS NEXT/5.0.x的升级场景和克隆场景，调用该接口可以将源文件路径转换为目标文件路径。
接口说明
以下是获取转换文件uri信息的接口说明，更多接口及使用方法请参见API参考。
| 接口名 | 描述 |
| --- | --- |
| convertFileUris(sourceFileUris: Array<string>): Promise<Array<FileUriResult>> | 获取转换文件uri信息的请求对象。 |
接口名
描述
convertFileUris(sourceFileUris: Array<string>): Promise<Array<FileUriResult>>
获取转换文件uri信息的请求对象。
开发步骤
1.
```typescript
import { fileUriService } from '@kit.ScenarioFusionKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.
```typescript
try {
let sourceFileUris: Array<string> =
['100','content://media/external/files/10', '/storage/emulated/0/Pictures/test.gif'];
fileUriService.convertFileUris(sourceFileUris).then(result => {
hilog.info(0x0000, 'testTag', 'succeeded in converting file uris');
result.forEach(data => {
switch (data.targetType) {
case fileUriService.TargetType.UNKNOWN:
hilog.info(0x0000, 'testTag', 'unknown type');
break;
case fileUriService.TargetType.MEDIA:
hilog.info(0x0000, 'testTag', 'media type');
break;
case fileUriService.TargetType.FILE:
hilog.info(0x0000, 'testTag', 'file type');
break;
}
})
}).catch((error: BusinessError) => {
hilog.error(0x0000, 'testTag', 'Promise error: %{public}d %{public}s', error.code, error.message);
});
} catch (error) {
hilog.error(0x0000, 'testTag', 'failReason: %{public}d %{public}s', error.code, error.message);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-intelligent-filling-V14
爬取时间: 2025-04-29 21:54:40
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-introduction-typical-scenario-V14
爬取时间: 2025-04-29 21:56:06
来源: Huawei Developer
如下展示两种智能填充的典型场景。
实名购票场景
示例一：智能识别剪贴板内容，一键复制，一键填充。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150021.89253474941232146387985264551925:50001231000000:2800:E0BF652C6BEC2425977E0D958A430FB0AC0BE903CEF93A4C1CFF4DA0C1ABA01B.jpg)
示例二：根据用户输入，智能关联设备上历史表单输入、华为账号等信息提供输入建议，一键填充。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150021.61813684465766683985016063056170:50001231000000:2800:57F62A43A2E126E37A8722D89F947D3AB6D05C62978FEEB0727CF746087BF850.png)
填写收货地址场景
示例一：智能识别剪贴板内容，一键复制，一键填充。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150021.45041455519808535024884534113427:50001231000000:2800:2899F27F7CBACB601CF912FDB5C78F61F2A0FE17E6F022A0AC6158AA42B09A86.jpg)
示例二：根据用户输入，智能关联设备上历史表单输入、华为账号等信息提供输入建议，一键填充。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150021.45695156233532869359756987964899:50001231000000:2800:55815C1A1A1CE178888C199F36C457480D6FAB386F381264FDE35FF962B6FB31.png)
示例代码
```typescript
import { router } from '@kit.ArkUI';
import { autoFillManager } from '@kit.AbilityKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
@Entry
@Component
struct SmartFill {
@State isClicked: boolean = false;
build() {
Column({ space: 5 }) {
Row() {
Text('昵称：').textAlign(TextAlign.End).width('25%')
TextInput().width('75%').contentType(ContentType.NICKNAME).selectionMenuHidden(true)
}
Row() {
Text('姓名：').textAlign(TextAlign.End).width('25%')
TextInput().width('75%').contentType(ContentType.PERSON_FULL_NAME).selectionMenuHidden(true)
}
Row() {
Text('手机号码：').textAlign(TextAlign.End).width('25%')
TextInput().width('75%').contentType(ContentType.PHONE_NUMBER).selectionMenuHidden(true)
}
Row() {
Text('邮箱：').textAlign(TextAlign.End).width('25%')
TextInput().width('75%').contentType(ContentType.EMAIL_ADDRESS).selectionMenuHidden(true)
}
Row() {
Text('身份证号：').textAlign(TextAlign.End).width('25%')
TextInput().width('75%').contentType(ContentType.ID_CARD_NUMBER).selectionMenuHidden(true)
}
Row() {
Text('地址：').textAlign(TextAlign.End).width('25%')
TextInput().width('75%').contentType(ContentType.FORMAT_ADDRESS).selectionMenuHidden(true)
}
Button('保存')
.onClick(() => {
if (!this.isClicked) {
// Save recent forms actively.
try {
autoFillManager.requestAutoSave(this.getUIContext())
} catch (err) {
let e: BusinessError = err as BusinessError;
hilog.error(0x0000, 'DemoTest', 'error: %{public}d %{public}s', e.code, e.message);
}
this.isClicked = true;
// Set a timeout period to prevent saving recent form data repeatedly.
setTimeout(() => {
this.isClicked = false;
}, 1000)
// Or switch to another page through routing to trigger the saving of recent forms.
router.pushUrl({
url: 'xxx'
})
}
})
.width("50%")
}
.alignItems(HorizontalAlign.Center)
.height('100%')
.width('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-intelligentfilling-amend-V14
爬取时间: 2025-04-29 21:56:19
来源: Huawei Developer
在填写实名信息表单的场景，表单中存在身份证和其他证件输入，其中，多种证件号共用一个输入框，ContentType.ID_CARD_NUMBER目前只支持身份证号的推荐、填充，不支持其他类型的证件，需要开发者根据输入场景动态配置输入框的ContentType，只在身份证输入场景下使用ContentType.ID_CARD_NUMBER。
效果图
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150021.64387984718081689814128714571571:50001231000000:2800:BE12029CDE548BB86BD4DA35C584B512DC643A1AA80F76DB49061C398648D446.png)
示例代码
```typescript
import { hilog } from '@kit.PerformanceAnalysisKit';
import { autoFillManager } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { router } from '@kit.ArkUI';
@Entry
@Component
struct SmartFill {
// ContentType corresponding to the certificate number type. In this case, ContentType is set to the type value corresponding to ID card number by default.
@State type: ContentType | undefined = ContentType.ID_CARD_NUMBER;
@State isClicked: boolean = false;
build() {
Column({ space: 5 }) {
Row() {
Text('证件类型：').textAlign(TextAlign.End).width('25%')
Select([{ value: '身份证' }, { value: '港澳通行证' }])
.width('75%')
.selected(0)
.value('身份证')
.onSelect((index: number, value: string) => {
// Change the value of ContentType corresponding to the certificate number input component when a user selects the ID type.
hilog.info(0x000, 'testTag', 'Select item changed, value: ' + value + ', index: ' + index);
if (value === "身份证") {
this.type = ContentType.ID_CARD_NUMBER;
} else if (value === "港澳通行证") {
this.type = undefined;
}
hilog.info(0x000, 'testTag', 'ContentType changed, current type: ' + this.type);
})
}
Row() {
Text('姓名：').textAlign(TextAlign.End).width('25%')
TextInput().width('75%').contentType(ContentType.PERSON_FULL_NAME)
}
Row() {
Text('手机号码：').textAlign(TextAlign.End).width('25%')
TextInput().width('75%').contentType(ContentType.PHONE_NUMBER)
}
Row() {
Text('证件号码').textAlign(TextAlign.End).width('25%')
TextInput().width('75%').contentType(this.type)
}
Button('保存')
.onClick(() => {
if (!this.isClicked) {
// Save recent forms actively.
try {
autoFillManager.requestAutoSave(this.getUIContext())
} catch (err) {
let e: BusinessError = err as BusinessError;
hilog.error(0x0000, 'DemoTest', 'error: %{public}d %{public}s', e.code, e.message);
}
this.isClicked = true;
// Set a timeout period to prevent saving recent form data repeatedly.
setTimeout(() => {
this.isClicked = false;
}, 1000)
// Or switch to another page through routing to trigger the saving of recent forms.
router.pushUrl({
url: 'xxx'
})
}
})
.width("50%")
}
.alignItems(HorizontalAlign.Center)
.height('100%')
.width('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-intelligentfilling-autocomplete-V14
爬取时间: 2025-04-29 21:56:33
来源: Huawei Developer
在填写地址表单场景时，当应用使用了所在地区的地址选择器，智能填充不支持对地址选择器进行填充，需要开发者对表单中的地址字段进行开发。
效果图
地址表单中的所在地区能根据详细地址内容自动补全，当补全内容不符合预期时，可通过地址选择器进行修改。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150021.31893921846171722851019624482527:50001231000000:2800:FE2801A6FD7D0FCA0B770E76B82C9A7704F3FE6277A9DC5A860215376B608590.png)
示例代码
```typescript
import { util } from '@kit.ArkTS';
import { i18n } from '@kit.LocalizationKit';
import { sceneMap, site } from '@kit.MapKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { geoLocationManager } from '@kit.LocationKit';
import { abilityAccessCtrl, autoFillManager, common, PermissionRequestResult, Permissions } from '@kit.AbilityKit';
const AUTHED = 0;
const TIME_OUT = 100;
// Default longitude and latitude. The following uses the longitude and latitude of Tiananmen, Beijing as an example.
const INIT_LAT = 39.5;
const INIT_LON = 116.2;
const ENGLISH = 'en';
const SIMPLIFIED_CHINESE = 'zh_CN';
const PERMISSIONS: Array<Permissions> = ['ohos.permission.APPROXIMATELY_LOCATION'];
const ADMINISTRATIVE_REGION: Array<string> =
['countryName', 'adminLevel1', 'adminLevel2', 'adminLevel3', 'adminLevel4'];
interface PersonInfo {
name?: string;
phone?: string;
email?: string;
idCard?: string;
region?: string;
stressAddress?: string;
}
interface RequestParam {
requestTag: string;
requestText: string;
}
interface Location {
latitude: number;
longitude: number;
}
// Display the authorization pop-up.
async function reqPermissionsFromUser(permissions: Array<Permissions>,
context: common.UIAbilityContext): Promise<PermissionRequestResult> {
let atManager: abilityAccessCtrl.AtManager = abilityAccessCtrl.createAtManager();
return await atManager.requestPermissionsFromUser(context, permissions);
}
// Throttle function.
function debounce(func: () => void, wait: number = TIME_OUT): Function {
let timeout: number | null = null;
return () => {
timeout && clearTimeout(timeout);
timeout = setTimeout(() => {
func();
clearTimeout(timeout);
}, wait);
};
}
@Extend(Text)
function textStyle() {
.width(64)
.textAlign(TextAlign.End)
}
@Entry
@Component
struct Index {
@State personInfo: PersonInfo = {};
@State isClicked: boolean = false;
// Whether the user has triggered information input.
private isUserInput: boolean = false;
private location: Location = {
latitude: INIT_LAT,
longitude: INIT_LON,
};
private currentRequestTag: string = '';
private handleAddressChange = (request: RequestParam) => {
return debounce(async () => {
this.autoCompleteAddress(request);
});
};
aboutToAppear() {
reqPermissionsFromUser(PERMISSIONS, getContext(this) as common.UIAbilityContext)
.then((permissionRequestResult: PermissionRequestResult) => {
if (permissionRequestResult.authResults[0] === AUTHED) {
// The API for obtaining location information can be called only under authorization.
geoLocationManager.getCurrentLocation((err, location: geoLocationManager.Location) => {
if (err) {
hilog.error(0x0000, 'testTag', `Failed to get location, code: ${err?.code}, message: ${err?.message}`);
return;
}
hilog.info(0x0000, 'testTag', `Succeeded in obtaining the current location of the user`);
this.location.latitude = location.latitude;
this.location.longitude = location.longitude;
})
}
})
.catch((err: BusinessError) => {
hilog.error(0x0000, 'testTag', `Failed request permissions, code: ${err?.code}, message: ${err?.message}`);
})
}
public isUsLanguage(): boolean {
let result: string = '';
try {
result = i18n.System.getSystemLanguage();
} catch (error) {
hilog.error(0x0000, 'testTag', 'Failed to get system language');
}
return result.toLowerCase() === 'en-latn-us';
}
async autoCompleteAddress(request: RequestParam): Promise<void> {
try {
let params: site.SearchByTextParams = {
query: request.requestText,
// Longitude and latitude to which search results need to be biased.
location: {
latitude: this.location.latitude,
longitude: this.location.longitude
},
language: this.isUsLanguage() ? ENGLISH : SIMPLIFIED_CHINESE,
isChildren: true
};
const result = await site.searchByText(params);
if (result.sites) {
let region: string = '';
let addressComponent = result.sites[0].addressComponent;
// Traverse the administrative region level of the current address.
for (let item of ADMINISTRATIVE_REGION) {
if (addressComponent[item] === undefined) {
break;
}
region += addressComponent[item];
}
// Prevent repeated searches that may lead to inconsistent results.
if (request.requestTag === this.currentRequestTag) {
this.personInfo.region = region;
}
}
} catch (error) {
hilog.error(0x0000, 'testTag', `Failed to search location, code: ${error.code}, message: ${error.message}`);
}
hilog.info(0x0000, 'testTag', 'Succeeded in searching location');
}
onRegionClick(): void {
// After a user selects an administrative region, display only search results from the selected region to prevent prolonged queries.
this.currentRequestTag = util.generateRandomUUID();
let districtSelectOptions: sceneMap.DistrictSelectOptions = {
countryCode: 'CN',
};
sceneMap.selectDistrict(getContext(this), districtSelectOptions).then((data) => {
hilog.info(0x0000, 'testTag', 'SelectDistrict', 'Succeeded  in selecting district.');
let region = '';
for (let i = 0; i < data?.districts?.length; i++) {
region += data.districts[i].name;
}
this.personInfo.region = region;
}).catch((err: BusinessError) => {
hilog.error(0x0000, 'testTag', `Failed to select district, code: ${err.code}, message: ${err.message}`);
});
}
searchRegionByAddress(val: string): void {
let tag: string = util.generateRandomUUID();
this.currentRequestTag = tag;
let param: RequestParam = {
requestTag: tag,
requestText: val
}
// For the manual user input scenario, dithering processing is required. For the automatic input scenario of SmartFill, only the query processing is required.
if (this.isUserInput) {
this.handleAddressChange(param)();
} else {
this.autoCompleteAddress(param);
}
}
build() {
Column({ space: 8 }) {
Row({ space: 8 }) {
Text('姓名').textStyle()
TextInput({ text: this.personInfo.name, placeholder: '姓名' })
.layoutWeight(1)
.contentType(ContentType.PERSON_FULL_NAME)
.onChange((val: string) => {
this.personInfo.name = val;
})
}
Row({ space: 8 }) {
Text('联系电话').textStyle()
TextInput({ text: this.personInfo.phone, placeholder: '手机号码' })
.layoutWeight(1)
.contentType(ContentType.PHONE_NUMBER)
.onChange((val: string) => {
this.personInfo.phone = val;
})
}
Row({ space: 8 }) {
Text('身份证号').textStyle()
TextInput({ text: this.personInfo.idCard, placeholder: '身份证信息' })
.layoutWeight(1)
.contentType(ContentType.ID_CARD_NUMBER)
.onChange((val: string) => {
this.personInfo.idCard = val;
})
}
Row({ space: 8 }) {
Text('邮件地址').textStyle()
TextInput({ text: this.personInfo.email, placeholder: '电子邮件信息' })
.layoutWeight(1)
.contentType(ContentType.EMAIL_ADDRESS)
.onChange((val: string) => {
this.personInfo.email = val;
})
}
Row({ space: 8 }) {
Text('所在地区').textStyle()
TextArea({ text: this.personInfo.region, placeholder: '地区信息' })
.layoutWeight(1)
.backgroundColor($r('sys.color.ohos_id_color_card_bg'))
.placeholderColor($r('sys.color.ohos_id_color_text_secondary'))
.fontSize($r('sys.float.ohos_id_text_size_body1'))
.fontColor($r('sys.color.ohos_id_color_text_primary'))
.onClick(() => this.onRegionClick())
.focusable(false)
}
Row({ space: 8 }) {
Text('详细地址').textStyle()
TextInput({ text: this.personInfo.stressAddress, placeholder: '小区门牌信息' })
.layoutWeight(1)
.contentType(ContentType.DETAIL_INFO_WITHOUT_STREET)
.onDidInsert(() => {
// Triggered when a user inputs data through an input method.
this.isUserInput = true;
})
.onDidDelete((val: DeleteValue) => {
// Triggered when a user deletes data through an input method.
if (val?.deleteValue?.length > 0) {
this.isUserInput = true;
}
})
.onChange((val: string) => {
this.personInfo.stressAddress = val;
if (val && val.trim().length > 0) {
this.searchRegionByAddress(val);
} else {
this.currentRequestTag = util.generateRandomUUID();
this.personInfo.region = '';
}
this.isUserInput = false;
})
}
Button('保存')
.width('50%')
.onClick(() => {
if (!this.isClicked) {
this.isClicked = true;
autoFillManager.requestAutoSave(this.getUIContext(), {
onSuccess: () => {
hilog.info(0x0000, 'testTag', 'Succeeded in saving request');
},
onFailure: () => {
hilog.info(0x0000, 'testTag', 'Failed to save request');
}
});
setTimeout(() => {
this.isClicked = false;
}, 2000);
}
})
}
.padding({ left: 16, right: 16 })
.backgroundColor($r('sys.color.ohos_id_color_list_card_bg'))
.alignItems(HorizontalAlign.Center)
.height('100%')
.width('100%')
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-intelligentfilling-explain-V14
爬取时间: 2025-04-29 21:56:46
来源: Huawei Developer
智能填充将从华为账号、剪贴板、最近日程、联系人和历史表单输入获取数据，以提供填充建议。
| 名称  | 说明  |
| --- | --- |
|  数据源推荐优先级   | 多输入框场景数据源推荐优先级：剪贴板>历史表单输入>华为账号>联系人。  |
| 单输入框场景数据源推荐优先级：剪贴板>日程>华为账号。  |
名称
说明
数据源推荐优先级
多输入框场景数据源推荐优先级：剪贴板>历史表单输入>华为账号>联系人。
单输入框场景数据源推荐优先级：剪贴板>日程>华为账号。
上述优先级为默认推荐排序。智能填充在匹配推荐时会根据数据匹配度从高到低进行排序（剪贴板数据源优先级始终是最高的）。
填充数据源推荐方式说明
| 数据源  | 是否主动推荐  | 是否匹配推荐  |
| --- | --- | --- |
| 华为账号  | 是  | 是  |
| 联系人  | 否  | 是  |
| 日程  | 是  | 否  |
| 剪贴板  | 是  | 是  |
| 历史表单输入  | 否  | 是  |
数据源
是否主动推荐
是否匹配推荐
华为账号
是
是
联系人
否
是
日程
是
否
剪贴板
是
是
历史表单输入
否
是
剪贴板数据源推荐场景目前仅支持中文姓名和中文地址。
主动推荐与匹配推荐区别
| 名称  | 说明  |
| --- | --- |
| 主动推荐  | 点击输入组件时，智能填充将主动提供填充建议。最多展示2条推荐数据。  |
| 匹配推荐  | 根据输入组件中已经输入的字符进行数据源匹配，智能填充将匹配到的数据提供填充建议。最多展示3条推荐数据。  |
名称
说明
主动推荐
匹配推荐
部分场景数据推荐来源说明
| 名称  | 说明  |
| --- | --- |
| 地址单输入框场景  | 只推荐来自剪贴板和日程的地点信息。  |
| 昵称单输入框场景  | 只推荐华为账号的昵称。  |
| 身份证号推荐逻辑  | 若设备未设置锁屏密码，不会推荐来自华为账号和历史表单输入的身份证信息。当用户主动复制的情况下，仍可推荐来自剪贴板的身份证信息。  |
| 设备登录不同类型的华为账号场景  | 设备登录国内成人账号时，支持剪贴板、日程、联系人、华为账号、历史表单输入数据源；其他情况只支持剪贴板、日程和联系人数据源。  |
名称
说明
地址单输入框场景
只推荐来自剪贴板和日程的地点信息。
昵称单输入框场景
只推荐华为账号的昵称。
身份证号推荐逻辑
若设备未设置锁屏密码，不会推荐来自华为账号和历史表单输入的身份证信息。当用户主动复制的情况下，仍可推荐来自剪贴板的身份证信息。
设备登录不同类型的华为账号场景
设备登录国内成人账号时，支持剪贴板、日程、联系人、华为账号、历史表单输入数据源；其他情况只支持剪贴板、日程和联系人数据源。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-intelligentfilling-appendix-V14
爬取时间: 2025-04-29 21:57:00
来源: Huawei Developer
华为账号昵称
| 名称  | 说明  |
| --- | --- |
| NICKNAME  | 昵称，如“Vivian”。  |
名称
说明
NICKNAME
昵称，如“Vivian”。
用户姓名
| 名称  | 说明  |
| --- | --- |
| PERSON_FULL_NAME  | 姓名，如“张三”。  |
| PERSON_LAST_NAME  | 姓氏，如“张”。  |
| PERSON_FIRST_NAME  | 名字，如“三”。  |
名称
说明
PERSON_FULL_NAME
姓名，如“张三”。
PERSON_LAST_NAME
姓氏，如“张”。
PERSON_FIRST_NAME
名字，如“三”。
PERSON_FULL_NAME和（PERSON_LAST_NAME，PERSON_FIRST_NAME）不能同时在同一个表单中使用。
联系方式
| 名称  | 说明  |
| --- | --- |
| PHONE_NUMBER  | 手机号，如“188******88”。  |
| EMAIL_ADDRESS  | 邮箱地址，如“a****t@huawei.com”。  |
名称
说明
PHONE_NUMBER
手机号，如“188******88”。
EMAIL_ADDRESS
邮箱地址，如“a****t@huawei.com”。
身份信息
| 名称  | 说明  |
| --- | --- |
| ID_CARD_NUMBER  | 身份证号，如“3201***********123”。  |
名称
说明
ID_CARD_NUMBER
身份证号，如“3201***********123”。
ID_CARD_NUMBER目前只支持身份证号的推荐、填充，不支持其他类型的证件，可参考动态修改ContentType值动态配置输入框的ContentType。
地址信息
| 名称  | 说明  |
| --- | --- |
| FULL_STREET_ADDRESS  | 带街道详细地址，如“雨花街道玉兰路98号”。  |
| FORMAT_ADDRESS  | 全量地址，如“中国江苏省南京市雨花台区雨花街道玉兰路98号”。  |
| DETAIL_INFO_WITHOUT_STREET  | 不带街道详细地址，如“玉兰路98号”。  |
名称
说明
FULL_STREET_ADDRESS
带街道详细地址，如“雨花街道玉兰路98号”。
FORMAT_ADDRESS
全量地址，如“中国江苏省南京市雨花台区雨花街道玉兰路98号”。
DETAIL_INFO_WITHOUT_STREET
不带街道详细地址，如“玉兰路98号”。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-tripartiteframework-V14
爬取时间: 2025-04-29 21:57:14
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-h5-V14
爬取时间: 2025-04-29 21:57:27
来源: Huawei Developer
本章节介绍在ArkWeb的Web组件加载H5文件如何实现智能填充功能。
前提条件
效果图
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150022.20786365769177973194178115610932:50001231000000:2800:A8B2AD65C20E7DD75CE5CB0B8F178F4DA34EC43E524ED4910F5AE89683DEDE3F.png)
示例代码
```typescript
import { webview } from '@kit.ArkWeb';
@Entry
@Component
struct Index {
controller: webview.WebviewController = new webview.WebviewController();
build() {
Column() {
// Load HTML5 files during component creation.
Web({ src: $rawfile("autofill_h5.html"), controller: this.controller })
}
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-reactnative-V14
爬取时间: 2025-04-29 21:57:41
来源: Huawei Developer
目前仅支持已适配HarmonyOS的三方框架应用使用。
HarmonyOS版React Native环境搭建请参考官方文档React Native环境搭建指导。
前提条件
开发准备
配置React Native已适配HarmonyOS的工程。
React Native输入框效果图
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150022.91824458473348967355032805288035:50001231000000:2800:F59AF26BCD8993A75A66953EFC993C5BB07DF7E05F85CA0E001C65F6A2FCF47D.png)
示例代码
在React Native输入框TextInput需要配置textContentType属性来支持智能填充，代码如下：
React Native框架中加载的H5页面效果图
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150022.52696251098454040119276006432697:50001231000000:2800:6A18B2B2AE2D8132B31D8637795BAEE15B751A46A0E13BDFF69B14BA3860C8C6.png)
React Native框架加载H5页面场景，通过给form表单的input输入框（form表单的子节点）配置autocomplete属性来支持智能填充，代码如下：
autofill_h5.html实现参考示例代码。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-flutter-V14
爬取时间: 2025-04-29 21:57:54
来源: Huawei Developer
目前仅支持已适配HarmonyOS的三方框架应用使用。
HarmonyOS版Flutter环境搭建请参考官方文档Flutter环境搭建指导。
前提条件
开发准备
配置Flutter已适配HarmonyOS的开发环境。
效果图与示例代码
请参考H5接入智能填充效果图。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-taro-V14
爬取时间: 2025-04-29 21:58:08
来源: Huawei Developer
目前仅支持已适配HarmonyOS的三方框架应用使用。
Taro及HarmonyOS版工程的搭建请参考官方文档Harmony Hybrid | Taro 文档。
前提条件
开发准备
配置Taro已适配HarmonyOS的开发环境。
效果图
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250328150022.88103036079390980176583538137813:50001231000000:2800:1C9E1A147B0E91BC666BC348B549FAA674B59966FE60567830D407D365954129.png)
示例代码
示例代码仅展示接入智能填充相关部分，请按照实际场景修改后使用。在Taro的Input组件（Form表单的子节点）中添加nativeProps属性，并配置nativeProps中autocomplete属性来支持智能填充，Form表单提交后，当页面导航发生变化时，满足历史表单输入保存的条件时会触发对应弹窗（建议使用HTML <button> 标签进行Form表单提交）。代码如下：
```typescript
import { View, Text, Input, Form } from "@tarojs/components";
import Taro, { useLoad } from "@tarojs/taro";
import "./index.scss";
export default function Demo() {
useLoad(() => {
console.log("Page loaded.");
});
function handleSubmit(e) {
Taro.request({
// Set url to the actual interface path.
url: "",
method: "POST",
});
}
return (
<Form onSubmit={handleSubmit}>
<View className="native-form">
<View className="form-item">
<Text className="col-md-4">昵称：</Text>
<View className="col-md-6">
<Input
className="form-value"
name="nickname"
type="text"
nativeProps={{ autocomplete: "nickname" }}
></Input>
</View>
</View>
<View className="form-item">
<Text className="col-md-4">姓名：</Text>
<View className="col-md-6">
<Input
className="form-value"
name="name"
type="text"
nativeProps={{ autocomplete: "name" }}
></Input>
</View>
</View>
<View className="form-item">
<Text className="col-md-4">手机号：</Text>
<View className="col-md-6">
<Input
className="form-value"
name="tel"
type="text"
nativeProps={{ autocomplete: "tel-national" }}
></Input>
</View>
</View>
<View className="form-item">
<Text className="col-md-4">邮箱：</Text>
<View className="col-md-6">
<Input
className="form-value"
name="email"
type="text"
nativeProps={{ autocomplete: "email" }}
></Input>
</View>
</View>
<View className="form-item">
<Text className="col-md-4">身份证：</Text>
<View className="col-md-6">
<Input
className="form-value"
name="idcard"
type="text"
nativeProps={{ autocomplete: "id-card-number" }}
></Input>
</View>
</View>
<View className="form-item">
<Text className="col-md-4">带街道地址：</Text>
<View className="col-md-6">
<Input
className="form-value"
name="street-address"
type="text"
nativeProps={{ autocomplete: "street-address" }}
></Input>
</View>
</View>
</View>
<View className="button-item">
<button className="button"> 提交</button>
</View>
</Form>
);
}
```
index.scss如下：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-mpass-V14
爬取时间: 2025-04-29 21:59:33
来源: Huawei Developer
目前仅支持已适配HarmonyOS的三方框架应用使用。
HarmonyOS版工程接入mPaas请参考官方文档：快速开始_移动开发平台 mPaaS(mPaaS)-阿里云帮助中心 (aliyun.com)。
前提条件
开发准备
配置mPaas已适配HarmonyOS的工程，并引入@mpaas/hriver依赖。
效果图与示例代码
请参考H5接入智能填充效果图。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-mappingrelationship-V14
爬取时间: 2025-04-29 21:59:47
来源: Huawei Developer
H5 autocomplete和HarmonyOS的ContentType的映射关系
| 输入场景  | 【H5】autocomplete  | 【ArkUI】ContentType  | 说明  |
| --- | --- | --- | --- |
| 昵称  | nickname  | NICKNAME  | 昵称，如“Vivian”。  |
| 姓名  | name  | PERSON_FULL_NAME  | 姓名，如“张三”。  |
| 姓氏  | family-name  | PERSON_LAST_NAME  | 姓氏，如“张”。  |
| 名字  | given-name  | PERSON_FIRST_NAME  | 名字，如“三”。  |
| 手机号  | tel-national  | PHONE_NUMBER  | 手机号，如“188******88”。  |
| 邮件地址  | email  | EMAIL_ADDRESS  | 邮箱地址，如“a****t@huawei.com”。  |
| 身份证号  | id-card-number  | ID_CARD_NUMBER  | 身份证号，如“3201***********123”。  |
| 地址  | street-address  | FULL_STREET_ADDRESS  | 带街道详细地址，如“雨花街道玉兰路98号"。  |
输入场景
【H5】autocomplete
【ArkUI】ContentType
说明
昵称
nickname
NICKNAME
昵称，如“Vivian”。
姓名
name
PERSON_FULL_NAME
姓名，如“张三”。
姓氏
family-name
PERSON_LAST_NAME
姓氏，如“张”。
名字
given-name
PERSON_FIRST_NAME
名字，如“三”。
手机号
tel-national
PHONE_NUMBER
手机号，如“188******88”。
邮件地址
email
EMAIL_ADDRESS
邮箱地址，如“a****t@huawei.com”。
身份证号
id-card-number
ID_CARD_NUMBER
身份证号，如“3201***********123”。
地址
street-address
FULL_STREET_ADDRESS
带街道详细地址，如“雨花街道玉兰路98号"。
autocomplete配置项name和（family-name，given-name）不能同时在同一个表单中使用。
React Native textContentType和HarmonyOS的ContentType的映射关系
| 输入场景  | 【React Native】textContentType  | 【ArkUI】ContentType  | 说明  |
| --- | --- | --- | --- |
| 昵称  | nickname  | NICKNAME  | 昵称，如“Vivian”。  |
| 姓名  | name  | PERSON_FULL_NAME  | 姓名，如“张三”。  |
| 姓氏  | familyName  | PERSON_LAST_NAME  | 姓氏，如“张”。  |
| 名字  | givenName  | PERSON_FIRST_NAME  | 名字，如“三”。  |
| 手机号  | telephoneNumber  | PHONE_NUMBER  | 手机号，如“188******88”。  |
| 邮件地址  | emailAddress  | EMAIL_ADDRESS  | 邮箱地址，如“a****t@huawei.com”。  |
| 身份证号  | idCardNumber  | ID_CARD_NUMBER  | 身份证号，如“3201***********123”。  |
| 全量地址  | formatAddress  | FORMAT_ADDRESS  | 全量地址，如“中国江苏省南京市雨花台区雨花街道玉兰路98号"。  |
| 街道详细地址  | fullStreetAddress  | FULL_STREET_ADDRESS  | 带街道详细地址，如“雨花街道玉兰路98号"。  |
| 详细地址  | detailInfoWithoutStreet  | DETAIL_INFO_WITHOUT_STREET  | 不带街道详细地址，如“玉兰路98号”。  |
输入场景
【React Native】textContentType
【ArkUI】ContentType
说明
昵称
nickname
NICKNAME
昵称，如“Vivian”。
姓名
name
PERSON_FULL_NAME
姓名，如“张三”。
姓氏
familyName
PERSON_LAST_NAME
姓氏，如“张”。
名字
givenName
PERSON_FIRST_NAME
名字，如“三”。
手机号
telephoneNumber
PHONE_NUMBER
手机号，如“188******88”。
邮件地址
emailAddress
EMAIL_ADDRESS
邮箱地址，如“a****t@huawei.com”。
身份证号
idCardNumber
ID_CARD_NUMBER
身份证号，如“3201***********123”。
全量地址
formatAddress
FORMAT_ADDRESS
全量地址，如“中国江苏省南京市雨花台区雨花街道玉兰路98号"。
街道详细地址
fullStreetAddress
FULL_STREET_ADDRESS
带街道详细地址，如“雨花街道玉兰路98号"。
详细地址
detailInfoWithoutStreet
DETAIL_INFO_WITHOUT_STREET
不带街道详细地址，如“玉兰路98号”。
textContentType配置项name和（familyName，givenName）不能同时在同一个表单中使用。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-button-frequently-asked-questions-V14
爬取时间: 2025-04-29 22:00:00
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-faq-1-V14
爬取时间: 2025-04-29 22:00:13
来源: Huawei Developer
现象描述
日志报错示例：
```typescript
login fail, error: {"code":1001502014,"message":"The app does not have the required scopes or permissions."}
```
解决措施
未申请Scope权限，请参考配置权限文档进行操作。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-faq-2-V14
爬取时间: 2025-04-29 22:00:27
来源: Huawei Developer
现象描述
日志报错示例：
```typescript
startAbility failed, code is 16000018, message is The application is not allow jumping to other applications when api version is above 11.
```
解决措施
需要执行命令手动开启限制开关。
```typescript
hdc shell param set persist.sys.abilityms.support.start_other_app true
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-faq-3-V14
爬取时间: 2025-04-29 22:00:40
来源: Huawei Developer
现象描述
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170150.04314942800427390818076308333096:50001231000000:2800:A242864B8A6B76865FF58C5D615319178F77FA89D7397BF4730450873DD4866F.jpg)
解决措施
在代码文件中设置.selectionMenuHidden(true)，使剪贴板粘贴框隐藏。
```typescript
Row() {
Text('收货人：').textAlign(TextAlign.End).width('25%')
TextInput().width('75%').contentType(ContentType.PERSON_FULL_NAME).selectionMenuHidden(true)
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/scenario-fusion-personal-data-V14
爬取时间: 2025-04-29 22:00:53
来源: Huawei Developer
最后修改时间：2024/05/31
此文档针对华为作为最终用户数据处理者，开发者作为最终用户数据控制者的数据处理进行说明，包括：
华为处理的个人数据清单
| 个人数据清单  | 使用目的  | 存留期  |
| --- | --- | --- |
| 个人基本资料  | 通过智能填充服务获取姓名用于给用户提供表单填充推荐。  | 可前往“设置 > 隐私和安全 > 智能填充 > 历史表单输入”删除保存的历史表单输入记录。  |
| 账号信息  | 通过智能填充服务获取昵称用于给用户提供表单填充推荐。  |
| 联系方式  | 通过智能填充服务获取手机号码、邮箱号用于给用户提供表单填充推荐。  |
| 位置信息  | 通过智能填充服务获取粗略位置信息用于给用户提供表单填充推荐。  |
| 身份信息  | 通过智能填充服务获取身份证信息用于给用户提供表单填充推荐。  |
| 应用信息  | 通过智能填充服务获取应用基本信息用于保存智能填充使用记录，并用于填充建议排序。  |
| 日程/日历信息  | 通过智能填充服务获取日程信息用于给用户提供表单填充推荐。  |
| 通讯信息  | 通过智能填充服务获取通讯录信息用于给用户提供表单填充推荐。  |
个人数据清单
使用目的
存留期
个人基本资料
通过智能填充服务获取姓名用于给用户提供表单填充推荐。
可前往“设置 > 隐私和安全 > 智能填充 > 历史表单输入”删除保存的历史表单输入记录。
账号信息
通过智能填充服务获取昵称用于给用户提供表单填充推荐。
联系方式
通过智能填充服务获取手机号码、邮箱号用于给用户提供表单填充推荐。
位置信息
通过智能填充服务获取粗略位置信息用于给用户提供表单填充推荐。
身份信息
通过智能填充服务获取身份证信息用于给用户提供表单填充推荐。
应用信息
通过智能填充服务获取应用基本信息用于保存智能填充使用记录，并用于填充建议排序。
日程/日历信息
通过智能填充服务获取日程信息用于给用户提供表单填充推荐。
通讯信息
通过智能填充服务获取通讯录信息用于给用户提供表单填充推荐。
指导开发者如何帮助最终用户实现对数据的控制

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-kit-guide-V14
爬取时间: 2025-04-29 22:01:06
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-introduction-V14
爬取时间: 2025-04-29 22:01:21
来源: Huawei Developer
Share Kit（分享服务）为应用提供文本、图片、视频等内容跨应用、跨端分享能力。
应用把需要分享的内容和预览样式配置给Share Kit，Share Kit将根据不同的场景进行使用：
如果应用需要显示在分享面板，则需要构建数据处理能力并按照配置要求在应用配置文件中声明，社交类应用可以通过意图框架接口捐献联系人信息，可以让用户一步分享到应用内的指定用户。
Share Kit（分享服务）提供的SampleCode示例工程体现了系统分享接入模式、文本/图片等分享示例、碰一碰分享示例及卡片模板，可参考该工程进行应用的相关内容开发。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170151.89393173026827185932104342523033:50001231000000:2800:6CE9EA6CFA543BF7ADAA46BC1456717F77F65897C4F69D5195ACAE9F1DB9CC10.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170151.93270110456485402986093243299080:50001231000000:2800:C39C3ADE4232E9275AF45686ABFF6EC97E4BD9820B49C54F4CDE5C4B5390D321.jpg)
基本概念
-  分享行为的发起者。通过调用分享接口，配置分享的内容、预览样式等信息后展示分享面板。
-  分享内容的接收者。需要在应用中构建数据处理能力并按照目标应用接入指南进行能力声明，使得包管理服务可以识别应用支持的能力。
-  负责显示分享内容标题、预览、选择等信息，供用户选择。
-  对接华为分享和意图框架，通过算法高效、精准推荐能够处理内容的设备和目标应用用户。
-  通过HarmonyOS的包管理服务获取支持分享内容的目标应用。支持2种跳转方式： 1、跳转目标应用内UIAbility组件。 2、跳转目标应用提供的ExtensionAbility组件（以下称为“二级面板”）。 应用组件需通过在module.json5配置文件中配置UIAbility组件和ExtensionAbility组件的描述信息，以声明支持分享的能力。
-  内容相关的操作，由系统提供的复制、保存、另存为、打印等能力。
运行机制
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170153.63734786659371028718615393357056:50001231000000:2800:DB65FB945652969704F08E02E0F2F01709E434083158F01D2562EAA4FE875898.png)
| 应用类型 | 相关逻辑 |
| --- | --- |
| 宿主应用 | 宿主应用需要对可分享的内容提供分享入口，在用户点击分享时，配置分享内容到分享，拉起系统分享面板。  手机应用发起系统分享 2in1应用发起系统分享 手机应用发起华为分享  |
| 目标应用 |   需要在应用中构建具有数据处理能力组件，包括以下两种分享方式。             应用内处理分享内容 二级面板处理分享内容  （可选）社交类应用可遵照意图框架接入规范把最近分享行为联系人相关信息捐献到意图框架，Share Kit可从意图框架获取推荐信息，当用户选择推荐的联系人时，会把联系人信息随分享数据一起给到目标应用，目标应用可以根据联系人信息直接一步发送内容给指定用户。  |
应用类型
相关逻辑
宿主应用
宿主应用需要对可分享的内容提供分享入口，在用户点击分享时，配置分享内容到分享，拉起系统分享面板。
目标应用
设计规范
宿主应用接入系统分享时，根据不同的内容类型，应选择恰当的分享方式。详细参见：系统分享设计指南。
约束与限制
-  Share Kit仅适用于手机、平板和2in1设备。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-map-creation-V14
爬取时间: 2025-04-29 22:01:34
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-access-mode-V14
爬取时间: 2025-04-29 22:01:47
来源: Huawei Developer
为应对开发者接入系统分享能力时的不同诉求，Share Kit支持两种宿主应用接入模式。
| 接入模式  | 接入方式&适用应用类型  | 效果图  |
| --- | --- | --- |
| 全接模式  | 直接使用系统分享面板 适用于华为自研应用以及对分享方式区无商业诉求的开发者，可直接使用系统面板，降低开发成本。  | 直接使用系统分享面板    |
| 半接模式  | 开发者自行开发分享能力面板，并在分享面板中提供系统分享入口 适用于分享方式区有商业诉求，或有自己独有的业务逻辑的开发者  | 左侧为自开发分享面板，同时提供系统分享入口，用户点击时调用系统分享面板    |
接入模式
接入方式&适用应用类型
效果图
全接模式
直接使用系统分享面板
适用于华为自研应用以及对分享方式区无商业诉求的开发者，可直接使用系统面板，降低开发成本。
直接使用系统分享面板
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170153.84104724527933511231499852777163:50001231000000:2800:E96C66FA3EBF441AF5C2EFF02D84678598EA18133F0E475F9EDC8A9AA4477E63.png)
半接模式
开发者自行开发分享能力面板，并在分享面板中提供系统分享入口
适用于分享方式区有商业诉求，或有自己独有的业务逻辑的开发者
左侧为自开发分享面板，同时提供系统分享入口，用户点击时调用系统分享面板
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170153.21170296177341864636847292971432:50001231000000:2800:9D68F3E5A5F12AA0727E43A8D74C4C0D7C6F9C8BDCCB24CA6231C6F31569BC8C.png)
全接模式示例代码
参考：手机应用发起系统分享开发步骤
半接模式示例代码片段
为了确保用户获得良好的分享体验，图标请使用HarmonyOS系统资源"$r('sys.symbol.share')"，文本使用"系统分享"，请勿自行更改。
完整示例代码请参见：samplecode-接入模式。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-mobilephone-app-share-V14
爬取时间: 2025-04-29 22:02:01
来源: Huawei Developer
场景介绍
在手机设备中，分享框通过模态弹窗方式被拉起，效果如下图所示。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170153.29566340308047162314000138400686:50001231000000:2800:927AAF6C324B3F5BE9ED2CD8B1C20F445418C6BCCC4516729AFC93A8E32556A1.png)
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170153.15379798233784375116659152583144:50001231000000:2800:A7951A1030C2B46417FC9BEAC619D8FD5706F552DF52AA3B0868C4CAB4437542.png)
流程说明：
1、宿主应用构造分享数据、构造ShareController以及注册分享面板状态监听（可选）。
2、宿主应用拉起系统分享面板。
3、用户可选择目标设备或者应用。
4、目标应用处理分享数据，并关闭系统分享面板。
接口说明
| 类名 | 接口名 | 描述 |
| --- | --- | --- |
| SharedData | constructor(record: SharedRecord) | SharedData构造函数 |
| addRecord(record: SharedRecord): void | 添加分享记录 |
| getRecords(): Array<SharedRecord> | 获取分享记录 |
| ShareController | constructor(data: SharedData) | ShareController构造函数 |
| show(context: common.UIAbilityContext, options: ShareControllerOptions): Promise<void> | 显示分享面板 |
| on(event: 'dismiss', callback: () => void): void | 注册分享面板关闭事件监听 |
| off(event: 'dismiss', callback: () => void): void | 取消分享面板关闭事件监听 |
类名
接口名
描述
SharedData
constructor(record:SharedRecord)
SharedData构造函数
addRecord(record:SharedRecord): void
添加分享记录
getRecords(): Array<SharedRecord>
获取分享记录
ShareController
constructor(data:SharedData)
ShareController构造函数
show(context:common.UIAbilityContext, options:ShareControllerOptions): Promise<void>
显示分享面板
on(event: 'dismiss', callback: () => void): void
注册分享面板关闭事件监听
off(event: 'dismiss', callback: () => void): void
取消分享面板关闭事件监听
开发步骤
| 分享场景 | 参考链接 |
| --- | --- |
| 分享App Linking直达应用 | 分享App Linking直达应用 |
| 分享图片 | 分享图片 |
| 分享视频 | 分享视频 |
| 分享普通链接直达浏览器 | 分享普通链接直达浏览器 |
| 分享文本 | 分享文本 |
分享场景
参考链接
分享App Linking直达应用
分享App Linking直达应用
分享图片
分享图片
分享视频
分享视频
分享普通链接直达浏览器
分享普通链接直达浏览器
分享文本
分享文本

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-pc-app-share-V14
爬取时间: 2025-04-29 22:02:14
来源: Huawei Developer
场景介绍
在2in1设备上分享框通过Popup形式展示，效果如图所示：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170153.49428309904807345980597108540713:50001231000000:2800:A08CD1C5C2EA83A83BFCADACA060A700AE23299D049330E725590A78932BB9D9.png)
开发步骤
```typescript
import { common } from '@kit.AbilityKit';
import { systemShare } from '@kit.ShareKit';
import { uniformTypeDescriptor as utd } from '@kit.ArkData';
```
1.  沙箱路径可通过fileUri.getUriFromPath方法获取文件URI。
```typescript
// 构造ShareData，需配置一条有效数据信息
let data: systemShare.SharedData = new systemShare.SharedData({
utd: utd.UniformDataType.PLAIN_TEXT,
content: 'Hello HarmonyOS'
});
// 额外再添加一条记录
data.addRecord({
utd: utd.UniformDataType.PNG,
uri: 'file://.../test.png'
});
```
```typescript
// 构建ShareController
let controller: systemShare.ShareController = new systemShare.ShareController(data);
// 获取UIAbility上下文对象
let context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
// 注册分享面板关闭监听
controller.on('dismiss', () => {
console.info('Share panel closed');
// 分享结束，可处理其他业务。
});
// 进行分享面板显示
// 方法一：配置分享面板关联的控件ID
controller.show(context, {
anchor: 'shareButtonId'
});
// 方法二：配置分享面板显示的坐标
controller.show(context, {
anchor: {
// 必选， 锚点坐标
windowOffset: {x: 100, y: 100},
// 可选，组件的宽高，配置后会综合计算组件的大小
size: {width: 0, height: 0}
}
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-mobilephone-harmony-share-V14
爬取时间: 2025-04-29 22:02:28
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/harmony-share-overview-V14
爬取时间: 2025-04-29 22:02:42
来源: Huawei Developer
华为分享新推出碰一碰分享，支持用户通过碰一碰发起跨端分享，可实现传输图片、共享wifi等。
场景介绍
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170154.24577700985705137827043208431223:50001231000000:2800:C5FE8BE825815EDD5BC86AD968A8A9477A4130EECE9849A7ED0128C6E5ABE901.jpg)
手机应用发起碰一碰分享时，双端设备需要在亮屏、解锁的状态下并且都已开启华为分享服务（系统默认开启），设备顶部轻碰即可触发。如果用户已手动关闭华为分享服务开关，轻碰事件触发时，用户会接收到系统通知提示开启。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170156.63716933195083739628589071037936:50001231000000:2800:0B27AF58DC2638DFC1C62F48CE4E40485FE76F99E2C740DCE9D5CF18817C1585.png)
Share Kit的处理机制：
环境要求
```typescript
if (canIUse('SystemCapability.Collaboration.HarmonyShare')) {
// 支持一碰分享的能力.
}
```
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170156.13534824852066812789834659376234:50001231000000:2800:9DF1C6616FB2B50C8FB6B4369925B4B65CA9B92AEDA9489CE27C222BBE5DB08A.jpg)
流程说明：
配套分享卡片模板
为保证碰一碰分享用户体验，Share Kit支持三种卡片模板。
| 卡片模板类型  | 说明  | 效果图  |
| --- | --- | --- |
| 纯图片布局  | 纯图片布局只包括预览图。 当分享数据为文件、图片等无需添加标题及描述的场景，推荐使用此卡片模板。 使用方法：构造分享数据时，仅传递预览图（thumbnailUri）字段，即可生成此卡片模板。 布局要求 预览图：支持最小宽高比1:4，超出部分将被裁剪。   |    |
| 沉浸式大卡布局  | 沉浸式大卡布局包括预览图、标题、描述、应用图标。 当分享数据为链接类型时，需要向用户传递链接的内容，推荐使用此卡片模板。使用方法：需同时满足以下2个条件：构造分享数据时，需同时传入标题(title)、描述(description)字段和预览图(thumbnailUri)字段。预览图宽高比小于1:1。    布局要求预览图：支持最小宽高比1:4，超出部分将被裁剪。标题：最大可显示2行，当文本超过2行时，未能正常在屏幕显示的文本用省略号代替。如果标题末尾有重要信息显示，需应用自行控制字数约20个中文左右。描述：仅可显示1行，文本超过1行时，未能正常在屏幕上显示的文本用省略号代替。应用图标：无需配置，系统将默认获取应用图标用于显示在卡片底部。   |    |
| 白卡上下布局  | 白卡上下布局包括预览图、标题、描述、应用图标。当分享数据为链接类型时，需要向用户传递链接的内容，推荐使用此卡片模板。 使用方法：需同时满足以下2个条件：构造分享数据时，需同时传入标题(title)、描述(description)字段和预览图(thumbnailUri)字段。预览图宽高比大于1:1。  布局要求预览图：仅显示在卡片上方，不会铺满整个卡片。标题：最大可显示2行，当文本超过2行时，未能正常在屏幕显示的文本用省略号代替。如果标题末尾有重要信息显示，需应用自行控制字数约20个中文左右。描述：仅可显示1行，文本超过1行时，未能正常在屏幕上显示的文本用省略号代替。应用图标：无需配置，系统将默认获取应用图标用于显示在卡片底部。   |    |
卡片模板类型
说明
效果图
纯图片布局
纯图片布局只包括预览图。
当分享数据为文件、图片等无需添加标题及描述的场景，推荐使用此卡片模板。
-  构造分享数据时，仅传递预览图（thumbnailUri）字段，即可生成此卡片模板。
-  布局要求 预览图：支持最小宽高比1:4，超出部分将被裁剪。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170156.78052556766979709349591092372017:50001231000000:2800:D71AFFED2F20798E9998370AA8E3FF927F70F51865D99209C0CE048EAD9B7FD7.png)
沉浸式大卡布局
沉浸式大卡布局包括预览图、标题、描述、应用图标。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170156.13060415591938733519758928483276:50001231000000:2800:3E442A935B32205550AA556FD94F4C3EB81ABA50584F7953768ED31D99596BC1.png)
白卡上下布局
白卡上下布局包括预览图、标题、描述、应用图标。当分享数据为链接类型时，需要向用户传递链接的内容，推荐使用此卡片模板。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170156.62384515055642810934881260846645:50001231000000:2800:5BABDAF94A09A9C43B9ADB0815EF0A58BA59211C95D3CFD4959F9C582252A23B.png)
安全策略
鉴于保护碰一碰发送端/接收端的信息安全考虑，在HarmonyOS NEXT 5.0.0.123 SP16及以上版本，碰一碰分享将增加对端华为账号或设备标识，帮助用户识别分享发送端/接收端的身份。具体规则如下：
|    | 对端已登录华为账号  | 对端未登录华为账号  |
| --- | --- | --- |
| 碰一碰发送端  | 若对端已登录华为账号，将展示接收端华为账号昵称和头像。    | 若对端未登录华为账号，将展示接收端设备信息。    |
| 碰一碰接收端  | 若对端已登录华为账号，将展示发送端华为账号昵称和头像。 说明若发送端为HarmonyOS NEXT 5.0.0.123 SP16之前的版本，则不会展示任何信息。     | 若对端未登录华为账号，将展示发送端设备信息。 说明若发送端为HarmonyOS NEXT 5.0.0.123 SP16之前的版本，则不会展示任何信息。     |
对端已登录华为账号
对端未登录华为账号
碰一碰发送端
若对端已登录华为账号，将展示接收端华为账号昵称和头像。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170156.03388441467194929851042860604291:50001231000000:2800:6D56D026A23EE88EC31E5DC540B6A2FE8A5F67E0F2E5C749D886C2FBE299C946.png)
若对端未登录华为账号，将展示接收端设备信息。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170156.77483082525278668018689335683784:50001231000000:2800:5B236B5166422113A35D5DC390735CD1C1B7366FAB5DA783CC84C43B8146B712.png)
碰一碰接收端
若对端已登录华为账号，将展示发送端华为账号昵称和头像。
若发送端为HarmonyOS NEXT 5.0.0.123 SP16之前的版本，则不会展示任何信息。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170156.91660394752118967678648860932803:50001231000000:2800:71FE90A928AE0F366F6CA123F018068364E3DF1C27CE846A15FCA491A9B9F2C1.png)
若对端未登录华为账号，将展示发送端设备信息。
若发送端为HarmonyOS NEXT 5.0.0.123 SP16之前的版本，则不会展示任何信息。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170156.98825019673080136608740016721264:50001231000000:2800:154EE533319CF7EB55121516ABAA7CA848CCD3A83C57CB53F41B05CAA1F17A83.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/harmony-share-scenes-V14
爬取时间: 2025-04-29 22:02:56
来源: Huawei Developer
提供如何通过碰一碰分享实现直达应用，应用需接入App Linking以确保端到端完整的体验。参考：使用App Linking实现应用间跳转。
开发注意事项
开发步骤
```typescript
import { uniformTypeDescriptor as utd } from '@kit.ArkData';
import { systemShare, harmonyShare } from '@kit.ShareKit';
import { fileUri } from '@kit.CoreFileKit';
```
```typescript
private immersiveCallback(sharableTarget: harmonyShare.SharableTarget) {
const contextFaker: Context = getContext(this);
let filePath = contextFaker.filesDir + '/exampleKnock1.jpg';
let shareData: systemShare.SharedData = new systemShare.SharedData({
utd: utd.UniformDataType.HYPERLINK,
content: 'https://sharekitdemo.drcn.agconnect.link/ZB3p',
// 根据title,description,thumbnailUri会生成不同的卡片模板，具体可参考配套卡片模板章节。
thumbnailUri: fileUri.getUriFromPath(filePath),
title: '碰一碰分享卡片标题',
description: '碰一碰分享卡片描述'
});
sharableTarget.share(shareData);
}
private immersiveListening() {
harmonyShare.on('knockShare', this.immersiveCallback);
}
private immersiveDisablingListening() {
harmonyShare.off('knockShare', this.immersiveCallback);
}
```
1.  完整示例代码请参见：samplecode-碰一碰分享。
```typescript
// Entry Component 代码片段
onPageHide(): void {
let context = getContext(this);
context.eventHub.emit('onBackGround');
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-app-actions-V14
爬取时间: 2025-04-29 22:03:10
来源: Huawei Developer
场景介绍
系统操作区提供了复制、保存、另存为、打印、复制到中转站等系统级快捷操作。宿主应用可以根据自己的业务体验需要判断是否给用户提供相关操作。
比如，分享的图片不需要被打印出来，本次分享将打印按钮从操作区移除。
开发步骤
```typescript
import { common } from '@kit.AbilityKit';
import { systemShare } from '@kit.ShareKit';
import { uniformTypeDescriptor as utd } from '@kit.ArkData';
```
```typescript
// 构造ShareData，需配置一条有效数据信息
let data: systemShare.SharedData = new systemShare.SharedData({
utd: utd.UniformDataType.PLAIN_TEXT,
content: 'Hello HarmonyOS'
});
// 额外再添加一条记录
data.addRecord({
utd: utd.UniformDataType.PNG,
uri: 'file://.../test.png'
});
```
```typescript
// 构建ShareController
let controller: systemShare.ShareController = new systemShare.ShareController(data);
// 获取UIAbility上下文对象
let context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
// 注册分享面板关闭监听
controller.on('dismiss', () => {
console.info('Share panel closed');
// 分享结束，可处理其他业务。
});
// 进行分享面板显示
controller.show(context, {
previewMode: systemShare.SharePreviewMode.DETAIL,
selectionMode: systemShare.SelectionMode.SINGLE,
excludedAbilities: [systemShare.ShareAbilityType.PRINT]
})
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-access-precautions-V14
爬取时间: 2025-04-29 22:03:23
来源: Huawei Developer
utd类型指分享数据的数据类型，精准的数据类型有助于帮助宿主应用匹配到精确的目标应用，让分享内容更好的传递。
当构造分享数据时，推荐宿主应用填写精准的utd类型，可通过以下两种方式获取：
```typescript
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { uniformTypeDescriptor as utd } from '@kit.ArkData';
import { systemShare } from '@kit.ShareKit';
try {
let utdTypeId = utd.getUniformDataTypeByFilenameExtension('.jpg', utd.UniformDataType.IMAGE);
if (utdTypeId) {
// 构造ShareData，需配置一条有效数据信息
let shareData: systemShare.SharedData = new systemShare.SharedData({
utd: utdTypeId,
uri: 'file://.../xxx.jpg'
});
// 构建ShareController
let controller: systemShare.ShareController = new systemShare.ShareController(shareData);
// 获取UIAbility上下文对象
let context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
// 进行分享面板显示
controller.show(context, {
previewMode: systemShare.SharePreviewMode.DEFAULT,
selectionMode: systemShare.SelectionMode.SINGLE
});
}
} catch (e) {
let error: BusinessError = e as BusinessError;
console.error(`Failed to getUniformDataTypeByFilenameExtension. Code: ${error.code}, message: ${error.message} `);
}
```
```typescript
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { uniformTypeDescriptor as utd } from '@kit.ArkData';
import { systemShare } from '@kit.ShareKit';
try {
let utdTypeId = utd.getUniformDataTypeByMIMEType('image/jpeg', utd.UniformDataType.IMAGE);
if (utdTypeId) {
// 构造ShareData，需配置一条有效数据信息
let shareData: systemShare.SharedData = new systemShare.SharedData({
utd: utdTypeId,
uri: 'file://.../xxx.jpg'
});
// 构建ShareController
let controller: systemShare.ShareController = new systemShare.ShareController(shareData);
// 获取UIAbility上下文对象
let context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
// 进行分享面板显示
controller.show(context, {
previewMode: systemShare.SharePreviewMode.DEFAULT,
selectionMode: systemShare.SelectionMode.SINGLE
});
}
} catch (e) {
let error: BusinessError = e as BusinessError;
console.error(`Failed to getUniformDataTypeByFilenameExtension. Code: ${error.code}, message: ${error.message} `);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-service-scenarios-V14
爬取时间: 2025-04-29 22:03:37
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-utd-link-V14
爬取时间: 2025-04-29 22:03:50
来源: Huawei Developer
分享App Linking直达应用
使用App Linking分享应用，目标设备接收后可直达应用，参见：使用App Linking实现应用间跳转。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170157.09952509356876083156608885005418:50001231000000:2800:E118AB143891655BFF7FCA560DB12777C12970697174EF7FA5805D9E3C02AF1F.png)
开发步骤
```typescript
import { systemShare } from '@kit.ShareKit';
import { uniformTypeDescriptor as utd } from '@kit.ArkData';
import { common } from '@kit.AbilityKit';
import { image } from '@kit.ImageKit';
import { BusinessError } from '@kit.BasicServicesKit';
@Component
export default struct Index {
private async share() {
// 生成应用图标缩略图
const contextFaker: Context = getContext(this);
let thumbnailPath = contextFaker.filesDir + '/exampleImage.jpg'; // 仅为示例 请替换正确的文件路径
const imageSourceApi: image.ImageSource = image.createImageSource(thumbnailPath);
let opts: image.InitializationOptions = { size: { height: 6, width: 6 } }
const pixelMap: image.PixelMap = await imageSourceApi.createPixelMap(opts);
const imagePackerApi: image.ImagePacker = image.createImagePacker();
const buffer: ArrayBuffer = await imagePackerApi.packing(pixelMap, {
// 当前只支持'image/jpeg','image/webp'和'image/png'类型图片.
format: 'image/jpeg',
// JPEG编码中设定输出图片质量的参数,取值范围为0-100.
// 建议适当压缩,图片过大无法拉起分享.
quality: 30
});
// 构造ShareData，需配置一条有效数据信息
let shareData: systemShare.SharedData = new systemShare.SharedData({
utd: utd.UniformDataType.HYPERLINK,
// App Linking链接 仅为示例
content: 'https://sharekitdemo.drcn.agconnect.link/ZB3p',
title: '应用名称', // 不传title时 显示链接
description: '应用描述', // 不传则不显示描述内容
thumbnail: new Uint8Array(buffer) // 推荐传入应用图标 不传则显示默认html图标
});
// 进行分享面板显示
let controller: systemShare.ShareController = new systemShare.ShareController(shareData);
let context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
controller.show(context, {
previewMode: systemShare.SharePreviewMode.DEFAULT,
selectionMode: systemShare.SelectionMode.SINGLE
}).then(() => {
console.info('ShareController show success.');
}).catch((error: BusinessError) => {
console.error(`ShareController show error. code: ${error.code}, message: ${error.message}`);
});
}
build() {
Button('分享')
.onClick(() => this.share())
}
}
```
1.  完整示例代码请参见：samplecode-分享App Linking直达应用。
```typescript
import { common, OpenLinkOptions } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
@Entry
@Component
struct Index {
build() {
Button('start link', { type: ButtonType.Capsule, stateEffect: true })
.width('87%')
.height('5%')
.margin({ bottom: '12vp' })
.onClick(() => {
let context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
let link: string = "https://www.example.com/programs?action=showall";
let openLinkOptions: OpenLinkOptions = {
appLinkingOnly: false
};
context.openLink(link, openLinkOptions)
.then(() => {
console.info('openlink success.');
})
.catch((error: BusinessError) => {
console.error(`openlink failed. code: ${error.code}, message: ${error.message}`);
});
})
}
}
```
分享普通链接直达浏览器
普通链接分享支持将网页链接到目标设备/目标应用。
开发步骤
```typescript
import { systemShare } from '@kit.ShareKit';
import { uniformTypeDescriptor as utd } from '@kit.ArkData';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
```typescript
// 构造ShareData，需配置一条有效数据信息
let shareData: systemShare.SharedData = new systemShare.SharedData({
utd: utd.UniformDataType.HYPERLINK,
content: 'https://www.vmall.com/index.html?cid=128688', // 仅为示例 使用时请替换为自己的链接
title: '华为商城',
description: 'Pura 70 Ultra',
// thumbnail: new Uint8Array() // 推荐传入适合的缩略图 不传则显示默认html图标
});
```
```typescript
shareData.addRecord({
utd: utd.UniformDataType.HYPERLINK,
content: 'https://www.vmall.com/index.html?cid=128688', // 仅为示例 使用时请替换为自己的链接
title: '测试链接',
description: '测试描述',
});
```
1.  完整示例代码请参见：samplecode-分享普通链接直达浏览器。
```typescript
// 进行分享面板显示
let controller: systemShare.ShareController = new systemShare.ShareController(shareData);
let context = getContext(this) as common.UIAbilityContext;
controller.show(context, {
selectionMode: systemShare.SelectionMode.SINGLE,
previewMode: systemShare.SharePreviewMode.DEFAULT,
}).then(() => {
console.info('ShareController show success.');
}).catch((error: BusinessError) => {
console.error(`ShareController show error. code: ${error.code}, message: ${error.message}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-utd-image-V14
爬取时间: 2025-04-29 22:04:04
来源: Huawei Developer
图片类型分享支持将一张或多张图片分享到目标设备/目标应用。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170157.12451868138431041023508221245874:50001231000000:2800:A982C433C89E6F23C385B60D5DFB082477EC36251692F9FC07C0059F40FBC6B7.png)
开发步骤
```typescript
import { systemShare } from '@kit.ShareKit';
import { uniformTypeDescriptor as utd } from '@kit.ArkData';
import { common } from '@kit.AbilityKit';
import { fileUri } from '@kit.CoreFileKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
1.  沙箱路径可通过fileUri.getUriFromPath方法获取文件URI。
```typescript
// 构造ShareData，需配置一条有效数据信息
const contextFaker: Context = getContext(this);
let filePath = contextFaker.filesDir + '/exampleImage.jpg'; // 仅为示例 请替换正确的文件路径
// 获取精准的utd类型
let utdTypeId = utd.getUniformDataTypeByFilenameExtension('.jpg', utd.UniformDataType.IMAGE);
let shareData: systemShare.SharedData = new systemShare.SharedData({
utd: utdTypeId,
uri: fileUri.getUriFromPath(filePath),
title: '图片标题', // 不传title字段时,显示图片文件名
description: '图片描述', // 不传description字段时,显示图片大小
// thumbnail: new Uint8Array() // 优先使用传递的缩略图预览  不传则默认使用原图做预览图
});
```
```typescript
shareData.addRecord({
utd: utdTypeId,
uri: fileUri.getUriFromPath(filePath),
title: '图片标题', // 不传title字段时,显示图片文件名
description: '图片描述', // 不传description字段时,显示图片大小
});
```
2.  完整示例代码请参见：samplecode-分享图片。
```typescript
// 进行分享面板显示
let controller: systemShare.ShareController = new systemShare.ShareController(shareData);
let context = getContext(this) as common.UIAbilityContext;
controller.show(context, {
selectionMode: systemShare.SelectionMode.SINGLE,
previewMode: systemShare.SharePreviewMode.DETAIL,
}).then(() => {
console.info('ShareController show success.');
}).catch((error: BusinessError) => {
console.error(`ShareController show error. code: ${error.code}, message: ${error.message}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-utd-video-V14
爬取时间: 2025-04-29 22:04:17
来源: Huawei Developer
视频类型分享支持将一个或多个视频分享到目标设备/目标应用。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170157.11228297577524335482506629151289:50001231000000:2800:BA98B370566701898DE2B32C1BE660FFDE53AEBCD130ED466FD32AD72AC01FB6.png)
开发步骤
```typescript
import { systemShare } from '@kit.ShareKit';
import { uniformTypeDescriptor as utd } from '@kit.ArkData';
import { common } from '@kit.AbilityKit';
import { fileUri } from '@kit.CoreFileKit';
import { image } from '@kit.ImageKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
```typescript
// 生成视频封面图
const contextFaker: Context = getContext(this);
let thumbnailPath = contextFaker.filesDir + '/exampleImage.jpg'; // 仅为示例 请替换正确的文件路径
const imageSourceApi: image.ImageSource = image.createImageSource(thumbnailPath);
let opts: image.InitializationOptions = { size: { height: 6, width: 6 } }
const pixelMap: image.PixelMap = await imageSourceApi.createPixelMap(opts);
const imagePackerApi: image.ImagePacker = image.createImagePacker();
const buffer: ArrayBuffer = await imagePackerApi.packing(pixelMap, {
// 当前只支持'image/jpeg','image/webp'和'image/png'类型图片.
format: 'image/jpeg',
// JPEG编码中设定输出图片质量的参数,取值范围为0-100.
// 建议适当压缩,图片过大无法拉起分享.
quality: 30
});
```
1.  沙箱路径可通过fileUri.getUriFromPath方法获取文件URI。
```typescript
// 构造ShareData，需配置一条有效数据信息
let filePath = contextFaker.filesDir + '/exampleVideo.mp4'; // 仅为示例 请替换正确的文件路径
// 获取精准的utd类型
let utdTypeId = utd.getUniformDataTypeByFilenameExtension('.mp4', utd.UniformDataType.VIDEO);
let shareData: systemShare.SharedData = new systemShare.SharedData({
utd: utdTypeId,
uri: fileUri.getUriFromPath(filePath),
title: '视频标题', // 不传title字段时,显示视频文件名
description: '视频描述', // 不传description字段时,显示视频大小
thumbnail: new Uint8Array(buffer), // 优先使用传递的缩略图做预览 不传则默认使用视频第一帧画面做预览图
});
```
```typescript
shareData.addRecord({
utd: utdTypeId,
uri: fileUri.getUriFromPath(filePath),
title: '视频标题', // 不传title字段时,显示视频文件名
description: '视频描述', // 不传description字段时,显示视频大小
});
```
2.  完整示例代码请参见：samplecode-分享视频。
```typescript
// 进行分享面板显示
let controller: systemShare.ShareController = new systemShare.ShareController(shareData);
let context = getContext(this) as common.UIAbilityContext;
controller.show(context, {
selectionMode: systemShare.SelectionMode.SINGLE,
previewMode: systemShare.SharePreviewMode.DETAIL,
}).then(() => {
console.info('ShareController show success.');
}).catch((error: BusinessError) => {
console.error(`ShareController show error. code: ${error.code}, message: ${error.message}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-utd-text-V14
爬取时间: 2025-04-29 22:04:31
来源: Huawei Developer
纯文本类型分享支持将一段文字分享到目标设备/目标应用。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170157.85980001595826364952911311948813:50001231000000:2800:30E1B22E7D7A79ADD1EDAB203F7A4DAB10CAD4ED18699DDBE54766462C772B40.png)
开发步骤
```typescript
import { systemShare } from '@kit.ShareKit';
import { uniformTypeDescriptor as utd } from '@kit.ArkData';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
```typescript
// 构造ShareData，需配置一条有效数据信息
let shareData: systemShare.SharedData = new systemShare.SharedData({
utd: utd.UniformDataType.TEXT,
content: '这是一段文本内容',
title: '文本内容', // 不传title字段时,显示content
description: '文本描述',
// thumbnail: new Uint8Array() // 推荐传入适合的缩略图 不传则显示默认text图标
});
```
```typescript
shareData.addRecord({
utd: utd.UniformDataType.TEXT,
content: '这是一段文本内容',
title: '文本内容', // 不传title字段时,显示content
description: '文本描述',
});
```
1.  完整示例代码请参见：samplecode-分享文本。
```typescript
// 进行分享面板显示
let controller: systemShare.ShareController = new systemShare.ShareController(shareData);
let context = getContext(this) as common.UIAbilityContext;
controller.show(context, {
selectionMode: systemShare.SelectionMode.SINGLE,
previewMode: systemShare.SharePreviewMode.DETAIL,
}).then(() => {
console.info('ShareController show success.');
}).catch((error: BusinessError) => {
console.error(`ShareController show error. code: ${error.code}, message: ${error.message}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-target-application-V14
爬取时间: 2025-04-29 22:04:44
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-interface-description-V14
爬取时间: 2025-04-29 22:04:57
来源: Huawei Developer
目标应用可以通过UIAbility构建接收分享内容的界面，并将应用显示到分享面板应用推荐区内，以实现将分享内容传递到目标应用内进行处理。开发时需要接入方实现UIAbility并于module.json5中注册支持分享内容的能力。
接口说明
getSharedData接口用于从want中获取分享数据；getContactInfo接口用于从want中获取联系人信息（仅当用户选择联系人分享时有返回值）。具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| getSharedData(want: Want): Promise<SharedData> | 从want中获取分享数据 |
| getContactInfo(want: Want): Promise<ContactInfo> | 从want中获取联系人信息 |
接口名
描述
getSharedData(want:Want): Promise<SharedData>
从want中获取分享数据
getContactInfo(want:Want): Promise<ContactInfo>
从want中获取联系人信息
开发步骤
```typescript
import { AbilityConstant, UIAbility, Want } from '@kit.AbilityKit';
import { window } from '@kit.ArkUI';
import { systemShare } from '@kit.ShareKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
```typescript
export default class TestUIAbility extends UIAbility {
onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): void {
systemShare.getSharedData(want)
.then((data: systemShare.SharedData) => {
data.getRecords().forEach((record: systemShare.SharedRecord) => {
// 处理分享数据
});
})
.catch((error: BusinessError) => {
console.error(`Failed to getSharedData. Code: ${error.code}, message: ${error.message}`);
this.context.terminateSelf();
});
}
onWindowStageCreate(windowStage: window.WindowStage): void {
// Main window is created, set main page for this ability
windowStage.loadContent('pages/Index', (error) => {
if (error.code) {
console.error(`Failed to load the content. Code: ${error.code}, message: ${error.message}`);
return;
}
console.info('Succeeded in loading the content.');
});
}
}
```
```typescript
"abilities": [
{
"name": "TestUIAbility",
"srcEntry": "./ets/entryability/TestUIAbility.ets",
"description": "$string:EntryAbility_desc",
"icon": "$media:layered_image",
"label": "$string:EntryAbility_label",
"startWindowIcon": "$media:startIcon",
"startWindowBackground": "$color:start_window_background",
"exported": true,
"skills": [
{
"actions": [
"ohos.want.action.sendData"
],
// 目标应用在配置支持接收的数据类型时，需穷举支持的UTD，比如：支持全部图片类型，可声明：general.image
// maxFileSupported 对于归属指定类型的文件，标识一次支持接收的最大数量。默认为0，代表不支持此类文件的分享。文件类型归属关系参考：@ohos.data.uniformTypeDescriptor (标准化数据定义与描述)
"uris": [
{
"scheme": "file",
"utd": "general.text",
"maxFileSupported": 1
},
{
"scheme": "file",
"utd": "general.png",
"maxFileSupported": 1
},
{
"scheme": "file",
"utd": "general.jpeg",
"maxFileSupported": 1
}
]
}
]
}
]
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-sec-panel-V14
爬取时间: 2025-04-29 22:05:11
来源: Huawei Developer
二级分享面板能力基于UIExtensionAbility界面嵌入能力。目标应用可以通过ShareExtensionAbility构建接收分享内容的二级面板，并将应用显示到分享面板应用推荐区内，通过二级面板便捷的处理分享内容。开发时需要接入方实现ShareExtensionAbility并于module.json5中注册支持分享内容的能力。
通过此方式注册的应用，点击时将跳转到分享详情页，也可返回分享面板。参见：分享详情页面。
开发步骤
```typescript
import { Want, ShareExtensionAbility, UIExtensionContentSession } from '@kit.AbilityKit';
import { systemShare } from '@kit.ShareKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
```typescript
export default class TestShareAbility extends ShareExtensionAbility {
onSessionCreate(want: Want, session: UIExtensionContentSession) {
systemShare.getSharedData(want)
.then((data: systemShare.SharedData) => {
data.getRecords().forEach((record: systemShare.SharedRecord) => {
// 处理分享数据
});
session.loadContent('pages/Index');
})
.catch((error: BusinessError) => {
console.error(`Failed to getSharedData. Code: ${error.code}, message: ${error.message}`);
session.terminateSelf();
});
}
}
```
```typescript
export default class TestShareAbility extends ShareExtensionAbility {
onSessionCreate(want: Want, session: UIExtensionContentSession) {
systemShare.getContactInfo(want)
.then(async (contact: systemShare.ContactInfo) => {
// 处理联系人信息，可通过联系人类型（如：个人，群组等），联系人ID，进行指定用户分享。
// 获取分享数据
let data = await systemShare.getSharedData(want);
})
.catch((error: BusinessError) => {
console.error(`Failed to getContactInfo. Code: ${error.code}, message: ${error.message}`);
// 联系人不存在或数据获取异常
session.terminateSelf();
});
}
}
```
```typescript
"extensionAbilities": [
{
"name": "TestShareAbility",
"srcEntry": "./ets/abilities/TestShareAbility.ts",
"type": "share", // 支持分享数据处理
"description": "xxx",
"exported": true,
"label": "$string:xx_label",
"icon": "$media:icon",
"skills": [
{
"actions": [
"ohos.want.action.sendData"
],
// 目标应用在配置支持接收的数据类型时，需穷举支持的UTD，比如：支持全部图片类型，可声明：general.image
// maxFileSupported 对于归属指定类型的文件，标识一次支持接收的最大数量。默认为0，代表不支持此类文件的分享。文件类型归属关系参考：@ohos.data.uniformTypeDescriptor (标准化数据定义与描述)
"uris": [
{
"scheme": "file",
"utd": "general.text",
"maxFileSupported": 1
},
{
"scheme": "file",
"utd": "general.png",
"maxFileSupported": 1
},
{
"scheme": "file",
"utd": "general.jpeg",
"maxFileSupported": 1
}
]
}
]
}
]
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-sec-panel-back-V14
爬取时间: 2025-04-29 22:05:24
来源: Huawei Developer
从二级面板返回分享面板时，可通过设置resultCode值为特定的ShareAbilityResultCode，以告知分享面板做出不同的处理，具体处理方式如下：
开发步骤
```typescript
import { ShareExtensionAbility, UIExtensionContentSession, Want } from '@kit.AbilityKit';
import { systemShare } from '@kit.ShareKit';
```
```typescript
export default class TestShareAbility extends ShareExtensionAbility {
async onSessionCreate(want: Want, session: UIExtensionContentSession) {
session.terminateSelfWithResult({
resultCode: systemShare.ShareAbilityResultCode.CLOSE
});
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-intents-share-V14
爬取时间: 2025-04-29 22:05:38
来源: Huawei Developer
通过意图框架服务，目标应用可以将联系人信息共享到分享推荐区。参考：习惯推荐-接入方案。
该示例代码无法直接运行，需要申请意图框架白名单。参见：Intents Kit接入流程。
开发步骤
```typescript
import BuildProfile from 'BuildProfile';
import { util } from '@kit.ArkTS';
import { BusinessError } from '@kit.BasicServicesKit';
import { insightIntent } from '@kit.IntentsKit';
```
```typescript
const intent: insightIntent.InsightIntent = {
intentName: 'SendMessage', // 意图名
intentVersion: '1.0', // 意图版本
identifier: util.generateRandomUUID(), // 意图标识符
intentActionInfo: { // 意图执行信息
actionMode: 'EXECUTED', // 动作模式
executedTimeSlots: { // 实际发生时间段
executedStartTime: new Date().getTime(),
executedEndTime: new Date().getTime(),
}
},
intentEntityInfo: { // 意图实体信息
entityId: 'this-is-id', // 实体Id
entityName: 'Contact', // 实体名称
name: 'Nickname', // 联系人昵称
icon: 'data:image/png;base64,...', // 联系人头像
phoneNumbers: [], // 联系人电话号码
extras: {
shareParams: {
bundleName: BuildProfile.BUNDLE_NAME, // 应用包名
moduleName: 'entry', // 应用模块名 根据实际填写
abilityName: 'SampleContactAbility', // 应用ability名 根据实际填写
action: 'ohos.want.action.sendData', // 标识分享 不可修改
}
}
}
};
```
```typescript
insightIntent.shareIntent(getContext(this), [intent]).then(() => {
console.info('shareIntent ok');
}).catch((err: BusinessError) => {
console.error(`shareIntent failed. Code: ${err.code}. message: ${err.message}`);
});
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-design-specification-V14
爬取时间: 2025-04-29 22:05:51
来源: Huawei Developer
本章节主要介绍目标应用接入系统分享面板时，所涉及的设计规范要求。具体参见：设计指南-分享方式区
应用名称和图标规范
当应用实现了用于接收分享内容的UIAbility或者UIExtensionAbility后，可在配置文件（src/main/module.json5）的skills配置中注册。并配置actions为ohos.want.action.sendData。
当分享内容类型为应用所支持的类型时，应用图标将出现在分享面板的分享方式区内。
应用可以针对不同的ability，设置不同的名称和图标。
```typescript
"abilities": [
{
"name": "TestUIAbility",
"srcEntry": "./ets/entryability/TestUIAbility.ets",
"label": "$string:EntryAbility_label", // ability名称
"icon": "$media:layered_image", // ability图标
"description": "$string:EntryAbility_desc",
"startWindowIcon": "$media:startIcon",
"startWindowBackground": "$color:start_window_background",
"exported": true,
"skills": [
{
"actions": [
"ohos.want.action.sendData"
],
"uris": [
{
"scheme": "file",
"utd": "general.text",
"maxFileSupported": 1
}
]
}
]
}
],
"extensionAbilities": [
{
"name": "TestShareAbility",
"srcEntry": "./ets/abilities/TestShareAbility.ts",
"type": "share", // 支持分享数据处理
"exported": true,
"label": "$string:xx_label", // ability名称
"icon": "$media:icon", // ability图标
"description": "$string:TestShareAbility_desc",
"skills": [
{
"actions": [
"ohos.want.action.sendData"
],
"uris": [
{
"scheme": "file",
"utd": "general.text",
"maxFileSupported": 1
}
]
}
]
}
]
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-faq-V14
爬取时间: 2025-04-29 22:06:05
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-faq-1-V14
爬取时间: 2025-04-29 22:06:18
来源: Huawei Developer
现象描述：
无法拉起系统分享框
可能原因：
处理步骤：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-faq-2-V14
爬取时间: 2025-04-29 22:06:32
来源: Huawei Developer
现象描述：
原因：
处理步骤：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/share-faq-3-V14
爬取时间: 2025-04-29 22:06:45
来源: Huawei Developer
现象描述：
图库图片分享，经过二级面板发送到主进程时，图片uri无权限。
原因：
图库图片uri权限在ShareExtensionAbility销毁时回收。
处理步骤：
在二级面板将图片存储到应用沙箱内，再通过主进程访问沙箱文件。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-kit-guide-V14
爬取时间: 2025-04-29 22:06:59
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-introduction-V14
爬取时间: 2025-04-29 22:07:13
来源: Huawei Developer
Store Kit（应用市场服务）提供应用市场业务的对外开放能力，可以更好地支持应用的下载、推荐和分发等场景以提高在应用市场上的曝光度，以及为开发者在HarmonyOS NEXT/5.0.x中提供便捷高效的数字商品服务的接入流程和交互体验，助力开发者商业变现。
使用Store Kit为您的应用和应用内数字商品提供以下功能和服务：
数字商品服务：指华为为开发者的数字商品的管理、交易、售后提供的平台能力和服务，助力您在HarmonyOS NEXT/5.0.x内进行数字商品交易和结算。
应用市场推荐：用户可直达您的应用市场详情页或卡片加桌页面，有效提高您的应用曝光率。
产品特性按需分发：实现应用多子业务独立演进，能够提供动态分发和资源拆分，帮助提高分发效率。
生态查询服务：您可查询您的元服务/应用是通过何种场景被打开的，您还可基于场景值，做更多的业务设计和拓展。
应用市场更新功能：您可以通过本服务，查询应用是否有可更新的版本。当存在可更新版本时，可为用户显示更新提醒。
应用归因服务：您可通过本服务判断用户下载应用和使用应用的原因，借助归因数据分析营销效果，评估多渠道商业价值和优化商业策略。
隐私管理服务：为用户提供统一隐私弹框，您可通过本服务查询隐私链接、隐私签署状态、停止用户已签署的隐私协议。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-V14
爬取时间: 2025-04-29 22:07:27
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-introduction-V14
爬取时间: 2025-04-29 22:07:40
来源: Huawei Developer
数字商品服务为开发者在HarmonyOS NEXT/5.0.x中提供便捷高效的数字商品服务接入流程和交互体验，让开发者聚焦应用本身的业务能力，助力开发者商业变现。数字商品服务提供基础的数字商品交易能力，保障用户交易的完成，并对应用内的数字商品交易能力可用性、商品价值和商品质量进行审核。本服务能帮助开发者在HarmonyOS NEXT/5.0.x内实现统一的数字商品分发体验和营销宣传（包括在应用内的商品展示和销售，以及在应用市场内的商品分发等）、统一管理数字商品的定价和优惠、查询用户的商品权益、完成数字商品的售后服务等一系列服务。
开发者可通过接入和使用IAP系统级API以及应用市场Server能力，快速启动数字商品交易流程，实现在应用内销售数字商品的功能和场景。通过应用内的数字商品交易，用户可以在开发者的应用内购买各种类型的数字商品，包括消耗型商品、非消耗型商品和自动续期订阅商品等。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-preparations-V14
爬取时间: 2025-04-29 22:07:53
来源: Huawei Developer
1.  请先参考“应用开发准备”完成基本准备工作及指纹配置，再继续进行后续开发活动。在启动开发之前，需先启用数字商品服务，打开相关服务API开关和配置服务参数，才能对数字商品相关的API进行调用。
2.  开发者需要提前录入商品信息（包括商品ID、商品类型、不同国家的商品价格、商品名称等），在客户端调用购买接口时，只需传入已配置的商品ID和商品类型。当前支持通过AppGallery Connect配置商品信息和通过Server API配置数字商品。
3.  当前支持在开发者的应用内展示和分发数字商品，在完成数字商品配置和接入数字商品购买能力后，当用户在开发者的应用内发起购买时，应用需要调用相关接口来拉起订单页面，展示商品名称、商品价格等信息，用户可在确认交易订单后完成商品购买。
4.  当前支持开发者使用沙盒测试，在接入数字商品服务的调测过程中无需真实付款即可完成数字商品的购买等相关测试。在进行测试前，需要在AppGallery Connect中的“用户与访问”中添加测试账号，这些测试账号都是真实的华为账号。开发者在HarmonyOS上接入IAP沙盒测试时，需要在测试设备上登录已配置的测试账号。具体请参考“测试数字商品服务”章节。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-enabling-V14
爬取时间: 2025-04-29 22:08:06
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-config-agc-V14
爬取时间: 2025-04-29 22:08:21
来源: Huawei Developer
请先参考“应用开发准备”完成基本准备工作及指纹配置，再继续进行以下开发活动。
配置签名信息时，请使用手动签名方式。
接入数字商品服务需要添加公钥指纹。
开通商户服务
开发者需开通商户服务才能使用华为数字商品服务，具体请登录华为开发者联盟官网，点击“管理中心”>“开发者中心”>“商户服务”进入商户服务页面。
商户服务里配置的银行卡账号、币种，用于开发者接收华为分成收益。需要提供如下信息，具体可详见商户服务：
当销售数字商品后，可以选择“管理中心 > 我的账户”，选择“收益”，进入自助结算页面，查看商品产生的收益结算单并申请结算，详情见自助结算指南。
打开应用内购买服务 (HarmonyOS NEXT)
使用数字商品服务的应用必须打开应用内购买服务 (HarmonyOS NEXT) API开关。打开服务开关是应用级别的，即每个需要使用数字商品服务的应用都需要先执行此步骤，具体操作请参见打开应用内购买服务(HarmonyOS NEXT) API开关。
配置服务参数
开启应用内购买服务(HarmonyOS NEXT) 开关后，开发者需进一步激活应用内购买服务 (HarmonyOS NEXT)，具体请参见激活服务和配置事件通知。
用户购买商品后，服务器会在订单/订阅场景的某些关键事件发生时通知您配置的事件通知地址，具体可参见服务端关键事件通知。
服务端密钥管理
数字商品服务器要求对每个服务端API请求进行JSON Web Token（JWT）授权。开发者可以使用从AppGallery Connect下载的API密钥对Token签名生成JWT，授权发起的服务端API请求。
开发者可参见创建密钥、下载密钥、撤销密钥管理服务端密钥。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-config-app-V14
爬取时间: 2025-04-29 22:08:34
来源: Huawei Developer
接入数字商品服务前，需要先完成应用的bundleName配置和应用身份信息配置。
bundleName配置
工程“AppScope/app.json5”下的bundleName需要与开发者在AppGallery Connect中创建应用时的包名保持一致。
配置内容示例如下：
```typescript
{
"app": {
// bundleName需要与开发者在AppGallery Connect中创建应用时的包名保持一致
"bundleName": "com.huawei.***.***.demo",
// ...
}
}
```
配置应用身份信息
1.  下图中的APPID可用于服务器API接口请求。
2.
```typescript
"module":{
"type": "***",
"name": "***",
"description": "***",
"mainElement": "***",
"deviceTypes": [***],
// ...
"metadata": [
{
"name": "client_id",
"value": "***"
},
// ...
]
}
```
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170158.95178838391492577661160227540842:50001231000000:2800:8C2E5E70AEEA31BA553E9F7547A9C72D3AABE7FBDF01C7E8938E01C91E66EA06.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-config-product-V14
爬取时间: 2025-04-29 22:08:47
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-product-V14
爬取时间: 2025-04-29 22:09:01
来源: Huawei Developer
数字商品服务为接入应用内购买的应用提供了展示数字商品、购买数字商品、发放商品权益的功能。
数字商品类型介绍
| 商品类型  | 描述  | 示例  |
| --- | --- | --- |
| 消耗型商品  | 只可使用一次的产品，使用之后即失效，需要再次购买的商品  | 游戏内货币、游戏内道具、应用内点券等  |
| 非消耗型商品  | 只需购买一次，不会过期或随着使用而减少的商品  | 游戏中额外的游戏关卡、应用中无时限的高级会员等  |
| 自动续期订阅商品  | 用户购买后在一段时间内允许访问增值功能或内容，周期结束后自动续期购买下一期的服务  | 应用中有时限的高级会员，如视频月度会员  |
| 非续期订阅商品  | 用户在有限时间内允许访问增值功能或内容。此类订阅不会自动续期购买。  | 订阅可观看现场游戏内容，时限为一年。  |
商品类型
描述
示例
消耗型商品
只可使用一次的产品，使用之后即失效，需要再次购买的商品
游戏内货币、游戏内道具、应用内点券等
非消耗型商品
只需购买一次，不会过期或随着使用而减少的商品
游戏中额外的游戏关卡、应用中无时限的高级会员等
自动续期订阅商品
用户购买后在一段时间内允许访问增值功能或内容，周期结束后自动续期购买下一期的服务
应用中有时限的高级会员，如视频月度会员
非续期订阅商品
用户在有限时间内允许访问增值功能或内容。此类订阅不会自动续期购买。
订阅可观看现场游戏内容，时限为一年。
数字商品购买场景
在应用购买场景中，用户会以一次性付款方式购买消耗型商品或非消耗型商品。请结合实际业务场景选择对应的商品类型。
订阅是指用户在购买自动续期订阅商品后，可以在一段时间访问应用的增值功能或内容，并且会在订阅周期结束后自动续期购买下一期服务的能力。如果期间用户取消订阅，则订阅在当期结束后将不再自动续期。
| 图1 用户购买消耗型商品或非消耗型商品   | 图2 用户购买自动续期订阅商品后  |
| --- | --- |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170158.23217604735881119538477049179750:50001231000000:2800:6FEE6FF89EBCEC1866FFE4AD6488D3F94F5A81D1D99624F8B605D09F053F2847.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170159.02937928730611431031272812713308:50001231000000:2800:ABB964C0DF854FCB414B12C16E5D61A904288E17FEABDA7CA17E36DBFDA4D52B.png)
配置自动续期订阅商品
自动续期订阅商品由订阅组来管理维护，所以在创建自动续期订阅商品前，需要先创建订阅组，并在创建自动续期订阅商品时指定商品所在的订阅组。订阅组用于承载同类型商品的管理，一个订阅组可以包含多个自动续期订阅商品，且同一个订阅组只有一个商品是处于生效状态。当商品处于生效状态时，开发者需要为用户发放权益。订阅组机制为开发者提供了便捷方式，让商品服务大致相同但有细微差别的需求得以快速实现。
当前自动续期订阅商品的续费周期可选值有1周、30天、31天、1个月、2个月、3个月、6个月和12个月，具体配置方法请参见配置数字商品。
订阅状态及变更
订阅有如下几个状态：
| 订阅状态  | 说明  |
| --- | --- |
| 续期  | 订阅处于生效状态，即用户可以享受商品对应的服务，其下一次续期也将按期进行扣费以续期。  |
| 到期  | 订阅处于生效状态，用户仍可以享受商品对应的服务，但订阅续期已被用户取消，将不会进行下一次的续期扣费。  |
| 已到期  | 订阅处于失效状态，用户无法享受商品的服务。最近一次的续期扣费没有成功、用户取消订阅、用户不同意涨价或者是扣款账户发生了异常等均可导致订阅进入该状态。 失效的订阅最长有180天的保留期，在保留期内，用户无法享受自动续期订阅商品的服务，但可以在恢复订阅后再次享受应用提供的服务。  |
| 待生效  | 订阅还未开始生效，用户暂时还无法享受该自动续期订阅商品的服务。 当用户在订阅组内进行切换订阅时，如果切换到一个下周期生效的订阅时，则新切换的商品处于待生效状态，需要等原订阅到期后才生效。在用户的切换操作完成后，原订阅会变为到期状态，而新切换的商品为待生效状态，并且会在原自动续期订阅商品的编辑订阅页内显示新切换商品的开始时间。  |
订阅状态
说明
续期
订阅处于生效状态，即用户可以享受商品对应的服务，其下一次续期也将按期进行扣费以续期。
到期
订阅处于生效状态，用户仍可以享受商品对应的服务，但订阅续期已被用户取消，将不会进行下一次的续期扣费。
已到期
订阅处于失效状态，用户无法享受商品的服务。最近一次的续期扣费没有成功、用户取消订阅、用户不同意涨价或者是扣款账户发生了异常等均可导致订阅进入该状态。
失效的订阅最长有180天的保留期，在保留期内，用户无法享受自动续期订阅商品的服务，但可以在恢复订阅后再次享受应用提供的服务。
待生效
订阅还未开始生效，用户暂时还无法享受该自动续期订阅商品的服务。
当用户在订阅组内进行切换订阅时，如果切换到一个下周期生效的订阅时，则新切换的商品处于待生效状态，需要等原订阅到期后才生效。在用户的切换操作完成后，原订阅会变为到期状态，而新切换的商品为待生效状态，并且会在原自动续期订阅商品的编辑订阅页内显示新切换商品的开始时间。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170159.45037799917300395882468143717321:50001231000000:2800:691D4E1AC77ABB2E3F262520B2B08D7830F0FF224FB18E2F374A4B6DEFF03F09.png)
用户在成功购买自动续期订阅商品后，订阅会变为续期状态。当发生如下操作时，订阅的状态会随之改变：
-  后续将会实现订阅等级的概念。在加入等级后，对于切换订阅场景，切换机制会优先判断新订阅的商品和原商品的等级关系，如果等级相同，则切换效果的触发场景不变。如果从低等级切换到高等级的升级切换订阅，效果为立即生效。如果是从高等级切换到低等级的降级切换订阅，效果为下周期生效。
让用户管理订阅
数字商品服务为接入订阅型商品购买能力的应用提供跳转到订阅页或订阅详情页的能力，让用户管理订阅，包括查看订阅、取消订阅、切换订阅、恢复订阅等。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170159.53435843628487531017816555518144:50001231000000:2800:E2DE1000F237DBD81726B7E98781C28D47EAB3381938A927BE3110E34B0BB0F4.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170159.36826555220604207263951017291651:50001231000000:2800:32ED6A63CC311EF1446E4F430C3B78F43B4D7999FC249536DD63CD547872DEF3.png)
订阅续期处理
订阅的下一个续期价格（包括原价、涨价和降价）是在续期前10天确定的。对于订阅周期为1周的自动续期订阅商品，在当期续期成功后即开始确认下一次续期的价格，如果在确认价格后调整价格，那么下一次续期时仍然按照原价格进行，再下一期则按新的价格进行续期。
在订阅周期结束前24小时，数字商品服务器会尝试向用户发起扣款以完成自动续期订阅商品的续期。若扣费失败，数字商品服务器会在一定期限内重新尝试扣费，从而恢复订阅。
因扣费失败而失效的订阅，系统将自动重试扣费，并在一定的时间窗后结束重试。
提供优惠
为了提供购买的自动续期订阅商品更有吸引力，自动续期订阅商品提供了两种促销模式。
推介促销手段（新用户促销）：
推介促销限制：
优惠促销（自定义人群促销）
可以针对用户群体、优惠地域进行自定义选择，支持开发者进行个性化的优惠活动配置。开发者可以在发起购买前，查询该商品的优惠活动信息，在最终发起购买时，将优惠活动信息传递到华为应用内支付，最终将优惠活动信息展示给用户。
促销具体配置方法请参见配置数字商品。
修改自动续期订阅商品
调整自动续期订阅商品价格
开发者可以为每个自动续期订阅商品降低或提高价格，具体配置可参见修改订阅类商品。
处理自动续期订阅商品下架
在处理自动续期订阅商品的下架时，需要考虑对用户的影响。
在停止提供订阅服务前，开发者应该通过下架该商品来防止新用户订阅。建议将自动续期订阅商品的下架时间与其续费周期相对应。例如，在自动续期订阅商品续费周期为1个月的情况下，应该提前1个月将自动续期订阅商品下架，这可以在停止提供订阅的商品服务之前让用户体验到完整时限的商品服务，并且将不会在下一个订阅续期日期被收取费用。以此类推，对于续费周期为1周的订阅需要提前7天，对于续费周期为6个月的订阅需要提前6个月。当开发者将某个自动续期订阅商品下架时，用户将收到有关订阅终止通知。
接收订阅关键事件的通知
如果开发者在AppGallery Connect申请支付服务时提前配置了通知接收地址，用户购买自动续期订阅商品后，数字商品服务器会在订阅场景的某些关键事件发生时调用此接口通知配置的服务器，具体请参见服务端关键事件通知。主要涉及的场景如下：
若开发者服务器返回结果为非成功响应（返回的http status code值为200之外的值），将对本次关键事件的通知进行周期性重发。建议在服务器收到通知后立即返回成功响应，避免通知消息堆积。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-product-agc-V14
爬取时间: 2025-04-29 22:09:15
来源: Huawei Developer
您可以通过华为数字商品管理系统将您的数字商品信息托管在华为侧，方便您的商品价格国际化管理，助力您的应用进行全球化推广。开发者需要在AppGallery Connect中提前录入商品信息（包括商品ID、商品类型、不同国家的商品价格、商品名称等），在客户端调用购买接口时，只需传入此处配置的商品ID和商品类型，系统会根据用户当前的账号服务地展示对应国家/地区的商品信息（包括商品价格、商品名称等），而无需开发者自行管理商品价格。
在AppGallery Connect完成商品配置后，AppGallery Connect不会跟随汇率实时刷新商品价格，开发者需要定期手动刷新价格，在商品的价格编辑页面点击刷新并保存，即可根据当时的汇率刷新商品价格。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-product-server-V14
爬取时间: 2025-04-29 22:09:28
来源: Huawei Developer
您也可以通过PMS（Product Management System）接口，对应用内数字商品的销售完成商品创建、查询、更新、管理促销活动等操作，并实现全球本地化定价。
基本的开发流程如下：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-distribute-query-V14
爬取时间: 2025-04-29 22:10:54
来源: Huawei Developer
数字商品服务为接入消耗型/非消耗型、订阅型商品购买能力的应用提供向用户展示可供购买的商品信息列表的能力。
前提条件
当前登录的华为账号所在服务地支持数字商品服务。
开发步骤
1.  在使用应用内支付之前，应用需要向IAP Kit发送queryEnvironmentStatus请求，以此判断用户当前登录的华为账号所在服务地是否在IAP Kit支持结算的国家/地区中。 当前IAP Kit支持结算的国家/地区仅包括中国大陆。
```typescript
import { iap } from '@kit.IAPKit';
import { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
class queryenvironmentstatus {
queryEnvironmentStatus() {
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.queryEnvironmentStatus(context).then(() => {
// 请求成功
console.info('Succeeded in querying environment status.');
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query environment status. Code is ${err.code}, message is ${err.message}`);
});
}
}
```
1.  通过queryProducts来获取在AppGallery Connect上配置的商品信息。发起请求时，需在请求参数QueryProductsParameter中携带相关的商品ID，并根据实际配置指定其productType，订阅型商品指定其productType为iap.ProductType.AUTORENEWABLE。 queryProducts每次只能查询一种类型的商品，单次查询请勿超过200条。
```typescript
import { iap } from '@kit.IAPKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { common } from '@kit.AbilityKit';
class queryproducts {
queryProducts() {
const queryProductParam: iap.QueryProductsParameter = {
// iap.ProductType.CONSUMABLE：消耗型商品;
// iap.ProductType.NONCONSUMABLE：非消耗型商品;
// productType: iap.ProductType.AUTORENEWABLE;订阅型商品
productType: iap.ProductType.CONSUMABLE,
// 查询的商品必须是开发者在AppGallery Connect网站配置的商品
productIds: ['ohos_consume_001']
};
const context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
iap.queryProducts(context, queryProductParam).then((result) => {
// 请求成功
console.info('Succeeded in querying products.');
// 展示商品信息
// ...
}).catch((err: BusinessError) => {
// 请求失败
console.error(`Failed to query products. Code is ${err.code}, message is ${err.message}`);
});
}
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-distribute-purchase-V14
爬取时间: 2025-04-29 22:11:17
来源: Huawei Developer
场景介绍
在应用内数字商品的购买场景中，用户会以一次性付款的方式购买消耗型商品或非消耗型商品。
订阅是指用户在购买自动续期订阅商品后，可以在一段时间访问应用的增值功能或内容，并且会在订阅周期结束后自动续期购买下一期服务的能力。如果期间用户取消订阅，则订阅在当期结束后将不再自动续期。
接入数字商品服务购买能力前，您需在华为AppGallery Connect网站配置商品，录入商品ID和商品价格等信息。用户在开发者应用内发起购买时，使用数字商品服务的应用需要调用IAP Kit的createPurchase接口来拉起收银台，收银台会展示商品名称、商品价格等信息，用户可在收银台完成商品购买。
业务流程及开发步骤
消耗型/非消耗型商品
详细开发流程请参考购买消耗型/非消耗型商品。
订阅型商品
详细开发流程请参考订阅型商品。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-distribute-delivering-V14
爬取时间: 2025-04-29 22:11:31
来源: Huawei Developer
场景介绍
-  若应用提供消耗型商品，需要按照确保权益发放处理消耗型商品的权益发放。
-  若应用提供非消耗型商品，且为单机应用，则需要按照单机应用权益发放（非消耗型商品）处理非消耗型商品的权益发放。其他场景建议按照消耗型/非消耗型商品的确保权益发放处理。
-  若应用为非单机应用，则建议按照确保权益发放处理自动续期订阅商品的权益发放。若为单机应用，则需要按照单机应用权益发放（订阅型商品）处理自动续期订阅商品的权益发放。
业务流程及开发步骤
消耗型/非消耗型商品
详细开发流程请参考消耗型/非消耗型商品权益发放。
订阅型商品
详细开发流程请参考订阅型商品权益发放。
单机应用权益发放
非消耗型商品
详细开发流程请参考单机应用权益发放（非消耗型）。
订阅型商品
详细开发流程请参考单机应用权益发放（订阅型）。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-iap-sandbox-V14
爬取时间: 2025-04-29 22:11:44
来源: Huawei Developer
沙盒测试允许开发者在接入数字商品服务的调测过程中无需真实付款即可完成数字商品的购买等相关测试。
配置沙盒测试
-  在进行测试前，需要在AppGallery Connect中的“用户与访问”中添加测试账号，这些测试账号都是真实的华为账号。开发者在HarmonyOS上接入IAP沙盒测试时，需要在测试设备上登录已配置的测试账号。添加沙盒测试账号步骤如下： 沙盒测试账号必须填写已注册、真实的华为账号。添加完成之后需要5~10min才能生效。使用时请检查当前的账号是否支持沙盒测试。
-
-
1.
2.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170200.41088094562499419073725180962416:50001231000000:2800:D193C68F6E77C7B1250A41AAA1EF0C2CA869B5B5687DC03469DE3F55F0112B48.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170200.56805865583817751163603993754009:50001231000000:2800:24297103614CF3FE9F523BB659FDCB487EEB0F5E163992F310518DFB82C86631.png)
-  接入的应用必须是debug签名的应用。构建debug签名应用步骤如下：
沙盒测试能力未生效自检
如果配置的沙盒账号未生效，可参见配置沙盒测试检查当前是否满足沙盒测试的两个条件：
此外也可在应用中使用isSandboxActivated接口来检查当前沙盒环境不可用的原因。
测试消耗/非消耗型商品购买
在满足沙盒测试条件下，开发者调用createPurchase接口拉起收银台，跳过实际支付环节，直接购买成功。
-  正式环境下，非消耗型商品仅允许用户购买一次，不能重复购买。
如果未显示截图的提示页面，表示本次交易未进入沙盒测试环境，继续测试会实际扣费，请检查当前是否满足沙盒测试的两个条件。开发者也可在应用中使用isSandboxActivated接口来检查当前沙盒环境不可用的原因。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170200.18760346018943788460671993082602:50001231000000:2800:65EA44CEBBC34607937262E2AC7D2F87906B8577FC338D36A71A0D77DD6ABA77.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170200.46169151980961738565482576973427:50001231000000:2800:F6FF47D61CE0217BCEAE95D79EA7042CA9B8B4CFCC8FC061047EB610D8496D54.png)
测试自动续期订阅商品
自动续期订阅商品的购买流程和消耗型/非消耗型商品的购买流程类似，但订阅还有其他细节场景，比如续订成功或失败，续订周期时长。为了帮助开发者快速测试应用的订阅场景，沙盒环境下的订阅续订时间会比正常情况更快，引入“时光机”概念，沙盒环境中的订阅换算时间为10秒/天。比如订阅周期为1周，商品将在首次购买成功70秒后发生续期。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170200.38904113683987974202414907577435:50001231000000:2800:F4FFA2814E092343142524DEE4B6D979C803BC189F0377DFC01A885FA7DD4EE7.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170200.02405538596877453459409450302093:50001231000000:2800:287CB693020F6FF5BCFF9C5863BE7502C2E33DC7010C675B6DAA771AA9D86FC7.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-productview-V14
爬取时间: 2025-04-29 22:11:58
来源: Huawei Developer
场景介绍
-  您可调用应用市场服务提供的元服务加桌loadService接口，加载元服务卡片加桌页面，用户点击“添加至桌面”按钮，将元服务卡片添加至桌面。
|   图1 元服务卡片加桌  |   图2 应用详情页展示  |   图3 应用内快捷方式加桌  |
| --- | --- | --- |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170201.78245232971056332085412179068009:50001231000000:2800:4612D8B52602D40EDF72F0B039D5936A38492C017C5CEB70A02EB9A7B4C40BCB.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170201.85714014278048050216252031529023:50001231000000:2800:62FA53EC7C70C3101537564D6F75497B185BDAA9EA76A83281113DCB861CCD0B.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170201.93409718068309853624727568097623:50001231000000:2800:E35EBAF8460D2D54ADA83DB7176B6BFE2FD8209B3FA492B8CF188CCF4735F8BE.png)
业务流程
元服务卡片加桌&应用详情页展示
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170201.35444032252688718425253176610034:50001231000000:2800:EC0DD4881D97E03EB88B71254DD359A61BB48EA3EC92AF10F249B62B27E90FE1.png)
应用内快捷方式加桌
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170201.11530711706823245133748685419751:50001231000000:2800:02CEB6B5ED9F6BD4764AC65985DE92FD050F54E048324028CBBB32DB57D33A12.png)
接口说明
应用市场推荐场景提供loadService，loadProduct、checkPinShortcutPermitted、requestNewPinShortcut四个接口，具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| loadService(context: common.UIAbilityContext, want: Want, callback?: ServiceViewCallback): void | 加载元服务加桌页面接口。 |
| loadProduct(context: common.UIAbilityContext, want: Want, callback?: ProductViewCallback): void | 加载应用详情页面接口。 |
| checkPinShortcutPermitted(context: common.UIAbilityContext, shortcutId: string, want: Want, labelResName: string, iconResName: string): Promise<CheckShortcutResult> | 以静态资源方式校验桌面快捷方式。 |
| checkPinShortcutPermitted(context: common.UIAbilityContext, shortcutId: string, want: Want, label: string, foregroundIcon: string, backgroundIcon: string): Promise<CheckShortcutResult> | 以自定义资源方式校验桌面快捷方式。 |
| requestNewPinShortcut(context: common.UIAbilityContext, tid: string): Promise<void> | 创建桌面快捷方式。 |
接口名
描述
loadService(context:common.UIAbilityContext, want:Want, callback?:ServiceViewCallback): void
加载元服务加桌页面接口。
loadProduct(context:common.UIAbilityContext, want:Want, callback?:ProductViewCallback): void
加载应用详情页面接口。
checkPinShortcutPermitted(context:common.UIAbilityContext, shortcutId: string, want:Want, labelResName: string, iconResName: string): Promise<CheckShortcutResult>
以静态资源方式校验桌面快捷方式。
checkPinShortcutPermitted(context:common.UIAbilityContext, shortcutId: string, want:Want, label: string, foregroundIcon: string, backgroundIcon: string): Promise<CheckShortcutResult>
以自定义资源方式校验桌面快捷方式。
requestNewPinShortcut(context:common.UIAbilityContext, tid: string): Promise<void>
创建桌面快捷方式。
开发步骤
元服务卡片加桌
1.
```typescript
import { productViewManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import type { common, Want } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.
```typescript
const uiContext = getContext(this) as common.UIAbilityContext
const wantParam: Want = {
// 此处填入要加载的元服务的加桌链接
uri: 'xxx'
}
const callback: productViewManager.ServiceViewCallback = {
onReceive: (data: productViewManager.ServiceViewReceiveData) => {
hilog.info(0x0001, 'TAG', `loadService onReceive.result is ${data.result}, msg is ${data.msg}, formInfo is ${JSON.stringify(data.formInfo)}`);
},
onError: (error: BusinessError) => {
hilog.error(0, 'TAG', `loadService onError.code is ${error.code}, message is ${error.message}`)
},
onAppear: () => {
hilog.info(0, 'TAG', `loadService onAppear.`);
},
onDisappear: () => {
hilog.info(0, 'TAG', `loadService onDisappear.`);
}
}
```
```typescript
const uiContext = getContext(this) as common.UIAbilityContext
const wantParam: Want = {
// 此处填入要加载的元服务的加桌链接
uri: 'xxx'
}
const callback: productViewManager.ServiceViewCallback = {
onReceive: (data: productViewManager.ServiceViewReceiveData) => {
hilog.info(0x0001, 'TAG', `loadService onReceive.result is ${data.result}, msg is ${data.msg}, formInfo is ${JSON.stringify(data.formInfo)}`);
},
onError: (error: BusinessError) => {
hilog.error(0, 'TAG', `loadService onError.code is ${error.code}, message is ${error.message}`)
},
onAppear: () => {
hilog.info(0, 'TAG', `loadService onAppear.`);
},
onDisappear: () => {
hilog.info(0, 'TAG', `loadService onDisappear.`);
}
}
```
3.
```typescript
// 调用接口，加载元服务加桌页面
productViewManager.loadService(uiContext, wantParam, callback);
```
```typescript
const uiContext = getContext(this) as common.UIAbilityContext
const wantParam: Want = {
// 此处填入要加载的元服务的加桌链接
uri: 'xxx'
}
const callback: productViewManager.ServiceViewCallback = {
onReceive: (data: productViewManager.ServiceViewReceiveData) => {
hilog.info(0x0001, 'TAG', `loadService onReceive.result is ${data.result}, msg is ${data.msg}, formInfo is ${JSON.stringify(data.formInfo)}`);
},
onError: (error: BusinessError) => {
hilog.error(0, 'TAG', `loadService onError.code is ${error.code}, message is ${error.message}`)
},
onAppear: () => {
hilog.info(0, 'TAG', `loadService onAppear.`);
},
onDisappear: () => {
hilog.info(0, 'TAG', `loadService onDisappear.`);
}
}
```
应用详情页展示
1.
```typescript
import { productViewManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import type { common, Want } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.
```typescript
const exposureData: productViewManager.SKExposure = {
adTechId: '20****e8',
campaignId: '123456',
destinationId: '10******',
mmpIds: ['2f****5', '2f7***5'],
serviceTag: '123***2',
nonce: '123***2',
timestamp: 1705536488,
signature: 'MEQCIEQlmZ****zKBSE8QnhLTIHZZZ****ZpRqRxHss65Ko****JgJKjdrWdkL****juEx2RmFS7da****ZRVZ8RyMyUXg=='
};
const uiContext = getContext(this) as common.UIAbilityContext
const wantParam: Want = {
parameters: {
// 必填，此处填入要加载的应用包名，例如： bundleName: 'com.huawei.hmsapp.books'
bundleName: 'com.xxx',
// 可选，向应用归因服务传递登记归因来源数据
skExposure: exposureData
}
}
const callback: productViewManager.ProductViewCallback = {
onError: (error: BusinessError) => {
hilog.error(0, 'TAG', `loadService onError.code is ${error.code}, message is ${error.message}`)
},
onAppear: () => {
hilog.info(0, 'TAG', `loadProduct onAppear.`);
},
onDisappear: () => {
hilog.info(0, 'TAG', `loadProduct onDisappear.`);
}
}
```
```typescript
const exposureData: productViewManager.SKExposure = {
adTechId: '20****e8',
campaignId: '123456',
destinationId: '10******',
mmpIds: ['2f****5', '2f7***5'],
serviceTag: '123***2',
nonce: '123***2',
timestamp: 1705536488,
signature: 'MEQCIEQlmZ****zKBSE8QnhLTIHZZZ****ZpRqRxHss65Ko****JgJKjdrWdkL****juEx2RmFS7da****ZRVZ8RyMyUXg=='
};
const uiContext = getContext(this) as common.UIAbilityContext
const wantParam: Want = {
parameters: {
// 必填，此处填入要加载的应用包名，例如： bundleName: 'com.huawei.hmsapp.books'
bundleName: 'com.xxx',
// 可选，向应用归因服务传递登记归因来源数据
skExposure: exposureData
}
}
const callback: productViewManager.ProductViewCallback = {
onError: (error: BusinessError) => {
hilog.error(0, 'TAG', `loadService onError.code is ${error.code}, message is ${error.message}`)
},
onAppear: () => {
hilog.info(0, 'TAG', `loadProduct onAppear.`);
},
onDisappear: () => {
hilog.info(0, 'TAG', `loadProduct onDisappear.`);
}
}
```
3.
```typescript
// 调用接口，拉起应用详情页
productViewManager.loadProduct(uiContext, wantParam, callback);
```
```typescript
const exposureData: productViewManager.SKExposure = {
adTechId: '20****e8',
campaignId: '123456',
destinationId: '10******',
mmpIds: ['2f****5', '2f7***5'],
serviceTag: '123***2',
nonce: '123***2',
timestamp: 1705536488,
signature: 'MEQCIEQlmZ****zKBSE8QnhLTIHZZZ****ZpRqRxHss65Ko****JgJKjdrWdkL****juEx2RmFS7da****ZRVZ8RyMyUXg=='
};
const uiContext = getContext(this) as common.UIAbilityContext
const wantParam: Want = {
parameters: {
// 必填，此处填入要加载的应用包名，例如： bundleName: 'com.huawei.hmsapp.books'
bundleName: 'com.xxx',
// 可选，向应用归因服务传递登记归因来源数据
skExposure: exposureData
}
}
const callback: productViewManager.ProductViewCallback = {
onError: (error: BusinessError) => {
hilog.error(0, 'TAG', `loadService onError.code is ${error.code}, message is ${error.message}`)
},
onAppear: () => {
hilog.info(0, 'TAG', `loadProduct onAppear.`);
},
onDisappear: () => {
hilog.info(0, 'TAG', `loadProduct onDisappear.`);
}
}
```
-  构造拼接bundleName的DeepLink链接，其中bundleName为需要打开的应用包名，其格式为： 在应用中调用context.startAbility()方法，拉起应用市场应用详情页： 在网页中打开DeepLink链接拉起应用市场应用详情页：
```typescript
store://appgallery.huawei.com/app/detail?id= + bundleName
```
-  构造拼接bundleName的App Linking链接，其中bundleName为需要打开的应用包名，其格式为： 在应用中调用openLink()接口拉起App Linking链接： 在网页中打开App Linking链接：
```typescript
https://appgallery.huawei.com/app/detail?id= + bundleName
```
应用内快捷方式加桌
1.
```typescript
import { productViewManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import type { common, Want } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.  需提前创建应用静态快捷方式，且第二、三、四、五个参数需要与shortcuts标签中的配置保持一致。 若校验参数发生变化，则每次覆盖生成新的tid，否则返回历史tid以及剩余过期时间expired。
```typescript
const uiContext = getContext(this) as common.UIAbilityContext;
const shortcutId = "id_test1"; // 对应shortcuts标签中配置的shortcutId, 例如: "shortcutId": "id_test1"
const labelResName = "shortcut"; // 对应shortcuts标签中配置的label资源索引名称, 例如: "label": "$string:shortcut"
const iconResName = "aa_icon"; // 对应shortcuts标签中配置的icon资源索引名称, 例如: "icon": "$media:aa_icon"
const want: Want = {            // 对应shortcuts标签中配置的want
bundleName: "com.example.store.kit.demo",
moduleName: "entry",
abilityName: "EntryAbility",
parameters: {
testKey: "testValue"
}
};
```
3.
```typescript
try {
let checkShortcutResult: productViewManager.CheckShortcutResult;
productViewManager.checkPinShortcutPermitted(uiContext, shortcutId, want, labelResName, iconResName)
.then((result: productViewManager.CheckShortcutResult) => {
hilog.info(0x0001, 'TAG', `checkPinShortcutPermitted success result is ${JSON.stringify(result)}`);
checkShortcutResult = result;
}).catch((error: BusinessError) => {
hilog.error(0x0001, 'TAG',
`checkPinShortcutPermittederror. code is ${error.code}, message is ${error.message}`);
})
} catch (err) {
hilog.error(0x0001, 'TAG', `checkPinShortcutPermitted failed, code is ${err.code}, message is ${err.message}`);
}
```
4.
```typescript
const uiContext = getContext(this) as common.UIAbilityContext；
const tid = checkShortcutResult.tid;
```
5.  快捷方式加桌成功后，原校验结果tid会失效，再次加桌需重新校验生成新的tid。 为了提升用户体验，推荐预先调用checkPinShortcutPermitted接口，当用户点击加桌后，再调用requestNewPinShortcut接口执行加桌请求。 不建议在用户点击加桌后再连续调用这两个接口执行加桌。
```typescript
try {
productViewManager.requestNewPinShortcut(uiContext, tid)
.then(() => {
hilog.info(0x0001, 'TAG', `requestNewPinShortcut success.`);
}).catch((error: BusinessError) => {
hilog.error(0x0001, 'TAG', `requestNewPinShortcut error. code is ${error.code}, message is ${error.message}`);
})
} catch (err) {
hilog.error(0x0001, 'TAG', `requestNewPinShortcut failed, code is ${err.code}, message is ${err.message}`);
}
```
1.
```typescript
import { productViewManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import type { common, Want } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.  当前不支持背景层图标，第六个参数backgroundIcon传空字符串。 若校验参数发生变化，则每次覆盖生成新的tid，否则返回历史tid以及剩余过期时间expired。
```typescript
const uiContext = getContext(this) as common.UIAbilityContext;
const shortcutId = `${Date.now()}`;
const want: Want = {
bundleName: "com.example.store.kit.demo",
moduleName: "entry",
abilityName: "EntryAbility",
parameters: {
testKey: "testValue"
}
}
const label = "shortcut";
const foregroundIcon = uiContext.filesDir + "/icon.png";
const backgroundIcon = "";
```
3.
```typescript
try {
let checkShortcutResult: productViewManager.CheckShortcutResult;
productViewManager.checkPinShortcutPermitted(uiContext, shortcutId, want, label, foregroundIcon, backgroundIcon)
.then((result: productViewManager.CheckShortcutResult) => {
hilog.info(0x0001, 'TAG', `checkPinShortcutPermitted success result is ${JSON.stringify(result)}`)
checkShortcutResult = result;
}).catch((error: BusinessError) => {
hilog.error(0x0001, 'TAG',
`checkPinShortcutPermittederror. code is ${error.code}, message is ${error.message}`);
})
} catch (err) {
hilog.error(0x0001, 'TAG', `checkPinShortcutPermitted failed, code is ${err.code}, message is ${err.message}`);
}
```
4.
```typescript
const uiContext = getContext(this) as common.UIAbilityContext；
const tid = checkShortcutResult.tid;
```
5.  快捷方式加桌成功后，原校验结果tid会失效，再次加桌需重新校验生成新的tid。 为了提升用户体验，推荐预先调用checkPinShortcutPermitted接口，当用户点击加桌后，再调用requestNewPinShortcut接口执行加桌请求。 不建议在用户点击加桌后再连续调用这两个接口执行加桌。
```typescript
try {
productViewManager.requestNewPinShortcut(uiContext, tid)
.then(() => {
hilog.info(0x0001, 'TAG', `requestNewPinShortcut success.`);
}).catch((error: BusinessError) => {
hilog.error(0x0001, 'TAG', `requestNewPinShortcut error. code is ${error.code}, message is ${error.message}`);
})
} catch (err) {
hilog.error(0x0001, 'TAG', `requestNewPinShortcut failed, code is ${err.code}, message is ${err.message}`);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-moduleinstall-V14
爬取时间: 2025-04-29 22:12:11
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-moduleinstall_arkts-V14
爬取时间: 2025-04-29 22:12:25
来源: Huawei Developer
场景介绍
随着HarmonyOS应用的持续发展，应用的功能将越来越丰富，实际上80%的用户使用时长都会集中在20%的特性上，其余的功能可能也仅仅是面向部分用户。为了避免用户首次下载应用耗时过长，及过多占用用户空间，应用市场服务提供按需分发的能力，支持用户按需动态下载自己所需的增强特性。
基本概念
按需分发：一个应用程序被打包成多个安装包，安装包包含了所有的应用程序代码和静态资源。用户从应用市场下载的应用只包含基本功能的安装包，当用户需要使用增强功能时，相应安装包将会从服务器下载到设备上（应用发布请参考发布HarmonyOS应用）。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170202.25009185932119427173022457066186:50001231000000:2800:1406F87789610BC60B5B2C9CCA874310C626A871D2DAC6741EF79B8BF31FE7A6.png)
约束与限制
应用需要上架应用市场。
接口说明
产品特性按需分发场景提供以下ArkTs接口，具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| getInstalledModule(moduleName: string): InstalledModule | 查询模块安装信息接口。 |
| createModuleInstallRequest(context: common.UIAbilityContext | common.ExtensionContext): ModuleInstallRequest | 创建按需加载请求对象。 |
| addModule((moduleName: string): ReturnCode | 添加要按需加载的模块名。 |
| fetchModules(moduleInstallRequest: ModuleInstallRequest): Promise<ModuleInstallSessionState> | 按需加载请求接口，异步返回结果。 |
| cancelTask(taskId: string): ReturnCode | 取消下载任务接口。 |
| showCellularDataConfirmation(context: common.UIAbilityContext | common.ExtensionContext, taskId: string): ReturnCode | 流量提醒弹窗接口。 |
| on(type: 'moduleInstallStatus', callback: Callback<ModuleInstallSessionState>, timeout: number): void | 监听当前应用下载任务的进度。 |
| off(type: 'moduleInstallStatus', callback?: Callback<ModuleInstallSessionState>): void | 取消监听当前应用下载任务的进度。 |
接口名
描述
getInstalledModule(moduleName: string):InstalledModule
查询模块安装信息接口。
createModuleInstallRequest(context:common.UIAbilityContext|common.ExtensionContext):ModuleInstallRequest
创建按需加载请求对象。
addModule((moduleName: string):ReturnCode
添加要按需加载的模块名。
fetchModules(moduleInstallRequest:ModuleInstallRequest): Promise<ModuleInstallSessionState>
按需加载请求接口，异步返回结果。
cancelTask(taskId: string):ReturnCode
取消下载任务接口。
showCellularDataConfirmation(context:common.UIAbilityContext|common.ExtensionContext, taskId: string):ReturnCode
流量提醒弹窗接口。
on(type: 'moduleInstallStatus', callback: Callback<ModuleInstallSessionState>, timeout: number): void
监听当前应用下载任务的进度。
off(type: 'moduleInstallStatus', callback?: Callback<ModuleInstallSessionState>): void
取消监听当前应用下载任务的进度。
开发步骤
获取模块安装信息
1.
```typescript
import { moduleInstallManager } from '@kit.StoreKit';
```
2.
```typescript
const moduleName: string = 'AModule';
```
3.
```typescript
const moduleInfo: moduleInstallManager.InstalledModule = moduleInstallManager.getInstalledModule(moduleName);
```
创建按需加载的请求实例
1.
```typescript
import { moduleInstallManager } from '@kit.StoreKit';
import type { common } from '@kit.AbilityKit';
```
2.
```typescript
const context: common.UIAbilityContext | common.ExtensionContext = getContext(this) as common.UIAbilityContext;
```
3.
```typescript
const myModuleInstallProvider: moduleInstallManager.ModuleInstallProvider = new moduleInstallManager.ModuleInstallProvider();
const myModuleInstallRequest: moduleInstallManager.ModuleInstallRequest = myModuleInstallProvider.createModuleInstallRequest(context);
```
请求按需加载模块
1.
```typescript
import type { common } from '@kit.AbilityKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { moduleInstallManager } from '@kit.StoreKit';
```
2.
```typescript
const moduleNameA: string = 'AModule';
const moduleNameB: string = 'BModule';
```
3.
```typescript
let myModuleInstallRequest: moduleInstallManager.ModuleInstallRequest;
try {
const myModuleInstallProvider: moduleInstallManager.ModuleInstallProvider = new moduleInstallManager.ModuleInstallProvider();
const context: common.UIAbilityContext | common.ExtensionContext = getContext(this) as common.UIAbilityContext;
myModuleInstallRequest = myModuleInstallProvider.createModuleInstallRequest(context);
const aResult: moduleInstallManager.ReturnCode = myModuleInstallRequest.addModule(moduleNameA);
const bResult: moduleInstallManager.ReturnCode = myModuleInstallRequest.addModule(moduleNameB);
hilog.info(0, 'TAG', 'aResult:' + aResult + ' bResult:' + bResult);
} catch (error) {
hilog.error(0, 'TAG', `addModule onError.code is ${error.code}, message is ${error.message}`);
}
```
4.
```typescript
try {
moduleInstallManager.fetchModules(myModuleInstallRequest)
.then((data: moduleInstallManager.ModuleInstallSessionState) => {
hilog.info(0, 'TAG', 'Succeeded in fetching Modules data.');
})
} catch (error) {
hilog.error(0, 'TAG', `fetching Modules onError.code is ${error.code}, message is ${error.message}`);
}
```
使用动态模块
假如应用A由entry.hap、AModulelib.hsp两个包组成，其中entry是基础包，AModulelib扩展是功能包（创建方式请参考应用程序包开发与使用）。通过应用市场下载安装只会下载安装entry包，在entry包里面可以通过fetchModules接口动态下载AModulelib包，并使用动态import技术调用AModulelib里的方法和组件。
AModulelib中主要实现如下：
```typescript
{
"module": {
"name": "AModulelib",
"deliveryWithInstall": false
}
}
```
-  Calc.ets定义如下：
```typescript
export function add(a:number, b:number) {
return a + b;
}
```
entry中主要实现如下：
```typescript
{
"dynamicDependencies": {
"AModulelib": "file:../AModulelib"
}
}
```
-
```typescript
import { moduleInstallManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError, Callback } from '@kit.BasicServicesKit';
import { common } from '@kit.AbilityKit';
import { promptAction } from '@kit.ArkUI';
const TAG: string = 'TAG';
@Entry
@Component
struct Index {
@BuilderParam AModulelibComponent: Function;
@State countTotal: number = 0;
@State isShow: boolean = false;
build() {
Row() {
Column() {
Button(`调用增量模块中的add功能:3+6`)
.onClick(() => {
this.initAModulelib(() => {
import('AModulelib').then((ns: ESObject) => {
this.countTotal = ns.add(3, 6);
}).catch((error: BusinessError) => {
hilog.error(0, 'TAG', `add onError.code is ${error.code}, message is ${error.message}`);
})
})
});
Text('计算结果：' + this.countTotal)
.margin(10);
Button(`调用增量模块中的showDateComponent功能`)
.onClick(() => {
this.initAModulelib(() => {
import('AModulelib').then((ns: ESObject) => {
this.AModulelibComponent = ns.showDateComponent;
this.isShow = true;
}).catch((error: BusinessError) => {
hilog.error(0, 'TAG', `showDateComponent onError.code is ${error.code}, message is ${error.message}`);
})
})
}).margin({
top: 10, bottom: 10
});
if (this.isShow) {
this.AModulelibComponent()
}
}
.width('100%')
}
.height('100%')
}
private showToastInfo(msg: string) {
promptAction.showToast({
message: msg,
duration: 2000
});
}
/**
* 检查是否已加载AModulelib包
*
* @param successCallBack 回调
*/
private initAModulelib(successCallBack: Callback<void>): void {
try {
const result: moduleInstallManager.InstalledModule = moduleInstallManager.getInstalledModule('AModulelib');
if (result?.installStatus === moduleInstallManager.InstallStatus.INSTALLED) {
hilog.info(0, TAG, 'AModulelib installed');
successCallBack && successCallBack();
} else {
// AModulelib模块未安装, 需要调用fetchModules下载AModulelib模块。
hilog.info(0, TAG, 'AModulelib not installed');
this.fetchModule('AModulelib', successCallBack)
}
} catch (error) {
hilog.error(0, 'TAG', `getInstalledModule onError.code is ${error.code}, message is ${error.message}`);
}
}
/**
* 添加监听事件
*
* @param successCallBack 回调
*/
private onListenEvents(successCallBack: Callback<void>): void {
const timeout = 3 * 60; //单位秒， 默认最大监听时间为30min（即30*60秒）
moduleInstallManager.on('moduleInstallStatus', (data: moduleInstallManager.ModuleInstallSessionState) => {
// 返回成功
if (data.taskStatus === moduleInstallManager.TaskStatus.INSTALL_SUCCESSFUL) {
successCallBack && successCallBack();
this.showToastInfo('install success');
}
}, timeout)
}
/**
* 加载指定包
*
* @param moduleName 需要加载的安装包名称
* @param successCallBack 回调
*/
private fetchModule(moduleName: string, successCallBack: Callback<void>) {
try {
hilog.info(0, TAG, 'handleFetchModules start');
const context = getContext(this) as common.UIAbilityContext;
const moduleInstallProvider: moduleInstallManager.ModuleInstallProvider =
new moduleInstallManager.ModuleInstallProvider();
const moduleInstallRequest: moduleInstallManager.ModuleInstallRequest =
moduleInstallProvider.createModuleInstallRequest(context);
if (!moduleInstallRequest) {
hilog.warn(0, TAG, 'moduleInstallRequest is empty');
return;
}
moduleInstallRequest.addModule(moduleName);
moduleInstallManager.fetchModules(moduleInstallRequest)
.then((data: moduleInstallManager.ModuleInstallSessionState) => {
hilog.info(0, TAG, 'Succeeded in fetching Modules result.');
if (data.code === moduleInstallManager.RequestErrorCode.SUCCESS) {
this.onListenEvents(successCallBack)
} else {
hilog.info(0, TAG, 'fetchModules failure');
}
})
.catch((error: BusinessError) => {
hilog.error(0, 'TAG', `fetchModules onError.code is ${error.code}, message is ${error.message}`);
})
} catch (error) {
hilog.error(0, 'TAG', `handleFetchModules onError.code is ${error.code}, message is ${error.message}`);
}
}
}
```
运行结果效果图：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170202.28472850337033894936815589284577:50001231000000:2800:0764B75EF202191D8F00AD11D27A2F396E0573ABFA1546B5F91663B03BFA571C.gif)
接入调试功能
产品特性按需分发为开发者提供接入调试功能，支持开发者在接入过程中进行调试，应用无需上架应用市场。假如应用A由entry.hap、AModulelib.hsp两个包组成，其中entry是基础包，AModulelib是扩展功能包（创建方式请参考应用程序包开发与使用）。
1.
```typescript
hdc install entry.hap
```
2.
3.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170202.90455880113484773323040225949134:50001231000000:2800:F94ACD55475B744AC2E4040551C286D09BCCB043707F7514BAFA735057A4687E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170202.34860953815261521401013492533240:50001231000000:2800:96189E6BE1AB47265E947129D60651C3CDEA4A84628DB09F9F52578406F112B2.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-moduleinstall_c-V14
爬取时间: 2025-04-29 22:12:43
来源: Huawei Developer
场景介绍
随着HarmonyOS应用的持续发展，应用的功能将越来越丰富，实际上80%的用户使用时长都会集中在20%的特性上，其余的功能可能也仅仅是面向部分用户。为了避免用户首次下载应用耗时过长，及过多占用用户空间，应用市场服务提供按需分发的能力，支持用户按需动态下载自己所需的增强特性。
基本概念
按需分发：一个应用程序被打包成多个安装包，安装包包含了所有的应用程序代码和静态资源。用户从应用市场下载的应用只包含基本功能的安装包，当用户需要使用增强功能时，相应安装包将会从服务器下载到设备上。
约束与限制
应用需要上架应用市场。
接口说明
产品特性按需分发场景提供以下C接口，具体API说明详见接口说明。
| 接口名 | 描述 |
| --- | --- |
| HMS_ModuleInstall_GetInstalledModule | 查询模块是否安装。 |
| HMS_ModuleInstall_GetInstalledModuleName | 获取模块名。 |
| HMS_ModuleInstall_GetInstalledModuleType | 获取模块类型。 |
| HMS_ModuleInstall_GetModuleInstallStatus | 获取模块安装状态。 |
| HMS_ModuleInstall_FetchModules | 请求下载模块。 |
| HMS_ModuleInstall_GetFetchModulesRequestCode | 获取模块下载请求码。 |
| HMS_ModuleInstall_GetFetchModulesTaskStatus | 获取模块下载任务状态。 |
| HMS_ModuleInstall_GetFetchModulesTaskId | 获取模块下载任务id。 |
| HMS_ModuleInstall_GetFetchModulesDesc | 获取模块下载描述。 |
| HMS_ModuleInstall_GetFetchModules | 获取模块下载模块名。 |
| HMS_ModuleInstall_GetFetchModulesTotalSize | 获取模块下载总大小。 |
| HMS_ModuleInstall_GetFetchModulesDownloadedSize | 获取模块下载已下载大小。 |
| HMS_ModuleInstall_CancelTask | 取消下载任务。 |
| HMS_ModuleInstall_ShowCellularDataConfirmation | 展示流量弹窗。 |
| HMS_ModuleInstall_CreateStatusCallback | 创建下载进度监听回调。 |
| HMS_ModuleInstall_On | 下载进度监听。 |
| HMS_ModuleInstall_ReleaseStatusCallback | 释放下载进度监听回调。 |
| HMS_ModuleInstall_Off | 取消下载进度监听。 |
接口名
描述
HMS_ModuleInstall_GetInstalledModule
查询模块是否安装。
HMS_ModuleInstall_GetInstalledModuleName
获取模块名。
HMS_ModuleInstall_GetInstalledModuleType
获取模块类型。
HMS_ModuleInstall_GetModuleInstallStatus
获取模块安装状态。
HMS_ModuleInstall_FetchModules
请求下载模块。
HMS_ModuleInstall_GetFetchModulesRequestCode
获取模块下载请求码。
HMS_ModuleInstall_GetFetchModulesTaskStatus
获取模块下载任务状态。
HMS_ModuleInstall_GetFetchModulesTaskId
获取模块下载任务id。
HMS_ModuleInstall_GetFetchModulesDesc
获取模块下载描述。
HMS_ModuleInstall_GetFetchModules
获取模块下载模块名。
HMS_ModuleInstall_GetFetchModulesTotalSize
获取模块下载总大小。
HMS_ModuleInstall_GetFetchModulesDownloadedSize
获取模块下载已下载大小。
HMS_ModuleInstall_CancelTask
取消下载任务。
HMS_ModuleInstall_ShowCellularDataConfirmation
展示流量弹窗。
HMS_ModuleInstall_CreateStatusCallback
创建下载进度监听回调。
HMS_ModuleInstall_On
下载进度监听。
HMS_ModuleInstall_ReleaseStatusCallback
释放下载进度监听回调。
HMS_ModuleInstall_Off
取消下载进度监听。
使用指导
应用要使用ModuleInstall提供的按需分发能力，需要添加对应的头文件。
在CMake脚本中链接动态库
添加头文件
需要开发者引入module_install.h头文件后，才可以使用按需分发相关API。
获取模块安装信息
在使用按需分发能力之前，需要调用HMS_ModuleInstall_GetInstalledModule接口查询按需分发的模块是否安装，接口调用成功后，可以通过HMS_ModuleInstall_GetInstalledModuleName、HMS_ModuleInstall_GetInstalledModuleType、HMS_ModuleInstall_GetModuleInstallStatus接口分别获取模块名称、模块类型、模块安装状态信息。
按需加载模块
应用可以通过HMS_ModuleInstall_FetchModules按需加载模块，接口调用成功之后可以通过HMS_ModuleInstall_GetFetchModulesRequestCode、HMS_ModuleInstall_GetFetchModulesTaskStatus、HMS_ModuleInstall_GetFetchModulesTaskId、HMS_ModuleInstall_GetFetchModulesDesc、HMS_ModuleInstall_GetFetchModules、HMS_ModuleInstall_GetFetchModulesTotalSize、HMS_ModuleInstall_GetFetchModulesDownloadedSize接口获取模块下载相关信息。
取消下载任务
如果需要取消下载，应用可以调用HMS_ModuleInstall_CancelTask接口取消下载任务，其中taskId是调用HMS_ModuleInstall_GetFetchModulesTaskId接口返回的taskId。
展示流量弹窗
如果调用HMS_ModuleInstall_GetFetchModulesRequestCode接口返回
DOWNLOAD_WAIT_WIFI时，需要调用HMS_ModuleInstall_ShowCellularDataConfirmation接口展示流量弹窗。
监听下载任务
定义监听下载回调函数
初始化下载进度回调
应用可以通过HMS_ModuleInstall_CreateStatusCallback初始化下载进度回调。
监听下载进度
应用可以通过HMS_ModuleInstall_On接口监听下载进度。
取消监听下载任务
应用可以通过HMS_ModuleInstall_Off接口取消下载进度监听。
完整示例

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-erms-V14
爬取时间: 2025-04-29 22:12:56
来源: Huawei Developer
场景介绍
生态查询服务可以为您提供应用/元服务运行信息的查询，当前提供场景值查询和广告验签信息查询。场景值是用来描述用户进入应用和元服务的路径。您可以通过本服务，来查询您的元服务/应用是通过何种场景被打开的（场景值明细）。当前我们支持元服务的场景值查询，后续我们会继续公布应用场景值的查询。广告验签版本查询只在您的应用涉及广告场景下才会被使用到。您可以通过本查询服务，查询广告验签参数处理逻辑。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170202.12991495994560480497082981984029:50001231000000:2800:BFE5F022DE85CA1B9942149B7AA8157AAE5087770F2D9BBFB55387C0D691714E.png)
约束与限制
如果应用或者元服务没有产生场景值，调用getSelfSceneCode接口返回的场景值为空。
接口说明
生态查询服务场景提供以下接口，具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| getSelfSceneCode():string | 获取自身场景值。 |
| getAdsVerificationVersion(): number | 查询广告验签版本。 |
接口名
描述
getSelfSceneCode():string
获取自身场景值。
getAdsVerificationVersion(): number
查询广告验签版本。
开发步骤
查询自身场景值
1.
```typescript
import { hilog } from '@kit.PerformanceAnalysisKit';
import { sceneManager } from '@kit.StoreKit';
```
2.
```typescript
try {
const sceneCode: string = sceneManager.getSelfSceneCode();
hilog.info(0, 'TAG', "Succeeded in getting SelfSceneCode res = " + sceneCode);
} catch (error) {
hilog.error(0, 'TAG', `getSelfSceneCode failed. code is ${error.code}, message is ${error.message}`);
}
```
查询广告验签版本
1.
```typescript
import { hilog } from '@kit.PerformanceAnalysisKit';
import { sceneManager } from '@kit.StoreKit';
```
2.
```typescript
try {
const version: number = sceneManager.getAdsVerificationVersion();
hilog.info(0, 'TAG', "Succeeded in getting AdsVerificationVersion res = " + version);
} catch (error) {
hilog.error(0, 'TAG', `getAdsVerificationVersion failed. code is ${error.code}, message is ${error.message}`);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-update-V14
爬取时间: 2025-04-29 22:13:10
来源: Huawei Developer
应用市场更新功能为开发者提供版本检测、显示更新提醒功能。开发者使用应用市场更新功能可以提醒用户及时更新到最新版本。
场景介绍
当应用启动完成或用户在应用中主动检查应用新版本时，开发者可以通过本服务，来查询应用是否有可更新的版本。如果存在可更新版本，您可以通过本服务为用户显示更新提醒。
|   图1 调用检查更新、显示更新提醒  |   图2 进入更新界面  |
| --- | --- |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170202.95296335715275688869544738158558:50001231000000:2800:D25BA3A2E35AD1AE3551C572CD01AC25B9D126880F90FA913B5028BFACCCF999.jpg)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170202.58305870999237106885627469153862:50001231000000:2800:D24389F085535D7AAC4AD0EA464099A6718F23ED45E183AA93BBDAE8D9B60F8B.jpg)
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170203.92017717905054578241990598117197:50001231000000:2800:03ED6902560C4C06B81317955209F0B148F1F8E9F3772DDF58A35686701C3FDF.png)
接口说明
应用市场更新服务提供以下接口，具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| checkAppUpdate(context: common.UIAbilityContext): Promise<CheckUpdateResult> | 检查更新接口，用于检测当前是否有新版本。 |
| showUpdateDialog(context:common.UIAbilityContext): Promise<ShowUpdateResultCode> | 显示升级对话框接口，用于提示用户进行升级。 |
接口名
描述
checkAppUpdate(context:common.UIAbilityContext): Promise<CheckUpdateResult>
检查更新接口，用于检测当前是否有新版本。
showUpdateDialog(context:common.UIAbilityContext): Promise<ShowUpdateResultCode>
显示升级对话框接口，用于提示用户进行升级。
开发步骤
检测新版本
1.
```typescript
import { updateManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import type { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.
```typescript
let context: common.UIAbilityContext = getContext() as common.UIAbilityContext;
```
3.
```typescript
try {
updateManager.checkAppUpdate(context)
.then((checkResult: updateManager.CheckUpdateResult) => {
hilog.info(0, 'TAG', "Succeeded in checking Result updateAvailable:" + checkResult.updateAvailable);
}).catch((error: BusinessError) => {
hilog.error(0, 'TAG', `checkAppUpdate onError.code is ${error.code}, message is ${error.message}`);
});
} catch (error) {
hilog.error(0, 'TAG', `checkAppUpdate onError.code is ${error.code}, message is ${error.message}`);
}
```
显示升级对话框
1.
```typescript
import { updateManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import type { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.
```typescript
let context: common.UIAbilityContext = getContext() as common.UIAbilityContext;
```
3.
```typescript
try {
updateManager.showUpdateDialog(context)
.then((resultCode: updateManager.ShowUpdateResultCode) => {
hilog.info(0, 'TAG', "Succeeded in showing UpdateDialog resultCode:" + resultCode);
})
.catch((error: BusinessError) => {
hilog.error(0, 'TAG', `showUpdateDialog onError.code is ${error.code}, message is ${error.message}`);
});
} catch (error) {
hilog.error(0, 'TAG', `showUpdateDialog onError.code is ${error.code}, message is ${error.message}`);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-attribution-V14
爬取时间: 2025-04-29 22:13:23
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-attribution-introduction-V14
爬取时间: 2025-04-29 22:13:36
来源: Huawei Developer
应用归因服务是华为提供的不依赖用户标识符的端侧归因服务。
当用户在应用市场安装应用并产生转化时，应用归因服务通过匹配用户在安装前后的行为数据，分析用户的来源渠道以及转化的原因，并将归因结果回传给分发平台、开发者、归因监测平台。开发者可以通过归因结果数据分析投放效果、评估渠道质量，进而优化投放策略，分发平台可以评估渠道商业价值，优化营销效果。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170203.79088945660300080367241382939972:50001231000000:2800:ED409483E8A9DB1C65486ECD5F6E357D6878D91102E21518CC005A9691BC3F43.jpg)
业务流程中各任务描述如下：
| 序号 | 任务 | 详情 |
| --- | --- | --- |
| 1 | 注册归因角色 | 应用生态伙伴通过应用归因服务云侧注册归因角色并完成其信息的配置，包括：名称、回传地址（用于接收归因结果回传的URL）、公钥。注册成功后平台生成归因角色ID。应用生态伙伴指：开发者、分发平台、归因监测平台。 |
| 2 | 登记归因来源 | 媒体App、分发平台通过调用registerSource接口登记归因来源（曝光/点击）。 |
| 3 | 登记归因转化 | 开发者App、归因监测平台通过调用registerTrigger接口登记归因转化事件。 |
| 4 | 归因结果回传 | 应用归因服务将归因结果通过回传地址回传至应用生态伙伴。 |
| 5 | 接入调试 | 应用归因服务提供接入调试功能，开发者通过调用调试接口验证接入的准确性及归因结果回传等基础能力。 |
序号
任务
详情
1
注册归因角色
应用生态伙伴通过应用归因服务云侧注册归因角色并完成其信息的配置，包括：名称、回传地址（用于接收归因结果回传的URL）、公钥。注册成功后平台生成归因角色ID。应用生态伙伴指：开发者、分发平台、归因监测平台。
2
登记归因来源
媒体App、分发平台通过调用registerSource接口登记归因来源（曝光/点击）。
3
登记归因转化
开发者App、归因监测平台通过调用registerTrigger接口登记归因转化事件。
4
归因结果回传
应用归因服务将归因结果通过回传地址回传至应用生态伙伴。
5
接入调试
应用归因服务提供接入调试功能，开发者通过调用调试接口验证接入的准确性及归因结果回传等基础能力。
约束与限制

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-attribution-preparations-V14
爬取时间: 2025-04-29 22:13:49
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-attribution-config-agc-V14
爬取时间: 2025-04-29 22:14:03
来源: Huawei Developer
在注册归因角色前，需要在华为开发者联盟网站上注册成为开发者，并完成企业开发者实名认证。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-attribution-register-V14
爬取时间: 2025-04-29 22:14:16
来源: Huawei Developer
应用生态伙伴通过应用归因服务云侧注册归因角色及配置信息，包括：角色、名称、回传地址（用于接收归因结果回传的URL）、公钥。注册成功后平台生成归因角色ID。
注册归因角色前需生成用于签名/验签的密钥对。
开通权限
注册归因角色前，需开通应用市场服务权限。当前功能为定向邀请功能，如果您有意向请通过客服邮箱developer@huawei.com进行邮件申请。
请提供如下信息进行申请，我们会在1~2个工作日内回复申请结果，请您留意邮箱消息。
邮件模板如下：
邮件主题：Store Kit应用归因服务的权限申请
邮件内容：
开发者ID：******
开发者名称：******
申请原因：*******
生成密钥对
可参考HarmonyOS提供的API生成用于签名/验签的密钥对，或者自行选取方法生成（推荐使用JavaScript的库线下生成）。
请使用签名算法SHA256WithRSA/PSS，生成密钥位数大于3072的密钥对。
生成的私钥用于生成签名，建议自行妥善保管；生成的公钥需要在注册角色时，提供给应用归因服务，请确保签名的私钥和注册角色时的公钥是成对生成的，以确保验签成功。
注册归因角色
1.  参数填写说明如下： 参数 填写说明 角色 选择应用生态伙伴的角色，角色包括：分发平台、归因监测平台、开发者。 名称 填写分发平台、归因监测平台或开发者的名称。 公钥 填写已生成密钥对中的公钥。应用生态伙伴按照生成签名方法生成签名时，使用该公钥对应的私钥并遵照应用归因服务定义的归因来源签名计算规则，应用归因平台使用该公钥对签名值做验签。 回传地址 填写用于接收华为应用归因回传归因结果的URL，推荐使用HTTPS协议。
2.  状态为新建待审核，表示未完成注册。不能编辑、删除该条注册信息。 状态为生效，表示完成注册。之后编辑、删除该条注册信息均无需运营人员审核。 状态为驳回，表示未完成注册。编辑该条注册信息，需要重新提交运营人员审核；删除该条注册信息，无需审核。
3.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170203.00269282243764339236285692768226:50001231000000:2800:D3DE2999781B489BFAD7945BA40F67A162B827F071FCA4BBDF3BA9625FBF701D.png)
| 参数  | 填写说明  |
| --- | --- |
| 角色  | 选择应用生态伙伴的角色，角色包括：分发平台、归因监测平台、开发者。  |
| 名称  | 填写分发平台、归因监测平台或开发者的名称。  |
| 公钥  | 填写已生成密钥对中的公钥。应用生态伙伴按照生成签名方法生成签名时，使用该公钥对应的私钥并遵照应用归因服务定义的归因来源签名计算规则，应用归因平台使用该公钥对签名值做验签。  |
| 回传地址  | 填写用于接收华为应用归因回传归因结果的URL，推荐使用HTTPS协议。  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170203.41759833047907517725137754586229:50001231000000:2800:55D5580138DA27CDB6909D5905535370DBE64E6B206E1B73263159ABD8FB19E5.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170203.18613839477767934494532429029300:50001231000000:2800:80265D344F41B1825454D45C2A2A02A137C3380618DB2278279BECCC3989C61E.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-attribution-trigger-V14
爬取时间: 2025-04-29 22:14:30
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-attribution-trigger-standard-V14
爬取时间: 2025-04-29 22:14:44
来源: Huawei Developer
接入应用归因服务前，请先明确转化事件。应用归因支持标准转化事件和自定义转化事件，建议开发者优先选用标准转化事件登记上报。若无法满足业务需求，开发者可自行创建自定义转化事件用于后续的归因服务。
开发者或归因监测平台角色的合作伙伴在归因注册页面可以查看标准转化事件：
点击右侧“转化事件”按钮。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170203.74382630041351522323448768098904:50001231000000:2800:AAC9A84A4D597E17FE4B2B5506D595EA01AC3410539DDE3969074E1E279EEB73.png)
查看标准转化事件列表信息。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170204.77168053485166032896083784374759:50001231000000:2800:1A34A5026A800DB2BBAA0672269D48A33F0AD9AD3DCA9C2578B666FDF6DD0FB3.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-attribution-trigger-custom-V14
爬取时间: 2025-04-29 22:14:58
来源: Huawei Developer
开发者角色的合作伙伴在归因注册页面可以做如下操作：
新增、修改、删除、查看自定义转化事件。
新增、修改、删除自定义转化事件时，相应的操作会被运营人员在后台审核通过或驳回，仅被审核通过的自定义转化事件才能生效。
新增
1.
2.
3.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170204.70401291958148595172885152366362:50001231000000:2800:40F6A2A91FC8548B04D41CCD714641DD19DF80A03EDB8BE6D78C61EAE9D2D917.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170204.81361728939360934944555348340234:50001231000000:2800:4D0C3D8A20B338BC038A190091B348688C68F08A0BA9E2FC9861171BB9C4C6F4.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170204.92955522610285483733973565452035:50001231000000:2800:34B0CDA92FDAE892696B4ED5BB08FA2019E3460F89FE75B9BB3A02AC95980B06.png)
修改
1.
2.
3.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170204.40910177290248812332493100677658:50001231000000:2800:2D4D856ADB6F111864D53E18C6E5C244FAA8B3BCEB4F3ACF41F57329442ECC94.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170204.52819430370581710061119270506461:50001231000000:2800:FA66DED70777CED02FEA28E66CBA26D14A0DC02D00076A6B89429E41EE9DB96E.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170204.56543693241824601237151678028061:50001231000000:2800:4A5CC8B34416B4BE02589E8A20BF52AA08D8C5D5B755D5B440870AC426464CD2.png)
“修改待审核”状态的自定义转化事件被审核通过后才能生效，如果被驳回，则维持修改之前的转化事件名称和转化事件编码值。
删除
点击列表右侧的“删除”按钮，并在弹出框中点击“确认”。
状态为“已驳回”的自定义转化事件可以直接删除。
状态为“生效”的自定义转化事件，点击“确认”后该条自定义转化事件的状态由“生效”变为“删除待审核”。
删除待审核的自定义转化事件需要审核人员审核通过后，才会被删除。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170204.42154433078474822800835614506602:50001231000000:2800:A08E45E9CC5E1E97FCD5F70F73E0B07D9D28A1FC34AD24A24587386C56B4A8B9.png)
查看
在归因注册页面，点击开发者角色右边的“转化事件”进入转化事件管理页面查看自定义转化事件信息。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170204.78825602718326688404366417769882:50001231000000:2800:DE27DF95CF0C1350A0FBD468E8661242B21B731A61256F7218849DC5BBDA9B97.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-attribution-developmentguide-V14
爬取时间: 2025-04-29 22:15:12
来源: Huawei Developer
场景介绍
应用归因服务为媒体App、分发平台提供向端侧应用归因服务登记归因来源（即应用曝光点击事件）、开发者应用登记转化事件的能力。
端侧应用归因服务根据媒体应用登记的归因来源，以及开发者应用登记的转化事件，按照系统规则，在端侧完成归因计算。
接口说明
应用归因服务场景提供以下接口，具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| registerSource(adSourceInfo: AdSourceInfo): Promise<void> | 登记归因来源信息接口。 |
| registerTrigger(adTriggerInfo: AdTriggerInfo): Promise<void> | 登记归因转化信息接口。 |
接口名
描述
registerSource(adSourceInfo: AdSourceInfo): Promise<void>
登记归因来源信息接口。
registerTrigger(adTriggerInfo: AdTriggerInfo): Promise<void>
登记归因转化信息接口。
开发步骤
登记归因来源
1.
```typescript
import { attributionManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.
```typescript
const adSourceInfo: attributionManager.AdSourceInfo = {
// 此处请传入真实的数据，在应用归因云侧注册应用生态伙伴角色时，由应用归因服务分配
adTechId: '20****e8',
campaignId: '',
// 此处请传入真实的数据，开发者应用上架华为应用市场的appId，不带C
destinationId: '10******',
sourceType: attributionManager.SourceType.IMPRESSION,
// 归因监测平台id
mmpIds: ['2f****5','2f7***5'],
// 分发平台关注的业务信息
serviceTag: '123***2',
// 此处请传入真实的数据，用于计算签名的随机数，不带'-'
nonce: '123***2',
timestamp: Date.now(),
// 此处请传入真实的数据
signature: 'MEQCIEQlmZ****zKBSE8QnhLTIHZZZ****ZpRqRxHss65Ko****JgJKjdrWdkL****juEx2RmFS7da****ZRVZ8RyMyUXg=='
}
```
3.
```typescript
try {
await attributionManager.registerSource(adSourceInfo);
hilog.info(0, "testTag", `Succeeded in registering Source.`);
} catch (error) {
hilog.error(0x0000, "testTag", "testRegisterSourceParamError exception code: " + error.code
+ " exception: " + error.message);
}
```
登记归因转化
1.
```typescript
import { attributionManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.
```typescript
const adTriggerInfo: attributionManager.AdTriggerInfo = {
businessScene: 5,
// 此处请填入真实的数据，转化事件编码，从应用归因云端管理平台获取
triggerData: 123
}
```
3.
```typescript
try {
await attributionManager.registerTrigger(adTriggerInfo);
} catch (error) {
hilog.error(0x0000, "testTag", "registerTrigger exception code: " + error.code
+ " exception: " + error.message);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-attribution-receive-V14
爬取时间: 2025-04-29 22:15:27
来源: Huawei Developer
应用归因将满足隐私要求的归因结果，回传给开发者、获胜的分发平台以及分发平台配置的归因监测平台。归因结果回传详细信息请参考归因结果回传。分发平台/开发者/归因监测平台需按照回传接口的要求完成相应的接口实现。
归因结果回传地址为注册归因角色时维护的链接地址。
为保证信息合法性，分发平台/开发者/归因监测平台需要对回传的归因结果进行验签（验签算法：SHA256WithRSA/PSS）。
验签计算规则
1.  其中，非必填字段仅当满足回传条件时才携带，验签时，应根据接收到的请求中包含的字段拼接字符串进行验签，例如，回传的消息结构中，仅包含ad_tech_id、destination_id，则拼接的待验签字符串为：
```typescript
ad_tech_id + '\u2063' + campaign_id + '\u2063' + source_id + '\u2063' + destination_id + '\u2063' + trigger_data + '\u2063' + nonce + '\u2063' + timestamp
```
```typescript
====================public key====================
MIIBojANBgkqhkiG9w0BAQEFAAOCAY8AMIIBigKCAYEA0IgrEtIR1kVF/ImKIo3/5AxEFZzL156jLn2CilqGQmFByiMlpa2G0dotCK1mj9bdhDJbUPd3Plx1zVX9WoW/L/mg25+ng0iPlcItqhUuTIVi+0N50BHlVKPFWG/vYxCkR1ABU44zHyg2XAmqs2L6nUA9Hjbmwn5WX9JUWFF3RF4ja6GJRDkq0HFQ6ouM8Vpm3ZnnRTCuEzOpUcG+FMYAa9M9coRMMM3w0M/IgbYL4n86tQ6ybicaeadSwJIzXExLL0bSf1tYZ7CWvdK0V2ftLWC7Wmho64/g/AjqXc5d2nq88Cn+Vm48jLW1gibI1sPLjFhcfgRg0EOHD/FeUHLxhGeLc4KZ7hrcaW+IuVaTpHxbxJ9WiIokf6blQSEyPHx4w95IdGYNe/BGFhYaf3AhCe6b62e//0JdaYPKNDUKOpTf60vAhqQeibx4iaRZh8dEAU1m9lD0aR6+0trNCzdsC0iPCRLCXcFJXN2/ZJRug39xuJoSEkCxUsJdcoYknbRxAgMBAAE=
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-attribution-test-V14
爬取时间: 2025-04-29 22:15:41
来源: Huawei Developer
应用归因服务为开发者提供接入调试能力，支持开发者在接入过程中进行自助调试，通过调用调试接口验证接入的准确性及归因结果回传等基础能力，从而提升接入效率。
场景介绍
应用归因服务接入调试功能支持的场景如下：
-  调用调试接口，校验接口请求及业务逻辑，如参数校验、签名校验等，并提示相应错误码，支持开发者自行发现问题。
-  开发者设置归因数据后，调用调试接口主动、实时触发归因结果回传，验证完整的归因流程。
接口说明
应用归因服务接入调试功能提供以下接口，具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| validateSource(adSourceInfo: AdSourceInfo, publicKey: string): Promise<void> | 验证归因来源接口，用于媒体App/分发平台验证adSourceInfo入参的合法性。 |
| setPostback(postbackInfo: PostbackInfo): Promise<void> | 设置归因结果回传接口，用于应用生态伙伴：  验证triggerData是否合法。 设置调试使用的回传数据。  |
| flushPostbacks(adTechId: string): Promise<void> | 主动、实时触发归因结果回传接口，用于应用生态伙伴验证接收及处理回传的逻辑是否正确。 |
接口名
描述
validateSource(adSourceInfo: AdSourceInfo, publicKey: string): Promise<void>
验证归因来源接口，用于媒体App/分发平台验证adSourceInfo入参的合法性。
setPostback(postbackInfo: PostbackInfo): Promise<void>
设置归因结果回传接口，用于应用生态伙伴：
flushPostbacks(adTechId: string): Promise<void>
主动、实时触发归因结果回传接口，用于应用生态伙伴验证接收及处理回传的逻辑是否正确。
开发步骤
验证归因来源
1.
```typescript
import { attributionTestManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.
```typescript
//注册归因角色时提供给应用归因服务云侧的公钥
let publicKey: string = '';
let adSourceInfo: attributionTestManager.AdSourceInfo = {
//可以使用虚拟的adTechId
adTechId: '2******8',
campaignId: '1****6',
destinationId: '1*******8',
sourceType: attributionTestManager.SourceType.IMPRESSION,
mmpIds: ['1******8', '2******9'],
serviceTag: 'testServiceTag',
nonce: '123***2',
timestamp: Date.now(),
signature: 'MEQCIEQlmZ****zKBSE8QnhLTIHZZZ****ZpRqRxHss65Ko****JgJKjdrWdkL****juEx2RmFS7da****ZRVZ8RyMyUXg=='
}
```
3.
```typescript
attributionTestManager.validateSource(adSourceInfo, this.publicKey).then(() => {
hilog.info(0, "testTag", 'Succeeded in validating source.');
}).catch((error: BusinessError) => {
hilog.error(0, "testTag", `testValidateSource failed.code is ${error.code}, message is ${error.message}`);
})
```
设置归因结果回传
1.
```typescript
import { attributionTestManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.
```typescript
let postbackInfo: attributionTestManager.PostbackInfo = {
adTechId: '1******8',
campaignId: '1****6',
sourceId: '1*******8',
destinationId: '1*******8',
serviceTag: 'testServiceTag',
businessScene: 5,
triggerData: 123,
postbackUrl: 'https://xxx.com'
};
```
3.
```typescript
attributionTestManager.setPostback(postbackInfo).then(() => {
hilog.info(0, "testTag", 'Succeeded in setting postback.');
}).catch((error: BusinessError) => {
hilog.error(0, "testTag", `setPostback onError.code is ${error.code}, message is ${error.message}`);
})
```
触发归因结果回传
1.
```typescript
import { attributionTestManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.
```typescript
let adTechId: string = '1******8';
```
3.
```typescript
attributionTestManager.flushPostbacks(adTechId).then(() => {
hilog.info(0, "testTag", 'Succeeded in flushing postbacks.');
}).catch((error: BusinessError) => {
hilog.error(0, "testTag", `flushPostbacks onError.code is ${error.code}, message is ${error.message}`);
})
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-privacy-V14
爬取时间: 2025-04-29 22:15:55
来源: Huawei Developer
隐私管理服务为使用标准化隐私声明托管服务的应用/元服务提供隐私链接查询、隐私签署状态查询、停止隐私协议和拉起标准化隐私弹框功能。
场景介绍
-  在接入标准化隐私声明托管服务的场景下，应用内查询或展示隐私协议所需。
-  用户未签署隐私协议时，系统权限申请将会被驳回，避免在用户同意前重复无意义申请，支持开发者查询签署情况，以便于应用/元服务内规划相关权限及合理合规获取数据。
-  用于停止用户已签署的隐私协议，停止隐私协议后再次打开应用会重新弹出标准化隐私弹框。
-  在接入标准化隐私声明托管服务的场景下，用于开发者需要主动拉起标准化隐私弹框。
业务流程
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170205.81099592040822080585615147601167:50001231000000:2800:416B800D0D2A20388F33C51020C143E17576E667B8CE0D0B76D6980F9DD51911.png)
查询隐私链接信息
查询隐私签署状态
停止隐私协议
拉起标准化隐私弹框
约束与限制
接口说明
隐私管理服务提供以下接口，具体API说明详见接口文档。
| 接口名 | 描述 |
| --- | --- |
| getAppPrivacyMgmtInfo(): AppPrivacyMgmtInfo | 查询隐私链接信息接口，用于查询隐私链接信息。 |
| getAppPrivacyResult(): AppPrivacyResult[] | 查询隐私签署状态接口，用于查询隐私签署状态信息。 |
| disableService():void | 停止隐私协议接口，用于停止隐私协议。 |
| requestAppPrivacyConsent(context:common.UIAbilityContext):Promise<ConsentResult> | 拉起标准化隐私弹框接口，用于开发者需要主动拉起标准化隐私弹框。 |
接口名
描述
getAppPrivacyMgmtInfo():AppPrivacyMgmtInfo
查询隐私链接信息接口，用于查询隐私链接信息。
getAppPrivacyResult():AppPrivacyResult[]
查询隐私签署状态接口，用于查询隐私签署状态信息。
disableService():void
停止隐私协议接口，用于停止隐私协议。
requestAppPrivacyConsent(context:common.UIAbilityContext):Promise<ConsentResult>
拉起标准化隐私弹框接口，用于开发者需要主动拉起标准化隐私弹框。
开发步骤
查询隐私链接信息
1.
```typescript
import { privacyManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.
```typescript
try {
let appPrivacyManageInfo: privacyManager.AppPrivacyMgmtInfo = privacyManager.getAppPrivacyMgmtInfo();
hilog.info(0, 'TAG', "Succeeded in getting AppPrivacyManageInfo type: " + appPrivacyManageInfo["type"]);
let privacyLinkInfoArray : privacyManager.AppPrivacyLink[] = appPrivacyManageInfo.privacyInfo;
hilog.info(0, 'TAG', "Succeeded in getting AppPrivacyManageInfo size = " + privacyLinkInfoArray.length);
for (let i = 0; i < privacyLinkInfoArray.length; i++) {
hilog.info(0, 'TAG', "Succeeded in getting AppPrivacyManageInfo type = " + privacyLinkInfoArray[i]["type"] + ", version = " + privacyLinkInfoArray[i]["versionCode"] + ", url = " + privacyLinkInfoArray[i]["url"]);
}
} catch (error) {
hilog.error(0, 'TAG', "GetAppPrivacyManageInfoPublic exception code: " + error.code + ", exception message: " + error.message);
}
```
查询隐私签署状态
1.
```typescript
import { privacyManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.
```typescript
try {
let appPrivacyResults: privacyManager.AppPrivacyResult[] = privacyManager.getAppPrivacyResult();
hilog.info(0, 'TAG', "Succeeded in getting AppPrivacyResult size = " + appPrivacyResults.length);
for (let i = 0; i < appPrivacyResults.length; i++) {
hilog.info(0, 'TAG', "Succeeded in getting AppPrivacyResult type = " + appPrivacyResults[i]["type"] + ", version = " + appPrivacyResults[i]["versionCode"] + ", result = "+appPrivacyResults[i]["result"]);
}
} catch (error) {
hilog.error(0, 'TAG', "GetAppPrivacyResultPublic exception code: " + error.code + ", exception message: " + error.message);
}
```
停止隐私协议
1.
```typescript
import { privacyManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
```
2.
```typescript
try {
privacyManager.disableService();
hilog.info(0, 'TAG', "Succeeded in disabling Service success.");
} catch (error) {
hilog.error(0, 'TAG', "DisableService exception code: " + error.code + ", exception message: " + error.message);
}
```
拉起标准化隐私弹框
1.
```typescript
import { privacyManager } from '@kit.StoreKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import type { common } from '@kit.AbilityKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.
```typescript
try {
const uiContext = getContext(this) as common.UIAbilityContext;
privacyManager.requestAppPrivacyConsent(uiContext).then((consentResult : privacyManager.ConsentResult) => {
let appPrivacyResults: privacyManager.AppPrivacyResult[] = consentResult["results"];
for (let i = 0; i < appPrivacyResults.length; i++) {
hilog.info(0, 'TAG', "GetAppPrivacyResult type = " + appPrivacyResults[i]["type"] + ", version = " + appPrivacyResults[i]["versionCode"] + ", result = " + appPrivacyResults[i]["result"] + ", signingTimeStamp = " + appPrivacyResults[i]["signingTimeStamp"]);
}
}).catch((error: BusinessError<Object>) => {
hilog.error(0, 'TAG', `requestAppPrivacyConsent failed, Code: ${error.code}, message: ${error.message}`);
});
} catch (error) {
hilog.error(0, 'TAG', "requestAppPrivacyConsent exception code: " + error.code + ", exception message: " + error.message);
}
```
隐私弹框签署结果公共事件
在接入标准化隐私声明托管服务之后，用户未签署隐私声明前，打开应用/元服务会弹出标准化隐私弹框，弹框样式如下：
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170205.58160603479467430578252399690103:50001231000000:2800:9B2923F7A8A2DC94774BD79B9773C54805CE2A1F8DC97F443733D7DC9B693FE4.png)
用户点击同意隐私弹框，应用市场会发送隐私弹框签署结果公共事件。应用可通过监听该事件，感知用户隐私签署结果。
事件说明
| 事件名称 | 值 | 描述 |
| --- | --- | --- |
| COMMON_EVENT_PRIVACY_STATE_CHANGED | usual.event.PRIVACY_STATE_CHANGED | 隐私弹框签署结果公共事件，事件携带数据如下： { 'resultType': privacyResultType, 'appIndex': appIndex } 其中：  privacyResultType：1：同意完整模式 0：未同意 appIndex：分身索引  |
事件名称
值
描述
COMMON_EVENT_PRIVACY_STATE_CHANGED
usual.event.PRIVACY_STATE_CHANGED
隐私弹框签署结果公共事件，事件携带数据如下：
{
'resultType': privacyResultType,
'appIndex': appIndex
}
其中：
-  1：同意完整模式 0：未同意
公共事件接收示例（无应用分身场景）：
```typescript
import { hilog } from '@kit.PerformanceAnalysisKit';
import { commonEventManager } from '@kit.BasicServicesKit';
const TAG = 'PrivacySubscribe';
class PrivacySubscribeSample {
private readonly eventId = 'usual.event.PRIVACY_STATE_CHANGED';
// 订阅者信息, 用于保存创建成功的订阅者对象，后续使用其完成订阅及退订的动作
private subscriber: commonEventManager.CommonEventSubscriber | undefined = undefined;
// 事件列表
private subscribeInfo: commonEventManager.CommonEventSubscribeInfo = {
events: [this.eventId]
};
public subscribe(): void {
hilog.info(0, TAG, "subscribe");
// 创建订阅者
commonEventManager.createSubscriber(this.subscribeInfo).then((commonEventSubscriber) => {
hilog.info(0, TAG, "createSubscriber");
this.subscriber = commonEventSubscriber;
// 订阅公共事件
try {
commonEventManager.subscribe(this.subscriber, (err, data) => {
if (err) {
hilog.error(0, TAG, `subscribe failed, code is ${err?.code}, message is ${err?.message}`);
return;
}
let result = JSON.parse(data?.data ?? '{}')?.resultType as number;
if (result === 1) {
// 隐私同意处理
}
});
} catch (error) {
hilog.error(0, TAG, "init createSubscriber failed, exception code: " + error.code + ", exception message: " + error.message);
}
});
}
}
```
公共事件接收示例（应用分身场景）：
```typescript
import { hilog } from '@kit.PerformanceAnalysisKit';
import { commonEventManager } from '@kit.BasicServicesKit';
import { UIAbility } from '@kit.AbilityKit';
const TAG = 'PrivacyEventSubscriber';
export default class MyAbility extends UIAbility {
onBackground() {
let appCloneIndex = 0;
let applicationContext = this.context.getApplicationContext();
try {
appCloneIndex = applicationContext.getCurrentAppCloneIndex();
} catch (error) {
hilog.error(0, TAG, `getCurrentAppCloneIndex fail, exception code:` + error.code + `, exception message: ` + error.message);
}
new PrivacyEventSubscriber(appCloneIndex).subscribe();
}
}
class PrivacyEventSubscriber {
private appCloneIndex: number = 0;
private readonly eventId = 'usual.event.PRIVACY_STATE_CHANGED';
// 订阅者信息, 用于保存创建成功的订阅者对象，后续使用其完成订阅及退订的动作
private subscriber: commonEventManager.CommonEventSubscriber | undefined = undefined;
// 事件列表
private subscribeInfo: commonEventManager.CommonEventSubscribeInfo = {
events: [this.eventId]
};
constructor(appCloneIndex: number) {
this.appCloneIndex = appCloneIndex;
}
public subscribe(): void {
hilog.info(0, TAG, "subscribe");
// 创建订阅者
commonEventManager.createSubscriber(this.subscribeInfo).then((commonEventSubscriber) => {
hilog.info(0, TAG, "createSubscriber");
this.subscriber = commonEventSubscriber;
// 订阅公共事件
try {
commonEventManager.subscribe(this.subscriber, (err, data) => {
if (err) {
hilog.error(0, TAG, `subscribe failed, code is ${err?.code}, message is ${err?.message}`);
return;
}
let result = JSON.parse(data?.data ?? '{}')?.resultType as number;
let appIndex = JSON.parse(data?.data ?? '{}')?.appIndex as number ?? 0;
// 公共事件传递的分身索引等于当前应用的分身索引
if (appIndex === this.appCloneIndex) {
if (result === 1) {
// 隐私同意处理
}
}
});
} catch (error) {
hilog.error(0, TAG, "init createSubscriber failed, exception code: " + error.code + ", exception message: " + error.message);
}
});
}
}
```
未上架应用接入隐私管理服务
针对未上架应用市场的应用，可以通过手动预置隐私链接信息模拟接入隐私托管和隐私管理服务。
预置隐私链接信息完成后，打开应用会弹出统一隐私弹框，应用可以使用隐私管理服务提供的隐私链接查询、隐私签署状态查询和停止隐私协议等相关功能。
1.  字段名称 字段解释 是否必填 appgallery_privacy_hosted 是否启用隐私弹框，1表示启用，其他值均表示不启用 是 appgallery_privacy_link_privacy_statement 隐私协议url（https），在隐私弹框中作为隐私协议的内容 是 appgallery_privacy_link_user_agreement 用户协议url（https），在隐私弹框中作为用户协议的内容 否 appgallery_privacy_link_user_agreements 多个用户协议url（https），在隐私弹框中作为多个用户协议的内容。 该值直接引用一个json文件，json文件存放在module的type为entry模块的resources/rawfile文件夹下。 有多个用户协议链接时，优先取appgallery_privacy_link_user_agreements字段，appgallery_privacy_link_user_agreement配置的单个用户协议链接无效。 起始版本：5.0.2(14)。 否
| 字段名称 | 字段解释 | 是否必填 |
| --- | --- | --- |
| appgallery_privacy_hosted | 是否启用隐私弹框，1表示启用，其他值均表示不启用 | 是 |
| appgallery_privacy_link_privacy_statement | 隐私协议url（https），在隐私弹框中作为隐私协议的内容 | 是 |
| appgallery_privacy_link_user_agreement | 用户协议url（https），在隐私弹框中作为用户协议的内容 | 否 |
| appgallery_privacy_link_user_agreements | 多个用户协议url（https），在隐私弹框中作为多个用户协议的内容。 该值直接引用一个json文件，json文件存放在module的type为entry模块的resources/rawfile文件夹下。 有多个用户协议链接时，优先取appgallery_privacy_link_user_agreements字段，appgallery_privacy_link_user_agreement配置的单个用户协议链接无效。 说明 起始版本：5.0.2(14)。  | 否 |
在华为应用市场可以正常使用、并且网络连通的情况下，使用hdc命令从本地文件安装应用，即可使用预置的隐私链接信息测试隐私弹框、调试隐私管理服务接口。
示例配置：
```typescript
// module.json5
{
"module": {
"name": "entry",
"type": "entry",
"description": "$string:module_desc",
"metadata": [
{
"name": "appgallery_privacy_hosted",
"value": "1"
},
{
"name": "appgallery_privacy_link_privacy_statement",
"value": "https://www.example.com/" // 必须是https网址
},
{
"name": "appgallery_privacy_link_user_agreement",
"value": "https://www.example.com/" // 必须是https网址
},
{
"name": "appgallery_privacy_link_user_agreements",
"value": "link_user_agreements.json" // 配置json文件名称，示例配置见下文
}
],
// 其他内容
}
}
```
link_user_agreements.json示例配置：
```typescript
{
"user_agreement_Infos": [
{
"name": "用户协议1",       // 需要展示的用户协议名字1
"url": "https://xxxx"     // 用户协议链接地址
},
{
"name": "用户协议2",       // 需要展示的用户协议名字2
"url": "https://xxxx"     // 用户协议链接地址
}
]
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-V14
爬取时间: 2025-04-29 22:16:09
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-9-V14
爬取时间: 2025-04-29 22:16:23
来源: Huawei Developer
不可以。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-10-V14
爬取时间: 2025-04-29 22:17:17
来源: Huawei Developer
长度是随钥匙规格而定的，不是定长的。后续会升级到3072位或更长，建议在数据库中使用text类型存储。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-11-V14
爬取时间: 2025-04-29 22:17:31
来源: Huawei Developer
该默认价格在AppGallery Connect页面其他地方涉及商品价格展示时使用。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-12-V14
爬取时间: 2025-04-29 22:18:26
来源: Huawei Developer
不会，除非开发者自己修改，修改方法请参考修改应用内商品。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-13-V14
爬取时间: 2025-04-29 22:18:40
来源: Huawei Developer
做了调整，具体调整规则请参见换算规则。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-14-V14
爬取时间: 2025-04-29 22:18:54
来源: Huawei Developer
是的，现在华为开发者联盟上要求配置的就是SHA256指纹，具体请参考配置签名指纹证书。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-15-V14
爬取时间: 2025-04-29 22:19:07
来源: Huawei Developer
若开发者有架设服务器，建议在服务器执行签名校验。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-16-V14
爬取时间: 2025-04-29 22:19:21
来源: Huawei Developer
是的，目前支付只有一种UI界面。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-18-V14
爬取时间: 2025-04-29 22:19:35
来源: Huawei Developer
不支持。同一个productId只能使用一次。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-19-V14
爬取时间: 2025-04-29 22:19:49
来源: Huawei Developer
请检查开发者证书链，确保证书链的完整性，同时确保证书链中的证书在数字商品服务器内置的如下92个证书中。
| #  | Alias name  | Subject DN  | Issuer DN  | Certificate Serial Number  | Version  | Valid From [GMT]  | Valid To [GMT]  | Thumbprint(SHA1)  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 1  | verisignclass2g2ca [jdk]  | OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 2 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US  | OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 2 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US  | b92f60cc889fa17a4609b85b706c8aaf  | 1  | Mon May 18 03:00:00 IDT 1998  | Wed Aug 02 02:59:59 IDT 2028  | B3:EA:C4:47:76:C9:C8:1C:EA:F2:9D:95:B6:CC:A0:08:1B:67:EC:9D  |
| 2  | digicertassuredidg3 [jdk]  | CN=DigiCert Assured ID Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Assured ID Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US  | ba15afa1ddfa0b54944afcd24a06cec  | 3  | Thu Aug 01 15:00:00 IDT 2013  | Fri Jan 15 14:00:00 IST 2038  | F5:17:A2:4F:9A:48:C6:C9:F8:A2:00:26:9F:DC:0F:48:2C:AB:30:89  |
| 3  | verisignuniversalrootca [jdk]  | CN=VeriSign Universal Root Certification Authority, OU=”(c) 2008 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | CN=VeriSign Universal Root Certification Authority, OU=”(c) 2008 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | 401ac46421b31321030ebbe4121ac51d  | 3  | Wed Apr 02 03:00:00 IDT 2008  | Wed Dec 02 01:59:59 IST 2037  | 36:79:CA:35:66:87:72:30:4D:30:A5:FB:87:3B:0F:A7:7B:B7:0D:54  |
| 4  | digicerttrustedrootg4 [jdk]  | CN=DigiCert Trusted Root G4, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Trusted Root G4, OU=www.digicert.com, O=DigiCert Inc, C=US  | 59b1b579e8e2132e23907bda777755c  | 3  | Thu Aug 01 15:00:00 IDT 2013  | Fri Jan 15 14:00:00 IST 2038  | DD:FB:16:CD:49:31:C9:73:A2:03:7D:3F:C8:3A:4D:7D:77:5D:05:E4  |
| 5  | identrustpublicca [jdk]  | CN=IdenTrust Public Sector Root CA 1, O=IdenTrust, C=US  | CN=IdenTrust Public Sector Root CA 1, O=IdenTrust, C=US  | a0142800000014523cf467c00000002  | 3  | Thu Jan 16 19:53:32 IST 2014  | Mon Jan 16 19:53:32 IST 2034  | BA:29:41:60:77:98:3F:F4:F3:EF:F2:31:05:3B:2E:EA:6D:4D:45:FD  |
| 6  | utnuserfirstobjectca [jdk]  | CN=UTN-USERFirst-Object, OU=http://www.usertrust.com, O=The USERTRUST Network, L=Salt Lake City, ST=UT, C=US  | CN=UTN-USERFirst-Object, OU=http://www.usertrust.com, O=The USERTRUST Network, L=Salt Lake City, ST=UT, C=US  | 44be0c8b500024b411d3362de0b35f1b  | 3  | Fri Jul 09 21:31:20 IDT 1999  | Tue Jul 09 21:40:36 IDT 2019  | E1:2D:FB:4B:41:D7:D9:C3:2B:30:51:4B:AC:1D:81:D8:38:5E:2D:46  |
| 7  | geotrustuniversalca [jdk]  | CN=GeoTrust Universal CA, O=GeoTrust Inc., C=US  | CN=GeoTrust Universal CA, O=GeoTrust Inc., C=US  | 1  | 3  | Thu Mar 04 07:00:00 IST 2004  | Sun Mar 04 07:00:00 IST 2029  | E6:21:F3:35:43:79:05:9A:4B:68:30:9D:8A:2F:74:22:15:87:EC:79  |
| 8  | digicertglobalrootg3 [jdk]  | CN=DigiCert Global Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Global Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US  | 55556bcf25ea43535c3a40fd5ab4572  | 3  | Thu Aug 01 15:00:00 IDT 2013  | Fri Jan 15 14:00:00 IST 2038  | 7E:04:DE:89:6A:3E:66:6D:00:E6:87:D3:3F:FA:D9:3B:E8:3D:34:9E  |
| 9  | entrustrootcaec1 [jdk]  | CN=Entrust Root Certification Authority - EC1, OU=”(c) 2012 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US  | CN=Entrust Root Certification Authority - EC1, OU=”(c) 2012 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US  | a68b79290000000050d091f9  | 3  | Tue Dec 18 17:25:36 IST 2012  | Fri Dec 18 17:55:36 IST 2037  | 20:D8:06:40:DF:9B:25:F5:12:25:3A:11:EA:F7:59:8A:EB:14:B5:47  |
| 10  | secomscrootca1 [jdk]  | OU=Security Communication RootCA1, O=SECOM Trust.net, C=JP  | OU=Security Communication RootCA1, O=SECOM Trust.net, C=JP  | 0  | 3  | Tue Sep 30 07:20:49 IDT 2003  | Sat Sep 30 07:20:49 IDT 2023  | 36:B1:2B:49:F9:81:9E:D7:4C:9E:BC:38:0F:C6:56:8F:5D:AC:B2:F7  |
| 11  | globalsignr2ca [jdk]  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R2  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R2  | 400000000010f8626e60d  | 3  | Fri Dec 15 10:00:00 IST 2006  | Wed Dec 15 10:00:00 IST 2021  | 75:E0:AB:B6:13:85:12:27:1C:04:F8:5F:DD:DE:38:E4:B7:24:2E:FE  |
| 12  | identrustdstx3 [jdk]  | CN=DST Root CA X3, O=Digital Signature Trust Co.  | CN=DST Root CA X3, O=Digital Signature Trust Co.  | 44afb080d6a327ba893039862ef8406b  | 3  | Sun Oct 01 00:12:19 IDT 2000  | Thu Sep 30 17:01:15 IDT 2021  | DA:C9:02:4F:54:D8:F6:DF:94:93:5F:B1:73:26:38:CA:6A:D7:7C:13  |
| 13  | comodoeccca [jdk]  | CN=COMODO ECC Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB  | CN=COMODO ECC Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB  | 1f47afaa62007050544c019e9b63992a  | 3  | Thu Mar 06 02:00:00 IST 2008  | Tue Jan 19 01:59:59 IST 2038  | 9F:74:4E:9F:2B:4D:BA:EC:0F:31:2C:50:B6:56:3B:8E:2D:93:C3:11  |
| 14  | entrust2048ca [jdk]  | CN=Entrust.net Certification Authority (2048), OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.), O=Entrust.net  | CN=Entrust.net Certification Authority (2048), OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.), O=Entrust.net  | 3863def8  | 3  | Fri Dec 24 19:50:51 IST 1999  | Tue Jul 24 17:15:12 IDT 2029  | 50:30:06:09:1D:97:D4:F5:AE:39:F7:CB:E7:92:7D:7D:65:2D:34:31  |
| 15  | addtrustexternalca [jdk]  | CN=AddTrust External CA Root, OU=AddTrust External TTP Network, O=AddTrust AB, C=SE  | CN=AddTrust External CA Root, OU=AddTrust External TTP Network, O=AddTrust AB, C=SE  | 1  | 3  | Tue May 30 13:48:38 IDT 2000  | Sat May 30 13:48:38 IDT 2020  | 02:FA:F3:E2:91:43:54:68:60:78:57:69:4D:F5:E4:5B:68:85:18:68  |
| 16  | globalsigneccrootcar4 [jdk]  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R4  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R4  | 2a38a41c960a04de42b228a50be8349802  | 3  | Tue Nov 13 02:00:00 IST 2012  | Tue Jan 19 05:14:07 IST 2038  | 69:69:56:2E:40:80:F4:24:A1:E7:19:9F:14:BA:F3:EE:58:AB:6A:BB  |
| 17  | usertrustrsaca [jdk]  | CN=USERTrust RSA Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US  | CN=USERTrust RSA Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US  | 1fd6d30fca3ca51a81bbc640e35032d  | 3  | Mon Feb 01 02:00:00 IST 2010  | Tue Jan 19 01:59:59 IST 2038  | 2B:8F:1B:57:33:0D:BB:A2:D0:7A:6C:51:F7:0E:E9:0D:DA:B9:AD:8E  |
| 18  | digicertassuredidrootca [jdk]  | CN=DigiCert Assured ID Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Assured ID Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US  | ce7e0e517d846fe8fe560fc1bf03039  | 3  | Fri Nov 10 02:00:00 IST 2006  | Mon Nov 10 02:00:00 IST 2031  | 05:63:B8:63:0D:62:D7:5A:BB:C8:AB:1E:4B:DF:B5:A8:99:B2:4D:43  |
| 19  | digicertglobalrootg2 [jdk]  | CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US  | 33af1e6a711a9a0bb2864b11d09fae5  | 3  | Thu Aug 01 15:00:00 IDT 2013  | Fri Jan 15 14:00:00 IST 2038  | DF:3C:24:F9:BF:D6:66:76:1B:26:80:73:FE:06:D1:CC:8D:4F:82:A4  |
| 20  | actalisauthenticationrootca [jdk]  | CN=Actalis Authentication Root CA, O=Actalis S.p.A./03358520967, L=Milan, C=IT  | CN=Actalis Authentication Root CA, O=Actalis S.p.A./03358520967, L=Milan, C=IT  | 570a119742c4e3cc  | 3  | Thu Sep 22 14:22:02 IDT 2011  | Sun Sep 22 14:22:02 IDT 2030  | F3:73:B3:87:06:5A:28:84:8A:F2:F3:4A:CE:19:2B:DD:C7:8E:9C:AC  |
| 21  | digicertassuredidg2 [jdk]  | CN=DigiCert Assured ID Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Assured ID Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US  | b931c3ad63967ea6723bfc3af9af44b  | 3  | Thu Aug 01 15:00:00 IDT 2013  | Fri Jan 15 14:00:00 IST 2038  | A1:4B:48:D9:43:EE:0A:0E:40:90:4F:3C:E0:A4:C0:91:93:51:5D:3F  |
| 22  | swisssigngoldg2ca [jdk]  | CN=SwissSign Gold CA - G2, O=SwissSign AG, C=CH  | CN=SwissSign Gold CA - G2, O=SwissSign AG, C=CH  | bb401c43f55e4fb0  | 3  | Wed Oct 25 10:30:35 IST 2006  | Sat Oct 25 11:30:35 IDT 2036  | D8:C5:38:8A:B7:30:1B:1B:6E:D4:7A:E6:45:25:3A:6F:9F:1A:27:61  |
| 23  | entrustrootcag2 [jdk]  | CN=Entrust Root Certification Authority - G2, OU=”(c) 2009 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US  | CN=Entrust Root Certification Authority - G2, OU=”(c) 2009 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US  | 4a538c28  | 3  | Tue Jul 07 20:25:54 IDT 2009  | Sat Dec 07 19:55:54 IST 2030  | 8C:F4:27:FD:79:0C:3A:D1:66:06:8D:E8:1E:57:EF:BB:93:22:72:D4  |
| 24  | quovadisrootca2g3 [jdk]  | CN=QuoVadis Root CA 2 G3, O=QuoVadis Limited, C=BM  | CN=QuoVadis Root CA 2 G3, O=QuoVadis Limited, C=BM  | 445734245b81899b35f2ceb82b3b5ba726f07528  | 3  | Thu Jan 12 20:59:32 IST 2012  | Sun Jan 12 20:59:32 IST 2042  | 09:3C:61:F3:8B:8B:DC:7D:55:DF:75:38:02:05:00:E1:25:F5:C8:36  |
| 25  | securetrustca [jdk]  | CN=SecureTrust CA, O=SecureTrust Corporation, C=US  | CN=SecureTrust CA, O=SecureTrust Corporation, C=US  | cf08e5c0816a5ad427ff0eb271859d0  | 3  | Tue Nov 07 21:31:18 IST 2006  | Mon Dec 31 21:40:55 IST 2029  | 87:82:C6:C3:04:35:3B:CF:D2:96:92:D2:59:3E:7D:44:D9:34:FF:11  |
| 26  | camerfirmachambersca [jdk]  | CN=Chambers of Commerce Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU  | CN=Chambers of Commerce Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU  | a3da427ea4b1aeda  | 3  | Fri Aug 01 15:29:50 IDT 2008  | Sat Jul 31 15:29:50 IDT 2038  | 78:6A:74:AC:76:AB:14:7F:9C:6A:30:50:BA:9E:A8:7E:FE:9A:CE:3C  |
| 27  | geotrustprimaryca [jdk]  | CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US  | CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US  | 18acb56afd69b6153a636cafdafac4a1  | 3  | Mon Nov 27 02:00:00 IST 2006  | Thu Jul 17 02:59:59 IDT 2036  | 32:3C:11:8E:1B:F7:B8:B6:52:54:E2:E2:10:0D:D6:02:90:37:F0:96  |
| 28  | identrustcommercial [jdk]  | CN=IdenTrust Commercial Root CA 1, O=IdenTrust, C=US  | CN=IdenTrust Commercial Root CA 1, O=IdenTrust, C=US  | a0142800000014523c844b500000002  | 3  | Thu Jan 16 20:12:23 IST 2014  | Mon Jan 16 20:12:23 IST 2034  | DF:71:7E:AA:4A:D9:4E:C9:55:84:99:60:2D:48:DE:5F:BC:F0:3A:25  |
| 29  | thawteprimaryrootcag3 [jdk]  | CN=thawte Primary Root CA - G3, OU=”(c) 2008 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US  | CN=thawte Primary Root CA - G3, OU=”(c) 2008 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US  | 600197b746a7eab4b49ad64b2ff790fb  | 3  | Wed Apr 02 03:00:00 IDT 2008  | Wed Dec 02 01:59:59 IST 2037  | F1:8B:53:8D:1B:E9:03:B6:A6:F0:56:43:5B:17:15:89:CA:F3:6B:F2  |
| 30  | buypassclass3ca [jdk]  | CN=Buypass Class 3 Root CA, O=Buypass AS-983163327, C=NO  | CN=Buypass Class 3 Root CA, O=Buypass AS-983163327, C=NO  | 2  | 3  | Tue Oct 26 10:28:58 IST 2010  | Fri Oct 26 11:28:58 IDT 2040  | DA:FA:F7:FA:66:84:EC:06:8F:14:50:BD:C7:C2:81:A5:BC:A9:64:57  |
| 31  | verisigntsaca [jdk]  | CN=Thawte Timestamping CA, OU=Thawte Certification, O=Thawte, L=Durbanville, ST=Western Cape, C=ZA  | CN=Thawte Timestamping CA, OU=Thawte Certification, O=Thawte, L=Durbanville, ST=Western Cape, C=ZA  | 67c8e1e8e3be1cbdfc913b8ea6238749  | 3  | Wed Jan 01 02:00:00 IST 1997  | Sat Jan 02 01:59:59 IST 2021  | 20:CE:B1:F0:F5:1C:0E:19:A9:F3:8D:B1:AA:8E:03:8C:AA:7A:C7:01  |
| 32  | verisignclass3g4ca [jdk]  | CN=VeriSign Class 3 Public Primary Certification Authority - G4, OU=”(c) 2007 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | CN=VeriSign Class 3 Public Primary Certification Authority - G4, OU=”(c) 2007 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | 2f80fe238c0e220f486712289187acb3  | 3  | Mon Nov 05 02:00:00 IST 2007  | Tue Jan 19 01:59:59 IST 2038  | 22:D5:D8:DF:8F:02:31:D1:8D:F7:9D:B7:CF:8A:2D:64:C9:3F:6C:3A  |
| 33  | baltimorecybertrustca [jdk]  | CN=Baltimore CyberTrust Root, OU=CyberTrust, O=Baltimore, C=IE  | CN=Baltimore CyberTrust Root, OU=CyberTrust, O=Baltimore, C=IE  | 20000b9  | 3  | Fri May 12 21:46:00 IDT 2000  | Tue May 13 02:59:00 IDT 2025  | D4:DE:20:D0:5E:66:FC:53:FE:1A:50:88:2C:78:DB:28:52:CA:E4:74  |
| 34  | luxtrustglobalrootca [jdk]  | CN=LuxTrust Global Root, O=LuxTrust s.a., C=LU  | CN=LuxTrust Global Root, O=LuxTrust s.a., C=LU  | bb8  | 3  | Thu Mar 17 11:51:37 IST 2011  | Wed Mar 17 11:51:37 IST 2021  | C9:3C:34:EA:90:D9:13:0C:0F:03:00:4B:98:BD:8B:35:70:91:56:11  |
| 35  | verisignclass3g2ca [jdk]  | OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 3 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US  | OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 3 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US  | 7dd9fe07cfa81eb7107967fba78934c6  | 1  | Mon May 18 03:00:00 IDT 1998  | Wed Aug 02 02:59:59 IDT 2028  | 85:37:1C:A6:E5:50:14:3D:CE:28:03:47:1B:DE:3A:09:E8:F8:77:0F  |
| 36  | camerfirmachamberscommerceca [jdk]  | CN=Chambers of Commerce Root, OU=http://www.chambersign.org, O=AC Camerfirma SA CIF A82743287, C=EU  | CN=Chambers of Commerce Root, OU=http://www.chambersign.org, O=AC Camerfirma SA CIF A82743287, C=EU  | 0  | 3  | Tue Sep 30 19:13:43 IDT 2003  | Wed Sep 30 19:13:44 IDT 2037  | 6E:3A:55:A4:19:0C:19:5C:93:84:3C:C0:DB:72:2E:31:30:61:F0:B1  |
| 37  | soneraclass2ca [jdk]  | CN=Sonera Class2 CA, O=Sonera, C=FI  | CN=Sonera Class2 CA, O=Sonera, C=FI  | 1d  | 3  | Fri Apr 06 09:29:40 IST 2001  | Tue Apr 06 10:29:40 IDT 2021  | 37:F7:6D:E6:07:7C:90:C5:B1:3E:93:1A:B7:41:10:B4:F2:E4:9A:27  |
| 38  | affirmtrustnetworkingca [jdk]  | CN=AffirmTrust Networking, O=AffirmTrust, C=US  | CN=AffirmTrust Networking, O=AffirmTrust, C=US  | 7c4f04391cd4992d  | 3  | Fri Jan 29 16:08:24 IST 2010  | Tue Dec 31 16:08:24 IST 2030  | 29:36:21:02:8B:20:ED:02:F5:66:C5:32:D1:D6:ED:90:9F:45:00:2F  |
| 39  | ttelesecglobalrootclass3ca [jdk]  | CN=T-TeleSec GlobalRoot Class 3, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE  | CN=T-TeleSec GlobalRoot Class 3, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE  | 1  | 3  | Wed Oct 01 13:29:56 IDT 2008  | Sun Oct 02 02:59:59 IDT 2033  | 55:A6:72:3E:CB:F2:EC:CD:C3:23:74:70:19:9D:2A:BE:11:E3:81:D1  |
| 40  | xrampglobalca [jdk]  | CN=XRamp Global Certification Authority, O=XRamp Security Services Inc, OU=www.xrampsecurity.com, C=US  | CN=XRamp Global Certification Authority, O=XRamp Security Services Inc, OU=www.xrampsecurity.com, C=US  | 50946cec18ead59c4dd597ef758fa0ad  | 3  | Mon Nov 01 19:14:04 IST 2004  | Mon Jan 01 07:37:19 IST 2035  | B8:01:86:D1:EB:9C:86:A5:41:04:CF:30:54:F3:4C:52:B7:E5:58:C6  |
| 41  | geotrustprimarycag3 [jdk]  | CN=GeoTrust Primary Certification Authority - G3, OU=(c) 2008 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US  | CN=GeoTrust Primary Certification Authority - G3, OU=(c) 2008 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US  | 15ac6e9419b2794b41f627a9c3180f1f  | 3  | Wed Apr 02 03:00:00 IDT 2008  | Wed Dec 02 01:59:59 IST 2037  | 03:9E:ED:B8:0B:E7:A0:3C:69:53:89:3B:20:D2:D9:32:3A:4C:2A:FD  |
| 42  | camerfirmachambersignca [jdk]  | CN=Global Chambersign Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU  | CN=Global Chambersign Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU  | c9cdd3e9d57d23ce  | 3  | Fri Aug 01 15:31:40 IDT 2008  | Sat Jul 31 15:31:40 IDT 2038  | 4A:BD:EE:EC:95:0D:35:9C:89:AE:C7:52:A1:2C:5B:29:F6:D6:AA:0C  |
| 43  | thawteprimaryrootcag2 [jdk]  | CN=thawte Primary Root CA - G2, OU=”(c) 2007 thawte, Inc. - For authorized use only”, O=”thawte, Inc.”, C=US  | CN=thawte Primary Root CA - G2, OU=”(c) 2007 thawte, Inc. - For authorized use only”, O=”thawte, Inc.”, C=US  | 35fc265cd9844fc93d263d579baed756  | 3  | Mon Nov 05 02:00:00 IST 2007  | Tue Jan 19 01:59:59 IST 2038  | AA:DB:BC:22:23:8F:C4:01:A1:27:BB:38:DD:F4:1D:DB:08:9E:F0:12  |
| 44  | usertrusteccca [jdk]  | CN=USERTrust ECC Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US  | CN=USERTrust ECC Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US  | 5c8b99c55a94c5d27156decd8980cc26  | 3  | Mon Feb 01 02:00:00 IST 2010  | Tue Jan 19 01:59:59 IST 2038  | D1:CB:CA:5D:B2:D5:2A:7F:69:3B:67:4D:E5:F0:5A:1D:0C:95:7D:F0  |
| 45  | swisssignsilverg2ca [jdk]  | CN=SwissSign Silver CA - G2, O=SwissSign AG, C=CH  | CN=SwissSign Silver CA - G2, O=SwissSign AG, C=CH  | 4f1bd42f54bb2f4b  | 3  | Wed Oct 25 10:32:46 IST 2006  | Sat Oct 25 11:32:46 IDT 2036  | 9B:AA:E5:9F:56:EE:21:CB:43:5A:BE:25:93:DF:A7:F0:40:D1:1D:CB  |
| 46  | affirmtrustpremiumca [jdk]  | CN=AffirmTrust Premium, O=AffirmTrust, C=US  | CN=AffirmTrust Premium, O=AffirmTrust, C=US  | 6d8c1446b1a60aee  | 3  | Fri Jan 29 16:10:36 IST 2010  | Mon Dec 31 16:10:36 IST 2040  | D8:A6:33:2C:E0:03:6F:B1:85:F6:63:4F:7D:6A:06:65:26:32:28:27  |
| 47  | globalsignca [jdk]  | CN=GlobalSign Root CA, OU=Root CA, O=GlobalSign nv-sa, C=BE  | CN=GlobalSign Root CA, OU=Root CA, O=GlobalSign nv-sa, C=BE  | 40000000001154b5ac394  | 3  | Tue Sep 01 15:00:00 IDT 1998  | Fri Jan 28 14:00:00 IST 2028  | B1:BC:96:8B:D4:F4:9D:62:2A:A8:9A:81:F2:15:01:52:A4:1D:82:9C  |
| 48  | dtrustclass3ca2 [jdk]  | CN=D-TRUST Root Class 3 CA 2 2009, O=D-Trust GmbH, C=DE  | CN=D-TRUST Root Class 3 CA 2 2009, O=D-Trust GmbH, C=DE  | 983f3  | 3  | Thu Nov 05 10:35:58 IST 2009  | Mon Nov 05 10:35:58 IST 2029  | 58:E8:AB:B0:36:15:33:FB:80:F7:9B:1B:6D:29:D3:FF:8D:5F:00:F0  |
| 49  | affirmtrustcommercialca [jdk]  | CN=AffirmTrust Commercial, O=AffirmTrust, C=US  | CN=AffirmTrust Commercial, O=AffirmTrust, C=US  | 7777062726a9b17c  | 3  | Fri Jan 29 16:06:06 IST 2010  | Tue Dec 31 16:06:06 IST 2030  | F9:B5:B6:32:45:5F:9C:BE:EC:57:5F:80:DC:E9:6E:2C:C7:B2:78:B7  |
| 50  | thawtepremiumserverca [jdk]  | EMAILADDRESS=premium-server@thawte.com, CN=Thawte Premium Server CA, OU=Certification Services Division, O=Thawte Consulting cc, L=Cape Town, ST=Western Cape, C=ZA  | EMAILADDRESS=premium-server@thawte.com, CN=Thawte Premium Server CA, OU=Certification Services Division, O=Thawte Consulting cc, L=Cape Town, ST=Western Cape, C=ZA  | 36122296c5e338a520a1d25f4cd70954  | 3  | Thu Aug 01 03:00:00 IDT 1996  | Sat Jan 02 01:59:59 IST 2021  | E0:AB:05:94:20:72:54:93:05:60:62:02:36:70:F7:CD:2E:FC:66:66  |
| 51  | comodoaaaca [jdk]  | CN=AAA Certificate Services, O=Comodo CA Limited, L=Salford, ST=Greater Manchester, C=GB  | CN=AAA Certificate Services, O=Comodo CA Limited, L=Salford, ST=Greater Manchester, C=GB  | 1  | 3  | Thu Jan 01 02:00:00 IST 2004  | Mon Jan 01 01:59:59 IST 2029  | D1:EB:23:A4:6D:17:D6:8F:D9:25:64:C2:F1:F1:60:17:64:D8:E3:49  |
| 52  | geotrustprimarycag2 [jdk]  | CN=GeoTrust Primary Certification Authority - G2, OU=(c) 2007 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US  | CN=GeoTrust Primary Certification Authority - G2, OU=(c) 2007 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US  | 3cb2f4480a00e2feeb243b5e603ec36b  | 3  | Mon Nov 05 02:00:00 IST 2007  | Tue Jan 19 01:59:59 IST 2038  | 8D:17:84:D5:37:F3:03:7D:EC:70:FE:57:8B:51:9A:99:E6:10:D7:B0  |
| 53  | globalsignr3ca [jdk]  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R3  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R3  | 4000000000121585308a2  | 3  | Wed Mar 18 12:00:00 IST 2009  | Sun Mar 18 12:00:00 IST 2029  | D6:9B:56:11:48:F0:1C:77:C5:45:78:C1:09:26:DF:5B:85:69:76:AD  |
| 54  | quovadisrootca3 [jdk]  | CN=QuoVadis Root CA 3, O=QuoVadis Limited, C=BM  | CN=QuoVadis Root CA 3, O=QuoVadis Limited, C=BM  | 5c6  | 3  | Fri Nov 24 21:11:23 IST 2006  | Mon Nov 24 21:06:44 IST 2031  | 1F:49:14:F7:D8:74:95:1D:DD:AE:02:C0:BE:FD:3A:2D:82:75:51:85  |
| 55  | thawteprimaryrootca [jdk]  | CN=thawte Primary Root CA, OU=”(c) 2006 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US  | CN=thawte Primary Root CA, OU=”(c) 2006 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US  | 344ed55720d5edec49f42fce37db2b6d  | 3  | Fri Nov 17 02:00:00 IST 2006  | Thu Jul 17 02:59:59 IDT 2036  | 91:C6:D6:EE:3E:8A:C8:63:84:E5:48:C2:99:29:5C:75:6C:81:7B:81  |
| 56  | starfieldrootg2ca [jdk]  | CN=Starfield Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US  | CN=Starfield Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US  | 0  | 3  | Tue Sep 01 03:00:00 IDT 2009  | Fri Jan 01 01:59:59 IST 2038  | B5:1C:06:7C:EE:2B:0C:3D:F8:55:AB:2D:92:F4:FE:39:D4:E7:0F:0E  |
| 57  | starfieldclass2ca [jdk]  | OU=Starfield Class 2 Certification Authority, O=”Starfield Technologies, Inc.”, C=US  | OU=Starfield Class 2 Certification Authority, O=”Starfield Technologies, Inc.”, C=US  | 0  | 3  | Tue Jun 29 20:39:16 IDT 2004  | Thu Jun 29 20:39:16 IDT 2034  | AD:7E:1C:28:B0:64:EF:8F:60:03:40:20:14:C3:D0:E3:37:0E:B5:8A  |
| 58  | verisignclass3ca [jdk]  | OU=Class 3 Public Primary Certification Authority, O=”VeriSign, Inc.”, C=US  | OU=Class 3 Public Primary Certification Authority, O=”VeriSign, Inc.”, C=US  | 3c9131cb1ff6d01b0e9ab8d044bf12be  | 1  | Mon Jan 29 02:00:00 IST 1996  | Thu Aug 03 02:59:59 IDT 2028  | A1:DB:63:93:91:6F:17:E4:18:55:09:40:04:15:C7:02:40:B0:AE:6B  |
| 59  | affirmtrustpremiumeccca [jdk]  | CN=AffirmTrust Premium ECC, O=AffirmTrust, C=US  | CN=AffirmTrust Premium ECC, O=AffirmTrust, C=US  | 7497258ac73f7a54  | 3  | Fri Jan 29 16:20:24 IST 2010  | Mon Dec 31 16:20:24 IST 2040  | B8:23:6B:00:2F:1D:16:86:53:01:55:6C:11:A4:37:CA:EB:FF:C3:BB  |
| 60  | geotrustglobalca [jdk]  | CN=GeoTrust Global CA, O=GeoTrust Inc., C=US  | CN=GeoTrust Global CA, O=GeoTrust Inc., C=US  | 23456  | 3  | Tue May 21 07:00:00 IDT 2002  | Sat May 21 07:00:00 IDT 2022  | DE:28:F4:A4:FF:E5:B9:2F:A3:C5:03:D1:A3:49:A7:F9:96:2A:82:12  |
| 61  | godaddyclass2ca [jdk]  | OU=Go Daddy Class 2 Certification Authority, O=”The Go Daddy Group, Inc.”, C=US  | OU=Go Daddy Class 2 Certification Authority, O=”The Go Daddy Group, Inc.”, C=US  | 0  | 3  | Tue Jun 29 20:06:20 IDT 2004  | Thu Jun 29 20:06:20 IDT 2034  | 27:96:BA:E6:3F:18:01:E2:77:26:1B:A0:D7:77:70:02:8F:20:EE:E4  |
| 62  | godaddyrootg2ca [jdk]  | CN=Go Daddy Root Certificate Authority - G2, O=”GoDaddy.com, Inc.”, L=Scottsdale, ST=Arizona, C=US  | CN=Go Daddy Root Certificate Authority - G2, O=”GoDaddy.com, Inc.”, L=Scottsdale, ST=Arizona, C=US  | 0  | 3  | Tue Sep 01 03:00:00 IDT 2009  | Fri Jan 01 01:59:59 IST 2038  | 47:BE:AB:C9:22:EA:E8:0E:78:78:34:62:A7:9F:45:C2:54:FD:E6:8B  |
| 63  | verisignclass3g5ca [jdk]  | CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU=”(c) 2006 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU=”(c) 2006 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | 18dad19e267de8bb4a2158cdcc6b3b4a  | 3  | Wed Nov 08 02:00:00 IST 2006  | Thu Jul 17 02:59:59 IDT 2036  | 4E:B6:D5:78:49:9B:1C:CF:5F:58:1E:AD:56:BE:3D:9B:67:44:A5:E5  |
| 64  | quovadisrootca2 [jdk]  | CN=QuoVadis Root CA 2, O=QuoVadis Limited, C=BM  | CN=QuoVadis Root CA 2, O=QuoVadis Limited, C=BM  | 509  | 3  | Fri Nov 24 20:27:00 IST 2006  | Mon Nov 24 20:23:33 IST 2031  | CA:3A:FB:CF:12:40:36:4B:44:B2:16:20:88:80:48:39:19:93:7C:F7  |
| 65  | certumca [jdk]  | CN=Certum CA, O=Unizeto Sp. z o.o., C=PL  | CN=Certum CA, O=Unizeto Sp. z o.o., C=PL  | 10020  | 3  | Tue Jun 11 13:46:39 IDT 2002  | Fri Jun 11 13:46:39 IDT 2027  | 62:52:DC:40:F7:11:43:A2:2F:DE:9E:F7:34:8E:06:42:51:B1:81:18  |
| 66  | swisssignplatinumg2ca [jdk]  | CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH  | CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH  | 4eb200670c035d4f  | 3  | Wed Oct 25 10:36:00 IST 2006  | Sat Oct 25 11:36:00 IDT 2036  | 56:E0:FA:C0:3B:8F:18:23:55:18:E5:D3:11:CA:E8:C2:43:31:AB:66  |
| 67  | chunghwaepkirootca [jdk]  | OU=ePKI Root Certification Authority, O=”Chunghwa Telecom Co., Ltd.”, C=TW  | OU=ePKI Root Certification Authority, O=”Chunghwa Telecom Co., Ltd.”, C=TW  | 15c8bd65475cafb897005ee406d2bc9d  | 3  | Mon Dec 20 04:31:27 IST 2004  | Wed Dec 20 04:31:27 IST 2034  | 67:65:0D:F1:7E:8E:7E:5B:82:40:A4:F4:56:4B:CF:E2:3D:69:C6:F0  |
| 68  | quovadisrootca3g3 [jdk]  | CN=QuoVadis Root CA 3 G3, O=QuoVadis Limited, C=BM  | CN=QuoVadis Root CA 3 G3, O=QuoVadis Limited, C=BM  | 2ef59b0228a7db7affd5a3a9eebd03a0cf126a1d  | 3  | Thu Jan 12 22:26:32 IST 2012  | Sun Jan 12 22:26:32 IST 2042  | 48:12:BD:92:3C:A8:C4:39:06:E7:30:6D:27:96:E6:A4:CF:22:2E:7D  |
| 69  | quovadisrootca [jdk]  | CN=QuoVadis Root Certification Authority, OU=Root Certification Authority, O=QuoVadis Limited, C=BM  | CN=QuoVadis Root Certification Authority, OU=Root Certification Authority, O=QuoVadis Limited, C=BM  | 3ab6508b  | 3  | Mon Mar 19 20:33:33 IST 2001  | Wed Mar 17 20:33:33 IST 2021  | DE:3F:40:BD:50:93:D3:9B:6C:60:F6:DA:BC:07:62:01:00:89:76:C9  |
| 70  | digicerthighassuranceevrootca [jdk]  | CN=DigiCert High Assurance EV Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert High Assurance EV Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US  | 2ac5c266a0b409b8f0b79f2ae462577  | 3  | Fri Nov 10 02:00:00 IST 2006  | Mon Nov 10 02:00:00 IST 2031  | 5F:B7:EE:06:33:E2:59:DB:AD:0C:4C:9A:E6:D3:8F:1A:61:C7:DC:25  |
| 71  | quovadisrootca1g3 [jdk]  | CN=QuoVadis Root CA 1 G3, O=QuoVadis Limited, C=BM  | CN=QuoVadis Root CA 1 G3, O=QuoVadis Limited, C=BM  | 78585f2ead2c194be3370735341328b596d46593  | 3  | Thu Jan 12 19:27:44 IST 2012  | Sun Jan 12 19:27:44 IST 2042  | 1B:8E:EA:57:96:29:1A:C9:39:EA:B8:0A:81:1A:73:73:C0:93:79:67  |
| 72  | comodorsaca [jdk]  | CN=COMODO RSA Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB  | CN=COMODO RSA Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB  | 4caaf9cadb636fe01ff74ed85b03869d  | 3  | Tue Jan 19 02:00:00 IST 2010  | Tue Jan 19 01:59:59 IST 2038  | AF:E5:D2:44:A8:D1:19:42:30:FF:47:9F:E2:F8:97:BB:CD:7A:8C:B4  |
| 73  | buypassclass2ca [jdk]  | CN=Buypass Class 2 Root CA, O=Buypass AS-983163327, C=NO  | CN=Buypass Class 2 Root CA, O=Buypass AS-983163327, C=NO  | 2  | 3  | Tue Oct 26 10:38:03 IST 2010  | Fri Oct 26 11:38:03 IDT 2040  | 49:0A:75:74:DE:87:0A:47:FE:58:EE:F6:C7:6B:EB:C6:0B:12:40:99  |
| 74  | secomscrootca2 [jdk]  | OU=Security Communication RootCA2, O=”SECOM Trust Systems CO.,LTD.”, C=JP  | OU=Security Communication RootCA2, O=”SECOM Trust Systems CO.,LTD.”, C=JP  | 0  | 3  | Fri May 29 08:00:39 IDT 2009  | Tue May 29 08:00:39 IDT 2029  | 5F:3B:8C:F2:F8:10:B3:7D:78:B4:CE:EC:19:19:C3:73:34:B9:C7:74  |
| 75  | entrustevca [jdk]  | CN=Entrust Root Certification Authority, OU=”(c) 2006 Entrust, Inc.”, OU=www.entrust.net/CPS is incorporated by reference, O=”Entrust, Inc.”, C=US  | CN=Entrust Root Certification Authority, OU=”(c) 2006 Entrust, Inc.”, OU=www.entrust.net/CPS is incorporated by reference, O=”Entrust, Inc.”, C=US  | 456b5054  | 3  | Mon Nov 27 22:23:42 IST 2006  | Fri Nov 27 22:53:42 IST 2026  | B3:1E:B1:B7:40:E3:6C:84:02:DA:DC:37:D4:4D:F5:D4:67:49:52:F9  |
| 76  | verisignclass3g3ca [jdk]  | CN=VeriSign Class 3 Public Primary Certification Authority - G3, OU=”(c) 1999 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | CN=VeriSign Class 3 Public Primary Certification Authority - G3, OU=”(c) 1999 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US  | 9b7e0649a33e62b9d5ee90487129ef57  | 1  | Fri Oct 01 02:00:00 IST 1999  | Thu Jul 17 02:59:59 IDT 2036  | 13:2D:0D:45:53:4B:69:97:CD:B2:D5:C3:39:E2:55:76:60:9B:5C:C6  |
| 77  | certumtrustednetworkca [jdk]  | CN=Certum Trusted Network CA, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL  | CN=Certum Trusted Network CA, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL  | 444c0  | 3  | Wed Oct 22 14:07:37 IST 2008  | Mon Dec 31 14:07:37 IST 2029  | 07:E0:32:E0:20:B7:2C:3F:19:2F:06:28:A2:59:3A:19:A7:0F:06:9E  |
| 78  | dtrustclass3ca2ev [jdk]  | CN=D-TRUST Root Class 3 CA 2 EV 2009, O=D-Trust GmbH, C=DE  | CN=D-TRUST Root Class 3 CA 2 EV 2009, O=D-Trust GmbH, C=DE  | 983f4  | 3  | Thu Nov 05 10:50:46 IST 2009  | Mon Nov 05 10:50:46 IST 2029  | 96:C9:1B:0B:95:B4:10:98:42:FA:D0:D8:22:79:FE:60:FA:B9:16:83  |
| 79  | globalsigneccrootcar5 [jdk]  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R5  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R5  | 605949e0262ebb55f90a778a71f94ad86c  | 3  | Tue Nov 13 02:00:00 IST 2012  | Tue Jan 19 05:14:07 IST 2038  | 1F:24:C6:30:CD:A4:18:EF:20:69:FF:AD:4F:DD:5F:46:3A:1B:69:AA  |
| 80  | starfieldservicesrootg2ca [jdk]  | CN=Starfield Services Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US  | CN=Starfield Services Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US  | 0  | 3  | Tue Sep 01 03:00:00 IDT 2009  | Fri Jan 01 01:59:59 IST 2038  | 92:5A:8F:8D:2C:6D:04:E0:66:5F:59:6A:FF:22:D8:63:E8:25:6F:3F  |
| 81  | ttelesecglobalrootclass2ca [jdk]  | CN=T-TeleSec GlobalRoot Class 2, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE  | CN=T-TeleSec GlobalRoot Class 2, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE  | 1  | 3  | Wed Oct 01 13:40:14 IDT 2008  | Sun Oct 02 02:59:59 IDT 2033  | 59:0D:2D:7D:88:4F:40:2E:61:7E:A5:62:32:17:65:CF:17:D8:94:E9  |
| 82  | addtrustqualifiedca [jdk]  | CN=AddTrust Qualified CA Root, OU=AddTrust TTP Network, O=AddTrust AB, C=SE  | CN=AddTrust Qualified CA Root, OU=AddTrust TTP Network, O=AddTrust AB, C=SE  | 1  | 3  | Tue May 30 13:44:50 IDT 2000  | Sat May 30 13:44:50 IDT 2020  | 4D:23:78:EC:91:95:39:B5:00:7F:75:8F:03:3B:21:1E:C5:4D:8B:CF  |
| 83  | digicertglobalrootca [jdk]  | CN=DigiCert Global Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US  | CN=DigiCert Global Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US  | 83be056904246b1a1756ac95991c74a  | 3  | Fri Nov 10 02:00:00 IST 2006  | Mon Nov 10 02:00:00 IST 2031  | A8:98:5D:3A:65:E5:E5:C4:B2:D7:D6:6D:40:C6:DD:2F:B1:9C:54:36  |
| 84  | amazonrootca1 [jdk]  | CN=Amazon Root CA 1, O=Amazon, C=US  | CN=Amazon Root CA 1, O=Amazon, C=US  | 66c9fcf99bf8c0a39e2f0788a43e696365bca  | 3  | Tue May 26 08:00:00 CST 2015  | Sun Jan 17 08:00:00 CST 2038  | 8D:A7:F9:65:EC:5E:FC:37:91:0F:1C:6E:59:FD:C1:CC:6A:6E:DE:16  |
| 85  | amazonrootca2 [jdk]  | CN=Amazon Root CA 2, O=Amazon, C=US  | CN=Amazon Root CA 2, O=Amazon, C=US  | 66c9fd29635869f0a0fe58678f85b26bb8a37  | 3  | Tue May 26 08:00:00 CST 2015  | Sat May 26 08:00:00 CST 2040  | 5A:8C:EF:45:D7:A6:98:59:76:7A:8C:8B:44:96:B5:78:CF:47:4B:1A  |
| 86  | amazonrootca3 [jdk]  | CN=Amazon Root CA 3, O=Amazon, C=US  | CN=Amazon Root CA 3, O=Amazon, C=US  | 66c9fd5749736663f3b0b9ad9e89e7603f24a  | 3  | Tue May 26 08:00:00 CST 2015  | Sat May 26 08:00:00 CST 2040  | 0D:44:DD:8C:3C:8C:1A:1A:58:75:64:81:E9:0F:2E:2A:FF:B3:D2:6E  |
| 87  | amazonrootca4 [jdk]  | CN=Amazon Root CA 4, O=Amazon, C=US  | CN=Amazon Root CA 4, O=Amazon, C=US  | 66c9fd7c1bb104c2943e5717b7b2cc81ac10e  | 3  | Tue May 26 08:00:00 CST 2015  | Sat May 26 08:00:00 CST 2040  | F6:10:84:07:D6:F8:BB:67:98:0C:C2:E2:44:C2:EB:AE:1C:EF:63:BE  |
| 88  | globalsignrootcar6 [jdk]  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R6  | CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R6  | 45e6bb038333c3856548e6ff4551  | 3  | Wed Dec 10 08:00:00 CST 2014  | Sun Dec 10 08:00:00 CST 2034  | 80:94:64:0E:B5:A7:A1:CA:11:9C:1F:DD:D5:9F:81:02:63:A7:FB:D1  |
| 89  | letsencryptisrgx1 [jdk]  | CN=ISRG Root X1, O=Internet Security Research Group, C=US  | CN=ISRG Root X1, O=Internet Security Research Group, C=US  | 8210cfb0d240e3594463e0bb63828b00  | 3  | Thu Jun 04 19:04:38 CST 2015  | Mon Jun 04 19:04:38 CST 2035  | CA:BD:2A:79:A1:07:6A:31:F2:1D:25:36:35:CB:03:9D:43:29:A5:E8  |
| 90  | luxtrustglobalroot2ca [jdk]  | CN=LuxTrust Global Root 2, O=LuxTrust S.A., C=LU  | CN=LuxTrust Global Root 2, O=LuxTrust S.A., C=LU  | a7ea6df4b449eda6a24859ee6b815d3167fbbb1  | 3  | Thu Mar 05 21:21:57 CST 2015  | Mon Mar 05 21:21:57 CST 2035  | 1E:0E:56:19:0A:D1:8B:25:98:B2:04:44:FF:66:8A:04:17:99:5F:3F  |
| 91  | teliasonerarootcav1 [jdk]  | CN=TeliaSonera Root CA v1, O=TeliaSonera  | CN=TeliaSonera Root CA v1, O=TeliaSonera  | 95be16a0f72e46f17b398272fa8bcd96  | 3  | Thu Oct 18 20:00:50 CST 2007  | Mon Oct 18 20:00:50 CST 2032  | 43:13:BB:96:F1:D5:86:9B:C1:4E:6A:92:F6:CF:F6:34:69:87:82:37  |
| 92  | TWCA Root Certification Authority  | CN=TWCA Root Certification Authority, OU=Root CA, O=TAIWAN-CA, C=TW  | CN=TWCA Root Certification Authority, OU=Root CA, O=TAIWAN-CA, C=TW  | 01  | 3  | Thu Aug 28 15:24:33 CST 2008  | Tue Dec 31 23:59:59 CST 2030  | CF:9E:87:6D:D3:EB:FC:42:26:97:A3:B5:A3:7A:A0:76:A9:06:23:48  |
#
Alias name
Subject DN
Issuer DN
Certificate Serial Number
Version
Valid From [GMT]
Valid To [GMT]
Thumbprint(SHA1)
1
verisignclass2g2ca [jdk]
OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 2 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US
OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 2 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US
b92f60cc889fa17a4609b85b706c8aaf
1
Mon May 18 03:00:00 IDT 1998
Wed Aug 02 02:59:59 IDT 2028
B3:EA:C4:47:76:C9:C8:1C:EA:F2:9D:95:B6:CC:A0:08:1B:67:EC:9D
2
digicertassuredidg3 [jdk]
CN=DigiCert Assured ID Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Assured ID Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US
ba15afa1ddfa0b54944afcd24a06cec
3
Thu Aug 01 15:00:00 IDT 2013
Fri Jan 15 14:00:00 IST 2038
F5:17:A2:4F:9A:48:C6:C9:F8:A2:00:26:9F:DC:0F:48:2C:AB:30:89
3
verisignuniversalrootca [jdk]
CN=VeriSign Universal Root Certification Authority, OU=”(c) 2008 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
CN=VeriSign Universal Root Certification Authority, OU=”(c) 2008 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
401ac46421b31321030ebbe4121ac51d
3
Wed Apr 02 03:00:00 IDT 2008
Wed Dec 02 01:59:59 IST 2037
36:79:CA:35:66:87:72:30:4D:30:A5:FB:87:3B:0F:A7:7B:B7:0D:54
4
digicerttrustedrootg4 [jdk]
CN=DigiCert Trusted Root G4, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Trusted Root G4, OU=www.digicert.com, O=DigiCert Inc, C=US
59b1b579e8e2132e23907bda777755c
3
Thu Aug 01 15:00:00 IDT 2013
Fri Jan 15 14:00:00 IST 2038
DD:FB:16:CD:49:31:C9:73:A2:03:7D:3F:C8:3A:4D:7D:77:5D:05:E4
5
identrustpublicca [jdk]
CN=IdenTrust Public Sector Root CA 1, O=IdenTrust, C=US
CN=IdenTrust Public Sector Root CA 1, O=IdenTrust, C=US
a0142800000014523cf467c00000002
3
Thu Jan 16 19:53:32 IST 2014
Mon Jan 16 19:53:32 IST 2034
BA:29:41:60:77:98:3F:F4:F3:EF:F2:31:05:3B:2E:EA:6D:4D:45:FD
6
utnuserfirstobjectca [jdk]
CN=UTN-USERFirst-Object, OU=http://www.usertrust.com, O=The USERTRUST Network, L=Salt Lake City, ST=UT, C=US
CN=UTN-USERFirst-Object, OU=http://www.usertrust.com, O=The USERTRUST Network, L=Salt Lake City, ST=UT, C=US
44be0c8b500024b411d3362de0b35f1b
3
Fri Jul 09 21:31:20 IDT 1999
Tue Jul 09 21:40:36 IDT 2019
E1:2D:FB:4B:41:D7:D9:C3:2B:30:51:4B:AC:1D:81:D8:38:5E:2D:46
7
geotrustuniversalca [jdk]
CN=GeoTrust Universal CA, O=GeoTrust Inc., C=US
CN=GeoTrust Universal CA, O=GeoTrust Inc., C=US
1
3
Thu Mar 04 07:00:00 IST 2004
Sun Mar 04 07:00:00 IST 2029
E6:21:F3:35:43:79:05:9A:4B:68:30:9D:8A:2F:74:22:15:87:EC:79
8
digicertglobalrootg3 [jdk]
CN=DigiCert Global Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Global Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US
55556bcf25ea43535c3a40fd5ab4572
3
Thu Aug 01 15:00:00 IDT 2013
Fri Jan 15 14:00:00 IST 2038
7E:04:DE:89:6A:3E:66:6D:00:E6:87:D3:3F:FA:D9:3B:E8:3D:34:9E
9
entrustrootcaec1 [jdk]
CN=Entrust Root Certification Authority - EC1, OU=”(c) 2012 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US
CN=Entrust Root Certification Authority - EC1, OU=”(c) 2012 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US
a68b79290000000050d091f9
3
Tue Dec 18 17:25:36 IST 2012
Fri Dec 18 17:55:36 IST 2037
20:D8:06:40:DF:9B:25:F5:12:25:3A:11:EA:F7:59:8A:EB:14:B5:47
10
secomscrootca1 [jdk]
OU=Security Communication RootCA1, O=SECOM Trust.net, C=JP
OU=Security Communication RootCA1, O=SECOM Trust.net, C=JP
0
3
Tue Sep 30 07:20:49 IDT 2003
Sat Sep 30 07:20:49 IDT 2023
36:B1:2B:49:F9:81:9E:D7:4C:9E:BC:38:0F:C6:56:8F:5D:AC:B2:F7
11
globalsignr2ca [jdk]
CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R2
CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R2
400000000010f8626e60d
3
Fri Dec 15 10:00:00 IST 2006
Wed Dec 15 10:00:00 IST 2021
75:E0:AB:B6:13:85:12:27:1C:04:F8:5F:DD:DE:38:E4:B7:24:2E:FE
12
identrustdstx3 [jdk]
CN=DST Root CA X3, O=Digital Signature Trust Co.
CN=DST Root CA X3, O=Digital Signature Trust Co.
44afb080d6a327ba893039862ef8406b
3
Sun Oct 01 00:12:19 IDT 2000
Thu Sep 30 17:01:15 IDT 2021
DA:C9:02:4F:54:D8:F6:DF:94:93:5F:B1:73:26:38:CA:6A:D7:7C:13
13
comodoeccca [jdk]
CN=COMODO ECC Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
CN=COMODO ECC Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
1f47afaa62007050544c019e9b63992a
3
Thu Mar 06 02:00:00 IST 2008
Tue Jan 19 01:59:59 IST 2038
9F:74:4E:9F:2B:4D:BA:EC:0F:31:2C:50:B6:56:3B:8E:2D:93:C3:11
14
entrust2048ca [jdk]
CN=Entrust.net Certification Authority (2048), OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.), O=Entrust.net
CN=Entrust.net Certification Authority (2048), OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.), O=Entrust.net
3863def8
3
Fri Dec 24 19:50:51 IST 1999
Tue Jul 24 17:15:12 IDT 2029
50:30:06:09:1D:97:D4:F5:AE:39:F7:CB:E7:92:7D:7D:65:2D:34:31
15
addtrustexternalca [jdk]
CN=AddTrust External CA Root, OU=AddTrust External TTP Network, O=AddTrust AB, C=SE
CN=AddTrust External CA Root, OU=AddTrust External TTP Network, O=AddTrust AB, C=SE
1
3
Tue May 30 13:48:38 IDT 2000
Sat May 30 13:48:38 IDT 2020
02:FA:F3:E2:91:43:54:68:60:78:57:69:4D:F5:E4:5B:68:85:18:68
16
globalsigneccrootcar4 [jdk]
CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R4
CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R4
2a38a41c960a04de42b228a50be8349802
3
Tue Nov 13 02:00:00 IST 2012
Tue Jan 19 05:14:07 IST 2038
69:69:56:2E:40:80:F4:24:A1:E7:19:9F:14:BA:F3:EE:58:AB:6A:BB
17
usertrustrsaca [jdk]
CN=USERTrust RSA Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US
CN=USERTrust RSA Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US
1fd6d30fca3ca51a81bbc640e35032d
3
Mon Feb 01 02:00:00 IST 2010
Tue Jan 19 01:59:59 IST 2038
2B:8F:1B:57:33:0D:BB:A2:D0:7A:6C:51:F7:0E:E9:0D:DA:B9:AD:8E
18
digicertassuredidrootca [jdk]
CN=DigiCert Assured ID Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Assured ID Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
ce7e0e517d846fe8fe560fc1bf03039
3
Fri Nov 10 02:00:00 IST 2006
Mon Nov 10 02:00:00 IST 2031
05:63:B8:63:0D:62:D7:5A:BB:C8:AB:1E:4B:DF:B5:A8:99:B2:4D:43
19
digicertglobalrootg2 [jdk]
CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US
33af1e6a711a9a0bb2864b11d09fae5
3
Thu Aug 01 15:00:00 IDT 2013
Fri Jan 15 14:00:00 IST 2038
DF:3C:24:F9:BF:D6:66:76:1B:26:80:73:FE:06:D1:CC:8D:4F:82:A4
20
actalisauthenticationrootca [jdk]
CN=Actalis Authentication Root CA, O=Actalis S.p.A./03358520967, L=Milan, C=IT
CN=Actalis Authentication Root CA, O=Actalis S.p.A./03358520967, L=Milan, C=IT
570a119742c4e3cc
3
Thu Sep 22 14:22:02 IDT 2011
Sun Sep 22 14:22:02 IDT 2030
F3:73:B3:87:06:5A:28:84:8A:F2:F3:4A:CE:19:2B:DD:C7:8E:9C:AC
21
digicertassuredidg2 [jdk]
CN=DigiCert Assured ID Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Assured ID Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US
b931c3ad63967ea6723bfc3af9af44b
3
Thu Aug 01 15:00:00 IDT 2013
Fri Jan 15 14:00:00 IST 2038
A1:4B:48:D9:43:EE:0A:0E:40:90:4F:3C:E0:A4:C0:91:93:51:5D:3F
22
swisssigngoldg2ca [jdk]
CN=SwissSign Gold CA - G2, O=SwissSign AG, C=CH
CN=SwissSign Gold CA - G2, O=SwissSign AG, C=CH
bb401c43f55e4fb0
3
Wed Oct 25 10:30:35 IST 2006
Sat Oct 25 11:30:35 IDT 2036
D8:C5:38:8A:B7:30:1B:1B:6E:D4:7A:E6:45:25:3A:6F:9F:1A:27:61
23
entrustrootcag2 [jdk]
CN=Entrust Root Certification Authority - G2, OU=”(c) 2009 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US
CN=Entrust Root Certification Authority - G2, OU=”(c) 2009 Entrust, Inc. - for authorized use only”, OU=See www.entrust.net/legal-terms, O=”Entrust, Inc.”, C=US
4a538c28
3
Tue Jul 07 20:25:54 IDT 2009
Sat Dec 07 19:55:54 IST 2030
8C:F4:27:FD:79:0C:3A:D1:66:06:8D:E8:1E:57:EF:BB:93:22:72:D4
24
quovadisrootca2g3 [jdk]
CN=QuoVadis Root CA 2 G3, O=QuoVadis Limited, C=BM
CN=QuoVadis Root CA 2 G3, O=QuoVadis Limited, C=BM
445734245b81899b35f2ceb82b3b5ba726f07528
3
Thu Jan 12 20:59:32 IST 2012
Sun Jan 12 20:59:32 IST 2042
09:3C:61:F3:8B:8B:DC:7D:55:DF:75:38:02:05:00:E1:25:F5:C8:36
25
securetrustca [jdk]
CN=SecureTrust CA, O=SecureTrust Corporation, C=US
CN=SecureTrust CA, O=SecureTrust Corporation, C=US
cf08e5c0816a5ad427ff0eb271859d0
3
Tue Nov 07 21:31:18 IST 2006
Mon Dec 31 21:40:55 IST 2029
87:82:C6:C3:04:35:3B:CF:D2:96:92:D2:59:3E:7D:44:D9:34:FF:11
26
camerfirmachambersca [jdk]
CN=Chambers of Commerce Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU
CN=Chambers of Commerce Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU
a3da427ea4b1aeda
3
Fri Aug 01 15:29:50 IDT 2008
Sat Jul 31 15:29:50 IDT 2038
78:6A:74:AC:76:AB:14:7F:9C:6A:30:50:BA:9E:A8:7E:FE:9A:CE:3C
27
geotrustprimaryca [jdk]
CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US
CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US
18acb56afd69b6153a636cafdafac4a1
3
Mon Nov 27 02:00:00 IST 2006
Thu Jul 17 02:59:59 IDT 2036
32:3C:11:8E:1B:F7:B8:B6:52:54:E2:E2:10:0D:D6:02:90:37:F0:96
28
identrustcommercial [jdk]
CN=IdenTrust Commercial Root CA 1, O=IdenTrust, C=US
CN=IdenTrust Commercial Root CA 1, O=IdenTrust, C=US
a0142800000014523c844b500000002
3
Thu Jan 16 20:12:23 IST 2014
Mon Jan 16 20:12:23 IST 2034
DF:71:7E:AA:4A:D9:4E:C9:55:84:99:60:2D:48:DE:5F:BC:F0:3A:25
29
thawteprimaryrootcag3 [jdk]
CN=thawte Primary Root CA - G3, OU=”(c) 2008 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US
CN=thawte Primary Root CA - G3, OU=”(c) 2008 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US
600197b746a7eab4b49ad64b2ff790fb
3
Wed Apr 02 03:00:00 IDT 2008
Wed Dec 02 01:59:59 IST 2037
F1:8B:53:8D:1B:E9:03:B6:A6:F0:56:43:5B:17:15:89:CA:F3:6B:F2
30
buypassclass3ca [jdk]
CN=Buypass Class 3 Root CA, O=Buypass AS-983163327, C=NO
CN=Buypass Class 3 Root CA, O=Buypass AS-983163327, C=NO
2
3
Tue Oct 26 10:28:58 IST 2010
Fri Oct 26 11:28:58 IDT 2040
DA:FA:F7:FA:66:84:EC:06:8F:14:50:BD:C7:C2:81:A5:BC:A9:64:57
31
verisigntsaca [jdk]
CN=Thawte Timestamping CA, OU=Thawte Certification, O=Thawte, L=Durbanville, ST=Western Cape, C=ZA
CN=Thawte Timestamping CA, OU=Thawte Certification, O=Thawte, L=Durbanville, ST=Western Cape, C=ZA
67c8e1e8e3be1cbdfc913b8ea6238749
3
Wed Jan 01 02:00:00 IST 1997
Sat Jan 02 01:59:59 IST 2021
20:CE:B1:F0:F5:1C:0E:19:A9:F3:8D:B1:AA:8E:03:8C:AA:7A:C7:01
32
verisignclass3g4ca [jdk]
CN=VeriSign Class 3 Public Primary Certification Authority - G4, OU=”(c) 2007 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
CN=VeriSign Class 3 Public Primary Certification Authority - G4, OU=”(c) 2007 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
2f80fe238c0e220f486712289187acb3
3
Mon Nov 05 02:00:00 IST 2007
Tue Jan 19 01:59:59 IST 2038
22:D5:D8:DF:8F:02:31:D1:8D:F7:9D:B7:CF:8A:2D:64:C9:3F:6C:3A
33
baltimorecybertrustca [jdk]
CN=Baltimore CyberTrust Root, OU=CyberTrust, O=Baltimore, C=IE
CN=Baltimore CyberTrust Root, OU=CyberTrust, O=Baltimore, C=IE
20000b9
3
Fri May 12 21:46:00 IDT 2000
Tue May 13 02:59:00 IDT 2025
D4:DE:20:D0:5E:66:FC:53:FE:1A:50:88:2C:78:DB:28:52:CA:E4:74
34
luxtrustglobalrootca [jdk]
CN=LuxTrust Global Root, O=LuxTrust s.a., C=LU
CN=LuxTrust Global Root, O=LuxTrust s.a., C=LU
bb8
3
Thu Mar 17 11:51:37 IST 2011
Wed Mar 17 11:51:37 IST 2021
C9:3C:34:EA:90:D9:13:0C:0F:03:00:4B:98:BD:8B:35:70:91:56:11
35
verisignclass3g2ca [jdk]
OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 3 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US
OU=VeriSign Trust Network, OU=”(c) 1998 VeriSign, Inc. - For authorized use only”, OU=Class 3 Public Primary Certification Authority - G2, O=”VeriSign, Inc.”, C=US
7dd9fe07cfa81eb7107967fba78934c6
1
Mon May 18 03:00:00 IDT 1998
Wed Aug 02 02:59:59 IDT 2028
85:37:1C:A6:E5:50:14:3D:CE:28:03:47:1B:DE:3A:09:E8:F8:77:0F
36
camerfirmachamberscommerceca [jdk]
CN=Chambers of Commerce Root, OU=http://www.chambersign.org, O=AC Camerfirma SA CIF A82743287, C=EU
CN=Chambers of Commerce Root, OU=http://www.chambersign.org, O=AC Camerfirma SA CIF A82743287, C=EU
0
3
Tue Sep 30 19:13:43 IDT 2003
Wed Sep 30 19:13:44 IDT 2037
6E:3A:55:A4:19:0C:19:5C:93:84:3C:C0:DB:72:2E:31:30:61:F0:B1
37
soneraclass2ca [jdk]
CN=Sonera Class2 CA, O=Sonera, C=FI
CN=Sonera Class2 CA, O=Sonera, C=FI
1d
3
Fri Apr 06 09:29:40 IST 2001
Tue Apr 06 10:29:40 IDT 2021
37:F7:6D:E6:07:7C:90:C5:B1:3E:93:1A:B7:41:10:B4:F2:E4:9A:27
38
affirmtrustnetworkingca [jdk]
CN=AffirmTrust Networking, O=AffirmTrust, C=US
CN=AffirmTrust Networking, O=AffirmTrust, C=US
7c4f04391cd4992d
3
Fri Jan 29 16:08:24 IST 2010
Tue Dec 31 16:08:24 IST 2030
29:36:21:02:8B:20:ED:02:F5:66:C5:32:D1:D6:ED:90:9F:45:00:2F
39
ttelesecglobalrootclass3ca [jdk]
CN=T-TeleSec GlobalRoot Class 3, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE
CN=T-TeleSec GlobalRoot Class 3, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE
1
3
Wed Oct 01 13:29:56 IDT 2008
Sun Oct 02 02:59:59 IDT 2033
55:A6:72:3E:CB:F2:EC:CD:C3:23:74:70:19:9D:2A:BE:11:E3:81:D1
40
xrampglobalca [jdk]
CN=XRamp Global Certification Authority, O=XRamp Security Services Inc, OU=www.xrampsecurity.com, C=US
CN=XRamp Global Certification Authority, O=XRamp Security Services Inc, OU=www.xrampsecurity.com, C=US
50946cec18ead59c4dd597ef758fa0ad
3
Mon Nov 01 19:14:04 IST 2004
Mon Jan 01 07:37:19 IST 2035
B8:01:86:D1:EB:9C:86:A5:41:04:CF:30:54:F3:4C:52:B7:E5:58:C6
41
geotrustprimarycag3 [jdk]
CN=GeoTrust Primary Certification Authority - G3, OU=(c) 2008 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US
CN=GeoTrust Primary Certification Authority - G3, OU=(c) 2008 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US
15ac6e9419b2794b41f627a9c3180f1f
3
Wed Apr 02 03:00:00 IDT 2008
Wed Dec 02 01:59:59 IST 2037
03:9E:ED:B8:0B:E7:A0:3C:69:53:89:3B:20:D2:D9:32:3A:4C:2A:FD
42
camerfirmachambersignca [jdk]
CN=Global Chambersign Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU
CN=Global Chambersign Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU
c9cdd3e9d57d23ce
3
Fri Aug 01 15:31:40 IDT 2008
Sat Jul 31 15:31:40 IDT 2038
4A:BD:EE:EC:95:0D:35:9C:89:AE:C7:52:A1:2C:5B:29:F6:D6:AA:0C
43
thawteprimaryrootcag2 [jdk]
CN=thawte Primary Root CA - G2, OU=”(c) 2007 thawte, Inc. - For authorized use only”, O=”thawte, Inc.”, C=US
CN=thawte Primary Root CA - G2, OU=”(c) 2007 thawte, Inc. - For authorized use only”, O=”thawte, Inc.”, C=US
35fc265cd9844fc93d263d579baed756
3
Mon Nov 05 02:00:00 IST 2007
Tue Jan 19 01:59:59 IST 2038
AA:DB:BC:22:23:8F:C4:01:A1:27:BB:38:DD:F4:1D:DB:08:9E:F0:12
44
usertrusteccca [jdk]
CN=USERTrust ECC Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US
CN=USERTrust ECC Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US
5c8b99c55a94c5d27156decd8980cc26
3
Mon Feb 01 02:00:00 IST 2010
Tue Jan 19 01:59:59 IST 2038
D1:CB:CA:5D:B2:D5:2A:7F:69:3B:67:4D:E5:F0:5A:1D:0C:95:7D:F0
45
swisssignsilverg2ca [jdk]
CN=SwissSign Silver CA - G2, O=SwissSign AG, C=CH
CN=SwissSign Silver CA - G2, O=SwissSign AG, C=CH
4f1bd42f54bb2f4b
3
Wed Oct 25 10:32:46 IST 2006
Sat Oct 25 11:32:46 IDT 2036
9B:AA:E5:9F:56:EE:21:CB:43:5A:BE:25:93:DF:A7:F0:40:D1:1D:CB
46
affirmtrustpremiumca [jdk]
CN=AffirmTrust Premium, O=AffirmTrust, C=US
CN=AffirmTrust Premium, O=AffirmTrust, C=US
6d8c1446b1a60aee
3
Fri Jan 29 16:10:36 IST 2010
Mon Dec 31 16:10:36 IST 2040
D8:A6:33:2C:E0:03:6F:B1:85:F6:63:4F:7D:6A:06:65:26:32:28:27
47
globalsignca [jdk]
CN=GlobalSign Root CA, OU=Root CA, O=GlobalSign nv-sa, C=BE
CN=GlobalSign Root CA, OU=Root CA, O=GlobalSign nv-sa, C=BE
40000000001154b5ac394
3
Tue Sep 01 15:00:00 IDT 1998
Fri Jan 28 14:00:00 IST 2028
B1:BC:96:8B:D4:F4:9D:62:2A:A8:9A:81:F2:15:01:52:A4:1D:82:9C
48
dtrustclass3ca2 [jdk]
CN=D-TRUST Root Class 3 CA 2 2009, O=D-Trust GmbH, C=DE
CN=D-TRUST Root Class 3 CA 2 2009, O=D-Trust GmbH, C=DE
983f3
3
Thu Nov 05 10:35:58 IST 2009
Mon Nov 05 10:35:58 IST 2029
58:E8:AB:B0:36:15:33:FB:80:F7:9B:1B:6D:29:D3:FF:8D:5F:00:F0
49
affirmtrustcommercialca [jdk]
CN=AffirmTrust Commercial, O=AffirmTrust, C=US
CN=AffirmTrust Commercial, O=AffirmTrust, C=US
7777062726a9b17c
3
Fri Jan 29 16:06:06 IST 2010
Tue Dec 31 16:06:06 IST 2030
F9:B5:B6:32:45:5F:9C:BE:EC:57:5F:80:DC:E9:6E:2C:C7:B2:78:B7
50
thawtepremiumserverca [jdk]
EMAILADDRESS=premium-server@thawte.com, CN=Thawte Premium Server CA, OU=Certification Services Division, O=Thawte Consulting cc, L=Cape Town, ST=Western Cape, C=ZA
EMAILADDRESS=premium-server@thawte.com, CN=Thawte Premium Server CA, OU=Certification Services Division, O=Thawte Consulting cc, L=Cape Town, ST=Western Cape, C=ZA
36122296c5e338a520a1d25f4cd70954
3
Thu Aug 01 03:00:00 IDT 1996
Sat Jan 02 01:59:59 IST 2021
E0:AB:05:94:20:72:54:93:05:60:62:02:36:70:F7:CD:2E:FC:66:66
51
comodoaaaca [jdk]
CN=AAA Certificate Services, O=Comodo CA Limited, L=Salford, ST=Greater Manchester, C=GB
CN=AAA Certificate Services, O=Comodo CA Limited, L=Salford, ST=Greater Manchester, C=GB
1
3
Thu Jan 01 02:00:00 IST 2004
Mon Jan 01 01:59:59 IST 2029
D1:EB:23:A4:6D:17:D6:8F:D9:25:64:C2:F1:F1:60:17:64:D8:E3:49
52
geotrustprimarycag2 [jdk]
CN=GeoTrust Primary Certification Authority - G2, OU=(c) 2007 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US
CN=GeoTrust Primary Certification Authority - G2, OU=(c) 2007 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US
3cb2f4480a00e2feeb243b5e603ec36b
3
Mon Nov 05 02:00:00 IST 2007
Tue Jan 19 01:59:59 IST 2038
8D:17:84:D5:37:F3:03:7D:EC:70:FE:57:8B:51:9A:99:E6:10:D7:B0
53
globalsignr3ca [jdk]
CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R3
CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R3
4000000000121585308a2
3
Wed Mar 18 12:00:00 IST 2009
Sun Mar 18 12:00:00 IST 2029
D6:9B:56:11:48:F0:1C:77:C5:45:78:C1:09:26:DF:5B:85:69:76:AD
54
quovadisrootca3 [jdk]
CN=QuoVadis Root CA 3, O=QuoVadis Limited, C=BM
CN=QuoVadis Root CA 3, O=QuoVadis Limited, C=BM
5c6
3
Fri Nov 24 21:11:23 IST 2006
Mon Nov 24 21:06:44 IST 2031
1F:49:14:F7:D8:74:95:1D:DD:AE:02:C0:BE:FD:3A:2D:82:75:51:85
55
thawteprimaryrootca [jdk]
CN=thawte Primary Root CA, OU=”(c) 2006 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US
CN=thawte Primary Root CA, OU=”(c) 2006 thawte, Inc. - For authorized use only”, OU=Certification Services Division, O=”thawte, Inc.”, C=US
344ed55720d5edec49f42fce37db2b6d
3
Fri Nov 17 02:00:00 IST 2006
Thu Jul 17 02:59:59 IDT 2036
91:C6:D6:EE:3E:8A:C8:63:84:E5:48:C2:99:29:5C:75:6C:81:7B:81
56
starfieldrootg2ca [jdk]
CN=Starfield Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US
CN=Starfield Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US
0
3
Tue Sep 01 03:00:00 IDT 2009
Fri Jan 01 01:59:59 IST 2038
B5:1C:06:7C:EE:2B:0C:3D:F8:55:AB:2D:92:F4:FE:39:D4:E7:0F:0E
57
starfieldclass2ca [jdk]
OU=Starfield Class 2 Certification Authority, O=”Starfield Technologies, Inc.”, C=US
OU=Starfield Class 2 Certification Authority, O=”Starfield Technologies, Inc.”, C=US
0
3
Tue Jun 29 20:39:16 IDT 2004
Thu Jun 29 20:39:16 IDT 2034
AD:7E:1C:28:B0:64:EF:8F:60:03:40:20:14:C3:D0:E3:37:0E:B5:8A
58
verisignclass3ca [jdk]
OU=Class 3 Public Primary Certification Authority, O=”VeriSign, Inc.”, C=US
OU=Class 3 Public Primary Certification Authority, O=”VeriSign, Inc.”, C=US
3c9131cb1ff6d01b0e9ab8d044bf12be
1
Mon Jan 29 02:00:00 IST 1996
Thu Aug 03 02:59:59 IDT 2028
A1:DB:63:93:91:6F:17:E4:18:55:09:40:04:15:C7:02:40:B0:AE:6B
59
affirmtrustpremiumeccca [jdk]
CN=AffirmTrust Premium ECC, O=AffirmTrust, C=US
CN=AffirmTrust Premium ECC, O=AffirmTrust, C=US
7497258ac73f7a54
3
Fri Jan 29 16:20:24 IST 2010
Mon Dec 31 16:20:24 IST 2040
B8:23:6B:00:2F:1D:16:86:53:01:55:6C:11:A4:37:CA:EB:FF:C3:BB
60
geotrustglobalca [jdk]
CN=GeoTrust Global CA, O=GeoTrust Inc., C=US
CN=GeoTrust Global CA, O=GeoTrust Inc., C=US
23456
3
Tue May 21 07:00:00 IDT 2002
Sat May 21 07:00:00 IDT 2022
DE:28:F4:A4:FF:E5:B9:2F:A3:C5:03:D1:A3:49:A7:F9:96:2A:82:12
61
godaddyclass2ca [jdk]
OU=Go Daddy Class 2 Certification Authority, O=”The Go Daddy Group, Inc.”, C=US
OU=Go Daddy Class 2 Certification Authority, O=”The Go Daddy Group, Inc.”, C=US
0
3
Tue Jun 29 20:06:20 IDT 2004
Thu Jun 29 20:06:20 IDT 2034
27:96:BA:E6:3F:18:01:E2:77:26:1B:A0:D7:77:70:02:8F:20:EE:E4
62
godaddyrootg2ca [jdk]
CN=Go Daddy Root Certificate Authority - G2, O=”GoDaddy.com, Inc.”, L=Scottsdale, ST=Arizona, C=US
CN=Go Daddy Root Certificate Authority - G2, O=”GoDaddy.com, Inc.”, L=Scottsdale, ST=Arizona, C=US
0
3
Tue Sep 01 03:00:00 IDT 2009
Fri Jan 01 01:59:59 IST 2038
47:BE:AB:C9:22:EA:E8:0E:78:78:34:62:A7:9F:45:C2:54:FD:E6:8B
63
verisignclass3g5ca [jdk]
CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU=”(c) 2006 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU=”(c) 2006 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
18dad19e267de8bb4a2158cdcc6b3b4a
3
Wed Nov 08 02:00:00 IST 2006
Thu Jul 17 02:59:59 IDT 2036
4E:B6:D5:78:49:9B:1C:CF:5F:58:1E:AD:56:BE:3D:9B:67:44:A5:E5
64
quovadisrootca2 [jdk]
CN=QuoVadis Root CA 2, O=QuoVadis Limited, C=BM
CN=QuoVadis Root CA 2, O=QuoVadis Limited, C=BM
509
3
Fri Nov 24 20:27:00 IST 2006
Mon Nov 24 20:23:33 IST 2031
CA:3A:FB:CF:12:40:36:4B:44:B2:16:20:88:80:48:39:19:93:7C:F7
65
certumca [jdk]
CN=Certum CA, O=Unizeto Sp. z o.o., C=PL
CN=Certum CA, O=Unizeto Sp. z o.o., C=PL
10020
3
Tue Jun 11 13:46:39 IDT 2002
Fri Jun 11 13:46:39 IDT 2027
62:52:DC:40:F7:11:43:A2:2F:DE:9E:F7:34:8E:06:42:51:B1:81:18
66
swisssignplatinumg2ca [jdk]
CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH
CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH
4eb200670c035d4f
3
Wed Oct 25 10:36:00 IST 2006
Sat Oct 25 11:36:00 IDT 2036
56:E0:FA:C0:3B:8F:18:23:55:18:E5:D3:11:CA:E8:C2:43:31:AB:66
67
chunghwaepkirootca [jdk]
OU=ePKI Root Certification Authority, O=”Chunghwa Telecom Co., Ltd.”, C=TW
OU=ePKI Root Certification Authority, O=”Chunghwa Telecom Co., Ltd.”, C=TW
15c8bd65475cafb897005ee406d2bc9d
3
Mon Dec 20 04:31:27 IST 2004
Wed Dec 20 04:31:27 IST 2034
67:65:0D:F1:7E:8E:7E:5B:82:40:A4:F4:56:4B:CF:E2:3D:69:C6:F0
68
quovadisrootca3g3 [jdk]
CN=QuoVadis Root CA 3 G3, O=QuoVadis Limited, C=BM
CN=QuoVadis Root CA 3 G3, O=QuoVadis Limited, C=BM
2ef59b0228a7db7affd5a3a9eebd03a0cf126a1d
3
Thu Jan 12 22:26:32 IST 2012
Sun Jan 12 22:26:32 IST 2042
48:12:BD:92:3C:A8:C4:39:06:E7:30:6D:27:96:E6:A4:CF:22:2E:7D
69
quovadisrootca [jdk]
CN=QuoVadis Root Certification Authority, OU=Root Certification Authority, O=QuoVadis Limited, C=BM
CN=QuoVadis Root Certification Authority, OU=Root Certification Authority, O=QuoVadis Limited, C=BM
3ab6508b
3
Mon Mar 19 20:33:33 IST 2001
Wed Mar 17 20:33:33 IST 2021
DE:3F:40:BD:50:93:D3:9B:6C:60:F6:DA:BC:07:62:01:00:89:76:C9
70
digicerthighassuranceevrootca [jdk]
CN=DigiCert High Assurance EV Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert High Assurance EV Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
2ac5c266a0b409b8f0b79f2ae462577
3
Fri Nov 10 02:00:00 IST 2006
Mon Nov 10 02:00:00 IST 2031
5F:B7:EE:06:33:E2:59:DB:AD:0C:4C:9A:E6:D3:8F:1A:61:C7:DC:25
71
quovadisrootca1g3 [jdk]
CN=QuoVadis Root CA 1 G3, O=QuoVadis Limited, C=BM
CN=QuoVadis Root CA 1 G3, O=QuoVadis Limited, C=BM
78585f2ead2c194be3370735341328b596d46593
3
Thu Jan 12 19:27:44 IST 2012
Sun Jan 12 19:27:44 IST 2042
1B:8E:EA:57:96:29:1A:C9:39:EA:B8:0A:81:1A:73:73:C0:93:79:67
72
comodorsaca [jdk]
CN=COMODO RSA Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
CN=COMODO RSA Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
4caaf9cadb636fe01ff74ed85b03869d
3
Tue Jan 19 02:00:00 IST 2010
Tue Jan 19 01:59:59 IST 2038
AF:E5:D2:44:A8:D1:19:42:30:FF:47:9F:E2:F8:97:BB:CD:7A:8C:B4
73
buypassclass2ca [jdk]
CN=Buypass Class 2 Root CA, O=Buypass AS-983163327, C=NO
CN=Buypass Class 2 Root CA, O=Buypass AS-983163327, C=NO
2
3
Tue Oct 26 10:38:03 IST 2010
Fri Oct 26 11:38:03 IDT 2040
49:0A:75:74:DE:87:0A:47:FE:58:EE:F6:C7:6B:EB:C6:0B:12:40:99
74
secomscrootca2 [jdk]
OU=Security Communication RootCA2, O=”SECOM Trust Systems CO.,LTD.”, C=JP
OU=Security Communication RootCA2, O=”SECOM Trust Systems CO.,LTD.”, C=JP
0
3
Fri May 29 08:00:39 IDT 2009
Tue May 29 08:00:39 IDT 2029
5F:3B:8C:F2:F8:10:B3:7D:78:B4:CE:EC:19:19:C3:73:34:B9:C7:74
75
entrustevca [jdk]
CN=Entrust Root Certification Authority, OU=”(c) 2006 Entrust, Inc.”, OU=www.entrust.net/CPS is incorporated by reference, O=”Entrust, Inc.”, C=US
CN=Entrust Root Certification Authority, OU=”(c) 2006 Entrust, Inc.”, OU=www.entrust.net/CPS is incorporated by reference, O=”Entrust, Inc.”, C=US
456b5054
3
Mon Nov 27 22:23:42 IST 2006
Fri Nov 27 22:53:42 IST 2026
B3:1E:B1:B7:40:E3:6C:84:02:DA:DC:37:D4:4D:F5:D4:67:49:52:F9
76
verisignclass3g3ca [jdk]
CN=VeriSign Class 3 Public Primary Certification Authority - G3, OU=”(c) 1999 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
CN=VeriSign Class 3 Public Primary Certification Authority - G3, OU=”(c) 1999 VeriSign, Inc. - For authorized use only”, OU=VeriSign Trust Network, O=”VeriSign, Inc.”, C=US
9b7e0649a33e62b9d5ee90487129ef57
1
Fri Oct 01 02:00:00 IST 1999
Thu Jul 17 02:59:59 IDT 2036
13:2D:0D:45:53:4B:69:97:CD:B2:D5:C3:39:E2:55:76:60:9B:5C:C6
77
certumtrustednetworkca [jdk]
CN=Certum Trusted Network CA, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL
CN=Certum Trusted Network CA, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL
444c0
3
Wed Oct 22 14:07:37 IST 2008
Mon Dec 31 14:07:37 IST 2029
07:E0:32:E0:20:B7:2C:3F:19:2F:06:28:A2:59:3A:19:A7:0F:06:9E
78
dtrustclass3ca2ev [jdk]
CN=D-TRUST Root Class 3 CA 2 EV 2009, O=D-Trust GmbH, C=DE
CN=D-TRUST Root Class 3 CA 2 EV 2009, O=D-Trust GmbH, C=DE
983f4
3
Thu Nov 05 10:50:46 IST 2009
Mon Nov 05 10:50:46 IST 2029
96:C9:1B:0B:95:B4:10:98:42:FA:D0:D8:22:79:FE:60:FA:B9:16:83
79
globalsigneccrootcar5 [jdk]
CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R5
CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R5
605949e0262ebb55f90a778a71f94ad86c
3
Tue Nov 13 02:00:00 IST 2012
Tue Jan 19 05:14:07 IST 2038
1F:24:C6:30:CD:A4:18:EF:20:69:FF:AD:4F:DD:5F:46:3A:1B:69:AA
80
starfieldservicesrootg2ca [jdk]
CN=Starfield Services Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US
CN=Starfield Services Root Certificate Authority - G2, O=”Starfield Technologies, Inc.”, L=Scottsdale, ST=Arizona, C=US
0
3
Tue Sep 01 03:00:00 IDT 2009
Fri Jan 01 01:59:59 IST 2038
92:5A:8F:8D:2C:6D:04:E0:66:5F:59:6A:FF:22:D8:63:E8:25:6F:3F
81
ttelesecglobalrootclass2ca [jdk]
CN=T-TeleSec GlobalRoot Class 2, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE
CN=T-TeleSec GlobalRoot Class 2, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE
1
3
Wed Oct 01 13:40:14 IDT 2008
Sun Oct 02 02:59:59 IDT 2033
59:0D:2D:7D:88:4F:40:2E:61:7E:A5:62:32:17:65:CF:17:D8:94:E9
82
addtrustqualifiedca [jdk]
CN=AddTrust Qualified CA Root, OU=AddTrust TTP Network, O=AddTrust AB, C=SE
CN=AddTrust Qualified CA Root, OU=AddTrust TTP Network, O=AddTrust AB, C=SE
1
3
Tue May 30 13:44:50 IDT 2000
Sat May 30 13:44:50 IDT 2020
4D:23:78:EC:91:95:39:B5:00:7F:75:8F:03:3B:21:1E:C5:4D:8B:CF
83
digicertglobalrootca [jdk]
CN=DigiCert Global Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
CN=DigiCert Global Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
83be056904246b1a1756ac95991c74a
3
Fri Nov 10 02:00:00 IST 2006
Mon Nov 10 02:00:00 IST 2031
A8:98:5D:3A:65:E5:E5:C4:B2:D7:D6:6D:40:C6:DD:2F:B1:9C:54:36
84
amazonrootca1 [jdk]
CN=Amazon Root CA 1, O=Amazon, C=US
CN=Amazon Root CA 1, O=Amazon, C=US
66c9fcf99bf8c0a39e2f0788a43e696365bca
3
Tue May 26 08:00:00 CST 2015
Sun Jan 17 08:00:00 CST 2038
8D:A7:F9:65:EC:5E:FC:37:91:0F:1C:6E:59:FD:C1:CC:6A:6E:DE:16
85
amazonrootca2 [jdk]
CN=Amazon Root CA 2, O=Amazon, C=US
CN=Amazon Root CA 2, O=Amazon, C=US
66c9fd29635869f0a0fe58678f85b26bb8a37
3
Tue May 26 08:00:00 CST 2015
Sat May 26 08:00:00 CST 2040
5A:8C:EF:45:D7:A6:98:59:76:7A:8C:8B:44:96:B5:78:CF:47:4B:1A
86
amazonrootca3 [jdk]
CN=Amazon Root CA 3, O=Amazon, C=US
CN=Amazon Root CA 3, O=Amazon, C=US
66c9fd5749736663f3b0b9ad9e89e7603f24a
3
Tue May 26 08:00:00 CST 2015
Sat May 26 08:00:00 CST 2040
0D:44:DD:8C:3C:8C:1A:1A:58:75:64:81:E9:0F:2E:2A:FF:B3:D2:6E
87
amazonrootca4 [jdk]
CN=Amazon Root CA 4, O=Amazon, C=US
CN=Amazon Root CA 4, O=Amazon, C=US
66c9fd7c1bb104c2943e5717b7b2cc81ac10e
3
Tue May 26 08:00:00 CST 2015
Sat May 26 08:00:00 CST 2040
F6:10:84:07:D6:F8:BB:67:98:0C:C2:E2:44:C2:EB:AE:1C:EF:63:BE
88
globalsignrootcar6 [jdk]
CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R6
CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R6
45e6bb038333c3856548e6ff4551
3
Wed Dec 10 08:00:00 CST 2014
Sun Dec 10 08:00:00 CST 2034
80:94:64:0E:B5:A7:A1:CA:11:9C:1F:DD:D5:9F:81:02:63:A7:FB:D1
89
letsencryptisrgx1 [jdk]
CN=ISRG Root X1, O=Internet Security Research Group, C=US
CN=ISRG Root X1, O=Internet Security Research Group, C=US
8210cfb0d240e3594463e0bb63828b00
3
Thu Jun 04 19:04:38 CST 2015
Mon Jun 04 19:04:38 CST 2035
CA:BD:2A:79:A1:07:6A:31:F2:1D:25:36:35:CB:03:9D:43:29:A5:E8
90
luxtrustglobalroot2ca [jdk]
CN=LuxTrust Global Root 2, O=LuxTrust S.A., C=LU
CN=LuxTrust Global Root 2, O=LuxTrust S.A., C=LU
a7ea6df4b449eda6a24859ee6b815d3167fbbb1
3
Thu Mar 05 21:21:57 CST 2015
Mon Mar 05 21:21:57 CST 2035
1E:0E:56:19:0A:D1:8B:25:98:B2:04:44:FF:66:8A:04:17:99:5F:3F
91
teliasonerarootcav1 [jdk]
CN=TeliaSonera Root CA v1, O=TeliaSonera
CN=TeliaSonera Root CA v1, O=TeliaSonera
95be16a0f72e46f17b398272fa8bcd96
3
Thu Oct 18 20:00:50 CST 2007
Mon Oct 18 20:00:50 CST 2032
43:13:BB:96:F1:D5:86:9B:C1:4E:6A:92:F6:CF:F6:34:69:87:82:37
92
TWCA Root Certification Authority
CN=TWCA Root Certification Authority, OU=Root CA, O=TAIWAN-CA, C=TW
CN=TWCA Root Certification Authority, OU=Root CA, O=TAIWAN-CA, C=TW
01
3
Thu Aug 28 15:24:33 CST 2008
Tue Dec 31 23:59:59 CST 2030
CF:9E:87:6D:D3:EB:FC:42:26:97:A3:B5:A3:7A:A0:76:A9:06:23:48

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-20-V14
爬取时间: 2025-04-29 22:20:03
来源: Huawei Developer
具体见加密套件。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-22-V14
爬取时间: 2025-04-29 22:20:17
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-23-V14
爬取时间: 2025-04-29 22:20:32
来源: Huawei Developer
当前支持的续费周期为1周、1个月、2个月、3个月、6个月、1年、30天（上次订阅日期+30天）、31天（上次订阅日期+31天），具体配置方法请参考数字商品介绍。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-24-V14
爬取时间: 2025-04-29 22:20:50
来源: Huawei Developer
按照自然月计算。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-25-V14
爬取时间: 2025-04-29 22:21:04
来源: Huawei Developer
根据订阅日期决定。例如：当月第N日订阅，下个月的第N日续期。如果这个N在下个月不存在，那就在下个月的最后一日续期，下下个月恢复第N日续期。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-1-V14
爬取时间: 2025-04-29 22:21:18
来源: Huawei Developer
问题现象
调用展示元服务卡片详情页接口，显示异常页面。
解决措施

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-2-V14
爬取时间: 2025-04-29 22:21:32
来源: Huawei Developer
问题现象
调用加载接口时加载模块失败。
解决措施
支持按需加载的应用需要先上架到应用市场，然后从应用市场下载应用包。应用包安装后才能在应用中调用动态下载接口。开发者通过本地IDE编译的demo包无法直接调用下载接口。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-28-V14
爬取时间: 2025-04-29 22:21:45
来源: Huawei Developer
不支持，上架是整个.app包，包括基础包和功能包。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-29-V14
爬取时间: 2025-04-29 22:21:59
来源: Huawei Developer
是的，不需要重新发起按需加载请求。产品特性按需分发服务分为两部分，按需加载安装+动态引入模块。只要已经下载安装了应用，就完成了按需下载安装。动态引入是运行时，即应用运行状态下去查找指定模块。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-30-V14
爬取时间: 2025-04-29 22:22:13
来源: Huawei Developer
可以卸载指定模块后重新调用fetchModules接口发起按需加载请求。
使用hdc指令卸载指定应用的指定模块后重新发起请求，卸载命令请参考：hdc shell bm uninstall -n com.xxxx.instantdownloaddemo -m modulelibName。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-26-V14
爬取时间: 2025-04-29 22:22:27
来源: Huawei Developer
推荐使用邀请测试。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-3-V14
爬取时间: 2025-04-29 22:23:22
来源: Huawei Developer
问题现象
调用查询自身场景值接口返回场景值为空。
解决措施
当前应用/元服务没有生成场景值，通过其他应用或者元服务拉起当前应用或者元服务可以产生场景值，然后查询场景值。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-4-V14
爬取时间: 2025-04-29 22:23:36
来源: Huawei Developer
问题现象
调用应用市场更新功能相关API时，提示应用不在前台异常。
解决措施
应用市场更新功能API要求应用必须在前台时进行调用，请在应用处于前台时调用相关接口。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-27-V14
爬取时间: 2025-04-29 22:23:50
来源: Huawei Developer
可以，弹框文案详细信息由用户配置，具体请参考配置可本地化基础信息中的新版本特性。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-5-V14
爬取时间: 2025-04-29 22:24:03
来源: Huawei Developer
问题现象
媒体调用登记归因来源接口时，报错1009300003，身份检查错误。
解决措施
1. 需要将应用通过应用市场上架。
2. 在应用归因云侧注册应用生态伙伴信息。
3. 开发者下配置应用id列表。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-6-V14
爬取时间: 2025-04-29 22:24:17
来源: Huawei Developer
解决措施
过滤关键词：Attr-。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-faq-31-V14
爬取时间: 2025-04-29 22:24:31
来源: Huawei Developer
解决措施
过滤关键词：StoreKit|ShortcutManager

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/store-attribution-appendix-V14
爬取时间: 2025-04-29 22:24:44
来源: Huawei Developer
标准化事件信息
| 定义值  | 回传值  | 含义说明  |
| --- | --- | --- |
| 安装应用  | 0  | 应用安装完成 说明安装应用事件归因结果回传通过白名单方式向合作伙伴开放，默认不回传（白名单开放方式请联系华为运营）。   |
| 激活应用  | 1  | 历史首次激活应用  |
| 启动应用  | 2  | 打开应用  |
| 次日留存  | 3  | 次日仍然使用应用  |
| 付费  | 4  | 在应用内发生付费  |
| 提交表单  | 5  | 在应用内提交表单  |
| 授权  | 6  | 发生应用的授权  |
| 注册  | 7  | 注册应用或服务  |
| 关键页面访问  | 9  | 发生关键页面浏览行为  |
| 申请  | 14  | 申请服务  |
| 下单  | 18  | 将购物清单正式生成订单  |
| 预约  | 21  | 预约商品、内容或服务  |
定义值
回传值
含义说明
安装应用
0
应用安装完成
安装应用事件归因结果回传通过白名单方式向合作伙伴开放，默认不回传（白名单开放方式请联系华为运营）。
激活应用
1
历史首次激活应用
启动应用
2
打开应用
次日留存
3
次日仍然使用应用
付费
4
在应用内发生付费
提交表单
5
在应用内提交表单
授权
6
发生应用的授权
注册
7
注册应用或服务
关键页面访问
9
发生关键页面浏览行为
申请
14
申请服务
下单
18
将购物清单正式生成订单
预约
21
预约商品、内容或服务
归因来源签名计算规则
1.按照如下规则（字段顺序及分隔符）拼接待签名的字符串：
```typescript
adTechId+ '\u2063' + campaignId+ '\u2063'  + destinationId+ '\u2063' + serviceTag+ '\u2063' + mmpIdStr + '\u2063' + nonce + '\u2063' + timestamp
```
其中，mmpIdStr生成规则为：
若归因监测平台的数组不为空，则将归因监测平台中的元素以'\u2063'为连接符进行拼接，假设mmpIds中有两个归因监测平台，拼接示例：
```typescript
mmpIdStr = mmpId1 + '\u2063' + mmpId2
```
2.使用分发平台在应用归因服务云侧注册角色时，提供的公钥所对应的私钥，对步骤1拼接的字符串进行签名计算（签名算法：SHA256WithRSA/PSS；生成密钥位数：RSA3072）。
3.接口中字段不为空则参与签名/验签，否则不参与签名/验签。
生成签名方法
您可以参考如下代码生成签名，也可以自行生成签名。
```typescript
import { hilog } from '@kit.PerformanceAnalysisKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { promptAction } from '@kit.ArkUI';
import { AegRsaSign } from "@hms-security/agoh-crypto";  //具体引用方法参考本示例代码底部说明
const TAG: string = 'SignUtil';
const SEPARATOR: string = '\u2063';
export class SignUtil {
public static genSignContent(adTechId: string, campaignId: string, destinationId: string, mmpIds: string[], serviceTag: string, nonce: string, timestamp: number) {
// mmpIdStr = mmpId1 + '\u2063' + mmpId2
// signContent:string= adTechId+ '\u2063' + campaignId+ '\u2063'  + destinationId+ '\u2063' + serviceTag+ '\u2063' + mmpIdStr + '\u2063' + nonce + '\u2063' + timestamp
let content = SignUtil.addSeparator(adTechId)
+ SignUtil.addSeparator(campaignId)
+ SignUtil.addSeparator(destinationId)
+ SignUtil.addSeparator(serviceTag)
+ SignUtil.genMmpIds(mmpIds)
+ SignUtil.addSeparator(nonce)
+ timestamp;
hilog.info(0,TAG,`content = ${JSON.stringify(content)}`);
return content;
}
private static addSeparator(value: string | undefined): string {
return value ? value + SEPARATOR : '';
}
private static genMmpIds(mmpIds: string[]) {
let result: string = '';
for (let mmpId of mmpIds) {
if (mmpId) {
result += SignUtil.addSeparator(mmpId);
}
}
return result;
}
public static getSign(content: string, privateKey: string): Promise<string> {
return new Promise<string>((resolve) => {
AegRsaSign.ohAegSignRSAWithPSSTextBase64(content, privateKey).then(async (sign: string) => {
hilog.info(0, TAG, "getSign success.");
resolve(sign);
}).catch((error: BusinessError) => {
hilog.error(0, TAG, `getSign failed. code is ${error.code}, message is ${error.message}`);
promptAction.showToast({
message: `getSign failed.`
})
});
})
}
}
```
其中import {AegRsaSign} from "@hms-security/agoh-crypto" ， 使用AegRsaSign.ohAegSignRSAWithPSSTextBase64生成签名，使用方法如下:
执行安装命令：ohpm i @hms-security/agoh-crypto
具体的接口使用方法，请参见ohAegSignRSAWithPSSTextBase64

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-kit-guide-V14
爬取时间: 2025-04-29 22:24:58
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-introduction-V14
爬取时间: 2025-04-29 22:25:12
来源: Huawei Developer
Wallet Kit（钱包服务）集成了终端“芯-端-云”全栈技术的开放能力，可实现车钥匙、交通卡的凭证电子化。让用户能够轻松地将车钥匙和交通卡保存在手机中，以便在适当的时间使用。
场景介绍
用户将车钥匙模拟到华为钱包后，相比传统车钥匙，使用手机作为车钥匙载体更适用于钥匙分享，蓝牙车钥匙等新业务场景。结合国内车厂的业界现状，可以快速实现手机车钥匙功能。
用户可以在手机上开通交通卡，使用手机替代原有的实体交通卡，可以在地铁或公交刷卡乘车。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-preparations-V14
爬取时间: 2025-04-29 22:25:26
来源: Huawei Developer
请先参考“应用开发者准备”完成基本准备工作和指纹配置，再继续以下开发活动。
1.
2.
3.
4.  Wallet Kit服务参数名称 参数值 服务类型 分为卡、票、券，开发者选择其中的一种。 服务项目 服务项目依赖所选择的服务类型，不同的服务类型，有不同的服务项目。例如当服务类型选择“卡”时，对应的服务项目有：“会员卡”、“公交卡”、“礼品卡”。 服务名称 Wallet Kit首页列表展示该开发者所有创建的服务时，服务名称用于区分不同的服务。 服务号 用于Wallet Kit服务器区分不同的服务且保证唯一性。 接入方式 国内支持三种接入方式，App接入，云端接入，代理接入。商户可以根据自己的需求选择适合自己类型的接入方式。选择云端接入时用户需要填写“回调地址”、“用户公钥”二项资料，选择App接入则只需要上传证书请求文件生成证书即可，选择代理接入时用户需要填写“回调地址”一项资料，而用户公钥则会发送默认值到Wallet Kit服务器。 回调地址 开发者提供给Wallet Kit的地址，用于Wallet Kit回调开发者，用户领卡成功或删卡时回调开发者。 注：如果不需要Wallet Kit通知开发者用户领卡或删卡的状态，可以不填该字段。 用户公钥 开发者将生成的公钥复制粘贴到此处，后续该公钥将作为Wallet Kit服务器认证开发者身份的方式，参考如下公钥生成方式。 公钥生成方式： （1）配置好node执行环境并使用文本编辑器新建文件，拷贝以下代码到文件中并保存命名为“generateKeyPair.js”。 （2）打开命令行工具，执行node generateKeyPair.js命令。 （3）从结果中拷贝生成的公私钥并保存。结果如下图所示：
```typescript
const crypto = require('crypto');
// 生成密钥对
const { publicKey, privateKey } = crypto.generateKeyPairSync('rsa', {
modulusLength: 4096, // 密钥长度，不少于4096
publicKeyEncoding: {
type: 'spki', // 公钥编码格式
format: 'pem' // 公钥输出格式
},
privateKeyEncoding: {
type: 'pkcs8', // 私钥编码格式
format: 'pem' // 私钥输出格式
}
});
console.info('生成的公钥：');
console.info(publicKey);
console.info('生成的私钥：');
console.info(privateKey);
```
5.  NFC参数名称 参数值 是否支持跨移动设备同步 用户领取卡券后可通过此能力在同一账号下的多设备中共享此卡券。商户默认选择“否”即可。 是否开通NFC能力 服务类型为门钥匙、一卡通、门禁卡、交通卡、社会保障卡、港澳通行证、护照时，需要开通NFC能力，同时需要配置应用号和文件参数。其余的服务类型可以选择不开通NFC能力。 应用ID 通过“获取AID”按钮创建新应用ID，内容格式为16进制数（字符为 0-F），最大长度为32（推荐32位），建议以“A000000048575041590100”开头。 外部认证密钥 用于离线读写卡时外部认证校验。内容格式为16进制数（字符为 0-F），最大长度为32（推荐32位）。 文件参数定义 秘钥信息，用于对指定文件区域读写权限的控制。内容格式为16进制数（字符为 0-F），最大长度为32（推荐32位）。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170207.62334320521301059407936412848264:50001231000000:2800:3A436CA75FCF9BAB25A6427B3058726B457606EFB55C5313DC8ACE1E59B45B95.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170207.02812295349035920458498417464405:50001231000000:2800:79DBF9B57317E9F50F31879544666F869B0A3B97F9A9E91600E8D72F3275F6E5.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170207.96525969293324843599637509001548:50001231000000:2800:DEE47CC58547AC655FB626BE1A1EB70ED4A2DE7BFFEB57A47660C8A0E00F1F6F.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170207.98068888436084274319732477566710:50001231000000:2800:69DC06FDFF10371F1873CC8300AA60DB0758DFE3CD6E81A81A845BA2FC3451D4.png)
| Wallet Kit服务参数名称  | 参数值  |
| --- | --- |
| 服务类型  | 分为卡、票、券，开发者选择其中的一种。  |
| 服务项目  | 服务项目依赖所选择的服务类型，不同的服务类型，有不同的服务项目。例如当服务类型选择“卡”时，对应的服务项目有：“会员卡”、“公交卡”、“礼品卡”。  |
| 服务名称  | Wallet Kit首页列表展示该开发者所有创建的服务时，服务名称用于区分不同的服务。  |
| 服务号  | 用于Wallet Kit服务器区分不同的服务且保证唯一性。  |
| 接入方式  | 国内支持三种接入方式，App接入，云端接入，代理接入。商户可以根据自己的需求选择适合自己类型的接入方式。选择云端接入时用户需要填写“回调地址”、“用户公钥”二项资料，选择App接入则只需要上传证书请求文件生成证书即可，选择代理接入时用户需要填写“回调地址”一项资料，而用户公钥则会发送默认值到Wallet Kit服务器。  |
| 回调地址  | 开发者提供给Wallet Kit的地址，用于Wallet Kit回调开发者，用户领卡成功或删卡时回调开发者。 注：如果不需要Wallet Kit通知开发者用户领卡或删卡的状态，可以不填该字段。  |
| 用户公钥  | 开发者将生成的公钥复制粘贴到此处，后续该公钥将作为Wallet Kit服务器认证开发者身份的方式，参考如下公钥生成方式。  |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170207.31831264228427081716980152865162:50001231000000:2800:6CF450780D4E5C186D5E0B8FFD4BFA0F99EE7E702B39F3475EB469D83B069ED3.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170207.40953907790756246014564485600562:50001231000000:2800:78628A91514BA4AF7B33FD4F37F5CCE26F2A4B1D13E3E59A137173CDCFDBBABA.png)
| NFC参数名称  | 参数值  |
| --- | --- |
| 是否支持跨移动设备同步  | 用户领取卡券后可通过此能力在同一账号下的多设备中共享此卡券。商户默认选择“否”即可。  |
| 是否开通NFC能力  | 服务类型为门钥匙、一卡通、门禁卡、交通卡、社会保障卡、港澳通行证、护照时，需要开通NFC能力，同时需要配置应用号和文件参数。其余的服务类型可以选择不开通NFC能力。  |
| 应用ID  | 通过“获取AID”按钮创建新应用ID，内容格式为16进制数（字符为 0-F），最大长度为32（推荐32位），建议以“A000000048575041590100”开头。  |
| 外部认证密钥  | 用于离线读写卡时外部认证校验。内容格式为16进制数（字符为 0-F），最大长度为32（推荐32位）。  |
| 文件参数定义  | 秘钥信息，用于对指定文件区域读写权限的控制。内容格式为16进制数（字符为 0-F），最大长度为32（推荐32位）。  |

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-carkey-V14
爬取时间: 2025-04-29 22:25:40
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-carkey-overview-V14
爬取时间: 2025-04-29 22:25:54
来源: Huawei Developer
华为数字车钥匙依托华为钱包数字车钥匙业务集成方案，基于华为手机“芯-端-云”一体化的安全能力，且满足ICCE标准，可快速实现手机模拟车钥匙的功能。
相较于传统的车钥匙，华为数字车钥匙无需借助车钥匙实体，仅将车钥匙功能集成在移动智能终端设备中，基于SE、TEE等安全功能，使用蓝牙、NFC技术连接手机和车，即可实现车辆的开门、启动等功能。
此方式当前仅支持中国境内（不包含中国香港、中国澳门、中国台湾）。
整体架构
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170207.79487665644422268600354801356230:50001231000000:2800:7EBF9374AC49F9A04512DEC1FDD8811BA59662A678D7FEFB395E60FDD1973A63.png)
按照参与各方的角色说明
| 角色  | 角色描述  |
| --- | --- |
| DK（Digital Key）  | 数字钥匙  |
| 车钥匙Applet  | 华为提供安全通道供车厂将秘钥以及车厂独有的数据写入Applet实例。  |
| BLE  | 低功耗蓝牙  |
| NFC  | 近场通信  |
角色
角色描述
DK（Digital Key）
数字钥匙
车钥匙Applet
华为提供安全通道供车厂将秘钥以及车厂独有的数据写入Applet实例。
BLE
低功耗蓝牙
NFC
近场通信
典型的交互流程
用户持手机在车主APP申请开通车钥匙：
DK业务管理服务将钥匙卡片信息通过钱包云服务器传递给华为钱包，同时写入到手机安全芯片的车钥匙Applet实例。
车辆和移动终端的通信方式：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-carkey-cloud-V14
爬取时间: 2025-04-29 22:26:08
来源: Huawei Developer
Wallet Kit服务云侧接入基本信息配置
在创建Wallet Kit服务的配置参数里填写。
| Wallet Kit服务参数名称  | 参数值  |
| --- | --- |
| 服务类型  | 钥匙  |
| 服务项目  | ICCE车钥匙  |
| 服务名称  | xxx数字车钥匙服务（xxx可为公司名称/产品名称）。该字段仅用于方便开发者区分自己配置的多个服务，没有其他用途。  |
| 服务号  | ICCE车钥匙卡片的发卡机构，用于唯一表明某一发卡机构。hwpass.stdcarkey.xxx.xxx（xxx可为公司/产品名称，总长度不超过32个英文小写字符，请严格按照此规则定义）。钱包可根据此值进行发卡机构的管控；在预置模板、生成钥匙卡片以及开通激活过程的请求体中会携带该值。  |
| 接入方式  | 云端接入  |
| 回调地址  | 用于用户添加/删除卡券时回调通知发卡机构的地址，注意：地址必须使用https。示例：https://商户服务器地址/v1/passes/nfccallback。  |
| 用户公钥  | 按照创建Wallet Kit服务步骤5提供的生成方式，并将生成的公钥内容粘贴在此处。  |
Wallet Kit服务参数名称
参数值
服务类型
钥匙
服务项目
ICCE车钥匙
服务名称
xxx数字车钥匙服务（xxx可为公司名称/产品名称）。该字段仅用于方便开发者区分自己配置的多个服务，没有其他用途。
服务号
ICCE车钥匙卡片的发卡机构，用于唯一表明某一发卡机构。hwpass.stdcarkey.xxx.xxx（xxx可为公司/产品名称，总长度不超过32个英文小写字符，请严格按照此规则定义）。钱包可根据此值进行发卡机构的管控；在预置模板、生成钥匙卡片以及开通激活过程的请求体中会携带该值。
接入方式
云端接入
回调地址
用于用户添加/删除卡券时回调通知发卡机构的地址，注意：地址必须使用https。示例：https://商户服务器地址/v1/passes/nfccallback。
用户公钥
按照创建Wallet Kit服务步骤5提供的生成方式，并将生成的公钥内容粘贴在此处。
| NFC参数名称  | 参数值  |
| --- | --- |
| 是否支持跨设备移动同步  | 是  |
| 是否开通NFC能力  | 是  |
NFC参数名称
参数值
是否支持跨设备移动同步
是
是否开通NFC能力
是
这里的“是否开通NFC能力”，只要支持蓝牙功能，就需要选择是。
配置车钥匙管理台地址至钱包服务器
在车钥匙的开通激活阶段，钱包需要向商户服务器请求数据；这整个的数据链路为：华为钱包APP->钱包云服务器->DK业务管理服务。
钱包云服务器向DK业务管理服务请求需要知道DK业务管理服务的地址，因此需要将DK业务管理服务的地址配置进钱包云服务器。
UI设计
| 车钥匙列表元素  | 设计规范  |
| --- | --- |
| LOGO  | 尺寸64dp×64dp，提供方图  |
| 名称  | 无  |
车钥匙列表元素
设计规范
LOGO
尺寸64dp×64dp，提供方图
名称
无
| 车钥匙详情元素  | 设计规范  |
| --- | --- |
| LOGO  | 尺寸32dp×32dp  |
| 名称  | 无  |
| 卡面图片  | 尺寸328dp×205dp，提供方图  |
车钥匙详情元素
设计规范
LOGO
尺寸32dp×32dp
名称
无
卡面图片
尺寸328dp×205dp，提供方图
所有图片请直接提供直角，请勿切圆角；注意在深色模式下，图片的边框不要有白边。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-carkey-operation-V14
爬取时间: 2025-04-29 22:26:22
来源: Huawei Developer
钥匙开通分为添加钥匙和激活钥匙两步，整体交互流程图如下。相关接口定义请参照钱包服务API。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170208.44425433232730939043429407257432:50001231000000:2800:4C26D3A0B9B864AF346DAC8E056866A6C4662BDA9967515C635016AA9EE6C2C2.png)
开发步骤
1.
```typescript
import { common } from '@kit.AbilityKit';
import { walletPass } from '@kit.WalletKit';
import { BusinessError } from '@kit.BasicServicesKit';
private walletPassClient: walletPass.WalletPassClient = new walletPass.WalletPassClient(getContext(this) as common.UIAbilityContext);
// 创建Wallet Kit服务时注册的服务号
private passType: string = '';
// 申请钥匙卡片时定义的卡券唯一标识
private serialNumber: string = '';
async queryPass() {
let passStr = JSON.stringify({
passType: this.passType,
serialNumber: this.serialNumber
});
this.walletPassClient.queryPass(passStr).then((result: string) => {
console.info(`Succeeded in querying pass, result: ${result}`);
}).catch((err: BusinessError) => {
console.error(`Failed to query pass, code:${err.code}, message:${err.message}`);
})
}
```
2.
```typescript
import { common } from '@kit.AbilityKit';
import { walletPass } from '@kit.WalletKit';
import { BusinessError } from '@kit.BasicServicesKit';
private walletPassClient: walletPass.WalletPassClient = new walletPass.WalletPassClient(getContext(this) as common.UIAbilityContext);
// 创建Wallet Kit服务时注册的服务号
private passType: string = '';
// 目标设备类型 phone: 手机
private targetDeviceType: string = '';
async canAddPass() {
let passStr = JSON.stringify({
passType: this.passType,
targetDeviceType: this.targetDeviceType
});
this.walletPassClient.canAddPass(passStr).then((result: string) => {
console.info(`Succeeded in checking addPass, result:${result}`);
}).catch((err: BusinessError) => {
console.error(`Failed to check addPass, code:${err.code}, message:${err.message}`);
})
}
```
3.
```typescript
import { common } from '@kit.AbilityKit';
import { walletPass } from '@kit.WalletKit';
import { BusinessError } from '@kit.BasicServicesKit';
private walletPassClient: walletPass.WalletPassClient = new walletPass.WalletPassClient(getContext(this) as common.UIAbilityContext);
// 目标设备类型 phone: 手机
private targetDeviceType: string = '';
async initWalletEnvironment() {
let passStr = JSON.stringify({
targetDeviceType: this.targetDeviceType
});
this.walletPassClient.initWalletEnvironment(passStr).then(() => {
console.info(`Succeeded in initiating walletEnvironment`);
}).catch((err: BusinessError) => {
console.error(`Failed to initiate walletEnvironment, code:${err.code}, message:${err.message}`);
})
}
```
4.
```typescript
import { common } from '@kit.AbilityKit';
import { walletPass } from '@kit.WalletKit';
import { BusinessError } from '@kit.BasicServicesKit';
private walletPassClient: walletPass.WalletPassClient = new walletPass.WalletPassClient(getContext(this) as common.UIAbilityContext);
// 创建Wallet Kit服务时注册的服务号
private passType: string = '';
// 目标设备类型 phone: 手机
private targetDeviceType: string = '';
async queryPassDeviceInfo() {
let passStr = JSON.stringify({
passType: this.passType,
targetDeviceType: this.targetDeviceType
});
this.walletPassClient.queryPassDeviceInfo(passStr).then((result: string) => {
console.info(`Succeeded in querying passDeviceInfo, result:${result}`);
}).catch((err: BusinessError) => {
console.error(`Failed to query passDeviceInfo, code:${err.code}, message:${err.message}`);
})
}
```
5.
```typescript
import { common } from '@kit.AbilityKit';
import { walletPass } from '@kit.WalletKit';
import { BusinessError } from '@kit.BasicServicesKit';
private walletPassClient: walletPass.WalletPassClient = new walletPass.WalletPassClient(getContext(this) as common.UIAbilityContext);
// 参考车主服务器开发生成的JWE数据
private jweContent: string = '';
async addPass() {
let passStr = JSON.stringify({
jweContent: this.jweContent
});
this.walletPassClient.addPass(passStr).then((result: string) => {
console.info(`Succeeded in adding pass, result:${result}`);
}).catch((err: BusinessError) => {
console.error(`Failed to add pass, code:${err.code}, message:${err.message}`);
})
}
```
6.
```typescript
import { common } from '@kit.AbilityKit';
import { walletPass } from '@kit.WalletKit';
import { BusinessError } from '@kit.BasicServicesKit';
private walletPassClient: walletPass.WalletPassClient = new walletPass.WalletPassClient(getContext(this) as common.UIAbilityContext);
// 创建Wallet Kit服务时注册的服务号
private passType: string = '';
// 申请钥匙卡片时定义的卡券唯一标识
private serialNumber: string = '';
async viewPass() {
let passStr = JSON.stringify({
passType: this.passType,
serialNumber: this.serialNumber
});
try {
await this.walletPassClient.viewPass(passStr);
console.info(`Succeeded in viewing pass`);
} catch (err) {
console.error(`Failed to view pass, code:${err.code}, message:${err.message}`);
}
}
```
车主服务器开发
1.
2.  需替换的参数 参数说明 gw.appid AppGallery Connect平台申请的Client ID和Client Secret分别填入gw.appid和gw.appid.secret gw.appid.secret walletServerBaseUrl 固定填入服务器基地址：https://wallet-passentrust-drcn.cloud.huawei.com.cn/hmspass servicePrivateKey 创建Wallet Kit服务步骤5生成的私钥
3.
4.
5.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170208.39641750218841215601120780371348:50001231000000:2800:DED14190AA44CD3E63C32A00BF19269AAEB2CE585AD3DB199C8373BFE2CD5754.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170208.75092869286471228997282573785002:50001231000000:2800:858CAE7B49CC67C2652CEAF9FB2409257CF013506ECCFFF145999396AE5F1B3B.png)
| 需替换的参数 | 参数说明 |
| --- | --- |
| gw.appid |   AppGallery Connect平台申请的Client ID和Client Secret分别填入gw.appid和gw.appid.secret |
| gw.appid.secret |
| walletServerBaseUrl | 固定填入服务器基地址：https://wallet-passentrust-drcn.cloud.huawei.com.cn/hmspass |
| servicePrivateKey | 创建Wallet Kit服务步骤5生成的私钥 |
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170208.70164212927537949877834286580313:50001231000000:2800:AFB4DF551A0AE2FC643F5802FE6C1188A52290CC5436AC3DA32E024F12C9D962.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170208.47970227504499527576426017937532:50001231000000:2800:2CEF582D91FE4EBF5D2CD329954EE19C8EEBEDBFB96378EE07C5BFA400A29D99.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170208.77676552120061755479686758177722:50001231000000:2800:6418970D1CECA3804F3DD5833E963DC25470D9FDB78B8947B17D540AC6EB5695.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170208.20516088540742828959700798144490:50001231000000:2800:55B495B5856D2F892181DDC96BAC2632E27BBF9A4F74325743E99EB765CF6427.png)
车主服务器激活卡片
1.
2.
3.
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170208.35992895872748045306592967430602:50001231000000:2800:AB8B5268ED16FB4C5633EA411989D00A7E8DD7E26743690B2B29A73783187554.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170208.19348669174251562424389224218385:50001231000000:2800:06B523F6B808EBB103CFAE29EFEE9B55D219D18E15B1E3BFF402B07768F68F51.png)
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170208.12735379434536684120361696308834:50001231000000:2800:17017402C5E72C9D74EEE32B71D5DEB0756190061E7F797CA09C3B78A5E7DCA0.png)

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-carkey-control-V14
爬取时间: 2025-04-29 22:26:36
来源: Huawei Developer
数字车钥匙开通完成后，车主APP可以通过车控指令远程控制车辆的开门等操作。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170209.06324482999011473640149730022214:50001231000000:2800:5E0AB7D50101A5FB625A8749D04F61F2AD599EED421631063CA3F2739BE80FB7.png)
典型的交互流程如下:
开发步骤
1.
```typescript
import { common } from '@kit.AbilityKit';
import { walletPass } from '@kit.WalletKit';
import { BusinessError } from '@kit.BasicServicesKit';
private walletPassClient: walletPass.WalletPassClient = new walletPass.WalletPassClient(getContext(this) as common.UIAbilityContext);
// 创建Wallet Kit服务时注册的服务号
private passType: string = '';
// 申请钥匙卡片时定义的卡券唯一标识
private serialNumber: string = '';
async queryICCEConnectionState() {
let passStr = JSON.stringify({
passType: this.passType,
serialNumber: this.serialNumber
});
this.walletPassClient.queryICCEConnectionState(passStr).then((result: string) => {
console.info(`Succeeded in querying ICCEConnectionState, result: ${result}`);
}).catch((err: BusinessError) => {
console.error(`Failed to query ICCEConnectionState, code:${err.code}, message:${err.message}`);
})
}
```
2.
```typescript
import { common } from '@kit.AbilityKit';
import { walletPass } from '@kit.WalletKit';
import { BusinessError } from '@kit.BasicServicesKit';
private walletPassClient: walletPass.WalletPassClient = new walletPass.WalletPassClient(getContext(this) as common.UIAbilityContext);
// 创建Wallet Kit服务时注册的服务号
private passType: string = '';
// 申请钥匙卡片时定义的卡券唯一标识
private serialNumber: string = '';
async startICCEConnection() {
let passStr = JSON.stringify({
passType: this.passType,
serialNumber: this.serialNumber
});
this.walletPassClient.startICCEConnection(passStr).then((result: string) => {
console.info(`Succeeded in starting ICCEConnection, result: ${result}`);
}).catch((err: BusinessError) => {
console.error(`Failed to start ICCEConnection, code:${err.code}, message:${err.message}`);
})
}
```
3.
```typescript
import { common } from '@kit.AbilityKit';
import { walletPass } from '@kit.WalletKit';
import { BusinessError } from '@kit.BasicServicesKit';
import { rpc } from '@kit.IPCKit';
private walletPassClient: walletPass.WalletPassClient = new walletPass.WalletPassClient(getContext(this) as common.UIAbilityContext);
private callback: rpc.RemoteObject | null = null;
// 创建Wallet Kit服务时注册的服务号
private passType: string = '';
// 注册监听的应用名称，一般为包名
private registerName: string = '';
async registerICCEListener() {
let passStr = JSON.stringify({
passType: this.passType,
registerName: this.registerName
});
this.callback = new ICCECallBack();
this.walletPassClient.registerICCEListener(passStr, this.callback).then((result: string) => {
console.info(`Succeeded in registering ICCEListener, result: ${result}`);
}).catch((err: BusinessError) => {
console.error(`Failed to register ICCEListener, code:${err.code}, message:${err.message}`);
})
}
class ICCECallBack extends rpc.RemoteObject {
constructor() {
super('ICCECallBack');
}
async onRemoteMessageRequest(code: number, data: rpc.MessageSequence, reply: rpc.MessageSequence, option: rpc.MessageOption): Promise<boolean> {
// 根据code来匹配data数据信息
let codeInt = data.readInt();
return true;
}
}
```
4.
```typescript
import { common } from '@kit.AbilityKit';
import { walletPass } from '@kit.WalletKit';
import { BusinessError } from '@kit.BasicServicesKit';
private walletPassClient: walletPass.WalletPassClient = new walletPass.WalletPassClient(getContext(this) as common.UIAbilityContext);
// 创建Wallet Kit服务时注册的服务号
private passType: string = '';
// 申请钥匙卡片时定义的卡券唯一标识
private serialNumber: string = '';
// 车控指令
private rkeCommand: string = '';
async sendICCERKEMessage() {
let passStr = JSON.stringify({
passType: this.passType,
serialNumber: this.serialNumber,
rkeCommand: this.rkeCommand,
encryptFlag: '0',
directionFlag: '1'
});
this.walletPassClient.sendICCERKEMessage(passStr).then((result: string) => {
console.info(`Succeeded in sending ICCERKEMessage, result: ${result}`);
}).catch((err: BusinessError) => {
console.error(`Failed to send ICCERKEMessage, code:${err.code}, message:${err.message}`);
})
}
```
5.
```typescript
import { common } from '@kit.AbilityKit';
import { walletPass } from '@kit.WalletKit';
import { BusinessError } from '@kit.BasicServicesKit';
private walletPassClient: walletPass.WalletPassClient = new walletPass.WalletPassClient(getContext(this) as common.UIAbilityContext);
private callback: rpc.RemoteObject | null = null;
// 创建Wallet Kit服务时注册的服务号
private passType: string = '';
// 注册监听的应用名称，一般为包名
private registerName: string = '';
async unregisterICCEListener() {
let passStr = JSON.stringify({
passType: this.passType,
registerName: this.registerName
});
this.walletPassClient.unregisterICCEListener(passStr).then((result: string) => {
console.info(`Succeeded in unregistering ICCEListener, result: ${result}`);
this.callback = null;
}).catch((err: BusinessError) => {
console.error(`Failed to unregister ICCEListener, code:${err.code}, message:${err.message}`);
})
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-transport-V14
爬取时间: 2025-04-29 22:26:50
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-transport-overview-V14
爬取时间: 2025-04-29 22:27:03
来源: Huawei Developer
Wallet Kit中的交通卡服务提供了开通新卡、在线充值、卡片更新和删卡的开放能力。由于交通卡的实际发行方是交通卡公司，所以开发者的app想要实现上述功能，需要：
交通卡服务开放能力仅对受邀应用开放使用。
整体架构
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170209.78243608270510132563577422881967:50001231000000:2800:F4EB896822FCE9B47230221C55190716CB0B858CC97FB456D8EF266769CF8B9F.png)
Your App：开发者的客户端app，实现开卡、卡信息展示、充值、更新和删卡等UX体验
Your Server：开发者的业务服务器。负责受理来自开发者的客户端的开卡、充值和卡片管理的业务请求，并将相应的任务下发给交通卡公司的SP TSM系统。还需对接支付机构完成开卡、充值场景的订单支付。
支付机构：完成支付订单的支付。
SP TSM：交通卡公司的TSM系统，负责添卡、充值和卡片管理的指令生成。
Wallet App：负责实现Wallet Kit的api。将来自于SP TSM系统的添卡、充值和卡片管理的指令下发到安全芯片。
Wallet Server：对接SP TSM系统，实现添卡、充值和卡片管理的指令的获取。
| 接口  | 调用方向  | 接口功能说明  |
| --- | --- | --- |
| IF1  | Your App -> Wallet App  | Wallet Kit api，包括卡片状态和信息查询接口、开卡条件检查接口、开卡接口、充值接口、卡片更新接口和删卡接口。  |
| IF2  | Your App -> Your Server  | 向开发者的业务服务器发起开卡、充值、卡片更新和删卡的业务操作请求。  |
| IF3  | Your Server-> 支付机构  | 完成开卡和充值的订单支付。  |
| IF4  | Your Server-> SP TSM  | 向交通卡公司的SP TSM系统提交开卡、充值、卡片更新和删卡的业务请求。  |
| IF5  | Wallet Server-> SP TSM  | 向交通卡公司的SP TSM系统获取开卡、充值、卡片更新和删卡的业务请求以及实现这些业务功能的指令。  |
接口
调用方向
接口功能说明
IF1
Your App ->
Wallet App
Wallet Kit api，包括卡片状态和信息查询接口、开卡条件检查接口、开卡接口、充值接口、卡片更新接口和删卡接口。
IF2
Your App -> Your Server
向开发者的业务服务器发起开卡、充值、卡片更新和删卡的业务操作请求。
IF3
Your Server-> 支付机构
完成开卡和充值的订单支付。
IF4
Your Server-> SP TSM
向交通卡公司的SP TSM系统提交开卡、充值、卡片更新和删卡的业务请求。
IF5
Wallet Server-> SP TSM
向交通卡公司的SP TSM系统获取开卡、充值、卡片更新和删卡的业务请求以及实现这些业务功能的指令。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-transport-cloud-V14
爬取时间: 2025-04-29 22:27:17
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-transport-operation-V14
爬取时间: 2025-04-29 22:27:31
来源: Huawei Developer
交通卡的开通过程分为：获取卡片开通入口、确认卡片是否支持添加、生成并支付订单和完成添卡四个步骤，整体流程如下图，相关接口定义请参照钱包服务API。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170209.74595791647467186065034403125289:50001231000000:2800:E37E621B900281D06C4C3215A0A03EC781D6E8F1075D9C9B5B2201DFB0046C18.png)
开发步骤
1.
```typescript
import { common } from '@kit.AbilityKit';
import { walletTransitCard } from '@kit.WalletKit'
import { BusinessError } from '@kit.BasicServicesKit';
transitCardClient: walletTransitCard.TransitCardClient = new walletTransitCard.TransitCardClient(getContext(this) as common.UIAbilityContext, 'callerId');
async getCardMetadataInDevice() {
this.transitCardClient.getCardMetadataInDevice(walletTransitCard.DeviceType.DEVICE_PHONE).then((result) => {
console.info(`Succeeded in getting cardMetadataInDevice`);
// 展示交通卡列表信息
}).catch((err: BusinessError) => {
console.error(`Failed to get CardMetadataInDevice, code:${err.code}, message:${err.message}`);
})
}
```
2.  选中一张交通卡，调用canAddTransitCard接口，获取开卡addCardOpaqueData。
```typescript
import { common } from '@kit.AbilityKit';
import { walletTransitCard } from '@kit.WalletKit'
import { BusinessError } from '@kit.BasicServicesKit';
transitCardClient: walletTransitCard.TransitCardClient = new walletTransitCard.TransitCardClient(getContext(this) as common.UIAbilityContext, 'callerId');
async canAddTransitCard() {
// issuerId必须是getCardMetadataInDevice返回的数据
const issuerId = 'issuerId';
// specifiedDeviceId是getCardMetadataInDevice返回的数据
const specifiedDeviceId = 'specifiedDeviceId';
this.transitCardClient.canAddTransitCard(issuerId, specifiedDeviceId).then((result) => {
console.info(`Succeeded in canning AddTransitCard`);
// 保存result，作为addTransitCard的入参addCardOpaqueData
}).catch((err: BusinessError) => {
console.error(`Failed to can AddTransitCard, code:${err.code}, message:${err.message}`);
})
}
```
3.
```typescript
import { common } from '@kit.AbilityKit';
import { walletTransitCard } from '@kit.WalletKit'
import { BusinessError } from '@kit.BasicServicesKit';
transitCardClient: walletTransitCard.TransitCardClient = new walletTransitCard.TransitCardClient(getContext(this) as common.UIAbilityContext, 'callerId');
async addTransitCard() {
// 开发者应用中完成支付后生成的订单号，由开发者实现
let serverOrderId = 'serverOrderId';
// 步骤2中获取到的addCardOpaqueData
let addCardOpaqueData = 'addCardOpaqueData';
this.transitCardClient.addTransitCard(addCardOpaqueData, serverOrderId).then((result) => {
console.info(`Succeeded in adding TransitCard`);
}).catch((err: BusinessError) => {
console.error(`Failed to add TransitCard, code:${err.code}, message:${err.message}`);
})
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-transport-recharge-V14
爬取时间: 2025-04-29 22:27:45
来源: Huawei Developer
交通卡的充值过程分为：卡片展示、生成并支付充值订单和发起充值三个步骤，整体流程如下图，相关接口定义请参照钱包服务API。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170209.79716252898902616078553294767275:50001231000000:2800:AC1A8EF906DC981BEFFD3BD9D0F31C15F160B617ECAAD8CFF5FE95A304C66E60.png)
开发步骤
1.
```typescript
import { common } from '@kit.AbilityKit';
import { walletTransitCard } from '@kit.WalletKit'
import { BusinessError } from '@kit.BasicServicesKit';
transitCardClient: walletTransitCard.TransitCardClient = new walletTransitCard.TransitCardClient(getContext(this) as common.UIAbilityContext, 'callerId');
async getCardMetadataInDevice() {
this.transitCardClient.getCardMetadataInDevice(walletTransitCard.DeviceType.DEVICE_PHONE).then((result) => {
console.info(`Succeeded in getting cardMetadataInDevice`);
// 展示交通卡列表信息
}).catch((err: BusinessError) => {
console.error(`Failed to get CardMetadataInDevice, code:${err.code}, message:${err.message}`);
})
}
```
2.
```typescript
import { common } from '@kit.AbilityKit';
import { walletTransitCard } from '@kit.WalletKit'
import { BusinessError } from '@kit.BasicServicesKit';
transitCardClient: walletTransitCard.TransitCardClient = new walletTransitCard.TransitCardClient(getContext(this) as common.UIAbilityContext, 'callerId');
async rechargeTransitCard() {
// 步骤1getCardMetadataInDevice接口中返回的已开通的交通卡的卡号
const logicalCardNumber = 'logicalCardNumber';
// specifiedDeviceId是getCardMetadataInDevice返回的数据
const specifiedDeviceId = 'specifiedDeviceId';
// 开发者应用中完成支付后生成的订单号，由开发者实现
const serverOrderId = 'serverOrderId';
this.transitCardClient.rechargeTransitCard(logicalCardNumber, specifiedDeviceId, serverOrderId).then((result) => {
console.info(`Succeeded in recharging TransitCard`);
}).catch((err: BusinessError) => {
console.error(`Failed to recharge TransitCard, code:${err.code}, message:${err.message}`);
})
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-transport-update-V14
爬取时间: 2025-04-29 22:27:58
来源: Huawei Developer
交通卡的更新可以用在更新卡片有效期等卡内数据的场景，其过程分为：卡片展示、生成更新业务订单和发起更新三个步骤，整体流程如下图，相关接口定义请参照钱包服务API。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170209.28409601481819907573481368446092:50001231000000:2800:888457BB6ED2B7FE4301E611FACC811856FFE98093B9D34570BE658CEC098892.png)
开发步骤
1.
```typescript
import { common } from '@kit.AbilityKit';
import { walletTransitCard } from '@kit.WalletKit'
import { BusinessError } from '@kit.BasicServicesKit';
transitCardClient: walletTransitCard.TransitCardClient = new walletTransitCard.TransitCardClient(getContext(this) as common.UIAbilityContext, 'callerId');
async getCardMetadataInDevice() {
this.transitCardClient.getCardMetadataInDevice(walletTransitCard.DeviceType.DEVICE_PHONE).then((result) => {
console.info(`Succeeded in getting cardMetadataInDevice`);
// 展示交通卡列表信息
}).catch((err: BusinessError) => {
console.error(`Failed to get CardMetadataInDevice, code:${err.code}, message:${err.message}`);
})
}
```
2.
```typescript
import { common } from '@kit.AbilityKit';
import { walletTransitCard } from '@kit.WalletKit'
import { BusinessError } from '@kit.BasicServicesKit';
transitCardClient: walletTransitCard.TransitCardClient = new walletTransitCard.TransitCardClient(getContext(this) as common.UIAbilityContext, 'callerId');
async updateTransitCard() {
// 步骤1getCardMetadataInDevice接口中返回的已开通的交通卡的卡号
const logicalCardNumber = 'logicalCardNumber';
// specifiedDeviceId是getCardMetadataInDevice返回的数据
const specifiedDeviceId = 'specifiedDeviceId';
// 开发者应用中完成支付后生成的订单号，由开发者实现
const serverOrderId = 'serverOrderId';
this.transitCardClient.updateTransitCard(logicalCardNumber, specifiedDeviceId, serverOrderId).then(() => {
console.info(`Succeeded in updating TransitCard`);
}).catch((err: BusinessError) => {
console.error(`Failed to update TransitCard, code:${err.code}, message:${err.message}`);
})
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-transport-delete-V14
爬取时间: 2025-04-29 22:28:12
来源: Huawei Developer
交通卡的删卡过程分为：卡片展示、生成删卡业务订单和发起删卡三个步骤，整体流程如下图，相关接口定义请参照钱包服务API。
![Image](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250314170210.16296802414262069901195711829071:50001231000000:2800:B137225547C8BB217BB4570C47D3ECEB13071EA47968626B168E90D8A611F159.png)
开发步骤
1.
```typescript
import { common } from '@kit.AbilityKit';
import { walletTransitCard } from '@kit.WalletKit'
import { BusinessError } from '@kit.BasicServicesKit';
transitCardClient: walletTransitCard.TransitCardClient = new walletTransitCard.TransitCardClient(getContext(this) as common.UIAbilityContext, 'callerId');
async getCardMetadataInDevice() {
this.transitCardClient.getCardMetadataInDevice(walletTransitCard.DeviceType.DEVICE_PHONE).then((result) => {
console.info(`Succeeded in getting cardMetadataInDevice`);
// 展示交通卡列表信息
}).catch((err: BusinessError) => {
console.error(`Failed to get CardMetadataInDevice, code:${err.code}, message:${err.message}`);
})
}
```
2.
```typescript
import { common } from '@kit.AbilityKit';
import { walletTransitCard } from '@kit.WalletKit'
import { BusinessError } from '@kit.BasicServicesKit';
transitCardClient: walletTransitCard.TransitCardClient = new walletTransitCard.TransitCardClient(getContext(this) as common.UIAbilityContext, 'callerId');
async deleteTransitCard() {
// 步骤1getCardMetadataInDevice接口中返回的已开通的交通卡的卡号
const logicalCardNumber = 'logicalCardNumber';
// specifiedDeviceId是getCardMetadataInDevice返回的数据
const specifiedDeviceId = 'specifiedDeviceId';
// 开发者应用中完成支付后生成的订单号，由开发者实现
const serverOrderId = 'serverOrderId';
this.transitCardClient.deleteTransitCard(logicalCardNumber, specifiedDeviceId, serverOrderId).then(() => {
console.info(`Succeeded in deleting TransitCard`);
}).catch((err: BusinessError) => {
console.error(`Failed to delete TransitCard, code:${err.code}, message:${err.message}`);
})
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-faq-V14
爬取时间: 2025-04-29 22:29:06
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-faq-1-V14
爬取时间: 2025-04-29 22:29:21
来源: Huawei Developer
华为Wallet Kit服务支持的国家/地区范围和Account Kit一致。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-faq-2-V14
爬取时间: 2025-04-29 22:29:34
来源: Huawei Developer
不需要，但用户添加卡券时，需要登录华为账号。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-faq-3-V14
爬取时间: 2025-04-29 22:29:48
来源: Huawei Developer
如果用户没有登录华为账号，Wallet Kit先会拉起华为账号注册登录页面，用户注册或登录华为账号后才能保存卡券到华为钱包。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-faq-4-V14
爬取时间: 2025-04-29 22:30:02
来源: Huawei Developer
目前比较常用的是用户申领后，通过邮件/短信方式保存卡券，JWE的方式链接内容较少，对网络资源依赖较小。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-faq-5-V14
爬取时间: 2025-04-29 22:30:15
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-faq-6-V14
爬取时间: 2025-04-29 22:31:09
来源: Huawei Developer
在手机中下载最新版本华为钱包应用，登录已绑定卡券的账号即可查看已添加的卡券。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-faq-7-V14
爬取时间: 2025-04-29 22:31:23
来源: Huawei Developer
请检查申请钥匙卡片的请求参数的serialNumber和organizationPassId字段是否都是唯一的。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/wallet-faq-8-V14
爬取时间: 2025-04-29 22:31:37
来源: Huawei Developer
用户删卡时华为服务器会将卡券实例Instance和绑定的用户信息删除。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/weather-service-kit-guide-V14
爬取时间: 2025-04-29 22:31:51
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/weather-service-introduction-V14
爬取时间: 2025-04-29 22:32:06
来源: Huawei Developer
Weather Service Kit（天气服务）是鸿蒙生态下的一个数据提供服务，Weather Service Kit融合了多家气象行业TOPs供应商，提供专业、精准、稳定的超本地化天气预报服务，帮助开发者为用户提供更贴心的本地生活服务，支撑行业客户防灾减灾、降本增效。开发者可以轻松地在HarmonyOS应用/元服务中获取天气数据。
场景介绍
Weather Service Kit可以返回以下天气数据，满足开发者的天气数据使用需求：

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/weather-service-preparations-V14
爬取时间: 2025-04-29 22:32:20
来源: Huawei Developer
在阅读本章节前，请先参考“应用开发准备”完成基本准备工作及指纹配置，再继续进行以下开发活动。
开通天气服务
开通服务前，请先联系我们。
配置Profile文件
接口调用过程中，天气服务会对您的Profile文件进行鉴权，所以在使用前，您需要按照发布HarmonyOS应用的流程，申请并配置正式签名信息。
（可选）申请位置权限
获取用户当前位置的天气数据，需要调用Location Kit（位置服务）获取当前位置经纬度信息，使用前参考申请位置权限。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/weather-service-getweather-V14
爬取时间: 2025-04-29 22:32:34
来源: Huawei Developer
通过开发者提供的经纬度数据，获取天气数据，比如：实况数据、预警数据。
（可选）获取当前位置经纬度
当开发者需要查询当前位置的天气数据时，需要先获取当前位置的经纬度信息，方法如下：
1.
```typescript
import { geoLocationManager } from '@kit.LocationKit';
import { BusinessError } from '@kit.BasicServicesKit';
```
2.
```typescript
geoLocationManager.getCurrentLocation().then((result) => {
console.info('current location latitude: ' + result.latitude);
console.info('current location longitude: ' + result.longitude);
}).catch((err: BusinessError ) => {
console.error(`getCurrentLocation failed. Code: ${err.code}, message: ${err.message}`);
});
```
查询天气数据
Weather Service Kit依赖开发者提供的经纬度数据（精确到小数点后2位），返回格点天气数据。
1.
```typescript
import { weatherService } from '@kit.WeatherServiceKit';
```
2.  如果limitedDatasets参数不传值，或者传入的数组为空，则默认返回Weather Service Kit支持的所有数据。根据实际需要的天气数据设置limitedDatasets，可以大幅降低接口请求时延。
```typescript
let request: weatherService.WeatherRequest = {
location: {
latitude: 22.62,
longitude: 114.07
},
limitedDatasets: [weatherService.Dataset.CURRENT, weatherService.Dataset.ALERTS]
}
```
3.  getWeather接口的使用依赖当前Ability的Context，如果开发者在无法通过getContext()接口获取到Context的环境中请求天气数据，例如使用worker或者taskpool的子线程场景，请使用weatherService.getWeatherWithContext(context, request)方法并提供Ability的Context信息
```typescript
let weather = await weatherService.getWeather(request);
if (weather.current) {
console.info('getWeather current temperature: ' + weather.current.temperature);
}
if (weather.alerts?.length) {
console.info('getWeather alert: ' + weather.alerts[0].title);
}
```

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/weather-service-faq-V14
爬取时间: 2025-04-29 22:32:47
来源: Huawei Developer

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/weather-service-faq-1-V14
爬取时间: 2025-04-29 22:33:01
来源: Huawei Developer
先调用getAddressesFromLocationName方法获取指定城市的经纬度信息，然后根据返回的经纬度数据调用getWeather方法获取天气数据。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/weather-service-faq-2-V14
爬取时间: 2025-04-29 22:33:15
来源: Huawei Developer
没有，获取当前位置的经纬度可参考获取当前位置经纬度。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/weather-service-faq-3-V14
爬取时间: 2025-04-29 22:33:28
来源: Huawei Developer
如果查询区域当时无短时降水、无天气预警发布或预警已经解除、无潮汐站点时，没有数据返回属于正常现象。

URL: https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V14/weather-service-personal-data-V14
爬取时间: 2025-04-29 22:33:43
来源: Huawei Developer
Weather Service Kit基于调用方提供的大致位置信息（小数点后两位）查询对应位置的天气预报数据，Weather Service Kit不主动采集用户的位置信息。
华为处理的个人数据清单
| 个人数据清单  | 使用目的  | 存留期  |
| --- | --- | --- |
| 经纬度（小数点后两位）  | 根据经纬度查询天气数据。  | 不存储。  |
个人数据清单
使用目的
存留期
经纬度（小数点后两位）
根据经纬度查询天气数据。
不存储。
指导开发者如何帮助最终用户实现对数据的控制
经纬度经过假名化处理，不与用户ID、设备ID等可识别用户身份的信息关联，云侧服务器不存储。

